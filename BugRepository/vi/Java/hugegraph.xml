<?xml version="1.0" encoding="ISO-8859-1"?>

<bugrepository name="hugegraph">
	<bug id="792" opendate="2019-12-18 06:11:53" fixdate="2020-02-13 05:46:41">
		<buginformation>
			<summary>hugegraph-load重复导入顶点，如何移除旧数据中不要的顶点属性</summary>
			<description>使用hugegraph-load导入了顶点数据，此时顶点中有has_Category这个属性， 现在在JSON数据集中移除掉has_Category这个属性后，又用hugegraph-load导了一遍，此时查询顶点没有看到has_Category这个属性，但过了一晚后这个属性又可以在顶点上查询到，请问这是什么原因？有什么方法可以删除大量顶点的某个属性？  ### Expected behavior 期望表现 hugegraph-loader重复导入顶点，属性以最新的数据集为准。 使用过https://hugegraph.github.io/hugegraph-doc/quickstart/hugegraph-loader.html中的update_strategies=overwrite，由于是旧数据有该属性，新数据没有该属性，貌似没有被真正覆盖。   ### Actual behavior 实际表现 第二次导入，当时查询顶点没有看到被移除的属性，过一段时间这个属性又出现了。 ![image](https://user-images.githubusercontent.com/58197479/71060302-0f18f800-21a0-11ea-9f97-8a51a86fcbb5.png) </description>
		</buginformation>
		<fixedfiles>
			<file>hugegraph-test/src/main/java/com/baidu/hugegraph/core/VertexCoreTest.java</file>
			<file>hugegraph-test/src/main/java/com/baidu/hugegraph/unit/serializer/BinaryScatterSerializerTest.java</file>
			<file>hugegraph-hbase/src/main/java/com/baidu/hugegraph/backend/store/hbase/HbaseFeatures.java</file>
			<file>hugegraph-core/src/main/java/com/baidu/hugegraph/backend/store/memory/InMemoryDBStore.java</file>
			<file>hugegraph-core/src/main/java/com/baidu/hugegraph/backend/store/memory/InMemoryDBStoreProvider.java</file>
			<file>hugegraph-rocksdb/src/main/java/com/baidu/hugegraph/backend/store/rocksdb/RocksDBFeatures.java</file>
			<file>hugegraph-rocksdb/src/main/java/com/baidu/hugegraph/backend/store/rocksdb/RocksDBTables.java</file>
			<file>hugegraph-test/src/main/java/com/baidu/hugegraph/core/EdgeCoreTest.java</file>
			<file>hugegraph-cassandra/src/main/java/com/baidu/hugegraph/backend/store/cassandra/CassandraTables.java</file>
			<file>hugegraph-core/src/main/java/com/baidu/hugegraph/backend/serializer/SerializerFactory.java</file>
			<file>hugegraph-hbase/src/main/java/com/baidu/hugegraph/backend/store/hbase/HbaseStoreProvider.java</file>
			<file>hugegraph-test/src/main/java/com/baidu/hugegraph/unit/UnitTestSuite.java</file>
			<file>hugegraph-cassandra/src/main/java/com/baidu/hugegraph/backend/store/cassandra/CassandraFeatures.java</file>
			<file>hugegraph-test/src/main/java/com/baidu/hugegraph/unit/serializer/SerializerFactoryTest.java</file>
			<file>hugegraph-rocksdb/src/main/java/com/baidu/hugegraph/backend/store/rocksdb/RocksDBStoreProvider.java</file>
			<file>hugegraph-core/src/main/java/com/baidu/hugegraph/backend/serializer/TextSerializer.java</file>
			<file>hugegraph-core/src/main/java/com/baidu/hugegraph/backend/serializer/BinarySerializer.java</file>
			<file>hugegraph-rocksdb/src/main/java/com/baidu/hugegraph/backend/store/rocksdb/RocksDBTable.java</file>
		</fixedfiles>
	</bug>
	<bug id="758" opendate="2019-11-25 09:00:05" fixdate="2019-12-06 16:49:16">
		<buginformation>
			<summary>初始化mysql数据库连接失败</summary>
			<description>### Expected behavior 期望表现 {希望成功连接数据库}  ### Actual behavior 实际表现 {后端存储选择mysql，进行初始化时提示连接数据库失败}   ### Steps to reproduce the problem 报错截图  (https://user-images.githubusercontent.com/27463147/69526368-feac9d80-0fa4-11ea-8366-ea3ba34eecb7.jpg)    ### Status of loaded data 数据状态  #### Vertex/Edge summary 数据量 - loaded vertices amount: {like 10 million} - loaded edges amount: {like 20 million} - loaded time: {like 200s}  #### Vertex/Edge example 数据示例 {type something here...}  #### Schema(VertexLabel, EdgeLabel, IndexLabel) 元数据结构 {type something here...}   ### Specifications of environment 环境信息 - hugegraph version: {v0.10.4} - operating system: {lUbuntu16.04 } - hugegraph backend: {like mysql 5.7} </description>
		</buginformation>
		<fixedfiles>
			<file>hugegraph-hbase/src/main/java/com/baidu/hugegraph/backend/store/hbase/HbaseOptions.java</file>
			<file>hugegraph-core/src/main/java/com/baidu/hugegraph/backend/store/memory/InMemoryDBStore.java</file>
			<file>hugegraph-core/src/main/java/com/baidu/hugegraph/traversal/optimize/TraversalUtil.java</file>
			<file>hugegraph-core/src/main/java/com/baidu/hugegraph/backend/store/AbstractBackendStoreProvider.java</file>
			<file>hugegraph-hbase/src/main/java/com/baidu/hugegraph/backend/store/hbase/HbaseSessions.java</file>
			<file>hugegraph-api/src/main/java/com/baidu/hugegraph/api/API.java</file>
			<file>hugegraph-mysql/src/main/java/com/baidu/hugegraph/backend/store/mysql/MysqlSessions.java</file>
			<file>hugegraph-api/src/main/java/com/baidu/hugegraph/api/graph/VertexAPI.java</file>
			<file>hugegraph-core/src/main/java/com/baidu/hugegraph/traversal/optimize/HugeVertexStep.java</file>
			<file>hugegraph-hbase/src/main/java/com/baidu/hugegraph/backend/store/hbase/HbaseStore.java</file>
			<file>hugegraph-mysql/src/main/java/com/baidu/hugegraph/backend/store/mysql/MysqlStoreProvider.java</file>
			<file>hugegraph-core/src/main/java/com/baidu/hugegraph/backend/store/BackendSessionPool.java</file>
			<file>hugegraph-mysql/src/main/java/com/baidu/hugegraph/backend/store/mysql/MysqlStore.java</file>
			<file>hugegraph-core/src/main/java/com/baidu/hugegraph/backend/store/BackendSession.java</file>
			<file>hugegraph-core/src/main/java/com/baidu/hugegraph/security/HugeSecurityManager.java</file>
			<file>hugegraph-test/src/main/java/com/baidu/hugegraph/api/GremlinApiTest.java</file>
			<file>hugegraph-rocksdb/src/main/java/com/baidu/hugegraph/backend/store/rocksdbsst/RocksDBSstSessions.java</file>
			<file>hugegraph-core/src/main/java/com/baidu/hugegraph/backend/cache/CachedBackendStore.java</file>
			<file>hugegraph-test/src/main/java/com/baidu/hugegraph/unit/core/SecurityManagerTest.java</file>
			<file>hugegraph-core/src/main/java/com/baidu/hugegraph/backend/store/BackendStore.java</file>
			<file>hugegraph-core/src/main/java/com/baidu/hugegraph/backend/tx/AbstractTransaction.java</file>
			<file>hugegraph-api/src/main/java/com/baidu/hugegraph/api/graph/EdgeAPI.java</file>
			<file>hugegraph-core/src/main/java/com/baidu/hugegraph/traversal/optimize/HugeGraphStep.java</file>
			<file>hugegraph-core/src/main/java/com/baidu/hugegraph/backend/query/QueryResults.java</file>
			<file>hugegraph-cassandra/src/main/java/com/baidu/hugegraph/backend/store/cassandra/CassandraSessionPool.java</file>
			<file>hugegraph-rocksdb/src/main/java/com/baidu/hugegraph/backend/store/rocksdb/RocksDBStore.java</file>
			<file>hugegraph-rocksdb/src/main/java/com/baidu/hugegraph/backend/store/rocksdb/RocksDBStdSessions.java</file>
			<file>hugegraph-cassandra/src/main/java/com/baidu/hugegraph/backend/store/cassandra/CassandraStore.java</file>
		</fixedfiles>
	</bug>
	<bug id="377" opendate="2019-02-28 06:22:51" fixdate="2019-02-28 13:56:09">
		<buginformation>
			<summary>hugegraph 无法启动</summary>
			<description>之前正常运行，在一次删除schema的时候报了事务过小的错误，于是修改了 properties配置文件     vertex.tx_capacity=1      改成了      vertex.tx_capacity=100     edge.tx_capacity=100 然后 stop hugegraph-server，再次start失败了。 麻烦看下是什么原因导致的，谢谢！！  版本是0.8.0。 以下是启动日志：  2019-02-28 11:32:09 3965  [main] [INFO ] com.baidu.hugegraph.dist.HugeGremlinServer [] -          \,,,/          (o o) -----oOOo-(3)-oOOo-----  2019-02-28 11:32:10 4734  [main] [INFO ] com.baidu.hugegraph.dist.HugeGremlinServer [] - Configuring Gremlin Server from conf/gremlin-server.yaml 2019-02-28 11:32:10 5261  [main] [INFO ] com.baidu.hugegraph.HugeGraph [] - Opening backend store 'cassandra' for graph 'fanqizha' 2019-02-28 11:32:10 5309  [main] [INFO ] org.apache.tinkerpop.gremlin.server.GremlinServer [] - Graph [hugegraph] was successfully configured via [conf/hugegraph.properties]. 2019-02-28 11:32:10 5309  [main] [INFO ] org.apache.tinkerpop.gremlin.server.GremlinServer [] - Graph [hugegraph] was successfully configured via [conf/hugegraph.properties]. 2019-02-28 11:32:10 5309  [main] [INFO ] org.apache.tinkerpop.gremlin.server.util.ServerGremlinExecutor [] - Initialized Gremlin thread pool.  Threads in pool named with pattern gremlin-* 2019-02-28 11:32:10 5309  [main] [INFO ] org.apache.tinkerpop.gremlin.server.util.ServerGremlinExecutor [] - Initialized Gremlin thread pool.  Threads in pool named with pattern gremlin-* 2019-02-28 11:32:11 6495  [main] [INFO ] org.apache.tinkerpop.gremlin.groovy.engine.ScriptEngines [] - Loaded gremlin-groovy ScriptEngine 2019-02-28 11:32:11 6495  [main] [INFO ] org.apache.tinkerpop.gremlin.groovy.engine.ScriptEngines [] - Loaded gremlin-groovy ScriptEngine 2019-02-28 11:32:12 7527  [main] [INFO ] org.apache.tinkerpop.gremlin.groovy.engine.GremlinExecutor [] - Initialized gremlin-groovy ScriptEngine with scripts/empty-sample.groovy 2019-02-28 11:32:12 7527  [main] [INFO ] org.apache.tinkerpop.gremlin.groovy.engine.GremlinExecutor [] - Initialized gremlin-groovy ScriptEngine with scripts/empty-sample.groovy 2019-02-28 11:32:12 7528  [main] [INFO ] org.apache.tinkerpop.gremlin.server.util.ServerGremlinExecutor [] - Initialized GremlinExecutor and preparing GremlinScriptEngines instances. 2019-02-28 11:32:12 7528  [main] [INFO ] org.apache.tinkerpop.gremlin.server.util.ServerGremlinExecutor [] - Initialized GremlinExecutor and preparing GremlinScriptEngines instances. 2019-02-28 11:32:12 7585  [main] [INFO ] org.apache.tinkerpop.gremlin.server.util.ServerGremlinExecutor [] - Initialized gremlin-groovy GremlinScriptEngine and registered metrics 2019-02-28 11:32:12 7585  [main] [INFO ] org.apache.tinkerpop.gremlin.server.util.ServerGremlinExecutor [] - Initialized gremlin-groovy GremlinScriptEngine and registered metrics 2019-02-28 11:32:12 7687  [main] [INFO ] org.apache.tinkerpop.gremlin.server.util.MetricManager [] - Configured Metrics CsvReporter configured with report interval=180000ms to fileName=/tmp/gremlin-server-metrics.csv 2019-02-28 11:32:12 7687  [main] [INFO ] org.apache.tinkerpop.gremlin.server.util.MetricManager [] - Configured Metrics CsvReporter configured with report interval=180000ms to fileName=/tmp/gremlin-server-metrics.csv 2019-02-28 11:32:13 7728  [main] [INFO ] org.apache.tinkerpop.gremlin.server.GremlinServer [] - Executing start up LifeCycleHook 2019-02-28 11:32:13 7728  [main] [INFO ] org.apache.tinkerpop.gremlin.server.GremlinServer [] - Executing start up LifeCycleHook 2019-02-28 11:32:13 7743  [main] [INFO ] org.apache.tinkerpop.gremlin.server.GremlinServer [] - Executed once at startup of Gremlin Server. 2019-02-28 11:32:13 7743  [main] [INFO ] org.apache.tinkerpop.gremlin.server.GremlinServer [] - Executed once at startup of Gremlin Server. 2019-02-28 11:32:13 7855  [main] [INFO ] org.apache.tinkerpop.gremlin.server.AbstractChannelizer [] - Configured application/vnd.gremlin-v1.0+gryo-lite with org.apache.tinkerpop.gremlin.driver.ser.GryoLiteMessageSerializerV1d0 2019-02-28 11:32:13 7855  [main] [INFO ] org.apache.tinkerpop.gremlin.server.AbstractChannelizer [] - Configured application/vnd.gremlin-v1.0+gryo-lite with org.apache.tinkerpop.gremlin.driver.ser.GryoLiteMessageSerializerV1d0 2019-02-28 11:32:13 7855  [main] [INFO ] org.apache.tinkerpop.gremlin.server.AbstractChannelizer [] - Configured application/vnd.gremlin-v1.0+gryo-stringd with org.apache.tinkerpop.gremlin.driver.ser.GryoMessageSerializerV1d0 2019-02-28 11:32:13 7855  [main] [INFO ] org.apache.tinkerpop.gremlin.server.AbstractChannelizer [] - Configured application/vnd.gremlin-v1.0+gryo-stringd with org.apache.tinkerpop.gremlin.driver.ser.GryoMessageSerializerV1d0 2019-02-28 11:32:13 8223  [main] [INFO ] org.apache.tinkerpop.gremlin.server.AbstractChannelizer [] - Configured application/vnd.gremlin-v1.0+json with org.apache.tinkerpop.gremlin.driver.ser.GraphSONMessageSerializerGremlinV1d0 2019-02-28 11:32:13 8223  [main] [INFO ] org.apache.tinkerpop.gremlin.server.AbstractChannelizer [] - Configured application/vnd.gremlin-v1.0+json with org.apache.tinkerpop.gremlin.driver.ser.GraphSONMessageSerializerGremlinV1d0 2019-02-28 11:32:13 8272  [main] [INFO ] org.apache.tinkerpop.gremlin.server.AbstractChannelizer [] - Configured application/vnd.gremlin-v2.0+json with org.apache.tinkerpop.gremlin.driver.ser.GraphSONMessageSerializerGremlinV2d0 2019-02-28 11:32:13 8272  [main] [INFO ] org.apache.tinkerpop.gremlin.server.AbstractChannelizer [] - Configured application/vnd.gremlin-v2.0+json with org.apache.tinkerpop.gremlin.driver.ser.GraphSONMessageSerializerGremlinV2d0 2019-02-28 11:32:13 8274  [main] [INFO ] org.apache.tinkerpop.gremlin.server.AbstractChannelizer [] - Configured application/json with org.apache.tinkerpop.gremlin.driver.ser.GraphSONMessageSerializerV1d0 2019-02-28 11:32:13 8274  [main] [INFO ] org.apache.tinkerpop.gremlin.server.AbstractChannelizer [] - Configured application/json with org.apache.tinkerpop.gremlin.driver.ser.GraphSONMessageSerializerV1d0 2019-02-28 11:32:13 8467  [gremlin-server-boss-1] [INFO ] org.apache.tinkerpop.gremlin.server.GremlinServer [] - Gremlin Server configured with worker thread pool of 1, gremlin pool of 8 and boss thread pool of 1. 2019-02-28 11:32:13 8467  [gremlin-server-boss-1] [INFO ] org.apache.tinkerpop.gremlin.server.GremlinServer [] - Gremlin Server configured with worker thread pool of 1, gremlin pool of 8 and boss thread pool of 1. 2019-02-28 11:32:13 8467  [gremlin-server-boss-1] [INFO ] org.apache.tinkerpop.gremlin.server.GremlinServer [] - Channel started at port 8182. 2019-02-28 11:32:13 8467  [gremlin-server-boss-1] [INFO ] org.apache.tinkerpop.gremlin.server.GremlinServer [] - Channel started at port 8182. 2019-02-28 11:32:15 9898  [main] [INFO ] com.baidu.hugegraph.server.RestServer [] - RestServer starting... Feb 28, 2019 11:32:40 AM org.glassfish.grizzly.http.server.NetworkListener start INFO: Started listener bound to [10.9.21.155:8081] 2019-02-28 11:32:40 35274 [main] [INFO ] com.baidu.hugegraph.server.RestServer [] - Graph 'hugegraph' was successfully configured via 'conf/hugegraph.properties' 2019-02-28 11:32:42 37140 [main] [ERROR] com.baidu.hugegraph.dist.HugeGraphServer [] - HugeRestServer start error: com.baidu.hugegraph.HugeException: Failed to update/query TaskStore         at com.baidu.hugegraph.task.TaskScheduler.call(TaskScheduler.java:402) ~[hugegraph-core-0.8.0.jar:0.8.0.0]         at com.baidu.hugegraph.task.TaskScheduler.queryTask(TaskScheduler.java:362) ~[hugegraph-core-0.8.0.jar:0.8.0.0]         at com.baidu.hugegraph.task.TaskScheduler.queryTask(TaskScheduler.java:357) ~[hugegraph-core-0.8.0.jar:0.8.0.0]         at com.baidu.hugegraph.task.TaskScheduler.findTask(TaskScheduler.java:275) ~[hugegraph-core-0.8.0.jar:0.8.0.0]         at com.baidu.hugegraph.task.TaskScheduler.restoreTasks(TaskScheduler.java:153) ~[hugegraph-core-0.8.0.jar:0.8.0.0]         at com.baidu.hugegraph.core.GraphManager.restoreUncompletedTasks(GraphManager.java:213) ~[hugegraph-api-0.8.0.jar:0.31.0.0]         at com.baidu.hugegraph.core.GraphManager.&lt;init&gt;(GraphManager.java:77) ~[hugegraph-api-0.8.0.jar:0.31.0.0]         at com.baidu.hugegraph.server.ApplicationConfig$GraphManagerFactory$1.onEvent(ApplicationConfig.java:102) ~[hugegraph-api-0.8.0.jar:0.31.0.0]         at org.glassfish.jersey.server.internal.monitoring.CompositeApplicationEventListener.onEvent(CompositeApplicationEventListener.java:74) ~[jersey-server-2.25.1.jar:?]         at org.glassfish.jersey.server.internal.monitoring.MonitoringContainerListener.onStartup(MonitoringContainerListener.java:81) ~[jersey-server-2.25.1.jar:?]         at org.glassfish.jersey.server.ApplicationHandler.onStartup(ApplicationHandler.java:1180) ~[jersey-server-2.25.1.jar:?]         at org.glassfish.jersey.grizzly2.httpserver.GrizzlyHttpContainer.start(GrizzlyHttpContainer.java:357) ~[jersey-container-grizzly2-http-2.25.1.jar:?]         at org.glassfish.grizzly.http.server.HttpHandlerChain.start(HttpHandlerChain.java:422) ~[grizzly-http-server-2.3.28.jar:2.3.28]         at org.glassfish.grizzly.http.server.HttpServer.setupHttpHandler(HttpServer.java:314) ~[grizzly-http-server-2.3.28.jar:2.3.28]         at org.glassfish.grizzly.http.server.HttpServer.start(HttpServer.java:290) ~[grizzly-http-server-2.3.28.jar:2.3.28]         at org.glassfish.jersey.grizzly2.httpserver.GrizzlyHttpServerFactory.createHttpServer(GrizzlyHttpServerFactory.java:296) ~[jersey-container-grizzly2-http-2.25.1.jar:?]         at org.glassfish.jersey.grizzly2.httpserver.GrizzlyHttpServerFactory.createHttpServer(GrizzlyHttpServerFactory.java:119) ~[jersey-container-grizzly2-http-2.25.1.jar:?]         at com.baidu.hugegraph.server.RestServer.start(RestServer.java:59) ~[hugegraph-api-0.8.0.jar:0.31.0.0]         at com.baidu.hugegraph.server.RestServer.start(RestServer.java:76) ~[hugegraph-api-0.8.0.jar:0.31.0.0]         at com.baidu.hugegraph.dist.HugeRestServer.start(HugeRestServer.java:58) ~[hugegraph-dist-0.8.0.jar:?]         at com.baidu.hugegraph.dist.HugeGraphServer.main(HugeGraphServer.java:60) [hugegraph-dist-0.8.0.jar:?] Caused by: java.util.concurrent.ExecutionException: java.lang.IllegalArgumentException: Undefined property key: '~task_status'         at java.util.concurrent.FutureTask.report(FutureTask.java:122) ~[?:1.8.0_181]         at java.util.concurrent.FutureTask.get(FutureTask.java:192) ~[?:1.8.0_181]         at com.baidu.hugegraph.task.TaskScheduler.call(TaskScheduler.java:400) ~[hugegraph-core-0.8.0.jar:0.8.0.0]         ... 20 more Caused by: java.lang.IllegalArgumentException: Undefined property key: '~task_status'         at com.google.common.base.Preconditions.checkArgument(Preconditions.java:146) ~[guava-19.0.jar:?]         at com.baidu.hugegraph.util.E.checkArgument(E.java:56) ~[hugegraph-common-1.5.3.jar:1.5.3.0]         at com.baidu.hugegraph.HugeGraph.propertyKey(HugeGraph.java:406) ~[hugegraph-core-0.8.0.jar:0.8.0.0]         at com.baidu.hugegraph.task.TaskScheduler.lambda$queryTask$6(TaskScheduler.java:367) ~[hugegraph-core-0.8.0.jar:0.8.0.0]         at java.util.concurrent.FutureTask.run(FutureTask.java:266) ~[?:1.8.0_181]         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) ~[?:1.8.0_181]         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) ~[?:1.8.0_181]         at java.lang.Thread.run(Thread.java:748) ~[?:1.8.0_181] 2019-02-28 11:32:42 37154 [main] [INFO ] org.apache.tinkerpop.gremlin.server.op.OpLoader [] - Adding the standard OpProcessor. 2019-02-28 11:32:42 37154 [main] [INFO ] org.apache.tinkerpop.gremlin.server.op.OpLoader [] - Adding the standard OpProcessor. 2019-02-28 11:32:42 37155 [main] [INFO ] org.apache.tinkerpop.gremlin.server.op.OpLoader [] - Adding the control OpProcessor. 2019-02-28 11:32:42 37155 [main] [INFO ] org.apache.tinkerpop.gremlin.server.op.OpLoader [] - Adding the control OpProcessor. 2019-02-28 11:32:42 37158 [main] [INFO ] org.apache.tinkerpop.gremlin.server.op.OpLoader [] - Adding the session OpProcessor. 2019-02-28 11:32:42 37158 [main] [INFO ] org.apache.tinkerpop.gremlin.server.op.OpLoader [] - Adding the session OpProcessor. 2019-02-28 11:32:42 37163 [main] [INFO ] org.apache.tinkerpop.gremlin.server.op.OpLoader [] - Adding the traversal OpProcessor. 2019-02-28 11:32:42 37163 [main] [INFO ] org.apache.tinkerpop.gremlin.server.op.OpLoader [] - Adding the traversal OpProcessor. 2019-02-28 11:32:42 37164 [main] [INFO ] org.apache.tinkerpop.gremlin.server.GremlinServer [] - Shutting down OpProcessor[] 2019-02-28 11:32:42 37164 [main] [INFO ] org.apache.tinkerpop.gremlin.server.GremlinServer [] - Shutting down OpProcessor[] 2019-02-28 11:32:42 37165 [main] [INFO ] org.apache.tinkerpop.gremlin.server.GremlinServer [] - Shutting down OpProcessor[session] 2019-02-28 11:32:42 37165 [main] [INFO ] org.apache.tinkerpop.gremlin.server.GremlinServer [] - Shutting down OpProcessor[session] 2019-02-28 11:32:42 37167 [main] [INFO ] org.apache.tinkerpop.gremlin.server.GremlinServer [] - Shutting down OpProcessor[control] 2019-02-28 11:32:42 37167 [main] [INFO ] org.apache.tinkerpop.gremlin.server.GremlinServer [] - Shutting down OpProcessor[control] 2019-02-28 11:32:42 37167 [main] [INFO ] org.apache.tinkerpop.gremlin.server.GremlinServer [] - Shutting down OpProcessor[traversal] 2019-02-28 11:32:42 37167 [main] [INFO ] org.apache.tinkerpop.gremlin.server.GremlinServer [] - Shutting down OpProcessor[traversal] 2019-02-28 11:32:42 37169 [main] [INFO ] org.apache.tinkerpop.gremlin.server.GremlinServer [] - Shutting down thread pools. 2019-02-28 11:32:42 37169 [main] [INFO ] org.apache.tinkerpop.gremlin.server.GremlinServer [] - Shutting down thread pools. 2019-02-28 11:32:42 37171 [gremlin-server-stop] [INFO ] org.apache.tinkerpop.gremlin.server.GremlinServer [] - Executing shutdown LifeCycleHook 2019-02-28 11:32:42 37171 [gremlin-server-stop] [INFO ] org.apache.tinkerpop.gremlin.server.GremlinServer [] - Executing shutdown LifeCycleHook Exception in thread "main" 2019-02-28 11:32:42 37171 [gremlin-server-stop] [INFO ] org.apache.tinkerpop.gremlin.server.GremlinServer [] - Executed once at shutdown of Gremlin Server. com.baidu.hugegraph.HugeException: Failed to update/query TaskStore 2019-02-28 11:32:42 37171 [gremlin-server-stop] [INFO ] org.apache.tinkerpop.gremlin.server.GremlinServer [] - Executed once at shutdown of Gremlin Server.         at com.baidu.hugegraph.task.TaskScheduler.call(TaskScheduler.java:402)         at com.baidu.hugegraph.task.TaskScheduler.queryTask(TaskScheduler.java:362)         at com.baidu.hugegraph.task.TaskScheduler.queryTask(TaskScheduler.java:357)         at com.baidu.hugegraph.task.TaskScheduler.findTask(TaskScheduler.java:275)         at com.baidu.hugegraph.task.TaskScheduler.restoreTasks(TaskScheduler.java:153)         at com.baidu.hugegraph.core.GraphManager.restoreUncompletedTasks(GraphManager.java:213)         at com.baidu.hugegraph.core.GraphManager.&lt;init&gt;(GraphManager.java:77)         at com.baidu.hugegraph.server.ApplicationConfig$GraphManagerFactory$1.onEvent(ApplicationConfig.java:102)         at org.glassfish.jersey.server.internal.monitoring.CompositeApplicationEventListener.onEvent(CompositeApplicationEventListener.java:74)         at org.glassfish.jersey.server.internal.monitoring.MonitoringContainerListener.onStartup(MonitoringContainerListener.java:81)         at org.glassfish.jersey.server.ApplicationHandler.onStartup(ApplicationHandler.java:1180)         at org.glassfish.jersey.grizzly2.httpserver.GrizzlyHttpContainer.start(GrizzlyHttpContainer.java:357)         at org.glassfish.grizzly.http.server.HttpHandlerChain.start(HttpHandlerChain.java:422)         at org.glassfish.grizzly.http.server.HttpServer.setupHttpHandler(HttpServer.java:314)         at org.glassfish.grizzly.http.server.HttpServer.start(HttpServer.java:290)         at org.glassfish.jersey.grizzly2.httpserver.GrizzlyHttpServerFactory.createHttpServer(GrizzlyHttpServerFactory.java:296)         at org.glassfish.jersey.grizzly2.httpserver.GrizzlyHttpServerFactory.createHttpServer(GrizzlyHttpServerFactory.java:119)         at com.baidu.hugegraph.server.RestServer.start(RestServer.java:59)         at com.baidu.hugegraph.server.RestServer.start(RestServer.java:76)         at com.baidu.hugegraph.dist.HugeRestServer.start(HugeRestServer.java:58)         at com.baidu.hugegraph.dist.HugeGraphServer.main(HugeGraphServer.java:60) Caused by: java.util.concurrent.ExecutionException: java.lang.IllegalArgumentException: Undefined property key: '~task_status'         at java.util.concurrent.FutureTask.report(FutureTask.java:122)         at java.util.concurrent.FutureTask.get(FutureTask.java:192)         at com.baidu.hugegraph.task.TaskScheduler.call(TaskScheduler.java:400)         ... 20 more Caused by: java.lang.IllegalArgumentException: Undefined property key: '~task_status'         at com.google.common.base.Preconditions.checkArgument(Preconditions.java:146)         at com.baidu.hugegraph.util.E.checkArgument(E.java:56)         at com.baidu.hugegraph.HugeGraph.propertyKey(HugeGraph.java:406)         at com.baidu.hugegraph.task.TaskScheduler.lambda$queryTask$6(TaskScheduler.java:367)         at java.util.concurrent.FutureTask.run(FutureTask.java:266)         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)         at java.lang.Thread.run(Thread.java:748) 2019-02-28 11:32:44 39375 [gremlin-server-stop] [WARN ] org.apache.tinkerpop.gremlin.server.GremlinServer [] - Exception while closing Graph instance [hugegraph] com.baidu.hugegraph.HugeException: Exception when closing task tx         at com.baidu.hugegraph.task.TaskManager.closeTaskTx(TaskManager.java:110) ~[hugegraph-core-0.8.0.jar:0.8.0.0]         at com.baidu.hugegraph.task.TaskManager.closeScheduler(TaskManager.java:75) ~[hugegraph-core-0.8.0.jar:0.8.0.0]         at com.baidu.hugegraph.HugeGraph.close(HugeGraph.java:453) ~[hugegraph-core-0.8.0.jar:0.8.0.0]         at org.apache.tinkerpop.gremlin.server.GremlinServer.lambda$null$8(GremlinServer.java:307) ~[gremlin-server-3.2.5.jar:3.2.5]         at java.util.concurrent.ConcurrentHashMap$KeySetView.forEach(ConcurrentHashMap.java:4649) ~[?:1.8.0_181]         at org.apache.tinkerpop.gremlin.server.GremlinServer.lambda$stop$9(GremlinServer.java:304) ~[gremlin-server-3.2.5.jar:3.2.5]         at java.lang.Thread.run(Thread.java:748) [?:1.8.0_181] Caused by: java.util.concurrent.RejectedExecutionException: Task java.util.concurrent.FutureTask@33802670 rejected from java.util.concurrent.ThreadPoolExecutor@5c622b3b[Terminated, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0]         at java.util.concurrent.ThreadPoolExecutor$AbortPolicy.rejectedExecution(ThreadPoolExecutor.java:2063) ~[?:1.8.0_181]         at java.util.concurrent.ThreadPoolExecutor.reject(ThreadPoolExecutor.java:830) ~[?:1.8.0_181]         at java.util.concurrent.ThreadPoolExecutor.execute(ThreadPoolExecutor.java:1379) ~[?:1.8.0_181]         at java.util.concurrent.AbstractExecutorService.invokeAll(AbstractExecutorService.java:238) ~[?:1.8.0_181]         at com.baidu.hugegraph.task.TaskManager.closeTaskTx(TaskManager.java:108) ~[hugegraph-core-0.8.0.jar:0.8.0.0]         ... 6 more 2019-02-28 11:32:44 39375 [gremlin-server-stop] [WARN ] org.apache.tinkerpop.gremlin.server.GremlinServer [] - Exception while closing Graph instance [hugegraph] com.baidu.hugegraph.HugeException: Exception when closing task tx         at com.baidu.hugegraph.task.TaskManager.closeTaskTx(TaskManager.java:110) ~[hugegraph-core-0.8.0.jar:0.8.0.0]         at com.baidu.hugegraph.task.TaskManager.closeScheduler(TaskManager.java:75) ~[hugegraph-core-0.8.0.jar:0.8.0.0]         at com.baidu.hugegraph.HugeGraph.close(HugeGraph.java:453) ~[hugegraph-core-0.8.0.jar:0.8.0.0]         at org.apache.tinkerpop.gremlin.server.GremlinServer.lambda$null$8(GremlinServer.java:307) ~[gremlin-server-3.2.5.jar:3.2.5]         at java.util.concurrent.ConcurrentHashMap$KeySetView.forEach(ConcurrentHashMap.java:4649) ~[?:1.8.0_181]         at org.apache.tinkerpop.gremlin.server.GremlinServer.lambda$stop$9(GremlinServer.java:304) ~[gremlin-server-3.2.5.jar:3.2.5]         at java.lang.Thread.run(Thread.java:748) [?:1.8.0_181] Caused by: java.util.concurrent.RejectedExecutionException: Task java.util.concurrent.FutureTask@33802670 rejected from java.util.concurrent.ThreadPoolExecutor@5c622b3b[Terminated, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0]         at java.util.concurrent.ThreadPoolExecutor$AbortPolicy.rejectedExecution(ThreadPoolExecutor.java:2063) ~[?:1.8.0_181]         at java.util.concurrent.ThreadPoolExecutor.reject(ThreadPoolExecutor.java:830) ~[?:1.8.0_181]         at java.util.concurrent.ThreadPoolExecutor.execute(ThreadPoolExecutor.java:1379) ~[?:1.8.0_181]         at java.util.concurrent.AbstractExecutorService.invokeAll(AbstractExecutorService.java:238) ~[?:1.8.0_181]         at com.baidu.hugegraph.task.TaskManager.closeTaskTx(TaskManager.java:108) ~[hugegraph-core-0.8.0.jar:0.8.0.0]         ... 6 more 2019-02-28 11:32:44 39376 [gremlin-server-stop] [INFO ] org.apache.tinkerpop.gremlin.server.GremlinServer [] - Closed Graph instance [hugegraph] 2019-02-28 11:32:44 39376 [gremlin-server-stop] [INFO ] org.apache.tinkerpop.gremlin.server.GremlinServer [] - Closed Graph instance [hugegraph] 2019-02-28 11:32:44 39378 [gremlin-server-stop] [INFO ] org.apache.tinkerpop.gremlin.server.GremlinServer [] - Gremlin Server - shutdown complete 2019-02-28 11:32:44 39378 [gremlin-server-stop] [INFO ] org.apache.tinkerpop.gremlin.server.GremlinServer [] - Gremlin Server - shutdown complete</description>
		</buginformation>
		<fixedfiles>
			<file>hugegraph-core/src/main/java/com/baidu/hugegraph/config/CoreOptions.java</file>
		</fixedfiles>
	</bug>
	<bug id="110" opendate="2018-10-14 16:03:34" fixdate="2018-11-16 04:14:03">
		<buginformation>
			<summary>启动HugeGraph提示失败，但线程已经起起来</summary>
			<description> ### Expected behavior 期望表现 {type something here...} 启动HugeGraph server的时候，因为配置错误，提示启动失败，预期是程序没有起起来。   ### Actual behavior 实际表现 {type something here...} 实际上线程已经起起来了。但并没有生成pid file。  stop脚本，是根据pid file，但这个时候，pid file还没有，所以stop的时候，说线程没起。 stop失败。 后续使用start脚本也会提示端口已经被占用，启动不起来。  ### Steps to reproduce the problem 复现步骤 1. {step 1} 2. {step 2} 3. {step 3}   ### Status of loaded data 数据状态  #### Vertex/Edge summary 数据量 - loaded vertices amount: {like 10 million} - loaded edges amount: {like 20 million} - loaded time: {like 200s}  #### Vertex/Edge example 数据示例 {type something here...}  #### Schema(VertexLabel, EdgeLabel, IndexLabel) 元数据结构 {type something here...}   ### Specifications of environment 环境信息 - hugegraph version: {like v0.7.4}  0.8.0 - operating system: {like centos 7.4, 32 CPUs, 64G RAM}  centos 7.4 - hugegraph backend: {like cassandra 3.10, cluster with 20 nodes, 3 x 1TB HDD disk each node} Rocksdb </description>
		</buginformation>
		<fixedfiles>
			<file>hugegraph-dist/src/main/java/com/baidu/hugegraph/dist/HugeGraphServer.java</file>
			<file>hugegraph-dist/src/main/java/com/baidu/hugegraph/dist/HugeRestServer.java</file>
			<file>hugegraph-dist/src/main/java/com/baidu/hugegraph/dist/HugeGremlinServer.java</file>
			<file>hugegraph-dist/src/main/java/com/baidu/hugegraph/dist/RegisterUtil.java</file>
		</fixedfiles>
	</bug>
<bugrepository>
