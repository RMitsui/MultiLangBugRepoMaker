<?xml version="1.0" encoding="ISO-8859-1"?>

<bugrepository name="Aria">
	<bug id="730" opendate="2020-08-12 14:12:58" fixdate="2020-08-14 03:21:44">
		<buginformation>
			<summary>3.8.10 上传文件之后检查原文件和上传后的文件的md5不一致</summary>
			<description>&lt;!-- 提交问题前，请先阅读文档和搜索相应问题的issue --&gt; 3.8.10 上传文件之后检查原文件和上传后的文件的md5不一致 ## 版本 * 框架版本 3.8.10 * 系统版本 红米K20 Pro ## 错误日志 &lt;!-- 请提供详细的错误日志 --&gt; 我有用网页在线检测md5的方式检测过，用源文件和上传到服务器上的文件去检测。 文件是完整的可以打开，但是文件md5不一致。 ## 重现步骤  String cookie = cookieHeader();         HashMap&lt;String, String&gt; formParams = new HashMap&lt;&gt;();         formParams.put("Path", currentPath);         HttpOption option = new HttpOption()                 .setRequestType(RequestEnum.POST)                 .setAttachment("File")                 .useServerFileName(true)                 .addHeader("Cookie", cookie)                 .setFormFields(formParams);   long taskId = Aria.upload(context.get())                 .load(destFile.getPath()) // 文件路径                 .setUploadUrl(uploadHost.toString())                 .ignoreFilePathOccupy()                 .option(option)                 .create();    </description>
		</buginformation>
		<fixedfiles>
			<file>HttpComponent/src/main/java/com/arialyy/aria/http/upload/HttpUThreadTaskAdapter.java</file>
			<file>app/src/main/java/com/arialyy/simple/core/upload/HttpUploadActivity.java</file>
			<file>app/src/main/java/com/arialyy/simple/core/download/SingleTaskActivity.java</file>
		</fixedfiles>
	</bug>
	<bug id="639" opendate="2020-03-15 03:44:03" fixdate="2020-08-15 05:41:01">
		<buginformation>
			<summary>下载 m3u8 完成后的文件是什么格式？</summary>
			<description>作者，你好，我还没试用这个库，我的需求是 下载 m3u8 后，希望能存储成 mp4 或者 mp3 格式的。请问，这块需求能实现么？还是说要自己做转码？</description>
		</buginformation>
		<fixedfiles>
			<file>app/src/main/java/com/arialyy/simple/core/download/HttpDownloadModule.java</file>
			<file>PublicComponent/src/main/java/com/arialyy/aria/core/common/SubThreadConfig.java</file>
			<file>app/src/main/java/com/arialyy/simple/core/download/SingleTaskActivity.java</file>
			<file>M3U8Component/src/main/java/com/arialyy/aria/m3u8/live/M3U8LiveLoader.java</file>
			<file>HttpComponent/src/main/java/com/arialyy/aria/http/upload/HttpUThreadTaskAdapter.java</file>
			<file>M3U8Component/src/main/java/com/arialyy/aria/m3u8/M3U8InfoTask.java</file>
			<file>M3U8Component/src/main/java/com/arialyy/aria/m3u8/vod/M3U8VodLoader.java</file>
			<file>PublicComponent/src/main/java/com/arialyy/aria/core/task/ThreadTask.java</file>
		</fixedfiles>
	</bug>
	<bug id="574" opendate="2019-12-21 09:33:03" fixdate="2020-01-15 01:35:17">
		<buginformation>
			<summary>删除下载的文件之后不会再次去下载</summary>
			<description>&lt;!-- 提交问题前，请先阅读文档和搜索相应问题的issue --&gt;  ## 版本  * 框架版本 3.8 * 系统版本 10.0 ## 错误日志 &lt;!-- 请提供详细的错误日志 --&gt;  2019-12-21 17:27:15.069 31985-31985/com.example.xsl D/download: state = 2 2019-12-21 17:27:15.069 31985-31985/com.example.xsl D/download: mData.size:1 2019-12-21 17:27:15.069 31985-31985/com.example.xsl D/download: old download process: 2281267148 2019-12-21 17:27:15.069 31985-31985/com.example.xsl D/download: size: 1 resume download :1 type:2 2019-12-21 17:27:15.069 31985-31985/com.example.xsl D/download: size: 1 resume download :1 type:2 2019-12-21 17:27:15.112 31985-31985/com.example.xsl D/ActivityThread: add activity client record, r= ActivityRecord{d6c703d token=android.os.BinderProxy@d3e953f {com.example.xsl/com.example.mybasevideoview.view.DownloadActivity}} token= android.os.BinderProxy@d3e953f 2019-12-21 17:27:15.115 31985-32158/com.example.xsl D/BaseCachePool: 任务【任务组-&gt;资料库】进入缓存队列成功 2019-12-21 17:27:15.116 31985-32158/com.example.xsl D/BaseExecutePool: 任务【任务组-&gt;资料库】进入执行队列成功 2019-12-21 17:27:15.125 31985-32160/com.example.xsl D/HiTouch_PressGestureDetector: onAttached, package=com.example.xsl, windowType=1, mHiTouchRestricted=false 2019-12-21 17:27:15.130 31985-32026/com.example.xsl D/mali_winsys: EGLint new_window_surface(egl_winsys_display *, void *, EGLSurface, EGLConfig, egl_winsys_surface **, EGLBoolean) returns 0x3000 2019-12-21 17:27:15.149 31985-31985/com.example.xsl D/subtitle: onWindowFocusChanged:false 2019-12-21 17:27:15.150 31985-32026/com.example.xsl D/OpenGLRenderer: disableOutlineDraw is true 2019-12-21 17:27:15.161 31985-31985/com.example.xsl D/AbsTaskQueue: 从执行池删除任务【任务组-&gt;资料库】成功 2019-12-21 17:27:15.161 31985-31985/com.example.xsl D/AbsSchedulers: 任务【任务组-&gt;资料库】处理完成 2019-12-21 17:27:15.162 31985-31985/com.example.xsl I/AbsSchedulers: 没有等待中的任务 2019-12-21 17:27:15.180 31985-31985/com.example.xsl D/ActivityThread: Remove activity client record, r= ActivityRecord{a8e364d token=android.os.BinderProxy@9529f4a {com.example.xsl/com.example.mybasevideoview.view.maskActivity}} token= android.os.BinderProxy@9529f4a 2019-12-21 17:27:15.182 31985-32026/com.example.xsl W/libEGL: EGLNativeWindowType 0xd79e5a48 disconnect failed ## 重现步骤 &lt;!-- 请提供明确的步骤 --&gt; 1.这些任务链接我之前下载过，但是我把这些下载文件删了，然后修改了保存到本地的文件名 2.当我再次把这些任务添加的时候就出现这个日志，根本不会再去下载了，我要怎么做才能再次去下载    </description>
		</buginformation>
		<fixedfiles>
			<file>PublicComponent/src/main/java/com/arialyy/aria/orm/AbsDelegate.java</file>
			<file>PublicComponent/src/main/java/com/arialyy/aria/core/listener/BaseListener.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/queue/DTaskQueue.java</file>
			<file>PublicComponent/src/main/java/com/arialyy/aria/core/common/RecordHelper.java</file>
			<file>app/src/main/java/com/arialyy/simple/MainActivity.java</file>
			<file>PublicComponent/src/main/java/com/arialyy/aria/orm/DelegateUpdate.java</file>
			<file>PublicComponent/src/main/java/com/arialyy/aria/orm/DelegateWrapper.java</file>
			<file>HttpComponent/src/main/java/com/arialyy/aria/http/HttpFileInfoThread.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/queue/pool/BaseExecutePool.java</file>
			<file>FtpComponent/src/main/java/com/arialyy/aria/ftp/upload/FtpUThreadTaskAdapter.java</file>
			<file>PublicComponent/src/main/java/com/arialyy/aria/core/manager/ThreadTaskManager.java</file>
			<file>HttpComponent/src/main/java/com/arialyy/aria/http/download/DGroupLoaderUtil.java</file>
			<file>HttpComponent/src/main/java/com/arialyy/aria/http/download/HttpDThreadTaskAdapter.java</file>
			<file>PublicComponent/src/main/java/com/arialyy/aria/core/task/AbsTask.java</file>
			<file>PublicComponent/src/main/java/com/arialyy/aria/util/ComponentUtil.java</file>
			<file>FtpComponent/src/main/java/com/arialyy/aria/ftp/BaseFtpThreadTaskAdapter.java</file>
			<file>PublicComponent/src/main/java/com/arialyy/aria/orm/SqlHelper.java</file>
			<file>FtpComponent/src/main/java/com/arialyy/aria/ftp/upload/FtpUFileInfoThread.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/queue/AbsTaskQueue.java</file>
			<file>PublicComponent/src/main/java/com/arialyy/aria/core/wrapper/ITaskWrapper.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/queue/pool/BaseCachePool.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/queue/pool/DGLoadExecutePool.java</file>
			<file>PublicComponent/src/main/java/com/arialyy/aria/orm/DelegateFind.java</file>
			<file>app/src/main/java/com/arialyy/simple/modlue/CommonModule.java</file>
			<file>FtpComponent/src/main/java/aria/apache/commons/net/ftp/FTPClient.java</file>
			<file>PublicComponent/src/main/java/com/arialyy/aria/orm/SqlUtil.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/queue/pool/DLoadExecutePool.java</file>
			<file>PublicComponent/src/main/java/com/arialyy/aria/core/group/AbsGroupUtil.java</file>
			<file>app/src/main/java/com/arialyy/simple/core/download/group/DownloadGroupActivity.java</file>
		</fixedfiles>
	</bug>
	<bug id="571" opendate="2019-12-19 02:49:08" fixdate="2019-12-26 06:32:23">
		<buginformation>
			<summary>下下停了</summary>
			<description>&lt;!-- 提交问题前，请先阅读文档和搜索相应问题的issue --&gt;  ## 版本 * 库3.8  *Android 8.1  ## 错误日志 A connection to http://fdfs.***.cn:**/ was leaked. Did you forget to close a response body?   ## 重现步骤 一个十几M的apk，下载过程中停住了，每次停住都会打上面的log    </description>
		</buginformation>
		<fixedfiles>
			<file>PublicComponent/src/main/java/com/arialyy/aria/orm/AbsDelegate.java</file>
			<file>PublicComponent/src/main/java/com/arialyy/aria/core/listener/BaseListener.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/queue/DTaskQueue.java</file>
			<file>PublicComponent/src/main/java/com/arialyy/aria/core/common/RecordHelper.java</file>
			<file>app/src/main/java/com/arialyy/simple/MainActivity.java</file>
			<file>PublicComponent/src/main/java/com/arialyy/aria/orm/DelegateUpdate.java</file>
			<file>PublicComponent/src/main/java/com/arialyy/aria/orm/DelegateWrapper.java</file>
			<file>HttpComponent/src/main/java/com/arialyy/aria/http/HttpFileInfoThread.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/queue/pool/BaseExecutePool.java</file>
			<file>FtpComponent/src/main/java/com/arialyy/aria/ftp/upload/FtpUThreadTaskAdapter.java</file>
			<file>PublicComponent/src/main/java/com/arialyy/aria/core/manager/ThreadTaskManager.java</file>
			<file>HttpComponent/src/main/java/com/arialyy/aria/http/download/DGroupLoaderUtil.java</file>
			<file>HttpComponent/src/main/java/com/arialyy/aria/http/download/HttpDThreadTaskAdapter.java</file>
			<file>PublicComponent/src/main/java/com/arialyy/aria/core/task/AbsTask.java</file>
			<file>PublicComponent/src/main/java/com/arialyy/aria/util/ComponentUtil.java</file>
			<file>FtpComponent/src/main/java/com/arialyy/aria/ftp/BaseFtpThreadTaskAdapter.java</file>
			<file>PublicComponent/src/main/java/com/arialyy/aria/orm/SqlHelper.java</file>
			<file>FtpComponent/src/main/java/com/arialyy/aria/ftp/upload/FtpUFileInfoThread.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/queue/AbsTaskQueue.java</file>
			<file>PublicComponent/src/main/java/com/arialyy/aria/core/wrapper/ITaskWrapper.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/queue/pool/BaseCachePool.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/queue/pool/DGLoadExecutePool.java</file>
			<file>PublicComponent/src/main/java/com/arialyy/aria/orm/DelegateFind.java</file>
			<file>app/src/main/java/com/arialyy/simple/modlue/CommonModule.java</file>
			<file>FtpComponent/src/main/java/aria/apache/commons/net/ftp/FTPClient.java</file>
			<file>PublicComponent/src/main/java/com/arialyy/aria/orm/SqlUtil.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/queue/pool/DLoadExecutePool.java</file>
			<file>PublicComponent/src/main/java/com/arialyy/aria/core/group/AbsGroupUtil.java</file>
			<file>app/src/main/java/com/arialyy/simple/core/download/group/DownloadGroupActivity.java</file>
		</fixedfiles>
	</bug>
	<bug id="500" opendate="2019-11-04 10:25:11" fixdate="2019-11-10 05:28:33">
		<buginformation>
			<summary>m3u8格式文件下载恢复</summary>
			<description>## Aria版本 3.7.4  ## 什么问题 Aria.download(this)                                 .load(entity.getId())                                 .m3u8VodOption(option)                                 .resume(); m3u8格式下载恢复没有断点续传，而是重新开始下载  ## 如何复现此问题   ## 控制台日志  </description>
		</buginformation>
		<fixedfiles>
			<file>app/src/main/java/com/arialyy/simple/core/download/SingleTaskActivity.java</file>
			<file>app/src/main/java/com/arialyy/simple/core/download/group/FTPDirDownloadActivity.java</file>
			<file>FtpComponent/src/main/java/com/arialyy/aria/ftp/download/FtpDirDLoaderUtil.java</file>
			<file>app/src/main/java/com/arialyy/simple/core/download/m3u8/M3U8LiveDLoadActivity.java</file>
			<file>FtpComponent/src/main/java/com/arialyy/aria/ftp/download/FtpDLoaderAdapter.java</file>
			<file>M3U8Component/src/main/java/com/arialyy/aria/m3u8/M3U8ThreadTaskAdapter.java</file>
			<file>PublicComponent/src/main/java/com/arialyy/aria/core/loader/NormalLoader.java</file>
			<file>PublicComponent/src/main/java/com/arialyy/aria/core/task/IThreadTaskAdapter.java</file>
			<file>PublicComponent/src/main/java/com/arialyy/aria/util/RecordUtil.java</file>
			<file>SFtpComponent/src/main/java/com/arialyy/aria/sftp/AbsSFtpFileInfoThread.java</file>
			<file>M3U8Component/src/main/java/com/arialyy/aria/m3u8/BaseM3U8Loader.java</file>
			<file>app/src/main/java/com/arialyy/simple/core/download/DownloadModule.java</file>
			<file>app/src/main/java/com/arialyy/simple/core/download/mutil/FileListAdapter.java</file>
			<file>FtpComponent/src/main/java/com/arialyy/aria/ftp/FtpDirInfoThread.java</file>
			<file>app/src/main/java/com/arialyy/simple/core/download/mutil/MultiDownloadActivity.java</file>
			<file>M3U8Component/src/main/java/com/arialyy/aria/m3u8/vod/M3U8VodLoader.java</file>
			<file>app/src/main/java/com/arialyy/simple/core/download/mutil/MultiTaskActivity.java</file>
			<file>PublicComponent/src/main/java/com/arialyy/aria/core/task/ThreadTask.java</file>
			<file>HttpComponent/src/main/java/com/arialyy/aria/http/download/DGroupLoaderUtil.java</file>
			<file>SFtpComponent/src/main/java/com/arialyy/aria/sftp/download/SFtpDThreadTaskAdapter.java</file>
			<file>SFtpComponent/src/main/java/com/arialyy/aria/sftp/download/SFtpDLoaderAdapter.java</file>
			<file>M3U8Component/src/main/java/com/arialyy/aria/m3u8/M3U8RecordAdapter.java</file>
			<file>PublicComponent/src/main/java/com/arialyy/aria/core/loader/ThreadStateManager.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/download/CheckDEntityUtil.java</file>
			<file>app/src/main/java/com/arialyy/simple/core/download/m3u8/M3U8VodModule.java</file>
			<file>app/src/main/java/com/arialyy/simple/core/download/mutil/DownloadAdapter.java</file>
			<file>app/src/main/java/com/arialyy/simple/core/download/mutil/FileListEntity.java</file>
			<file>PublicComponent/src/main/java/com/arialyy/aria/core/task/AbsThreadTaskAdapter.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/download/m3u8/M3U8Option.java</file>
			<file>SFtpComponent/src/main/java/com/arialyy/aria/sftp/download/SFtpDLoaderUtil.java</file>
			<file>PublicComponent/src/main/java/com/arialyy/aria/core/download/M3U8Entity.java</file>
			<file>M3U8Component/src/main/java/com/arialyy/aria/m3u8/live/M3U8LiveLoader.java</file>
			<file>app/src/main/java/com/arialyy/simple/core/download/m3u8/M3U8VodDLoadActivity.java</file>
			<file>PublicComponent/src/main/java/com/arialyy/aria/util/CheckUtil.java</file>
			<file>M3U8Component/src/main/java/com/arialyy/aria/m3u8/M3U8InfoThread.java</file>
			<file>M3U8Component/src/main/java/com/arialyy/aria/m3u8/live/M3U8LiveUtil.java</file>
			<file>PublicComponent/src/main/java/com/arialyy/aria/core/group/AbsGroupUtil.java</file>
			<file>PublicComponent/src/main/java/com/arialyy/aria/core/task/AbsNormalLoaderAdapter.java</file>
			<file>M3U8Component/src/main/java/com/arialyy/aria/m3u8/M3U8TaskOption.java</file>
		</fixedfiles>
	</bug>
	<bug id="427" opendate="2019-07-21 10:33:30" fixdate="2019-07-29 01:49:32">
		<buginformation>
			<summary>遍历删除多个状态的普通任务没有全部删除</summary>
			<description>## Aria版本 implementation 'com.arialyy.aria:aria-core:3.6.5' annotationProcessor 'com.arialyy.aria:aria-compiler:3.6.5'  ## 什么问题 Q1: 配置maxTaskNum没有生效。 Q2: 遍历删除多个状态的普通任务，并没有全部删除掉。  ## 如何复现此问题 Q1: aria_config.xml中 &lt;maxTaskNum value="3"/&gt;没有生效。 Q2: 添加2个任务后，任务1状态running，任务2状态wait，选择这2个任务通过遍历调用cancel(true)删除；通过getTaskList();获取已完成和未完成的普通任务，任务2仍存在，并没有删除掉。  ## 控制台日志 ![image](https://user-images.githubusercontent.com/22977565/61589990-5ba5da80-abe4-11e9-88f7-6984deb492e9.png)  </description>
		</buginformation>
		<fixedfiles>
			<file>Aria/src/main/java/com/arialyy/aria/core/common/RecordHandler.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/common/ThreadRecord.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/download/m3u8/M3U8LiveUtil.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/download/m3u8/M3U8LiveLoader.java</file>
			<file>app/src/main/java/com/arialyy/simple/core/download/multi_download/MultiTaskActivity.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/common/RecordWrapper.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/orm/SqlHelper.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/upload/AbsUploadTarget.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/upload/uploader/FtpFileInfoThread.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/command/CommandManager.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/Aria.java</file>
			<file>app/src/main/java/com/arialyy/simple/core/download/HighestPriorityActivity.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/orm/DBConfig.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/download/downloader/HttpFileInfoThread.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/download/m3u8/M3U8InfoThread.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/common/BaseListener.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/util/RecordUtil.java</file>
			<file>app/src/main/java/com/arialyy/simple/core/test/TestMutilTaskSysDownload.java</file>
			<file>app/src/main/java/com/arialyy/simple/core/download/m3u8/M3U8VodDLoadActivity.java</file>
			<file>app/src/main/java/com/arialyy/simple/core/download/m3u8/VideoPlayerFragment.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/exception/ParamException.java</file>
			<file>app/src/main/java/com/arialyy/simple/core/download/multi_download/DownloadAdapter.java</file>
		</fixedfiles>
	</bug>
	<bug id="422" opendate="2019-07-15 08:14:08" fixdate="2019-07-17 02:26:31">
		<buginformation>
			<summary>组下载文件时部分文件下载出错时不会有任何回调</summary>
			<description>## Aria版本 3.6.4   ## 什么问题 1.当组文件中某个文件地址其实不存在的时候（服务器返回数据有问题），后面不会走任何回调，导致流程终端，模拟了一下，会有警告信息，见控制台输出【1】 2.对于服务器返回的同一图片下载地址，部分机型会一直下载中断，线上日志只记录到下载开始的回调，其他回调也不会走，情况同1，具体报错信息无法获取  ## 如何复现此问题 对于问题1，必现，比如下载地址为：https://img-dev.xiniunet.com/658896334535139328/photo/791521213481881600.jpg 对于问题2，不好复现，固定机器  ## 控制台日志 [1] ![79FD2A83-A615-4EC4-AD36-C3DB9A319874](https://user-images.githubusercontent.com/25956745/61202924-83e09580-a71b-11e9-8962-49422e89f05b.png)  </description>
		</buginformation>
		<fixedfiles>
			<file>Aria/src/main/java/com/arialyy/aria/core/common/AbsFileer.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/inf/AbsEntity.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/download/group/SimpleSchedulers.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/download/group/SubDLoadUtil.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/orm/SqlHelper.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/download/DownloadGroupTarget.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/download/DownloadGroupListener.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/download/group/AbsGroupUtil.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/orm/DelegateWrapper.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/download/group/GroupRunState.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/download/DownloadGroupTask.java</file>
			<file>app/src/main/java/com/arialyy/simple/core/download/HttpDownloadModule.java</file>
			<file>app/src/main/java/com/arialyy/simple/widget/SubStateLinearLayout.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/common/NormalFileer.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/AriaManager.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/common/AbsThreadTask.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/download/group/FtpDirDownloadUtil.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/inf/AbsNormalEntity.java</file>
			<file>app/src/main/java/com/arialyy/simple/core/download/group/DownloadGroupActivity.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/download/DGTaskWrapper.java</file>
		</fixedfiles>
	</bug>
	<bug id="407" opendate="2019-06-03 08:40:58" fixdate="2019-07-17 02:28:19">
		<buginformation>
			<summary>3.4.7升级到3.6.4数据库升级问题</summary>
			<description>## Aria版本 3.6.4  ## 什么问题 3.4.7版本更新到3.6.4版本数据库迁移  ## 如何复现此问题 3.4.7版本添加下载再更新到3.6.x处理数据库升级时可复现  ## 控制台日志 ![WX20190603-162539](https://user-images.githubusercontent.com/1871567/58787453-6ac4cf00-861c-11e9-9677-51be31cb645c.png)   </description>
		</buginformation>
		<fixedfiles>
			<file>Aria/src/main/java/com/arialyy/aria/orm/DelegateFind.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/download/AbsGroupConfigHandler.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/common/AbsFileer.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/download/DownloadTask.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/common/http/HttpDelegate.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/download/m3u8/M3U8LiveLoader.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/manager/ThreadTaskManager.java</file>
			<file>app/src/main/java/com/arialyy/simple/core/download/multi_download/FileListAdapter.java</file>
			<file>app/src/main/java/com/arialyy/simple/core/download/multi_download/MultiTaskActivity.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/download/m3u8/M3U8VodLoader.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/orm/SqlHelper.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/common/TaskRecord.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/inf/AbsNormalTask.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/download/DownloadEntity.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/download/DownloadGroupTask.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/download/m3u8/M3U8LiveDelegate.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/orm/DBConfig.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/common/NormalFileer.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/common/AbsThreadTask.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/download/m3u8/M3U8TaskConfig.java</file>
			<file>app/src/main/java/com/arialyy/simple/core/download/m3u8/M3U8VodModule.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/download/m3u8/M3U8LiveDownloadUtil.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/inf/AbsGroupEntity.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/inf/AbsTask.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/common/BaseListener.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/inf/AbsGroupTask.java</file>
		</fixedfiles>
	</bug>
	<bug id="403" opendate="2019-05-21 15:10:20" fixdate="2019-06-01 05:50:57">
		<buginformation>
			<summary>有没有什么重新下载的好方案呢</summary>
			<description>## Aria版本 3.6.4  ## 什么问题 使用 reStart 这个函数，也没法实现重新下载  ```java public class MainActivity extends AppCompatActivity {      private final static String URL = "https://music.163.com/song/media/outer/url?id=1321297488";      @SuppressLint("SdCardPath")     private final static String PATH = "/sdcard/Download/test.mp3";      private DownloadReceiver download;      @Override     protected void onCreate(Bundle savedInstanceState) {         super.onCreate(savedInstanceState);         setContentView(R.layout.activity_main);          download = Aria.download(this);         download.register();     }      @Override     protected void onDestroy() {         super.onDestroy();         download.unRegister();     }      public void onStart(View view) {         download.load(URL).setFilePath(PATH).start();     }      public void onRestart(View view) {         final String TAG = "onRestart";         Log.d(TAG, "taskExists: " +  download.load(URL).taskExists());         download.load(URL).reStart();         Log.d(TAG, "taskExists: " +  download.load(URL).taskExists());     }      public void onCheck(View view) {         final String TAG = "onCheck";         Log.d(TAG, "taskExists: " +  download.load(URL).taskExists());     }      public void onCancel(View view) {         final String TAG = "onCancel";         Log.d(TAG, "taskExists: " +  download.load(URL).taskExists());         download.load(URL).cancel();         Log.d(TAG, "taskExists: " +  download.load(URL).taskExists());     }      @Download.onTaskStart     public void onTaskStart(DownloadTask task) {         final String TAG = "onTaskStart";         Log.d(TAG, "");     }      @Download.onTaskRunning     public void onTaskRunning(DownloadTask task) {         final String TAG = "onTaskRunning";         Log.d(TAG, "getPercent: " + task.getPercent());     } } ```  下载时还有一条警告 `W/System.err: java.io.IOException: open failed: EACCES (Permission denied)` 我有给权限，也下载得下来，不知道咋回事  ## 控制台日志 ``` 按下 Start 按钮 D/BaseCachePool: 任务【test.mp3】进入缓存队列成功 D/StartCmd: 开始新任务, 任务状态：3 D/BaseExecutePool: 任务【test.mp3】进入执行队列成功  莫名警告，不知道怎么回事 W/System.err: java.io.IOException: open failed: EACCES (Permission denied)         at java.io.File.createNewFile(File.java:941)         at com.arialyy.aria.util.FileUtil.canWrite(FileUtil.java:240)         at com.arialyy.aria.util.FileUtil.getVolumeList(FileUtil.java:210)         at com.arialyy.aria.util.FileUtil.getSDPathList(FileUtil.java:175)         at com.arialyy.aria.util.CommonUtil.checkSDMemorySpace(CommonUtil.java:209)         at com.arialyy.aria.core.download.downloader.HttpFileInfoThread.handleConnect(HttpFileInfoThread.java:123)         at com.arialyy.aria.core.download.downloader.HttpFileInfoThread.run(HttpFileInfoThread.java:83)         at java.lang.Thread.run(Thread.java:818)     Caused by: android.system.ErrnoException: open failed: EACCES (Permission denied)         at libcore.io.Posix.open(Native Method)         at libcore.io.BlockGuardOs.open(BlockGuardOs.java:186)         at java.io.File.createNewFile(File.java:934)     ... 7 more     java.io.IOException: open failed: EACCES (Permission denied)         at java.io.File.createNewFile(File.java:941)         at com.arialyy.aria.util.FileUtil.canWrite(FileUtil.java:240)         at com.arialyy.aria.util.FileUtil.getVolumeList(FileUtil.java:210)         at com.arialyy.aria.util.FileUtil.getSDPathList(FileUtil.java:175)         at com.arialyy.aria.util.CommonUtil.checkSDMemorySpace(CommonUtil.java:209)         at com.arialyy.aria.core.download.downloader.HttpFileInfoThread.handleConnect(HttpFileInfoThread.java:123)         at com.arialyy.aria.core.download.downloader.HttpFileInfoThread.run(HttpFileInfoThread.java:83)         at java.lang.Thread.run(Thread.java:818)     Caused by: android.system.ErrnoException: open failed: EACCES (Permission denied)         at libcore.io.Posix.open(Native Method)         at libcore.io.BlockGuardOs.open(BlockGuardOs.java:186)         at java.io.File.createNewFile(File.java:934)     ... 7 more     java.io.IOException: open failed: EACCES (Permission denied)         at java.io.File.createNewFile(File.java:941)         at com.arialyy.aria.util.FileUtil.canWrite(FileUtil.java:240)         at com.arialyy.aria.util.FileUtil.getVolumeList(FileUtil.java:210)         at com.arialyy.aria.util.FileUtil.getSDPathList(FileUtil.java:175)         at com.arialyy.aria.util.CommonUtil.checkSDMemorySpace(CommonUtil.java:209)         at com.arialyy.aria.core.download.downloader.HttpFileInfoThread.handleConnect(HttpFileInfoThread.java:123)         at com.arialyy.aria.core.download.downloader.HttpFileInfoThread.run(HttpFileInfoThread.java:83)         at java.lang.Thread.run(Thread.java:818)     Caused by: android.system.ErrnoException: open failed: EACCES (Permission denied)         at libcore.io.Posix.open(Native Method)         at libcore.io.BlockGuardOs.open(BlockGuardOs.java:186)         at java.io.File.createNewFile(File.java:934)     ... 7 more     java.io.IOException: open failed: EACCES (Permission denied)         at java.io.File.createNewFile(File.java:941)         at com.arialyy.aria.util.FileUtil.canWrite(FileUtil.java:240)         at com.arialyy.aria.util.FileUtil.getVolumeList(FileUtil.java:210)         at com.arialyy.aria.util.FileUtil.getSDPathList(FileUtil.java:175)         at com.arialyy.aria.util.CommonUtil.checkSDMemorySpace(CommonUtil.java:209)         at com.arialyy.aria.core.download.downloader.HttpFileInfoThread.handleConnect(HttpFileInfoThread.java:123)         at com.arialyy.aria.core.download.downloader.HttpFileInfoThread.run(HttpFileInfoThread.java:83)         at java.lang.Thread.run(Thread.java:818)     Caused by: android.system.ErrnoException: open failed: EACCES (Permission denied)         at libcore.io.Posix.open(Native Method)         at libcore.io.BlockGuardOs.open(BlockGuardOs.java:186)         at java.io.File.createNewFile(File.java:934)     ... 7 more     java.io.IOException: open failed: EACCES (Permission denied)         at java.io.File.createNewFile(File.java:941)         at com.arialyy.aria.util.FileUtil.canWrite(FileUtil.java:240)         at com.arialyy.aria.util.FileUtil.getVolumeList(FileUtil.java:210)         at com.arialyy.aria.util.FileUtil.getSDPathList(FileUtil.java:175)         at com.arialyy.aria.util.CommonUtil.checkSDMemorySpace(CommonUtil.java:209)         at com.arialyy.aria.core.download.downloader.HttpFileInfoThread.handleConnect(HttpFileInfoThread.java:123)         at com.arialyy.aria.core.download.downloader.HttpFileInfoThread.run(HttpFileInfoThread.java:83)         at java.lang.Thread.run(Thread.java:818)     Caused by: android.system.ErrnoException: open failed: EACCES (Permission denied)         at libcore.io.Posix.open(Native Method)         at libcore.io.BlockGuardOs.open(BlockGuardOs.java:186)         at java.io.File.createNewFile(File.java:934)     ... 7 more D/HttpFileInfoThread: 30x跳转，新url为【https://m10.music.126.net/20190521230848/916649d03d1a078a0a5958736bcc401e/ymusic/73fa/3ca0/97ee/18278f358765a5357d4c9a0d5d4d2f09.mp3】 W/System: Ignoring header Cookie because its value was null. W/System.err: java.io.IOException: open failed: EACCES (Permission denied)         at java.io.File.createNewFile(File.java:941)         at com.arialyy.aria.util.FileUtil.canWrite(FileUtil.java:240)         at com.arialyy.aria.util.FileUtil.getVolumeList(FileUtil.java:210)         at com.arialyy.aria.util.FileUtil.getSDPathList(FileUtil.java:175)         at com.arialyy.aria.util.CommonUtil.checkSDMemorySpace(CommonUtil.java:209)         at com.arialyy.aria.core.download.downloader.HttpFileInfoThread.handleConnect(HttpFileInfoThread.java:123)         at com.arialyy.aria.core.download.downloader.HttpFileInfoThread.handleUrlReTurn(HttpFileInfoThread.java:304)         at com.arialyy.aria.core.download.downloader.HttpFileInfoThread.handleConnect(HttpFileInfoThread.java:208)         at com.arialyy.aria.core.download.downloader.HttpFileInfoThread.run(HttpFileInfoThread.java:83)         at java.lang.Thread.run(Thread.java:818) W/System.err: Caused by: android.system.ErrnoException: open failed: EACCES (Permission denied)         at libcore.io.Posix.open(Native Method)         at libcore.io.BlockGuardOs.open(BlockGuardOs.java:186)         at java.io.File.createNewFile(File.java:934)     ... 9 more     java.io.IOException: open failed: EACCES (Permission denied)         at java.io.File.createNewFile(File.java:941)         at com.arialyy.aria.util.FileUtil.canWrite(FileUtil.java:240)         at com.arialyy.aria.util.FileUtil.getVolumeList(FileUtil.java:210)         at com.arialyy.aria.util.FileUtil.getSDPathList(FileUtil.java:175)         at com.arialyy.aria.util.CommonUtil.checkSDMemorySpace(CommonUtil.java:209)         at com.arialyy.aria.core.download.downloader.HttpFileInfoThread.handleConnect(HttpFileInfoThread.java:123)         at com.arialyy.aria.core.download.downloader.HttpFileInfoThread.handleUrlReTurn(HttpFileInfoThread.java:304)         at com.arialyy.aria.core.download.downloader.HttpFileInfoThread.handleConnect(HttpFileInfoThread.java:208)         at com.arialyy.aria.core.download.downloader.HttpFileInfoThread.run(HttpFileInfoThread.java:83)         at java.lang.Thread.run(Thread.java:818)     Caused by: android.system.ErrnoException: open failed: EACCES (Permission denied)         at libcore.io.Posix.open(Native Method)         at libcore.io.BlockGuardOs.open(BlockGuardOs.java:186)         at java.io.File.createNewFile(File.java:934)     ... 9 more     java.io.IOException: open failed: EACCES (Permission denied)         at java.io.File.createNewFile(File.java:941)         at com.arialyy.aria.util.FileUtil.canWrite(FileUtil.java:240)         at com.arialyy.aria.util.FileUtil.getVolumeList(FileUtil.java:210)         at com.arialyy.aria.util.FileUtil.getSDPathList(FileUtil.java:175)         at com.arialyy.aria.util.CommonUtil.checkSDMemorySpace(CommonUtil.java:209)         at com.arialyy.aria.core.download.downloader.HttpFileInfoThread.handleConnect(HttpFileInfoThread.java:123)         at com.arialyy.aria.core.download.downloader.HttpFileInfoThread.handleUrlReTurn(HttpFileInfoThread.java:304)         at com.arialyy.aria.core.download.downloader.HttpFileInfoThread.handleConnect(HttpFileInfoThread.java:208)         at com.arialyy.aria.core.download.downloader.HttpFileInfoThread.run(HttpFileInfoThread.java:83)         at java.lang.Thread.run(Thread.java:818)     Caused by: android.system.ErrnoException: open failed: EACCES (Permission denied)         at libcore.io.Posix.open(Native Method)         at libcore.io.BlockGuardOs.open(BlockGuardOs.java:186)         at java.io.File.createNewFile(File.java:934)     ... 9 more     java.io.IOException: open failed: EACCES (Permission denied)         at java.io.File.createNewFile(File.java:941)         at com.arialyy.aria.util.FileUtil.canWrite(FileUtil.java:240)         at com.arialyy.aria.util.FileUtil.getVolumeList(FileUtil.java:210)         at com.arialyy.aria.util.FileUtil.getSDPathList(FileUtil.java:175)         at com.arialyy.aria.util.CommonUtil.checkSDMemorySpace(CommonUtil.java:209)         at com.arialyy.aria.core.download.downloader.HttpFileInfoThread.handleConnect(HttpFileInfoThread.java:123)         at com.arialyy.aria.core.download.downloader.HttpFileInfoThread.handleUrlReTurn(HttpFileInfoThread.java:304)         at com.arialyy.aria.core.download.downloader.HttpFileInfoThread.handleConnect(HttpFileInfoThread.java:208)         at com.arialyy.aria.core.download.downloader.HttpFileInfoThread.run(HttpFileInfoThread.java:83)         at java.lang.Thread.run(Thread.java:818)     Caused by: android.system.ErrnoException: open failed: EACCES (Permission denied)         at libcore.io.Posix.open(Native Method)         at libcore.io.BlockGuardOs.open(BlockGuardOs.java:186)         at java.io.File.createNewFile(File.java:934)     ... 9 more     java.io.IOException: open failed: EACCES (Permission denied)         at java.io.File.createNewFile(File.java:941)         at com.arialyy.aria.util.FileUtil.canWrite(FileUtil.java:240)         at com.arialyy.aria.util.FileUtil.getVolumeList(FileUtil.java:210)         at com.arialyy.aria.util.FileUtil.getSDPathList(FileUtil.java:175)         at com.arialyy.aria.util.CommonUtil.checkSDMemorySpace(CommonUtil.java:209)         at com.arialyy.aria.core.download.downloader.HttpFileInfoThread.handleConnect(HttpFileInfoThread.java:123)         at com.arialyy.aria.core.download.downloader.HttpFileInfoThread.handleUrlReTurn(HttpFileInfoThread.java:304)         at com.arialyy.aria.core.download.downloader.HttpFileInfoThread.handleConnect(HttpFileInfoThread.java:208)         at com.arialyy.aria.core.download.downloader.HttpFileInfoThread.run(HttpFileInfoThread.java:83)         at java.lang.Thread.run(Thread.java:818)     Caused by: android.system.ErrnoException: open failed: EACCES (Permission denied)         at libcore.io.Posix.open(Native Method)         at libcore.io.BlockGuardOs.open(BlockGuardOs.java:186)         at java.io.File.createNewFile(File.java:934)     ... 9 more D/HttpFileInfoThread: 长度不一致，任务为新任务 D/AbsFileer: path: /sdcard/Download/test.mp3 D/AbsFileer: 初始化记录，任务为新任务 D/AbsFileer: 保存记录，线程记录数：3 D/AbsFileer: 启动定时器 D/HttpThreadTask: 任务【test.mp3】线程__1__开始下载【开始位置 : 1998695，结束位置：3997390】 D/HttpThreadTask: 任务【test.mp3】线程__0__开始下载【开始位置 : 0，结束位置：1998695】 D/onTaskRunning: getPercent: 0 ...... D/onTaskRunning: getPercent: 65 I/HttpThreadTask: 任务【test.mp3】线程__0__下载完毕 D/HttpThreadTask: 任务【test.mp3】线程__2__开始下载【开始位置 : 3997390，结束位置：5996086】 I/HttpThreadTask: 任务【test.mp3】线程__1__下载完毕 D/onTaskRunning: getPercent: 66 ...... D/onTaskRunning: getPercent: 99 I/HttpThreadTask: 任务【test.mp3】线程__2__下载完毕 I/AbsThreadTask: 任务【test.mp3】完成 W/CommonUtil: 记录为空 D/AbsTaskQueue: 从执行池删除任务【test.mp3】成功 D/AbsSchedulers: complete_next I/AbsSchedulers: 没有等待中的任务 ----------------------------------------------------------- 按下 Restart 按钮 D/onRestart: taskExists: true D/BaseCachePool: 任务【test.mp3】进入缓存队列成功 W/StartCmd: 任务【test.mp3】已经在运行 D/onRestart: taskExists: true D/AbsTaskQueue: 从缓存池删除任务【test.mp3】成功 D/AbsSchedulers: stop_next I/AbsSchedulers: 没有等待中的任务 ```  ## 尝试其他方法  先 `removeRecord()` 或者 `cancel(true)` 再 `start()` ，也是不能重新下载</description>
		</buginformation>
		<fixedfiles>
			<file>app/src/main/java/com/arialyy/simple/core/download/SingleTaskActivity.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/common/AbsFileer.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/download/DownloadTask.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/upload/uploader/SimpleUploadUtil.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/upload/UNormalDelegate.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/inf/TaskSchedulerType.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/manager/ThreadTaskManager.java</file>
			<file>app/src/main/java/com/arialyy/simple/core/upload/FtpUploadActivity.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/common/ftp/IFtpUploadInterceptor.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/util/CommonUtil.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/inf/ITask.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/command/normal/NormalCmdFactory.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/common/ftp/AbsFtpInfoThread.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/download/group/FtpDirInfoThread.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/command/normal/AbsNormalCmd.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/download/BaseDListener.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/download/DownloadGroupListener.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/common/ftp/FtpTaskDelegate.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/upload/uploader/FtpFileInfoThread.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/download/DownloadGroupTask.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/download/downloader/FtpFileInfoThread.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/upload/FtpUploadTarget.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/upload/BaseUListener.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/AriaManager.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/common/AbsThreadTask.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/inf/AbsTarget.java</file>
			<file>app/src/main/java/com/arialyy/simple/core/download/DownloadActivity.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/inf/AbsTask.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/exception/FileNotFoundException.java</file>
			<file>app/src/main/java/com/arialyy/simple/modlue/CommonModule.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/common/BaseListener.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/scheduler/AbsSchedulers.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/common/ftp/FtpInterceptHandler.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/inf/AbsGroupTask.java</file>
			<file>Aria/src/main/java/com/arialyy/aria/core/command/normal/ReStartCmd.java</file>
		</fixedfiles>
	</bug>
<bugrepository>
