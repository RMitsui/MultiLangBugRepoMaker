<?xml version="1.0" encoding="ISO-8859-1"?>

<bugs>
	<bug>
		<id>8316</id>
		<title>POC: content in sub-layers created localized </title>
		<body>There is no `DATA` and `NAME` inherit types in inherited content.</body>
		<created>2020-09-01 08:46:27</created>
		<closed>2020-09-08 11:59:28</closed>
	</bug>
	<bug>
		<id>8312</id>
		<title>FQDN don't work for Hazelcast</title>
		<body>It is documented that binding address in come.enonic.xp.cluster.cfg can be a host name (FQDN for instance) But with introduction of Hazelcast this is no longer the case.</body>
		<created>2020-08-28 13:24:24</created>
		<closed>2020-09-08 11:59:32</closed>
	</bug>
	<bug>
		<id>8307</id>
		<title>lib-portal.imageUrl() doesn't convert to specified image format</title>
		<body>By using `format` argument of `lib-portal.imageUrl()` you can specify a different format to convert the image to, see [here](https://developer.enonic.com/docs/xp/stable/api/lib-portal#imageurl).  [According to customer](https://enonic.zendesk.com/agent/tickets/3945), this stopped working after a recent release.  For example, on Enonic site PNG images are supposed to be converted to JPEG but returned format is still PNG:  &lt;img width="693" alt="Screenshot 2020-08-27 at 14 55 17" src="https://user-images.githubusercontent.com/11612490/91444839-9bbe9e80-e875-11ea-85cb-620bf9940e59.png"&gt; </body>
		<created>2020-08-27 13:01:20</created>
		<closed>2020-09-08 11:59:32</closed>
	</bug>
	<bug>
		<id>8293</id>
		<title>Can't send mail with attachment</title>
		<body>**XP version:** 7.3.1 **Java version:** Tested both in enonic sandbox and standalone with OpenJDK Runtime Environment Zulu11.41+23-CA (build 11.0.8+10-LTS) **Installed apps:** app-superhero-blog  In a JavaScript controller, trying to send an e-mail with one or more attachments with data from getAttachmentStream() on an image from the default cms repo fails with stack trace. I've verified that getAttachmentStream() returns actual data. If you comment out the line with `attachments: …` the e-mail will be sent without any issues.  JavaScript controller code, using data from Superhero App as an example: ``` mailLib.send({ from: 'email@example.com', to: 'email@example.com', subject: 'subject', body: 'body', attachments: [{ fileName: 'superhero_5.jpg', mimeType: 'image/jpeg', data: contentLib.getAttachmentStream({                 key: '/superhero/posts/featured-image/superhero_5.jpg',                 name: 'superhero_5.jpg'         }); }] }); ```  Stack trace: ``` 2020-08-24 10:21:56,042 WARN  c.enonic.xp.lib.mail.SendMailHandler - Mail could not be sent com.enonic.xp.mail.MailException: IOException while sending message at com.enonic.xp.mail.impl.MailServiceImpl.handleException(MailServiceImpl.java:65) at com.enonic.xp.mail.impl.MailServiceImpl.send(MailServiceImpl.java:53) at com.enonic.xp.lib.mail.SendMailHandler.send(SendMailHandler.java:116) at jdk.scripting.nashorn.scripts/jdk.nashorn.internal.scripts.Script$Recompilation$4092$2349A$mail.L:1#send(com.enonic.app.formbuilder:/lib/xp/mail.js:66) at jdk.scripting.nashorn.scripts/jdk.nashorn.internal.scripts.Script$Recompilation$4084$10077AAAAA$form_response.L:1#sendEmailToRecipients(com.enonic.app.formbuilder:/lib/form-builder/form-response.js:416) at jdk.scripting.nashorn.scripts/jdk.nashorn.internal.scripts.Script$Recompilation$4065$2855AAAAA$form_response.L:1#receiveForm(com.enonic.app.formbuilder:/lib/form-builder/form-response.js:131) at jdk.scripting.nashorn.scripts/jdk.nashorn.internal.scripts.Script$Recompilation$4063$837AAA$form_response.L:1#save(com.enonic.app.formbuilder:/lib/form-builder/form-response.js:22) at jdk.scripting.nashorn.scripts/jdk.nashorn.internal.scripts.Script$Recompilation$4062$5262A$form_part.L:1#post(com.enonic.app.formbuilder:/site/parts/form-part/form-part.js:169) at jdk.scripting.nashorn/jdk.nashorn.internal.runtime.ScriptFunctionData.invoke(Unknown Source) at jdk.scripting.nashorn/jdk.nashorn.internal.runtime.ScriptFunction.invoke(Unknown Source) at jdk.scripting.nashorn/jdk.nashorn.internal.runtime.ScriptRuntime.apply(Unknown Source) at jdk.scripting.nashorn/jdk.nashorn.api.scripting.ScriptObjectMirror.call(Unknown Source) at com.enonic.xp.script.impl.value.FunctionScriptValue.call(FunctionScriptValue.java:36) at com.enonic.xp.script.impl.executor.ScriptExportsImpl.executeMethod(ScriptExportsImpl.java:59) at com.enonic.xp.portal.impl.controller.ControllerScriptImpl.doExecute(ControllerScriptImpl.java:71) at com.enonic.xp.portal.impl.controller.ControllerScriptImpl.lambda$execute$0(ControllerScriptImpl.java:36) at com.enonic.xp.trace.Tracer.traceEx(Tracer.java:72) at com.enonic.xp.trace.Tracer.trace(Tracer.java:51) at com.enonic.xp.trace.Tracer.trace(Tracer.java:98) at com.enonic.xp.portal.impl.controller.ControllerScriptImpl.execute(ControllerScriptImpl.java:36) at com.enonic.xp.portal.impl.rendering.DescriptorBasedComponentRenderer.doRender(DescriptorBasedComponentRenderer.java:75) at com.enonic.xp.portal.impl.rendering.DescriptorBasedComponentRenderer.render(DescriptorBasedComponentRenderer.java:43) at com.enonic.xp.portal.impl.rendering.DescriptorBasedComponentRenderer.render(DescriptorBasedComponentRenderer.java:22) at com.enonic.xp.portal.impl.rendering.RendererDelegateImpl.lambda$render$1(RendererDelegateImpl.java:40) at java.base/java.util.Optional.map(Unknown Source) at com.enonic.xp.portal.impl.rendering.RendererDelegateImpl.render(RendererDelegateImpl.java:40) at com.enonic.xp.portal.impl.handler.render.ComponentHandlerWorker.execute(ComponentHandlerWorker.java:123) at com.enonic.xp.portal.impl.handler.render.ComponentHandler.doHandle(ComponentHandler.java:66) at com.enonic.xp.portal.impl.handler.render.ComponentHandler.doHandle(ComponentHandler.java:23) at com.enonic.xp.web.handler.BaseWebHandler.handle(BaseWebHandler.java:66) at com.enonic.xp.web.impl.handler.WebHandlerChainImpl.handle(WebHandlerChainImpl.java:30) at com.enonic.xp.web.handler.BaseWebHandler.handle(BaseWebHandler.java:75) at com.enonic.xp.web.impl.handler.WebHandlerChainImpl.handle(WebHandlerChainImpl.java:30) at com.enonic.xp.web.handler.BaseWebHandler.handle(BaseWebHandler.java:75) at com.enonic.xp.web.impl.handler.WebHandlerChainImpl.handle(WebHandlerChainImpl.java:30) at com.enonic.xp.web.handler.BaseWebHandler.handle(BaseWebHandler.java:75) at com.enonic.xp.web.impl.handler.WebHandlerChainImpl.handle(WebHandlerChainImpl.java:30) at com.enonic.xp.web.handler.BaseWebHandler.handle(BaseWebHandler.java:75) at com.enonic.xp.web.impl.handler.WebHandlerChainImpl.handle(WebHandlerChainImpl.java:30) at com.enonic.xp.web.handler.BaseWebHandler.handle(BaseWebHandler.java:75) at com.enonic.xp.web.impl.handler.WebHandlerChainImpl.handle(WebHandlerChainImpl.java:30) at com.enonic.xp.web.handler.BaseWebHandler.handle(BaseWebHandler.java:75) at com.enonic.xp.web.impl.handler.WebHandlerChainImpl.handle(WebHandlerChainImpl.java:30) at com.enonic.xp.web.handler.BaseWebHandler.handle(BaseWebHandler.java:75) at com.enonic.xp.web.impl.handler.WebHandlerChainImpl.handle(WebHandlerChainImpl.java:30) at com.enonic.xp.web.handler.BaseWebHandler.handle(BaseWebHandler.java:75) at com.enonic.xp.web.impl.handler.WebHandlerChainImpl.handle(WebHandlerChainImpl.java:30) at com.enonic.xp.web.handler.BaseWebHandler.handle(BaseWebHandler.java:75) at com.enonic.xp.web.impl.handler.WebHandlerChainImpl.handle(WebHandlerChainImpl.java:30) at com.enonic.xp.web.handler.BaseWebHandler.handle(BaseWebHandler.java:75) at com.enonic.xp.web.impl.handler.WebHandlerChainImpl.handle(WebHandlerChainImpl.java:30) at com.enonic.xp.web.handler.BaseWebHandler.handle(BaseWebHandler.java:75) at com.enonic.xp.web.impl.handler.WebHandlerChainImpl.handle(WebHandlerChainImpl.java:30) at com.enonic.xp.portal.handler.BasePortalHandler.doHandle(BasePortalHandler.java:46) at com.enonic.xp.web.handler.BaseWebHandler.handle(BaseWebHandler.java:66) at com.enonic.xp.web.impl.handler.WebHandlerChainImpl.handle(WebHandlerChainImpl.java:30) at com.enonic.xp.web.impl.trace.TraceWebFilter.doHandle(TraceWebFilter.java:38) at com.enonic.xp.web.handler.BaseWebHandler.handle(BaseWebHandler.java:66) at com.enonic.xp.web.impl.handler.WebHandlerChainImpl.handle(WebHandlerChainImpl.java:30) at com.enonic.xp.web.impl.handler.WebDispatcherImpl.dispatch(WebDispatcherImpl.java:44) at com.enonic.xp.web.impl.handler.WebDispatcherServlet.doHandle(WebDispatcherServlet.java:142) at com.enonic.xp.web.impl.handler.WebDispatcherServlet.service(WebDispatcherServlet.java:70) at javax.servlet.http.HttpServlet.service(HttpServlet.java:790) at com.enonic.xp.web.impl.dispatch.mapping.ServletDefinitionImpl.service(ServletDefinitionImpl.java:40) at com.enonic.xp.web.impl.dispatch.pipeline.ServletPipelineImpl.service(ServletPipelineImpl.java:40) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:45) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36) at com.enonic.xp.portal.impl.idprovider.IdProviderFilter.doHandle(IdProviderFilter.java:45) at com.enonic.xp.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:31) at com.enonic.xp.web.filter.BaseWebFilter.doFilter(BaseWebFilter.java:33) at com.enonic.xp.web.impl.dispatch.mapping.FilterDefinitionImpl.doFilter(FilterDefinitionImpl.java:41) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:50) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36) at com.enonic.xp.web.impl.auth.BasicAuthFilter.doHandle(BasicAuthFilter.java:34) at com.enonic.xp.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:31) at com.enonic.xp.web.filter.BaseWebFilter.doFilter(BaseWebFilter.java:33) at com.enonic.xp.web.impl.dispatch.mapping.FilterDefinitionImpl.doFilter(FilterDefinitionImpl.java:41) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:50) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36) at com.enonic.xp.web.impl.context.ContextFilter.lambda$doHandle$0(ContextFilter.java:33) at com.enonic.xp.context.ContextImpl.callWith(ContextImpl.java:102) at com.enonic.xp.web.impl.context.ContextFilter.doHandle(ContextFilter.java:32) at com.enonic.xp.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:31) at com.enonic.xp.web.filter.BaseWebFilter.doFilter(BaseWebFilter.java:33) at com.enonic.xp.web.impl.dispatch.mapping.FilterDefinitionImpl.doFilter(FilterDefinitionImpl.java:41) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:50) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36) at com.enonic.xp.web.vhost.impl.VirtualHostFilter.doHandle(VirtualHostFilter.java:60) at com.enonic.xp.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:31) at com.enonic.xp.web.filter.BaseWebFilter.doFilter(BaseWebFilter.java:33) at com.enonic.xp.web.impl.dispatch.mapping.FilterDefinitionImpl.doFilter(FilterDefinitionImpl.java:41) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:50) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36) at com.enonic.xp.web.impl.dos.DosFilterWrapper.doFilter(DosFilterWrapper.java:65) at com.enonic.xp.web.impl.dispatch.mapping.FilterDefinitionImpl.doFilter(FilterDefinitionImpl.java:41) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:50) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36) at org.eclipse.jetty.servlets.HeaderFilter.doFilter(HeaderFilter.java:117) at com.enonic.xp.web.impl.header.HeaderFilterWrapper.doHandle(HeaderFilterWrapper.java:51) at com.enonic.xp.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:31) at com.enonic.xp.web.filter.BaseWebFilter.doFilter(BaseWebFilter.java:33) at com.enonic.xp.web.impl.dispatch.mapping.FilterDefinitionImpl.doFilter(FilterDefinitionImpl.java:41) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:50) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36) at com.enonic.xp.web.impl.dispatch.pipeline.FilterPipelineImpl.filter(FilterPipelineImpl.java:39) at com.enonic.xp.web.impl.dispatch.DispatchServletImpl.service(DispatchServletImpl.java:52) at javax.servlet.http.HttpServlet.service(HttpServlet.java:790) at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:763) at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:551) at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:143) at org.eclipse.jetty.server.handler.gzip.GzipHandler.handle(GzipHandler.java:717) at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127) at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:235) at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:1610) at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:233) at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1363) at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:188) at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:489) at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:1580) at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:186) at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1278) at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141) at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:221) at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127) at com.codahale.metrics.jetty9.InstrumentedHandler.handle(InstrumentedHandler.java:249) at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127) at org.eclipse.jetty.server.Server.handle(Server.java:500) at org.eclipse.jetty.server.HttpChannel.lambda$handle$1(HttpChannel.java:383) at org.eclipse.jetty.server.HttpChannel.dispatch(HttpChannel.java:547) at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:375) at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:273) at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:311) at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:103) at org.eclipse.jetty.io.ChannelEndPoint$2.run(ChannelEndPoint.java:117) at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.runTask(EatWhatYouKill.java:336) at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.doProduce(EatWhatYouKill.java:313) at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.tryProduce(EatWhatYouKill.java:171) at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.run(EatWhatYouKill.java:129) at org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run(ReservedThreadExecutor.java:375) at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:806) at org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run(QueuedThreadPool.java:938) at java.base/java.lang.Thread.run(Unknown Source) Caused by: javax.mail.MessagingException: IOException while sending message at com.sun.mail.smtp.SMTPTransport.sendMessage(SMTPTransport.java:1350) at com.enonic.xp.mail.impl.MailServiceImpl.doSend(MailServiceImpl.java:77) at com.enonic.xp.mail.impl.MailServiceImpl.send(MailServiceImpl.java:49) ... 140 common frames omitted Caused by: javax.activation.UnsupportedDataTypeException: no object DCH for MIME type multipart/mixed; boundary="----=_Part_12_1210396003.1598257309788" at javax.activation.ObjectDataContentHandler.writeTo(DataHandler.java:879) at javax.activation.DataHandler.writeTo(DataHandler.java:300) at javax.mail.internet.MimeBodyPart.writeTo(MimeBodyPart.java:1670) at javax.mail.internet.MimeMessage.writeTo(MimeMessage.java:1880) at com.sun.mail.smtp.SMTPTransport.sendMessage(SMTPTransport.java:1300) ... 142 common frames omitted ```  XP also starts with the following warning in the log… no idea if it's relevant: ``` 2020-08-24 11:35:35,129 WARN  javax.mail - expected resource not found: /META-INF/javamail.default.address.map ``` </body>
		<created>2020-08-24 10:02:39</created>
		<closed>2020-09-08 11:59:27</closed>
	</bug>
	<bug>
		<id>8286</id>
		<title>POC: Implement correct move action inheritance</title>
		<body>Move of content should always be done if: - new parent of original content existed in particular project(check parent existance by id). - content inherited by ContentInheritType.PATH.</body>
		<created>2020-08-18 13:48:14</created>
		<closed>2020-08-25 12:55:57</closed>
	</bug>
	<bug>
		<id>8281</id>
		<title>Unable to modify content of media type</title>
		<body>Error: Value of type [com.enonic.xp.data.PropertySet] cannot be converted to [Reference]  The modify https://github.com/enonic/app-fotoware/blob/master/src/main/resources/tasks/syncSite/syncSite.es#L282-L295  The error actually occurs before the xdata has been applied, but here is the xdata anyway. https://github.com/enonic/app-fotoware/blob/master/src/main/resources/site/x-data/fotoWare/fotoWare.xml</body>
		<created>2020-08-17 12:38:54</created>
		<closed>2020-09-08 11:59:27</closed>
	</bug>
	<bug>
		<id>8269</id>
		<title>Copy of inherited content should not be created as 'inherited'</title>
		<body>1. Create a subproject  in Default 2. Switch to subproject's context , select an inherited site and duplicate it   BUG: new created copy should not be displayed with `inherited` mask:   ![image](https://user-images.githubusercontent.com/3728712/89637936-af4c9a00-d8b3-11ea-9a2e-5e1b4e0e53a8.png) </body>
		<created>2020-08-07 10:42:42</created>
		<closed>2020-09-08 11:59:29</closed>
	</bug>
	<bug>
		<id>8265</id>
		<title>Synchronisation gives an exception for a localised content</title>
		<body>1. Open an inherited content with "Localise" button in the Layers widget 2. Change display name (path changes accordingly) 3. Save 4. Within a minute XP starts giving an exception  ``` 15:54:01.105 WARN  c.e.x.c.i.p.ParentProjectSyncActivator - Error while project sync. com.enonic.xp.content.ContentNotFoundException: Content with path [/hmdb/playlists] was not found in branch [draft] at com.enonic.xp.core.impl.content.GetContentByPathCommand.execute(GetContentByPathCommand.java:32) at com.enonic.xp.core.impl.content.ContentServiceImpl.executeGetByPath(ContentServiceImpl.java:607) at com.enonic.xp.core.impl.content.ContentServiceImpl.getByPath(ContentServiceImpl.java:585) at com.enonic.xp.core.impl.content.MoveContentCommand.verifyIntegrity(MoveContentCommand.java:167) at com.enonic.xp.core.impl.content.MoveContentCommand.doExecute(MoveContentCommand.java:103) at com.enonic.xp.core.impl.content.MoveContentCommand.execute(MoveContentCommand.java:79) at com.enonic.xp.core.impl.content.ContentServiceImpl.move(ContentServiceImpl.java:723) at com.enonic.xp.core.impl.project.ParentProjectSynchronizer.doSyncMoved(ParentProjectSynchronizer.java:192) at com.enonic.xp.core.impl.project.ParentProjectSynchronizer.lambda$doSync$2(ParentProjectSynchronizer.java:117) at com.enonic.xp.context.ContextImpl.callWith(ContextImpl.java:102) at com.enonic.xp.core.impl.project.ParentProjectSynchronizer.doSync(ParentProjectSynchronizer.java:109) at com.enonic.xp.core.impl.project.ParentProjectSynchronizer.lambda$syncWithChildren$0(ParentProjectSynchronizer.java:88) at com.enonic.xp.context.ContextImpl.runWith(ContextImpl.java:86) at com.enonic.xp.core.impl.project.ParentProjectSynchronizer.syncWithChildren(ParentProjectSynchronizer.java:76) at com.enonic.xp.core.impl.project.ParentProjectSyncTask.doSync(ParentProjectSyncTask.java:75) at com.enonic.xp.core.impl.project.ParentProjectSyncTask.lambda$run$2(ParentProjectSyncTask.java:57) at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183) at java.base/java.util.ArrayList.forEach(ArrayList.java:1540) at java.base/java.util.stream.SortedOps$RefSortingSink.end(SortedOps.java:395) at java.base/java.util.stream.Sink$ChainedReference.end(Sink.java:258) at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:485) at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474) at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150) at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173) at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:497) at com.enonic.xp.core.impl.project.ParentProjectSyncTask.lambda$run$3(ParentProjectSyncTask.java:55) at com.enonic.xp.context.ContextImpl.runWith(ContextImpl.java:86) at com.enonic.xp.core.impl.project.ParentProjectSyncTask.run(ParentProjectSyncTask.java:38) at com.enonic.xp.core.internal.concurrent.SimpleRecurringJobScheduler$WrappedRunnable.run(SimpleRecurringJobScheduler.java:78) at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305) at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305) at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) at java.base/java.lang.Thread.run(Thread.java:834) ```</body>
		<created>2020-08-03 13:54:40</created>
		<closed>2020-08-11 12:12:05</closed>
	</bug>
	<bug>
		<id>8263</id>
		<title>POC: 500 error after clicking on an image that was updated in the parent project</title>
		<body>1. Create a subproject in Default project 2. Upload an image in Default, open the image and upload another image. 3. Switch to subproject context and click  on the image.  BUG: 500 error appears in console .  ![image](https://user-images.githubusercontent.com/3728712/89155900-712d3e80-d572-11ea-82a3-b66367bd8c41.png)   ``` java.lang.NullPointerException: null at com.enonic.xp.image.ImageHelper.scaleSquare(ImageHelper.java:220) at com.enonic.xp.image.ImageHelper.scaleSquare(ImageHelper.java:215) at com.enonic.xp.admin.impl.rest.resource.BaseImageHelper.resizeImage(BaseImageHelper.java:35) at com.enonic.xp.admin.impl.rest.resource.BaseImageHelper.resizeImage(BaseImageHelper.java:63) at com.enonic.xp.admin.impl.rest.resource.content.ContentImageResource.resolveResponseFromContentType(ContentImageResource.java:191) at com.enonic.xp.admin.impl.rest.resource.content.ContentImageResource.getContentImage(ContentImageResource.java:107) at jdk.internal.reflect.GeneratedMethodAccessor155.invoke(Unknown Source) at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.base/java.lang.reflect.Method.invoke(Method.java:566) at org.jboss.resteasy.core.MethodInjectorImpl.invoke(MethodInjectorImpl.java:138) at org.jboss.resteasy.core.ResourceMethodInvoker.internalInvokeOnTarget(ResourceMethodInvoker.java:526) at org.jboss.resteasy.core.ResourceMethodInvoker.invokeOnTargetAfterFilter(ResourceMethodInvoker.java:415) at org.jboss.resteasy.core.ResourceMethodInvoker.lambda$invokeOnTarget$0(ResourceMethodInvoker.java:376) at org.jboss.resteasy.core.interception.PreMatchContainerRequestContext.filter(PreMatchContainerRequestContext.java:356) at org.jboss.resteasy.core.ResourceMethodInvoker.invokeOnTarget(ResourceMethodInvoker.java:378) at org.jboss.resteasy.core.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:347) at org.jboss.resteasy.core.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:320) at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:440) at org.jboss.resteasy.core.SynchronousDispatcher.lambda$invoke$4(SynchronousDispatcher.java:229) at org.jboss.resteasy.core.SynchronousDispatcher.lambda$preprocess$0(SynchronousDispatcher.java:135) at org.jboss.resteasy.core.interception.PreMatchContainerRequestContext.filter(PreMatchContainerRequestContext.java:356) at org.jboss.resteasy.core.SynchronousDispatcher.preprocess(SynchronousDispatcher.java:138) at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:215) at org.jboss.resteasy.plugins.server.servlet.ServletContainerDispatcher.service(ServletContainerDispatcher.java:227) at com.enonic.xp.jaxrs.impl.JaxRsServlet.service(JaxRsServlet.java:42) at javax.servlet.http.HttpServlet.service(HttpServlet.java:790) at com.enonic.xp.web.impl.dispatch.mapping.ServletDefinitionImpl.service(ServletDefinitionImpl.java:40) at com.enonic.xp.web.impl.dispatch.pipeline.ServletPipelineImpl.service(ServletPipelineImpl.java:40) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:45) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36) at com.enonic.xp.portal.impl.idprovider.IdProviderFilter.doHandle(IdProviderFilter.java:45) at com.enonic.xp.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:31) at com.enonic.xp.web.filter.BaseWebFilter.doFilter(BaseWebFilter.java:33) at com.enonic.xp.web.impl.dispatch.mapping.FilterDefinitionImpl.doFilter(FilterDefinitionImpl.java:41) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:50) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36) at com.enonic.xp.web.impl.auth.BasicAuthFilter.doHandle(BasicAuthFilter.java:34) at com.enonic.xp.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:31) at com.enonic.xp.web.filter.BaseWebFilter.doFilter(BaseWebFilter.java:33) at com.enonic.xp.web.impl.dispatch.mapping.FilterDefinitionImpl.doFilter(FilterDefinitionImpl.java:41) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:50) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36) at com.enonic.xp.web.impl.context.ContextFilter.lambda$doHandle$0(ContextFilter.java:33) at com.enonic.xp.context.ContextImpl.callWith(ContextImpl.java:102) at com.enonic.xp.web.impl.context.ContextFilter.doHandle(ContextFilter.java:32) at com.enonic.xp.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:31) at com.enonic.xp.web.filter.BaseWebFilter.doFilter(BaseWebFilter.java:33) at com.enonic.xp.web.impl.dispatch.mapping.FilterDefinitionImpl.doFilter(FilterDefinitionImpl.java:41) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:50) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36) at com.enonic.xp.web.vhost.impl.VirtualHostFilter.doHandle(VirtualHostFilter.java:60) at com.enonic.xp.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:31) at com.enonic.xp.web.filter.BaseWebFilter.doFilter(BaseWebFilter.java:33) at com.enonic.xp.web.impl.dispatch.mapping.FilterDefinitionImpl.doFilter(FilterDefinitionImpl.java:41) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:50) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36) at com.enonic.xp.web.impl.dos.DosFilterWrapper.doFilter(DosFilterWrapper.java:65) at com.enonic.xp.web.impl.dispatch.mapping.FilterDefinitionImpl.doFilter(FilterDefinitionImpl.java:41) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:50) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36) at org.eclipse.jetty.servlets.HeaderFilter.doFilter(HeaderFilter.java:117) at com.enonic.xp.web.impl.header.HeaderFilterWrapper.doHandle(HeaderFilterWrapper.java:51) at com.enonic.xp.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:31) at com.enonic.xp.web.filter.BaseWebFilter.doFilter(BaseWebFilter.java:33) at com.enonic.xp.web.impl.dispatch.mapping.FilterDefinitionImpl.doFilter(FilterDefinitionImpl.java:41) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:50) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36) at com.enonic.xp.web.impl.dispatch.pipeline.FilterPipelineImpl.filter(FilterPipelineImpl.java:39) at com.enonic.xp.web.impl.dispatch.DispatchServletImpl.service(DispatchServletImpl.java:52) at javax.servlet.http.HttpServlet.service(HttpServlet.java:790) at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:763) at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:551) at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:143) at org.eclipse.jetty.server.handler.gzip.GzipHandler.handle(GzipHandler.java:767) at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127) at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:235) at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:1610) at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:233) at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1369) at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:188) at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:489) at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:1580) at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:186) at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1284) at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141) at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:221) at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127) at com.codahale.metrics.jetty9.InstrumentedHandler.handle(InstrumentedHandler.java:249) at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127) at org.eclipse.jetty.server.Server.handle(Server.java:501) at org.eclipse.jetty.server.HttpChannel.lambda$handle$1(HttpChannel.java:383) at org.eclipse.jetty.server.HttpChannel.dispatch(HttpChannel.java:556) at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:375) at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:273) at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:311) at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:103) at org.eclipse.jetty.io.ChannelEndPoint$1.run(ChannelEndPoint.java:104) at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.runTask(EatWhatYouKill.java:336) at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.doProduce(EatWhatYouKill.java:313) at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.tryProduce(EatWhatYouKill.java:171) at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.run(EatWhatYouKill.java:129) at org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run(ReservedThreadExecutor.java:375) at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:806) at org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run(QueuedThreadPool.java:938) at java.base/java.lang.Thread.run(Thread.java:834)  ```</body>
		<created>2020-08-03 07:17:19</created>
		<closed>2020-08-11 12:12:05</closed>
	</bug>
	<bug>
		<id>8262</id>
		<title>POC: tree structures don't get synched after deletion</title>
		<body></body>
		<created>2020-08-03 06:33:14</created>
		<closed>2020-08-11 12:12:03</closed>
	</bug>
	<bug>
		<id>8260</id>
		<title>POC: inherited site doesn't contain template until first scheduled sync</title>
		<body>'Preview not available' has shown for inherited site first minute after it was created.</body>
		<created>2020-07-30 13:05:00</created>
		<closed>2020-08-11 12:12:03</closed>
	</bug>
	<bug>
		<id>8257</id>
		<title>POC: invalid content comparison during scheduled sync</title>
		<body>extra content fields should be removed from comparison.</body>
		<created>2020-07-29 11:38:19</created>
		<closed>2020-08-11 12:12:03</closed>
	</bug>
	<bug>
		<id>8225</id>
		<title>Content API crashes on create</title>
		<body>While debugging the formbuilder-app noticed that its crashes on 7.3 while the same code does not on 7.2.  The crash is caused by content api:  ``` contentLib.create({         name: '_attachments',         parentPath: "/",         displayName: '_attachments',         draft: true,         contentType: 'base:folder',         data: {},         branch: 'draft'       }); ```  Reproduce, install the formbuilder app on a clean 7.2 sandbox Then create a form with a file input.  Try to submit the form -&gt; no crash.  Upgrade the sand to 7.3 Form submit -&gt; crash  Stack trace:  &lt;details&gt;&lt;summary&gt;Click to see stack trace&lt;/summary&gt;&lt;p&gt;&lt;code&gt; 2020-07-13 14:54:46,638 ERROR c.e.x.p.i.e.ExceptionRendererImpl - BaseSchemaName can't be null com.enonic.xp.web.WebException: BaseSchemaName can't be null         at com.enonic.xp.web.impl.exception.ExceptionMapperImpl.map(ExceptionMapperImpl.java:33)         at com.enonic.xp.portal.handler.BasePortalHandler.handleError(BasePortalHandler.java:60)         at com.enonic.xp.portal.handler.BasePortalHandler.doHandle(BasePortalHandler.java:52)         at com.enonic.xp.web.handler.BaseWebHandler.handle(BaseWebHandler.java:66)         at com.enonic.xp.web.impl.handler.WebHandlerChainImpl.handle(WebHandlerChainImpl.java:30)         at com.enonic.xp.web.handler.BaseWebHandler.handle(BaseWebHandler.java:75)         at com.enonic.xp.web.impl.handler.WebHandlerChainImpl.handle(WebHandlerChainImpl.java:30)         at com.enonic.xp.web.handler.BaseWebHandler.handle(BaseWebHandler.java:75)         at com.enonic.xp.web.impl.handler.WebHandlerChainImpl.handle(WebHandlerChainImpl.java:30)         at com.enonic.xp.web.impl.trace.TraceWebFilter.doHandle(TraceWebFilter.java:38)         at com.enonic.xp.web.handler.BaseWebHandler.handle(BaseWebHandler.java:66)         at com.enonic.xp.web.impl.handler.WebHandlerChainImpl.handle(WebHandlerChainImpl.java:30)         at com.enonic.xp.web.impl.handler.WebDispatcherImpl.dispatch(WebDispatcherImpl.java:44)         at com.enonic.xp.web.impl.handler.WebDispatcherServlet.doHandle(WebDispatcherServlet.java:142)         at com.enonic.xp.web.impl.handler.WebDispatcherServlet.service(WebDispatcherServlet.java:70)         at javax.servlet.http.HttpServlet.service(HttpServlet.java:790)         at com.enonic.xp.web.impl.dispatch.mapping.ServletDefinitionImpl.service(ServletDefinitionImpl.java:40)         at com.enonic.xp.web.impl.dispatch.pipeline.ServletPipelineImpl.service(ServletPipelineImpl.java:40)         at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:45)         at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36)         at com.enonic.xp.portal.impl.idprovider.IdProviderFilter.doHandle(IdProviderFilter.java:45)         at com.enonic.xp.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:31)         at com.enonic.xp.web.filter.BaseWebFilter.doFilter(BaseWebFilter.java:33)         at com.enonic.xp.web.impl.dispatch.mapping.FilterDefinitionImpl.doFilter(FilterDefinitionImpl.java:41)         at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:50)         at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36)         at com.enonic.xp.web.impl.auth.BasicAuthFilter.doHandle(BasicAuthFilter.java:34)         at com.enonic.xp.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:31)         at com.enonic.xp.web.filter.BaseWebFilter.doFilter(BaseWebFilter.java:33)         at com.enonic.xp.web.impl.dispatch.mapping.FilterDefinitionImpl.doFilter(FilterDefinitionImpl.java:41)         at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:50)         at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36)         at com.enonic.xp.web.impl.context.ContextFilter.lambda$doHandle$0(ContextFilter.java:33)         at com.enonic.xp.context.ContextImpl.callWith(ContextImpl.java:102)         at com.enonic.xp.web.impl.context.ContextFilter.doHandle(ContextFilter.java:32)         at com.enonic.xp.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:31)         at com.enonic.xp.web.filter.BaseWebFilter.doFilter(BaseWebFilter.java:33)         at com.enonic.xp.web.impl.dispatch.mapping.FilterDefinitionImpl.doFilter(FilterDefinitionImpl.java:41)         at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:50)         at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36)         at com.enonic.xp.web.vhost.impl.VirtualHostFilter.doHandle(VirtualHostFilter.java:60)         at com.enonic.xp.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:31)         at com.enonic.xp.web.filter.BaseWebFilter.doFilter(BaseWebFilter.java:33)         at com.enonic.xp.web.impl.dispatch.mapping.FilterDefinitionImpl.doFilter(FilterDefinitionImpl.java:41)         at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:50)         at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36)         at com.enonic.xp.web.impl.dos.DosFilterWrapper.doFilter(DosFilterWrapper.java:65)         at com.enonic.xp.web.impl.dispatch.mapping.FilterDefinitionImpl.doFilter(FilterDefinitionImpl.java:41)         at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:50)         at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36)         at org.eclipse.jetty.servlets.HeaderFilter.doFilter(HeaderFilter.java:117)         at com.enonic.xp.web.impl.header.HeaderFilterWrapper.doHandle(HeaderFilterWrapper.java:51)         at com.enonic.xp.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:31)         at com.enonic.xp.web.filter.BaseWebFilter.doFilter(BaseWebFilter.java:33)         at com.enonic.xp.web.impl.dispatch.mapping.FilterDefinitionImpl.doFilter(FilterDefinitionImpl.java:41)         at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:50)         at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36)         at com.enonic.xp.web.impl.dispatch.pipeline.FilterPipelineImpl.filter(FilterPipelineImpl.java:39)         at com.enonic.xp.web.impl.dispatch.DispatchServletImpl.service(DispatchServletImpl.java:52)         at javax.servlet.http.HttpServlet.service(HttpServlet.java:790)         at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:763)         at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:551)         at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:143)         at org.eclipse.jetty.server.handler.gzip.GzipHandler.handle(GzipHandler.java:717)         at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127)         at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:235)         at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:1610)         at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:233)         at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1363)         at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:188)         at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:489)         at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:1580)         at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:186)         at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1278)         at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)         at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:221)         at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127)         at com.codahale.metrics.jetty9.InstrumentedHandler.handle(InstrumentedHandler.java:249)         at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127)         at org.eclipse.jetty.server.Server.handle(Server.java:500)         at org.eclipse.jetty.server.HttpChannel.lambda$handle$1(HttpChannel.java:383)         at org.eclipse.jetty.server.HttpChannel.dispatch(HttpChannel.java:547)         at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:375)         at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:273)         at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:311)         at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:103)         at org.eclipse.jetty.io.ChannelEndPoint$2.run(ChannelEndPoint.java:117)         at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.runTask(EatWhatYouKill.java:336)         at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.doProduce(EatWhatYouKill.java:313)         at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.tryProduce(EatWhatYouKill.java:171)         at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.run(EatWhatYouKill.java:129)         at org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run(ReservedThreadExecutor.java:375)         at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:806)         at org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run(QueuedThreadPool.java:938)         at java.base/java.lang.Thread.run(Thread.java:834) Caused by: com.enonic.xp.resource.ResourceProblemException: BaseSchemaName can't be null         at com.enonic.xp.resource.ResourceProblemException$Builder.build(ResourceProblemException.java:131)         at com.enonic.xp.script.impl.util.ErrorHelper.doHandleException(ErrorHelper.java:54)         at com.enonic.xp.script.impl.util.ErrorHelper.handleError(ErrorHelper.java:27)         at com.enonic.xp.script.impl.value.FunctionScriptValue.call(FunctionScriptValue.java:41)         at com.enonic.xp.script.impl.executor.ScriptExportsImpl.executeMethod(ScriptExportsImpl.java:59)         at com.enonic.xp.portal.impl.controller.ControllerScriptImpl.doExecute(ControllerScriptImpl.java:71)         at com.enonic.xp.portal.impl.controller.ControllerScriptImpl.lambda$execute$0(ControllerScriptImpl.java:36)         at com.enonic.xp.trace.Tracer.traceEx(Tracer.java:72)         at com.enonic.xp.trace.Tracer.trace(Tracer.java:51)         at com.enonic.xp.trace.Tracer.trace(Tracer.java:98)         at com.enonic.xp.portal.impl.controller.ControllerScriptImpl.execute(ControllerScriptImpl.java:36)         at com.enonic.xp.portal.impl.rendering.DescriptorBasedComponentRenderer.doRender(DescriptorBasedComponentRenderer.java:75)         at com.enonic.xp.portal.impl.rendering.DescriptorBasedComponentRenderer.render(DescriptorBasedComponentRenderer.java:43)         at com.enonic.xp.portal.impl.rendering.DescriptorBasedComponentRenderer.render(DescriptorBasedComponentRenderer.java:22)         at com.enonic.xp.portal.impl.rendering.RendererDelegateImpl.lambda$render$1(RendererDelegateImpl.java:40)         at java.base/java.util.Optional.map(Optional.java:265)         at com.enonic.xp.portal.impl.rendering.RendererDelegateImpl.render(RendererDelegateImpl.java:40)         at com.enonic.xp.portal.impl.handler.render.ComponentHandlerWorker.execute(ComponentHandlerWorker.java:123)         at com.enonic.xp.portal.impl.handler.render.ComponentHandler.doHandle(ComponentHandler.java:66)         at com.enonic.xp.portal.impl.handler.render.ComponentHandler.doHandle(ComponentHandler.java:23)         at com.enonic.xp.web.handler.BaseWebHandler.handle(BaseWebHandler.java:66)         at com.enonic.xp.web.impl.handler.WebHandlerChainImpl.handle(WebHandlerChainImpl.java:30)         at com.enonic.xp.web.handler.BaseWebHandler.handle(BaseWebHandler.java:75)         at com.enonic.xp.web.impl.handler.WebHandlerChainImpl.handle(WebHandlerChainImpl.java:30)         at com.enonic.xp.web.handler.BaseWebHandler.handle(BaseWebHandler.java:75)         at com.enonic.xp.web.impl.handler.WebHandlerChainImpl.handle(WebHandlerChainImpl.java:30)         at com.enonic.xp.web.handler.BaseWebHandler.handle(BaseWebHandler.java:75)         at com.enonic.xp.web.impl.handler.WebHandlerChainImpl.handle(WebHandlerChainImpl.java:30)         at com.enonic.xp.web.handler.BaseWebHandler.handle(BaseWebHandler.java:75)         at com.enonic.xp.web.impl.handler.WebHandlerChainImpl.handle(WebHandlerChainImpl.java:30)         at com.enonic.xp.web.handler.BaseWebHandler.handle(BaseWebHandler.java:75)         at com.enonic.xp.web.impl.handler.WebHandlerChainImpl.handle(WebHandlerChainImpl.java:30)         at com.enonic.xp.web.handler.BaseWebHandler.handle(BaseWebHandler.java:75)         at com.enonic.xp.web.impl.handler.WebHandlerChainImpl.handle(WebHandlerChainImpl.java:30)         at com.enonic.xp.web.handler.BaseWebHandler.handle(BaseWebHandler.java:75)         at com.enonic.xp.web.impl.handler.WebHandlerChainImpl.handle(WebHandlerChainImpl.java:30)         at com.enonic.xp.web.handler.BaseWebHandler.handle(BaseWebHandler.java:75)         at com.enonic.xp.web.impl.handler.WebHandlerChainImpl.handle(WebHandlerChainImpl.java:30)         at com.enonic.xp.portal.handler.BasePortalHandler.doHandle(BasePortalHandler.java:46)         ... 92 common frames omitted Caused by: java.lang.NullPointerException: BaseSchemaName can't be null         at com.google.common.base.Preconditions.checkNotNull(Preconditions.java:895)         at com.enonic.xp.schema.BaseSchemaName.&lt;init&gt;(BaseSchemaName.java:21)         at com.enonic.xp.schema.content.ContentTypeName.&lt;init&gt;(ContentTypeName.java:61)         at com.enonic.xp.schema.content.ContentTypeName.from(ContentTypeName.java:329)         at com.enonic.xp.core.impl.content.serializer.ContentDataSerializer.fromData(ContentDataSerializer.java:171)         at com.enonic.xp.core.impl.content.ContentNodeTranslator.doTranslate(ContentNodeTranslator.java:77)         at com.enonic.xp.core.impl.content.ContentNodeTranslator.fromNode(ContentNodeTranslator.java:49)         at com.enonic.xp.core.impl.content.GetContentByPathCommand.execute(GetContentByPathCommand.java:35)         at com.enonic.xp.core.impl.content.AbstractContentCommand.getContent(AbstractContentCommand.java:61)         at com.enonic.xp.core.impl.content.CreateContentCommand.getDefaultLanguage(CreateContentCommand.java:330)         at com.enonic.xp.core.impl.content.CreateContentCommand.populateLanguage(CreateContentCommand.java:318)         at com.enonic.xp.core.impl.content.CreateContentCommand.createContentTranslatorParams(CreateContentCommand.java:268)         at com.enonic.xp.core.impl.content.CreateContentCommand.doExecute(CreateContentCommand.java:109)         at com.enonic.xp.core.impl.content.CreateContentCommand.execute(CreateContentCommand.java:96)         at com.enonic.xp.core.impl.content.CreateMediaCommand.doExecute(CreateMediaCommand.java:118)         at com.enonic.xp.core.impl.content.CreateMediaCommand.execute(CreateMediaCommand.java:54)         at com.enonic.xp.core.impl.content.ContentServiceImpl.create(ContentServiceImpl.java:291)         at com.enonic.xp.lib.content.CreateMediaHandler.doExecute(CreateMediaHandler.java:48)         at com.enonic.xp.lib.content.BaseContextHandler.execute(BaseContextHandler.java:14)         at jdk.scripting.nashorn.scripts/jdk.nashorn.internal.scripts.Script$Recompilation$562$15434A$content.L:1#createMedia(com.enonic.app.formbuilder:/lib/xp/content.js:401)         at jdk.scripting.nashorn.scripts/jdk.nashorn.internal.scripts.Script$Recompilation$561$8658$form_response.L:1#saveFile#result(com.enonic.app.formbuilder:/lib/form-builder/form-response.js:249)         at jdk.nashorn.javaadapters.java_util_concurrent_Callable.call(Unknown Source)         at com.enonic.xp.context.ContextImpl.callWith(ContextImpl.java:102)         at com.enonic.xp.lib.context.ContextHandlerBean.run(ContextHandlerBean.java:36)         at jdk.scripting.nashorn.scripts/jdk.nashorn.internal.scripts.Script$Recompilation$383$1216AA$context.L:1#run(com.enonic.app.formbuilder:/lib/xp/context.js:56)         at jdk.scripting.nashorn.scripts/jdk.nashorn.internal.scripts.Script$Recompilation$553$1566AA$form_response.L:1#runAsSu(com.enonic.app.formbuilder:/lib/form-builder/form-response.js:42)         at jdk.scripting.nashorn.scripts/jdk.nashorn.internal.scripts.Script$Recompilation$559$8354AAA$form_response.L:1#saveFile(com.enonic.app.formbuilder:/lib/form-builder/form-response.js:246) &lt;/code&gt;&lt;/p&gt;&lt;/details&gt; </body>
		<created>2020-07-13 13:10:16</created>
		<closed>2020-07-28 12:05:05</closed>
	</bug>
	<bug>
		<id>8210</id>
		<title>WebRequest "deduplicates" equal query params</title>
		<body>https://discuss.enonic.com/t/error-in-request-of-multiples-parameters-with-same-name-and-value/2259/2  `a=1&amp;a=1&amp;a=2` ends up with same prams is if query string would be  `a=1&amp;a=2`</body>
		<created>2020-07-09 06:57:54</created>
		<closed>2020-07-15 11:43:46</closed>
	</bug>
	<bug>
		<id>8195</id>
		<title>Exclude node name form JSESSIONID entirely</title>
		<body>#8175 removes it partially. but after this comment https://github.com/eclipse/jetty.project/issues/5003#issuecomment-652668197 we better remove it entirely.</body>
		<created>2020-07-03 14:19:10</created>
		<closed>2020-07-15 11:43:23</closed>
	</bug>
	<bug>
		<id>8191</id>
		<title>Project meta-data gets lost after dump restore</title>
		<body>After taking a dump and importing it into another instance, project meta-data gets lost on the way. Repositories and data get restored fine, but project meta-data is missing, so projects are not shown anywhere in the UI.  Before dump (target server): ![image](https://user-images.githubusercontent.com/11612490/86243479-c1496780-bba6-11ea-8e2b-c1ca1e6dadde.png)  After dump (source server): ![image](https://user-images.githubusercontent.com/11612490/86243417-a4149900-bba6-11ea-9ed1-2a6ab10139b1.png) </body>
		<created>2020-07-01 12:26:59</created>
		<closed>2020-07-15 11:43:20</closed>
	</bug>
	<bug>
		<id>8190</id>
		<title>PublishInfo is missing in `getVersionsForView` API</title>
		<body>We currently return the following fields in [publishInfo](https://github.com/enonic/xp/blob/02c27721fbab69b89480173110c282469afc2723/modules/core/core-api/src/main/java/com/enonic/xp/content/ContentVersionPublishInfo.java#L8) object of `getVersionsForView` API: `message`, `publisher`, `publisherDisplayName` and `timestamp`. We need these two fields added (from [ContentPublishInfo](https://github.com/enonic/xp/blob/master/modules/core/core-api/src/main/java/com/enonic/xp/content/ContentPublishInfo.java)): `publishFrom`, `publishTo`</body>
		<created>2020-06-30 14:45:32</created>
		<closed>2020-09-08 11:59:27</closed>
	</bug>
	<bug>
		<id>8176</id>
		<title>set system.hazelcast.initial.min.cluster.size to 2</title>
		<body>Hazelcast is only used in clustered environment. `system.hazelcast.initial.min.cluster.size=2` will ensure that "blind" cluster update from 7.3 to 7.4 (without opening hazelcast port between nodes) will issue messages in logs, and XP cluster won't start in split-brain condition.  For clusters with 6 nodes `system.hazelcast.initial.min.cluster.size` should be at least 4 but since we support clusters with 3 nodes - 2 is the default value we should use.</body>
		<created>2020-06-26 09:34:11</created>
		<closed>2020-06-30 12:57:42</closed>
	</bug>
	<bug>
		<id>8175</id>
		<title>Don't append nodename to JSESSIONID</title>
		<body>JSESSIONID currently generated like  `&lt;nodename&gt;-&lt;random&gt;.&lt;nodename&gt;`  Part before dot - is actual sessionid.  When request goes to a different node it sees difference in extended part of JSESSIONID and issues new one, but keeps the session.  When distributed sessions are enabled and no sticky sessions are used in creates annecessery JSESSIONID change for almost every request.  We shouldn't append `.&lt;nodename&gt;` to JSESSIONID</body>
		<created>2020-06-26 09:27:40</created>
		<closed>2020-06-30 12:57:42</closed>
	</bug>
	<bug>
		<id>8172</id>
		<title>Dump restore (aka load) and  Snapshot restore cause XP repository inconsistency</title>
		<body>Currently dump restore tries to do magic: - uninstalls global apps (mostly to notify CS) - deletes everything - applies everything from dump - installs global apps This magic almost works, but doesn't take into account caches and incomplete dumps (read audit log). Theoretically we could make "restart" automatic (it is OSGi, baby). Practically it would require a lot of refactoring, yet this functionality will stay fragile. And all of it for not so often used restore.   Alternative solution would be to document it: dump restore requires restart. In addition issue a warning in logs stating that entire cluster must be restarted.  Same applies for snapshot restore. But "magic" is slightly different: - indices are closed - method waits for cluster do go down aka `RED`  (Out of scope: theoretically may end up waiting infinitely, or worse: perceive cluster glitch as a "ready for action" signal) - snapshot gets restored - indices are opened  (Out of scope: may fail for various reasonы and cause cluster to become unusable. similar to #7328 #5422)  if system-repo was part of restore data in some caches and in elasticsearch becomes inconsistent. To address this nodes listen for restore events and cleanup some caches (like node path cache and repository cache). But many other states stay populated: nonexistent global apps still left installed, task threads still run old applications code, etc. Such solution is also fragile: it piggybacks on controversial fact that RED cluster de-initializes many (but not all) OSGi services. </body>
		<created>2020-06-21 11:01:25</created>
		<closed>2020-07-28 12:05:07</closed>
	</bug>
	<bug>
		<id>8171</id>
		<title>libs compile dependency on XP Java api(s) repackage XP classes</title>
		<body>It is not affecting core libs (check that, please), but create hard to debug classloader issues for libs in dedicated git repositories. Recent example: enonic/app-snapshotter#12  Need to go through all lib repositories and change api dependencies from `compile` to `compileOnly`.  A side effect: applications that still use Java API directly may stop compiling, but it is better that they have a floating cloassloader bug. Such applications should specify api dependency directly and not rely on lib transitive dependencies.  Related issues: - [x] [lib-graphql](https://github.com/enonic/lib-graphql/issues/40) - [x] [lib-xslt](https://github.com/enonic/lib-xslt/issues/8)  - [x] [lib-react4xp](https://github.com/enonic/lib-react4xp/issues/75)  - [x] [lib-geoip](https://github.com/enonic/lib-geoip/issues/3) - [x] [lib-markdown](https://github.com/enonic/lib-markdown/issues/6) - [x] [lib-git](https://github.com/enonic/lib-git/issues/1) - not published - [x] [lib-apibuilder](https://github.com/enonic/lib-apibuilder/issues/1) - not published - [x] [lib-sql](https://github.com/enonic/lib-sql/issues/13) - [x] [lib-license](https://github.com/enonic/lib-license/issues/17) - [x] [lib-qrcode](https://github.com/enonic/lib-qrcode/issues/4) - [x] [lib-router](https://github.com/enonic/lib-router/issues/13) - [x] [lib-mustache](https://github.com/enonic/lib-mustache/issues/11) - [x] [lib-thymeleaf](https://github.com/enonic/lib-thymeleaf/issues/16)</body>
		<created>2020-06-21 10:23:39</created>
		<closed>2020-08-25 12:55:57</closed>
	</bug>
	<bug>
		<id>8159</id>
		<title>Endless loop when calling application market</title>
		<body>How to reproduce:  Running Any OS, any browser Start clean sandbox with ~~7.3.0~~ 7.2.4 also affected "login" to admin Complete wizard by installing the tree apps Wait ~8 minutes minutes  Result:  100% CPU</body>
		<created>2020-06-16 06:29:48</created>
		<closed>2020-07-28 12:05:05</closed>
	</bug>
	<bug>
		<id>8152</id>
		<title>Regression: ReadImageParams mimeType required</title>
		<body>#8005 made mimeType required value in `ReadImageParams` in 7.3 It is broke office league image rendering. Instead mime type should be optional and fallback to format parameter (it is a very small subset of formats supported) </body>
		<created>2020-06-11 08:23:11</created>
		<closed>2020-06-16 12:15:46</closed>
	</bug>
	<bug>
		<id>8149</id>
		<title>Default value from schema overwrites explicit property value in lib-content.create()</title>
		<body>Content type schema: ```xml &lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt; &lt;content-type&gt;   &lt;display-name&gt;Date&lt;/display-name&gt;   &lt;super-type&gt;base:structured&lt;/super-type&gt;   &lt;form&gt;     &lt;input name="date" type="Date"&gt;       &lt;label&gt;Date&lt;/label&gt;       &lt;indexed&gt;true&lt;/indexed&gt;       &lt;occurrences minimum="1" maximum="1"/&gt;       &lt;default&gt;2000-01-01&lt;/default&gt;     &lt;/input&gt;   &lt;/form&gt; &lt;/content-type&gt; ```  Create new content of this type:  ```Javascript var contentLib = require('/lib/xp/content');  var content = contentLib.create({     name: 'myContent',     parentPath: '/',     displayName: 'My Content',     contentType: 'com.enonic.app.mytype:date',     data: {         "date": "2020-06-02"     } }); ```  Here we explicitly say that the new content should have value _2020-06-02_ in the `date` field, but content is still created with default value _2000-01-01_</body>
		<created>2020-06-10 14:43:35</created>
		<closed>2020-06-30 12:57:40</closed>
	</bug>
	<bug>
		<id>8139</id>
		<title>Users with Owner or Editor roles can not be assigned to issues</title>
		<body>@sgauruseu commented on [Fri Jun 05 2020](https://github.com/enonic/app-contentstudio/issues/1917)  1. Create a user (Administration Console Login) 2. Create a project , add just created user in Roles and select `Owner` 3. Select the project context , add a site. 4. Select the site and open Request Publishing dialog , type  a changes and select the owner in Assignees   ![image](https://user-images.githubusercontent.com/3728712/83868053-ec20d700-a732-11ea-8d18-7dbc4a33ad86.png)   **BUG:  User with Owner role is filtered in Assignees  after creating the issue**   ![image](https://user-images.githubusercontent.com/3728712/83868200-27bba100-a733-11ea-94b0-641e2a26d546.png)   com.enonic.xp.exception.ForbiddenAccessException: Access denied to user [user:system:owner1] ''owner1'' at com.enonic.xp.repo.impl.repository.RepositoryServiceImpl.requireAdminRole(RepositoryServiceImpl.java:332) at com.enonic.xp.repo.impl.repository.RepositoryServiceImpl.getBinary(RepositoryServiceImpl.java:314) at com.enonic.xp.admin.impl.rest.resource.project.icon.ProjectIconResource.getContentIcon(ProjectIconResource.java:59) at jdk.internal.reflect.GeneratedMethodAccessor249.invoke(Unknown Source) at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.base/java.lang.reflect.Method.invoke(Method.java:566) at org.jboss.resteasy.core.MethodInjectorImpl.invoke(MethodInjectorImpl.java:138) at org.jboss.resteasy.core.ResourceMethodInvoker.internalInvokeOnTarget(ResourceMethodInvoker.java:526) at org.jboss.resteasy.core.ResourceMethodInvoker.invokeOnTargetAfterFilter(ResourceMethodInvoker.java:415) at org.jboss.resteasy.core.ResourceMethodInvoker.lambda$invokeOnTarget$0(ResourceMethodInvoker.java:376) at org.jboss.resteasy.core.interception.PreMatchContainerRequestContext.filter(PreMatchContainerRequestContext.java:356) at org.jboss.resteasy.core.ResourceMethodInvoker.invokeOnTarget(ResourceMethodInvoker.java:378) at org.jboss.resteasy.core.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:347) at org.jboss.resteasy.core.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:320) at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:440) at org.jboss.resteasy.core.SynchronousDispatcher.lambda$invoke$4(SynchronousDispatcher.java:229) at org.jboss.resteasy.core.SynchronousDispatcher.lambda$preprocess$0(SynchronousDispatcher.java:135) at org.jboss.resteasy.core.interception.PreMatchContainerRequestContext.filter(PreMatchContainerRequestContext.java:356) at org.jboss.resteasy.core.SynchronousDispatcher.preprocess(SynchronousDispatcher.java:138) at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:215) at org.jboss.resteasy.plugins.server.servlet.ServletContainerDispatcher.service(ServletContainerDispatcher.java:227) at com.enonic.xp.jaxrs.impl.JaxRsServlet.service(JaxRsServlet.java:42) at javax.servlet.http.HttpServlet.service(HttpServlet.java:790) at com.enonic.xp.web.impl.dispatch.mapping.ServletDefinitionImpl.service(ServletDefinitionImpl.java:40) at com.enonic.xp.web.impl.dispatch.pipeline.ServletPipelineImpl.service(ServletPipelineImpl.java:40) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:45) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36) at com.enonic.xp.portal.impl.idprovider.IdProviderFilter.doHandle(IdProviderFilter.java:45) at com.enonic.xp.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:31) at com.enonic.xp.web.filter.BaseWebFilter.doFilter(BaseWebFilter.java:33) at com.enonic.xp.web.impl.dispatch.mapping.FilterDefinitionImpl.doFilter(FilterDefinitionImpl.java:41) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:50) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36) at com.enonic.xp.web.impl.auth.BasicAuthFilter.doHandle(BasicAuthFilter.java:34) at com.enonic.xp.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:31) at com.enonic.xp.web.filter.BaseWebFilter.doFilter(BaseWebFilter.java:33) at com.enonic.xp.web.impl.dispatch.mapping.FilterDefinitionImpl.doFilter(FilterDefinitionImpl.java:41) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:50) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36) at com.enonic.xp.web.impl.context.ContextFilter.lambda$doHandle$0(ContextFilter.java:33) at com.enonic.xp.context.ContextImpl.callWith(ContextImpl.java:102) at com.enonic.xp.web.impl.context.ContextFilter.doHandle(ContextFilter.java:32) at com.enonic.xp.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:31) at com.enonic.xp.web.filter.BaseWebFilter.doFilter(BaseWebFilter.java:33) at com.enonic.xp.web.impl.dispatch.mapping.FilterDefinitionImpl.doFilter(FilterDefinitionImpl.java:41) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl  </body>
		<created>2020-06-06 23:34:56</created>
		<closed>2020-06-16 12:15:42</closed>
	</bug>
	<bug>
		<id>8132</id>
		<title>Link to issue details is missing project context</title>
		<body>@alansemenov commented on [Fri Jun 05 2020](https://github.com/enonic/app-contentstudio/issues/1918)  When an issue is created we send out an email with issue details which contains a link to open the issue in the browser. This link is now missing the project context and user has to choose one after clicking the link.  </body>
		<created>2020-06-05 11:31:47</created>
		<closed>2020-06-16 12:15:43</closed>
	</bug>
	<bug>
		<id>8131</id>
		<title>Component names: regression bug</title>
		<body>![image](https://user-images.githubusercontent.com/2891483/83868149-ad871e80-a72a-11ea-8b76-117465ae3045.png)  regression of #7634</body>
		<created>2020-06-05 10:48:00</created>
		<closed>2020-06-16 12:15:45</closed>
	</bug>
	<bug>
		<id>8130</id>
		<title>readAccess parameter is not used in lib-project.create()</title>
		<body>When a new project is created via `lib-project.create()`, it will always be created as _private_. `system.everyone` won't be given permissions on the root content, despite passing `public: true` in `readAccess`. Works correctly when a project is created from UI.  ```Javascript var projectLib = require('/lib/xp/project'); projectLib.create({     id: 'sample-blog',     displayName: 'Superhero Blog',     description: 'Sample blog site on Enonic XP',     language: 'en',     readAccess: {         public: true     } }); ```  ![image](https://user-images.githubusercontent.com/11612490/83865854-1ff5ff80-a727-11ea-937a-2a269501a4cd.png) </body>
		<created>2020-06-05 10:23:08</created>
		<closed>2020-06-05 14:38:06</closed>
	</bug>
	<bug>
		<id>8129</id>
		<title>Wrong message when insufficient permissions to change project access mode</title>
		<body>**Case 1  - User is Editor** 1. Create a project(Private access mode) and create new user(Administration Console Login)  2. Select in the project new created user as `Editor`   this user has 2 roles now :  ![image](https://user-images.githubusercontent.com/3728712/83856720-a9570300-a722-11ea-8ab1-7c17eeec71f5.png)  3. Log in with the user and open this project  4. Update access mode to public 5. Save button is disabled - OK 6. Click on close icon and try to close  the project wizard. Confirmation Dialog appears - click on Yes button  BUG:  Access mode is updated after Yes was clicked in Confirmation Dialog    ![image](https://user-images.githubusercontent.com/3728712/83857204-4fa30880-a723-11ea-8e63-6c145d545c8e.png)   **Case 2 - User is Contributor**  Do steps from Case 1 , but with `contributor` user BUG: Access mode is not updated , but  error notification message appears:  ![image](https://user-images.githubusercontent.com/3728712/83857705-0a330b00-a724-11ea-8fcf-69a1d9072ef2.png)   **Case 3 - Login with user that has Author role** - Open the project and update a language. - Click on Close icon  then click on Yes butoon  **BUG: User with Author role should not update the language**   </body>
		<created>2020-06-05 09:00:44</created>
		<closed>2020-06-16 12:15:45</closed>
	</bug>
	<bug>
		<id>8127</id>
		<title>Project icon is not displayed for users with only project roles</title>
		<body>If user has only a project role (f.eks. Contributor) on a project, the icon won't be displayed due to the lack of permissions.  User with admin rights: ![image](https://user-images.githubusercontent.com/11612490/83753078-e612f380-a669-11ea-8cfb-0be8d93f5f07.png)  User with a project role and no admin rights: ![image](https://user-images.githubusercontent.com/11612490/83752998-c67bcb00-a669-11ea-9467-61fd1c2745fc.png) </body>
		<created>2020-06-04 11:50:15</created>
		<closed>2020-06-16 12:15:44</closed>
	</bug>
	<bug>
		<id>8120</id>
		<title>Text component name should be sanitised</title>
		<body>@sgauruseu commented on [Thu Jan 30 2020](https://github.com/enonic/app-contentstudio/issues/1455)  **Case 1** 1. Open Features , insert new text component  2. Insert  a macro in the text component and save the site.  **Expected: html code should be sanitized in that name**   ![image](https://user-images.githubusercontent.com/3728712/73450498-91d3cc00-4376-11ea-9a2a-acbaa735930b.png)    **500 Error appears after the text component  Saved as fragment**   ![image](https://user-images.githubusercontent.com/3728712/73458165-e92d6880-4385-11ea-92d4-d8f1b0f9508e.png)   Case 2: 1. Open Features , insert new text component  2. Insert  a table in the text component and save the site. 3. Save the text component as Fragment  Bug;:   a) empty display name is in new tab wizard:   ![image](https://user-images.githubusercontent.com/3728712/74024877-ca495a80-49b3-11ea-86d1-b44f74eed532.png)  b) Incorrect validation - this content should be invalid.   ![image](https://user-images.githubusercontent.com/3728712/74025222-81de6c80-49b4-11ea-896c-1df5e492215c.png)     </body>
		<created>2020-06-02 09:31:36</created>
		<closed>2020-06-08 08:07:15</closed>
	</bug>
	<bug>
		<id>8119</id>
		<title>App initialiser is called before default repository is created</title>
		<body>On a clean instance of XP (when `com.enonic.cms.default` is not created yet) it's important that Java initialiser in apps is called **after** the default repo is created. We have several apps (app-features, Headless starter) that create data via Java initialiser and if they are in "deploy" folder when clean XP is started, they will give NPE and fail to create data.  To test locally: 1. [Put this](https://repo.enonic.com/public/com/enonic/app/app-features/7.2.3-SNAPSHOT/app-features-7.2.3-SNAPSHOT.jar) into `deploy` folder 2. Stop XP 3. Delete `repo` folder 4. Start XP  ![image](https://user-images.githubusercontent.com/11612490/83270857-597bb780-a1c9-11ea-812d-d2ad17526eda.png) </body>
		<created>2020-05-29 14:28:56</created>
		<closed>2020-06-16 12:15:43</closed>
	</bug>
	<bug>
		<id>8114</id>
		<title>Concurrency issues during application reinstall</title>
		<body>This is an umbrella bug for  #7842 #7994 #8110 #8063  Could not clearly split the fixes into separate PRs </body>
		<created>2020-05-26 10:37:23</created>
		<closed>2020-06-02 12:21:01</closed>
	</bug>
	<bug>
		<id>8110</id>
		<title>LocaleService can cache empty locales and locale bundles </title>
		<body>After #5896  `LocaleServiceImpl` caches locales and locale bundles and invalidates them when application "stops". Unfortunately  `ResourceService` used internally gladly returns empty files list if application does not exist or its bundle is not started. This is an OK behavior and most of  `ResourceService` rely on it. But due to this LocaleServiceImpl caches empty locales and locale bundles when application does not exist or stopped.  There is also a race condition during application  redeploy when old locale bundles can be cached before new application has a chance to start. Only stop/start cycle can invalidate such cache.</body>
		<created>2020-05-22 17:24:28</created>
		<closed>2020-06-02 12:21:01</closed>
	</bug>
	<bug>
		<id>8106</id>
		<title>System dump archive NullPointerException when loading system dump from archive</title>
		<body>Trying to load a system dump with approximately 10000 content from 7.2.4 to 7.3.0 that was zipped by data toolbox:  ``` java.lang.NullPointerException: null at com.enonic.xp.repo.impl.dump.reader.AbstractDumpReader.readDumpMetaData(AbstractDumpReader.java:218) at com.enonic.xp.repo.impl.dump.reader.AbstractDumpReader.getDumpMeta(AbstractDumpReader.java:197) at com.enonic.xp.repo.impl.dump.DumpServiceImpl.load(DumpServiceImpl.java:284) at com.enonic.xp.impl.server.rest.task.LoadRunnableTask.doLoadFromSystemDump(LoadRunnableTask.java:151) at com.enonic.xp.impl.server.rest.task.LoadRunnableTask.run(LoadRunnableTask.java:79) at com.enonic.xp.impl.task.TaskWrapper.lambda$callTaskWithContext$0(TaskWrapper.java:90) at com.enonic.xp.context.ContextImpl.callWith(ContextImpl.java:102) at com.enonic.xp.impl.task.TaskWrapper.callTaskWithContext(TaskWrapper.java:89) at com.enonic.xp.impl.task.TaskWrapper.doRun(TaskWrapper.java:75) at com.enonic.xp.impl.task.TaskWrapper.run(TaskWrapper.java:59) at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) at java.base/java.lang.Thread.run(Unknown Source) ```  Zip available at: https://enonic.slack.com/archives/DPQ8SS89Z/p1590136424001200</body>
		<created>2020-05-22 08:34:20</created>
		<closed>2020-06-02 12:20:59</closed>
	</bug>
	<bug>
		<id>8100</id>
		<title>Project creation locks in cluster environment  </title>
		<body>Repeated message:  `INFO com.enonic.xp.init.Initializer - Waiting [1s] for com.enonic.cms.test repo to be initialized`</body>
		<created>2020-05-19 12:56:58</created>
		<closed>2020-06-02 12:21:02</closed>
	</bug>
	<bug>
		<id>8095</id>
		<title>NodeVersionQueryTranslator uses getSize() instead of getBatchSize()</title>
		<body>Looks like a typo, should be checked by tests.  Also fix in 6.15.</body>
		<created>2020-05-18 11:06:36</created>
		<closed>2020-05-19 11:53:13</closed>
	</bug>
	<bug>
		<id>8093</id>
		<title>VersionTableCleanupTask name is missing in vacuum result</title>
		<body></body>
		<created>2020-05-18 10:37:01</created>
		<closed>2020-05-19 11:53:13</closed>
	</bug>
	<bug>
		<id>8086</id>
		<title>Cluster health-check may cause applications inconsistencies</title>
		<body>When cluster health gets from healthy to unhealthy and back to healthy lots of OSGi services are re-created. But a some logic around Applications is done on Bundle level (with BundleTrackers/Customizers/Listeners), and they are not necessarily invalidated.</body>
		<created>2020-05-14 14:08:46</created>
		<closed>2020-07-28 12:05:07</closed>
	</bug>
	<bug>
		<id>8085</id>
		<title>Mock API requires resource extension </title>
		<body>**CURRENT SITUATION**  In order to mock parts of API we should register internal services in test. That is very difficult for end-user, because he has to know internal logic of services.  For example, we want to mock content lib.  ``` t.mock('/lib/xp/content', {   get: function(params) {     return { ... }   } }); ``` In this case we have to add mock for services which are called in the `get` method  ``` private ContentTypeService contentTypeService; private MixinService mixinService; private XDataService xDataService;  @Override public void initialize()     throws Exception {     super.initialize();      this.contentTypeService = Mockito.mock( ContentTypeService.class );     this.mixinService = Mockito.mock( MixinService.class );     this.xDataService = Mockito.mock( XDataService.class );      addService( ContentTypeService.class, this.contentTypeService );     addService( MixinService.class, this.mixinService );     addService( XDataService.class, this.xDataService );      Content content = ... // build content here      Mockito.when(contentService.getById( Mockito.any( ContentId.class ) ) ).thenReturn( content );     Mockito.when(contentService.getByPath( Mockito.any( ContentPath.class ) ) ).thenReturn( content ); } ``` **SHOULD BE**  When some method is mocked, then a call of real method of service/lib should be avoided and replaced with a method decorator.  Details of implementation should be discussed.</body>
		<created>2020-05-14 09:25:54</created>
		<closed>2020-06-02 12:21:02</closed>
	</bug>
	<bug>
		<id>8080</id>
		<title>Resolving image/fragment component name fails when attached content is not found</title>
		<body>ContentNotFound exception is thrown  @sgauruseu commented on [Wed Feb 05 2020](https://github.com/enonic/app-contentstudio/issues/1472)  Case 1 : 1. Open Features , open Page Component View and create new fragment from existing text component. Close the wizard. 2. Expand Features and delete just created fragment. 3. Select Features and click on Edit button. **Bug: Wizard page is not loaded, error in browser console.**  Case 2: 1. Open Features , open Page Component View and insert new image component 2. Upload an image and close the site 3. Expand Features and select just uploaded image. 4. Click on `Delete` button then click on `Delete now`. ![image](https://user-images.githubusercontent.com/3728712/73848985-31430400-483a-11ea-8198-7136821de7e7.png)  5. Select Features and click on Edit button.  **BUG:**  -  Wizard page is not loaded, errors in console appear  ![image](https://user-images.githubusercontent.com/3728712/73849261-b0383c80-483a-11ea-90bc-f5962fcf0c96.png)  - click on New button -  New content Dialog does not load and the same error in console .   **The same issue after deleting a fragment in the site.**  </body>
		<created>2020-05-13 14:12:43</created>
		<closed>2020-05-19 11:53:11</closed>
	</bug>
	<bug>
		<id>8079</id>
		<title>Audit logs appear to always be created as "anonymous" user</title>
		<body>https://enonic-community.slack.com/archives/C73JLM8E7/p1587987894074000  Investigations seem to confirm this. This is a major error and should be corrected as soon as possible.</body>
		<created>2020-05-13 09:43:47</created>
		<closed>2020-06-02 12:21:01</closed>
	</bug>
	<bug>
		<id>8075</id>
		<title>Possible to upload an attachment of unallowed type in selectors</title>
		<body>In ImageSelector and MediaSelector we define file extensions that are allowed to be selected in the native file browser dialog. It's possible to work around this restriction by switching from "Customized Files" to "All files" and select ANY file, which will then be uploaded even though it might be of incorrect type, not supported by this selector.  Since we cannot do anything about this behaviour in the native dialog, we should have an additional check/filter on the server which will verify uploaded file against allowed types for the input type.  ![image](https://user-images.githubusercontent.com/11612490/81684561-5c4f7c00-9457-11ea-8f4d-04fd4360bbbc.png)  ![image](https://user-images.githubusercontent.com/11612490/81684944-c23c0380-9457-11ea-8816-70c5b139a896.png)  </body>
		<created>2020-05-12 11:52:51</created>
		<closed>2020-06-18 14:31:03</closed>
	</bug>
	<bug>
		<id>8071</id>
		<title>SendEventRequestHandler ClusterEventSender leaks memory</title>
		<body>Elasticsearch Transport layer expects response is always sent for every request. Otherwise request is kept on a sender side forever.</body>
		<created>2020-05-12 08:30:22</created>
		<closed>2020-05-19 11:53:09</closed>
	</bug>
	<bug>
		<id>8069</id>
		<title>Vacuum and Dump fail on big repository</title>
		<body>In ES 1.5 (used in XP 6.x ) doc_values are disabled by default: https://www.elastic.co/guide/en/elasticsearch/reference/1.5/mapping-core-types.html#string,  Even worse, in ES 1.5, according to doc there is always a filed copy into heap for sorting https://www.elastic.co/guide/en/elasticsearch/reference/1.5/search-request-sort.html#_memory_considerations   In XP 7 (Where ES 2.x is used ) trick with memory-free sort works, because doc_values are enabled by default and used for sorting. https://www.elastic.co/guide/en/elasticsearch/reference/2.4/doc-values.html</body>
		<created>2020-05-11 05:53:09</created>
		<closed>2020-05-19 11:53:13</closed>
	</bug>
	<bug>
		<id>8065</id>
		<title>Implement progress feedback for update of project permissions</title>
		<body>@alansemenov commented on [Thu Apr 16 2020](https://github.com/enonic/app-contentstudio/issues/1720)  Permissions of an existing project can change from/to Public or Private which in turn might lead to massive update of existing content nodes in the repository. We should give user visual feedback for this update, like we do when updating permissions for a content item.  Reuse the same `EditPermissionsDialog` we are using for content permissions (note that title and path are different, the rest is the same).  Ideally this dialog should only be shown only for an existing project and only when Access mode is changed from or to Public or Private, not always.  ![image](https://user-images.githubusercontent.com/11612490/79434085-2c36c980-7fce-11ea-8e33-be3f8308be5f.png)    </body>
		<created>2020-05-06 10:56:12</created>
		<closed>2020-05-19 11:53:08</closed>
	</bug>
	<bug>
		<id>8064</id>
		<title>Content Studio with a lot of content is unstable on Hazelcast Cluster </title>
		<body>When there is a lot of content requesting more and more nodes in content tree freezes (showing spinner). There is an error in browser console.</body>
		<created>2020-05-05 11:30:34</created>
		<closed>2020-06-08 10:35:51</closed>
	</bug>
	<bug>
		<id>8063</id>
		<title>main.js and lib-event listeners must run in an application's thread</title>
		<body>main.js and lib-event event listeners must run in a dedicated to bundle single thread.  This should make applications independent from each other. Currently applications are capable to block execution of entire event flow (by never returning from main.js or by infinity running event callback)  However it is a correct behaviour that main.js blocks execution of any event listeners in the scope of that application. #6670 is incorrect.</body>
		<created>2020-05-04 20:41:20</created>
		<closed>2020-06-02 12:21:01</closed>
	</bug>
	<bug>
		<id>8061</id>
		<title>HttpClient is not reused for requests to Market</title>
		<body>There are verity of issues when HttpClient is not reused.</body>
		<created>2020-05-04 15:18:58</created>
		<closed>2020-05-05 11:07:00</closed>
	</bug>
	<bug>
		<id>8051</id>
		<title>Deep pagination fails for repositories with more that 8M versions</title>
		<body>Response error: ` { {   "status": 500,   "message": "Search request failed after [30s], query: [{\n  \"from\" : 8122000,\n  \"size\" : 1000,\n  \"query\" : {\n    \"filtered\" : {\n      \"query\" : {\n        \"match_all\" : { }\n      },\n      \"filter\" : {\n        \"range\" : {\n          \"timestamp\" : {\n            \"from\" : null,\n            \"to\" : \"2020-04-23T09:14:57.236Z\",\n            \"include_lower\" : true,\n            \"include_upper\" : true\n          }\n        }\n      }\n    }\n  },\n  \"explain\" : false,\n  \"fields\" : [\"versionid\", \"timestamp\", \"nodepath\", \"nodeid\"]\n}]",   "context": {     "authenticated": true,     "principals": [       "role:system.admin",       "role:system.admin.login",       "role:system.authenticated",       "role:system.everyone",       "user:system:su"     ]   } }`</body>
		<created>2020-04-29 16:50:22</created>
		<closed>2020-05-05 11:07:01</closed>
	</bug>
	<bug>
		<id>8032</id>
		<title>Edit Permissions dialog does not open after deleting a project role</title>
		<body>1. Create a project  2. Navigate to just created project and add a folder . 3. Go to Users and delete a role that was created with the project. 4. Go to CS , select the folder and click on `Edit Permission`    BUG:  Edit Permissions dialog does not open, warning message appears  ![image](https://user-images.githubusercontent.com/3728712/79747012-9ffd0d00-8313-11ea-8942-030eecfd9120.png) </body>
		<created>2020-04-20 11:32:19</created>
		<closed>2020-05-05 11:06:59</closed>
	</bug>
	<bug>
		<id>8031</id>
		<title>Deleted project role is not recreated on modifyPermissions</title>
		<body>After a project role is manually deleted, it won't be recreated after project permissions are modified. It works (and should still work) when project meta-data is updated, but it should happen on update of permissions as well.</body>
		<created>2020-04-20 10:13:04</created>
		<closed>2020-04-21 12:50:21</closed>
	</bug>
	<bug>
		<id>8030</id>
		<title>Load task can't find zip dumps</title>
		<body></body>
		<created>2020-04-20 08:19:58</created>
		<closed>2020-04-21 12:20:58</closed>
	</bug>
	<bug>
		<id>8024</id>
		<title>Dump errors  are not written as strings</title>
		<body></body>
		<created>2020-04-16 16:14:54</created>
		<closed>2020-04-17 08:47:56</closed>
	</bug>
	<bug>
		<id>8018</id>
		<title>No logs for undelivered events</title>
		<body>`ClusterEventSender` uses EmptyTransportResponseHandler which by design swallows any exception happened with transport. Check that any logs will appear in case of rejected/timed-out event. If no logs written into log file, make sure logs are written.</body>
		<created>2020-04-14 15:34:29</created>
		<closed>2020-04-21 12:21:03</closed>
	</bug>
	<bug>
		<id>8014</id>
		<title>Project language update fails on null</title>
		<body>Not sending 'language' param for modifyLanguage request or sending null produces errors on backend, thus unable to reset language on project. NB: sending empty string results in "undefined" received on backend, "undefined" is reduced to "und" and saved with this invalid value</body>
		<created>2020-04-09 12:12:43</created>
		<closed>2020-04-21 12:21:01</closed>
	</bug>
	<bug>
		<id>8004</id>
		<title>GIF images should not be scaled</title>
		<body>GIF images should be served as original binaries regardless of image service parameters. Now they are served correctly (as originals) in content thumbnail, media preview and image selector but attempted to be scaled inside image component and HTML Area which occasionally gives NPE because of high compression.</body>
		<created>2020-04-06 09:06:33</created>
		<closed>2020-04-21 12:21:02</closed>
	</bug>
	<bug>
		<id>7994</id>
		<title>App Config happens after invalidation</title>
		<body>App Config happens after invalidation when configuration file changes. Super-fast frontend request may grab old config for ScriptExecutor </body>
		<created>2020-04-01 15:23:16</created>
		<closed>2020-06-02 12:21:01</closed>
	</bug>
	<bug>
		<id>7990</id>
		<title>Cluster events delivered in unpredictable order</title>
		<body>To send/receive events Elasticsearch transport protocol is used. Management thread pool is used which under load can grow to the size of 5.  This has a lot of bad implications. One that I recently observed was that during application update some nodes (which receive an application update notification via events) may end-up installing the application, but never starting it.   Here is log. `started=true, eventType=state` event received earlier than `eventType=installed` causing instance to "start" application first when install a new version of it.  ``` 2020-04-01 09:51:24,142 [elasticsearch[00956cac-760f-4664-ba62-6b5900506ba7][management][T#4]] DEBUG c.e.x.c.i.event.EventPublisherImpl - Publishing event: Event{type=application.cluster, timestamp=1585727484076, distributed=false, localOrigin=false, data={key=com.enonic.web.enonic.com, started=true, eventType=state}} 2020-04-01 09:51:24,142 [elasticsearch[00956cac-760f-4664-ba62-6b5900506ba7][management][T#3]] DEBUG c.e.x.c.i.event.EventPublisherImpl - Publishing event: Event{type=node.updated, timestamp=1585727484064, distributed=false, localOrigin=false, data={nodes=[{path=/applications/com.enonic.web.enonic.com, id=8f7ed18f-cf73-47b5-b7c2-99666dff96ca, branch=maste r, repo=system-repo}]}} 2020-04-01 09:51:24,142 [elasticsearch[00956cac-760f-4664-ba62-6b5900506ba7][management][T#1]] DEBUG c.e.x.c.i.event.EventPublisherImpl - Publishing event: Event{type=node.updated, timestamp=1585727484008, distributed=false, localOrigin=false, data={nodes=[{path=/applications/com.enonic.web.enonic.com, id=8f7ed18f-cf73-47b5-b7c2-99666dff96ca, branch=maste r, repo=system-repo}]}} 2020-04-01 09:51:24,142 [elasticsearch[00956cac-760f-4664-ba62-6b5900506ba7][management][T#2]] DEBUG c.e.x.c.i.event.EventPublisherImpl - Publishing event: Event{type=application.cluster, timestamp=1585727484025, distributed=false, localOrigin=false, data={eventType=installed, id=8f7ed18f-cf73-47b5-b7c2-99666dff96ca}} 2020-04-01 09:51:24,146 [pool-3-thread-1] INFO  c.e.x.c.i.app.ApplicationServiceImpl - Application [com.enonic.web.enonic.com] started successfully 2020-04-01 09:51:24,219 [pool-3-thread-1] DEBUG c.e.x.c.i.app.ApplicationServiceImpl - Uninstalling application com.enonic.web.enonic.com bundle 89 ```</body>
		<created>2020-04-01 09:38:09</created>
		<closed>2020-06-16 08:39:16</closed>
	</bug>
	<bug>
		<id>7983</id>
		<title>projectService.list() method throws 403 status for non cms.app users</title>
		<body></body>
		<created>2020-03-30 16:09:11</created>
		<closed>2020-04-07 12:54:10</closed>
	</bug>
	<bug>
		<id>7978</id>
		<title>Application fails to update properly under load</title>
		<body>When application gets updated/reinstalled under load it may fail to run properly ``` Caused by: java.lang.NullPointerException: null at com.enonic.xp.script.impl.service.ServiceRefImpl.findService(ServiceRefImpl.java:33) at com.enonic.xp.script.impl.service.ServiceRefImpl.get(ServiceRefImpl.java:22) ```  `ScriptExecutorManager` grabs an application bundle which is invalid (~~for unknown reason~~) and uses it to get BundelContext (which is null for not started/invalid bundles)  It is easy to fix to validate BundleContext presence, but it actually doesn't solve the problem. Application must wait for the bundle to fully start.</body>
		<created>2020-03-27 14:36:23</created>
		<closed>2020-04-07 12:54:06</closed>
	</bug>
	<bug>
		<id>7967</id>
		<title>Restore ConfigurationAdmin fallback in application installation</title>
		<body>fix #7928 for #7925 is only partially addresses the problem. Users still get not working application even though XP is alive.  Until proper fix #7966 it is best to bring back code #6688 which reads configuration from ConfigurationAdmin if ApplicationConfigReloader ManagedService was not notified about config update (reason for this is still unknown)   </body>
		<created>2020-03-20 12:13:03</created>
		<closed>2020-04-07 12:54:08</closed>
	</bug>
	<bug>
		<id>7925</id>
		<title>Application install may deadlock in cluster</title>
		<body>regression of #7832    ``` qtp1968303782-7609 id=7609 state=WAITING     - waiting on &lt;0x1e54de6c&gt; (a java.util.concurrent.CountDownLatch$Sync)     - locked &lt;0x1e54de6c&gt; (a java.util.concurrent.CountDownLatch$Sync)     at java.base@11.0.6/jdk.internal.misc.Unsafe.park(Native Method)     at java.base@11.0.6/java.util.concurrent.locks.LockSupport.park(Unknown Source)     at java.base@11.0.6/java.util.concurrent.locks.AbstractQueuedSynchronizer.parkAndCheckInterrupt(Unknown Source)     at java.base@11.0.6/java.util.concurrent.locks.AbstractQueuedSynchronizer.doAcquireSharedInterruptibly(Unknown Source)     at java.base@11.0.6/java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireSharedInterruptibly(Unknown Source)     at java.base@11.0.6/java.util.concurrent.CountDownLatch.await(Unknown Source)     at com.enonic.xp.core.impl.app.ApplicationRegistry$ApplicationWrapper.getConfig(ApplicationRegistry.java:311)     at com.enonic.xp.script.impl.function.ApplicationInfoBuilder.buildConfig(ApplicationInfoBuilder.java:39)     at com.enonic.xp.script.impl.function.ApplicationInfoBuilder.build(ApplicationInfoBuilder.java:32)     at com.enonic.xp.script.impl.executor.ScriptExecutorImpl.buildAppInfo(ScriptExecutorImpl.java:123)     at com.enonic.xp.script.impl.executor.ScriptExecutorImpl.initialize(ScriptExecutorImpl.java:114)     at com.enonic.xp.script.impl.executor.ScriptExecutorManager.createExecutor(ScriptExecutorManager.java:53)     at com.enonic.xp.script.impl.executor.ScriptExecutorManager$$Lambda$296/0x000000010095a840.apply(Unknown Source) ```  ``` qtp1968303782-7658 id=7658 state=BLOCKED     - waiting to lock &lt;0x36b021ca&gt; (a java.util.concurrent.ConcurrentHashMap$ReservationNode)      owned by qtp1968303782-7609 id=7609     at java.base@11.0.6/java.util.concurrent.ConcurrentHashMap.replaceNode(Unknown Source)     at java.base@11.0.6/java.util.concurrent.ConcurrentHashMap.remove(Unknown Source)     at com.enonic.xp.script.impl.executor.ScriptExecutorManager.invalidate(ScriptExecutorManager.java:59)     at com.enonic.xp.script.impl.standard.ScriptRuntimeImpl.invalidate(ScriptRuntimeImpl.java:42)     at com.enonic.xp.script.impl.standard.ScriptRuntimeFactoryImpl.lambda$invalidate$0(ScriptRuntimeFactoryImpl.java:54)     at com.enonic.xp.script.impl.standard.ScriptRuntimeFactoryImpl$$Lambda$442/0x0000000100bcd040.accept(Unknown Source)     at java.base@11.0.6/java.util.concurrent.CopyOnWriteArrayList.forEach(Unknown Source)     at com.enonic.xp.script.impl.standard.ScriptRuntimeFactoryImpl.invalidate(ScriptRuntimeFactoryImpl.java:54)     at com.enonic.xp.script.impl.ScriptRuntimeFactoryDelegate.invalidate(ScriptRuntimeFactoryDelegate.java:55)     at com.enonic.xp.core.impl.app.ApplicationRegistry.lambda$callInvalidators$3(ApplicationRegistry.java:138)     at com.enonic.xp.core.impl.app.ApplicationRegistry$$Lambda$437/0x0000000100bcbc40.accept(Unknown Source)     at java.base@11.0.6/java.util.concurrent.CopyOnWriteArrayList.forEach(Unknown Source)     at com.enonic.xp.core.impl.app.ApplicationRegistry.callInvalidators(ApplicationRegistry.java:135)     at com.enonic.xp.core.impl.app.ApplicationRegistry.lambda$invalidate$0(ApplicationRegistry.java:69)     at com.enonic.xp.core.impl.app.ApplicationRegistry$$Lambda$436/0x0000000100bcb840.apply(Unknown Source)     at java.base@11.0.6/java.util.concurrent.ConcurrentHashMap.computeIfPresent(Unknown Source)     at com.enonic.xp.core.impl.app.ApplicationRegistry.invalidate(ApplicationRegistry.java:68)     at com.enonic.xp.core.impl.app.ApplicationServiceImpl.handleUpdate(ApplicationServiceImpl.java:564)     at com.enonic.xp.core.impl.app.ApplicationServiceImpl.installOrUpdateApplication(ApplicationServiceImpl.java:455)     at com.enonic.xp.core.impl.app.ApplicationServiceImpl.doInstallGlobalApplication(ApplicationServiceImpl.java:140)     at com.enonic.xp.core.impl.app.ApplicationServiceImpl.lambda$installGlobalApplication$3(ApplicationServiceImpl.java:121)     at com.enonic.xp.core.impl.app.ApplicationServiceImpl$$Lambda$917/0x0000000101497840.call(Unknown Source)     at com.enonic.xp.context.ContextImpl.callWith(ContextImpl.java:102)     at com.enonic.xp.core.impl.app.ApplicationHelper.callWithContext(ApplicationHelper.java:148)     at com.enonic.xp.core.impl.app.ApplicationServiceImpl.installGlobalApplication(ApplicationServiceImpl.java:118)     at com.enonic.xp.admin.impl.rest.resource.application.ApplicationResource.installApplication(ApplicationResource.java:441)     at com.enonic.xp.admin.impl.rest.resource.application.ApplicationResource.lambda$install$7(ApplicationResource.java:327)     at com.enonic.xp.admin.impl.rest.resource.application.ApplicationResource$$Lambda$916/0x0000000101490440.call(Unknown Source)     at com.enonic.xp.admin.impl.rest.resource.application.ApplicationResource.lock(ApplicationResource.java:603)     at com.enonic.xp.admin.impl.rest.resource.application.ApplicationResource.install(ApplicationResource.java:327) ```</body>
		<created>2020-03-03 12:44:29</created>
		<closed>2020-03-10 11:50:05</closed>
	</bug>
	<bug>
		<id>7896</id>
		<title>Exception when current user has no permissions for a newly created project</title>
		<body>1. Log in as super admin and create a user who has permissions for the Default project, but is not a sys.admin or cms.admin 2. Open a new browser window, log in as that new user and open Content Studio. Context is now Default project. 3. In the first window (where you are logged in as super admin) go to Content Studio settings page and select "New" 4. Fill in the form for the new project and make sure that the user from step 2 does NOT have permissions for the new project 5. Save the project  There's an exception in the log and error popup in the 2nd window saying that user doesn't have permissions for the new project. Apparently we're trying to refresh the project selector, but if current user doesn't have permissions for the new project then simply nothing should happen and no errors/notifications given.  ![image](https://user-images.githubusercontent.com/11612490/75046623-bf1f2000-54c5-11ea-9f16-84cd13a2d087.png)  ![image](https://user-images.githubusercontent.com/11612490/75046432-5a63c580-54c5-11ea-998d-496a705ea0fc.png) </body>
		<created>2020-02-21 15:21:30</created>
		<closed>2020-02-24 12:20:42</closed>
	</bug>
	<bug>
		<id>7890</id>
		<title>Circular dependency between FragmentRender and RendererFactory</title>
		<body>This is not a hypothetical issue. OSGi Circular Reference exception happens every now and then during startup. It is likely to happen when Elasticsearch gets active almost immediately during application startup. So it happens in clustered environment when other ES nodes are fully ready and cluster check succeeds immediately.  By looking at the code I can say that RendererFactory is a needless registry on top of OSGi Component registry and could be refactored in a way that it does not hold references to all Renderers.</body>
		<created>2020-02-19 16:41:57</created>
		<closed>2020-02-25 12:24:58</closed>
	</bug>
	<bug>
		<id>7889</id>
		<title>MediaSelector doesn't respect &lt;allowContentTypes&gt;</title>
		<body>This issue has been found in Enonic XP 7.2.1 on Ubuntu.  I have the following xml:  ```xml &lt;input name="reports" type="MediaSelector"&gt;   &lt;label&gt;Related reports and documents&lt;/label&gt;   &lt;occurrences minimum="0" maximum="50" /&gt;    &lt;config&gt;     &lt;allowContentTypes&gt;media:document&lt;/allowContentTypes&gt;     &lt;treeMode&gt;true&lt;/treeMode&gt;     &lt;showStatus&gt;true&lt;/showStatus&gt;     &lt;hideToggleIcon&gt;true&lt;/hideToggleIcon&gt;   &lt;/config&gt; &lt;/input&gt; ``` I wanted to only be able to select content of type `media:document`.  But when adding content, Images (of type `media:image`) show up in the picker, and I can select the images.</body>
		<created>2020-02-19 10:39:03</created>
		<closed>2020-04-13 13:59:00</closed>
	</bug>
	<bug>
		<id>7888</id>
		<title>Vacuum - Use ES Search Request Scroll</title>
		<body>Related to https://github.com/enonic/xp/issues/7139 but for Vacuum. </body>
		<created>2020-02-19 09:43:21</created>
		<closed>2020-03-10 19:32:20</closed>
	</bug>
	<bug>
		<id>7872</id>
		<title>Projects - Backward compatibility</title>
		<body>Looking at Projects::from, I see that the null filtering is done before mapping. Shouldn't it be done after?  Also can you test the behaviour with 7.2 data and check that everything behaves as intended</body>
		<created>2020-02-18 10:36:40</created>
		<closed>2020-02-25 12:24:59</closed>
	</bug>
	<bug>
		<id>7869</id>
		<title>NPE on XP startup</title>
		<body>``` The addInvalidator method has thrown an exception java.lang.NullPointerException: null ```  This is due to the fact that OSGi Dynamic properties can be set on constructed Component at any time in any order (before and after activation).</body>
		<created>2020-02-17 10:12:35</created>
		<closed>2020-02-25 12:25:02</closed>
	</bug>
	<bug>
		<id>7842</id>
		<title>Execution of main.js must happen after app config change</title>
		<body>Currently when app cfg file gets changed main.js doesn't get re-executed with new config. It is different from any other js files.  The idea is to treat an app as OSGi "Component" inside bundle with static configuration. So configuration changes would restart app (but not bundle)  Related to #7821</body>
		<created>2020-01-29 16:40:52</created>
		<closed>2020-06-02 12:21:00</closed>
	</bug>
	<bug>
		<id>7831</id>
		<title>Component Names - generate proper names for Fragment component</title>
		<body>Image: take from media content name, if empty - "Image" Part: take from descriptor, if empty - "Part" Layout: take from descriptor, if empty - "Layout" Text: use component value itself, if empty - "Text"  </body>
		<created>2020-01-28 15:00:08</created>
		<closed>2020-02-11 15:32:34</closed>
	</bug>
	<bug>
		<id>7818</id>
		<title>require may happen twice during application redeploy</title>
		<body>There was an attempt to fix this in #5620 but it was not complete.</body>
		<created>2020-01-14 20:24:23</created>
		<closed>2020-02-25 12:24:58</closed>
	</bug>
	<bug>
		<id>7801</id>
		<title>NPE when Jetty logging is enabled</title>
		<body>Maybe due to merge conflict since there were logging and jetty logging work in parallel. To reproduce: - Enable jetty logging: "log.enabled = true" in "com.enonic.xp.web.jetty.cfg" - Start the server</body>
		<created>2020-01-07 15:17:14</created>
		<closed>2020-01-14 12:14:17</closed>
	</bug>
	<bug>
		<id>7800</id>
		<title>ClusterManager deadlock</title>
		<body>Way to reproduce: 1. Start XP in standalone mode 2. Without restart change cluster.enabled to true   SnapshotService not get registered and after 5 seconds of hanging skips SnapshotResource activation.  This happens because ClusterManagerImpl service tries to synchronously (but in a separate thread) register Elasticsearch client in activate method which in turn tries to activate SnapshotResource jaxrs service which in turn tries to activate SnapshotServiceImpl which depends on ClusterManager service causing deadlock. After 5 seconds Felix lock timesout and deadlock unwinds but without activated SnapshotResource.</body>
		<created>2020-01-06 17:40:16</created>
		<closed>2020-01-14 12:14:16</closed>
	</bug>
	<bug>
		<id>7798</id>
		<title>Missing logs for legacy OSGi LogService</title>
		<body>Felix SCR uses legacy LogService . Unfortunately there was no logreader set. Felix Logback provides the way to set it up.</body>
		<created>2020-01-06 17:19:34</created>
		<closed>2020-01-14 12:14:17</closed>
	</bug>
	<bug>
		<id>7700</id>
		<title>Script Event Listener invalidation</title>
		<body>Event listeners are removed when they should not. There are invalidations done on the application registry but there are different cases of invalidation.  Things impacted by application registry invalidation   Application cache (Recomputable cache)   Resource cache. (Recomputable cache)   Script executor (Kind of a recomputable cache. But it also calls the disposers)     IMO: The disposers should only be called as the result of bundle event, the same way as the main.js execution is called...   Locales (Recomputable cache)   Script event listeners (This should only be called on bundle events also IMO)  In order to make the least impact in a bug fix version, I will only impact "Script event listeners" for the ApplicationConfigReloader reactivation and update.  A bigger refactoring is necessary in 7.3 to fix the lifecycle of apps: bundle, main.js, app config, event listeners, tasks that are currently never stopped, ... </body>
		<created>2019-12-06 13:22:35</created>
		<closed>2019-12-10 12:10:30</closed>
	</bug>
	<bug>
		<id>7692</id>
		<title>Jetty returning 200 on 8080 when cluster-provider not healthy</title>
		<body>Version: 7.1.2  If elasticsearch service-provider is unhealthy, jetty will still work on 2609. That is ok, but for port 8080, it causes some confusion and complexity for monitoring since its always returning status 200 (for any path) and no content is checked.   To reproduce; start up sandbox, remove indices, store new content - the cluster will go to state red, now, try to access port 8080, expects e.g 503  </body>
		<created>2019-12-03 13:37:34</created>
		<closed>2020-07-28 12:05:08</closed>
	</bug>
	<bug>
		<id>7687</id>
		<title>Snapshot restore - Return success on shard failure</title>
		<body>The snapshot restore return a success when shards failed to be restored. Also the number of failing shards is not returned. To be fixed in RestoreResultFactory (6.15, 7.1, 7.2)</body>
		<created>2019-11-29 10:18:57</created>
		<closed>2019-12-10 12:10:23</closed>
	</bug>
	<bug>
		<id>7675</id>
		<title>Reprocess Content - Out of Memory</title>
		<body>@poi33 reported an Out of Memory error on content reprocessing. Reproduce and try to improve the process to not be dependant on the ammount of data</body>
		<created>2019-11-26 12:27:03</created>
		<closed>2019-12-10 12:10:21</closed>
	</bug>
	<bug>
		<id>7674</id>
		<title>Portal Lib - URL generation for content with special characters</title>
		<body>Have a content with a norwegian character. Generate an idprovider URL from this content (test with assetUrl also). These URL should not contain the content path but they do.  Reproduce and investigate why  Fix in 6.15 also  Example:  1) Content has path "_features_":  IdProviderUrl: `/site/default/draft/_/idprovider/system`  2) Content has path "_featuresåøæ_":  IdProviderUrl: `/site/default/draft/features%C3%A5%C3%B8%C3%A6/_/idprovider/system` (the `features%C3%A5%C3%B8%C3%A6` part should not be in the URL) </body>
		<created>2019-11-26 11:22:16</created>
		<closed>2019-12-10 12:10:30</closed>
	</bug>
	<bug>
		<id>7673</id>
		<title>Incorrect progress reporting in content reprocess task</title>
		<body>@pmi commented on [Thu Nov 21 2019](https://github.com/enonic/cli-enonic/issues/182)  reprocess command was not async prior to XP 7.2  </body>
		<created>2019-11-26 11:19:08</created>
		<closed>2019-12-30 11:43:07</closed>
	</bug>
	<bug>
		<id>7668</id>
		<title>Missing local-preference for search</title>
		<body></body>
		<created>2019-11-22 16:24:50</created>
		<closed>2019-12-10 12:10:21</closed>
	</bug>
	<bug>
		<id>7667</id>
		<title>portal.getComponent returns null for page controllers</title>
		<body>As of xp7, a page is a component, conceptually like any other. Make sure this function returns the page component definition, juse like it does for parts and layouts.</body>
		<created>2019-11-22 12:33:38</created>
		<closed>2019-11-28 12:38:39</closed>
	</bug>
	<bug>
		<id>7664</id>
		<title>Reduce number of issue email notifications</title>
		<body>**Case 1:**  User A creates an issue, but doesn’t assign it to anyone.  _Expected behaviour:_ No email is sent  **Case 2:**  User A creates an issue and assigns it to user B during creation.  _Expected behaviour:_ System sends an email with subject “You were assigned…” _From_: User A _To_: User B  **Case 3:** Any user assigns an existing issue to user B  _Expected behaviour:_ System sends an email with subject “You were assigned…” (even if it was user B who assigned the issue to himself)  _From_: modifier _To_: User B  **Case 4:** Any user adds a comment to an issue  _Expected behaviour:_ System sends an email “A new comment is posted”  _From_: modifier (the one who left a comment) _To_: creator + all assignees - modifier  **Case 5:** Any user closes or reopens the issue  _Expected behaviour:_ System sends an email “The issue was closed” or “The issue was reopened”  _From_: modifier _To_: creator + all assignees - modifier  **Case 6:** Any user changes issue title or modifies the list of content items  _Expected behaviour:_ No email is sent  **Case 7:** Any user publishes an issue or a publish request (which then closes)  _Expected behaviour:_ System sends an email “X published and closed the issue...”  _From_: modifier _To_: creator + all assignees - modifier   **NB!** There are certain cases when email should not be sent at all. For example, when creator, assignee and modifier is the same user. Or when creator changes an issue and there are no assignees. </body>
		<created>2019-11-21 09:37:08</created>
		<closed>2019-12-30 11:43:08</closed>
	</bug>
	<bug>
		<id>7661</id>
		<title>Image url format bug</title>
		<body>I found an image with the path `/content/bilder/illustrasjonsbilde-av-forbedringsutdanning-for-leger.foto-mostphotos`, and this gives me the error `Image format [foto-mostphotos] is not supported`. The content library's `exists` method returns a `true`.  ![image](https://user-images.githubusercontent.com/4059636/69224201-68c7db80-0b7c-11ea-9257-322cd24e75ab.png)  I propose this is a bug that should be corrected.</body>
		<created>2019-11-20 09:03:51</created>
		<closed>2020-02-05 10:57:00</closed>
	</bug>
	<bug>
		<id>7652</id>
		<title>Jetty - Request log not configured</title>
		<body>https://enonic.zendesk.com/agent/tickets/3312  During issue #6864, the call to RequestLogConfigurator().configure() has been removed.  Fix in 7.2 and 7.1</body>
		<created>2019-11-18 12:35:00</created>
		<closed>2019-11-26 12:46:54</closed>
	</bug>
	<bug>
		<id>7643</id>
		<title>Permission inheritance setting is ignored</title>
		<body>To recreate: 1. Edit a child item, remove "inherit permissions" and save 2. Now go to the parent item, and make changes to it's permissions  This will effectively overwrite the child item permissions, (without checking the "overwrite .." option).  NB! I have verified that this bug also exits in 6.15.3, and that by checking "overwrite .." child items actually get the "inherit" option set.  Conclusion, this must be a serious bug in the algorithm for applying permissions recursively. Whenever reaching an item with "inherit = false", the algorithm should not change the specific item, or any of it's children. </body>
		<created>2019-11-13 16:11:34</created>
		<closed>2019-11-14 11:36:01</closed>
	</bug>
	<bug>
		<id>7635</id>
		<title>Multi-repo highlighting</title>
		<body>Handle highlighting for multi repo connections</body>
		<created>2019-11-12 12:23:21</created>
		<closed>2019-11-26 12:46:55</closed>
	</bug>
	<bug>
		<id>7634</id>
		<title>Component Names are still present in admin interface</title>
		<body>Component names do not seem to be mapped back to JS anymore but they seem to still be returned in the Admin rest interface or when generating a fragment -&gt; Investigate what are the users of component names  The main problem is how this field is populated. In the case of image or fragment components, a call to "contentService.getById" is done for each of these components, just to get the display name of the related content and set it as a name on the component. -&gt; Fix at least this behaviour. Investigate the impact of a change of value for component names  IMO, if there needs to be some additional retrievals just for admin, they should be done at admin level and definitely not in the node-&gt;content translation</body>
		<created>2019-11-12 10:15:35</created>
		<closed>2020-01-28 14:40:46</closed>
	</bug>
	<bug>
		<id>7608</id>
		<title>Create new version on move/rename</title>
		<body>When renaming/moving a node, its children will be renamed/move. But there is no new version created for the children.  With the modifications made in 7.0, we can now, in a fast way, create a new version (by only creating the version document in ES: the version will have the same blob keys, only the path will change). </body>
		<created>2019-11-07 12:10:23</created>
		<closed>2019-12-10 12:10:30</closed>
	</bug>
	<bug>
		<id>7605</id>
		<title>Content Revert - Page and thumbnail</title>
		<body>Include page and thumbnail in reverted data</body>
		<created>2019-11-07 11:30:05</created>
		<closed>2019-11-12 12:52:19</closed>
	</bug>
	<bug>
		<id>7603</id>
		<title>Page changes are not reverted on version revert</title>
		<body></body>
		<created>2019-11-06 10:02:20</created>
		<closed>2019-11-07 14:40:31</closed>
	</bug>
	<bug>
		<id>7596</id>
		<title>Jetty doesn't start after cluster config changed</title>
		<body></body>
		<created>2019-11-05 14:38:46</created>
		<closed>2020-01-14 12:14:14</closed>
	</bug>
	<bug>
		<id>7595</id>
		<title>Elasticsearch - Wrong discovery.unicast.sockets format</title>
		<body>Replace the example for discovery.unicast.sockets from 192.168.0.1[9300-9301],192.168.0.2[9301-9302] to 192.168.0.1:9300,192.168.0.2:9301</body>
		<created>2019-11-05 13:57:34</created>
		<closed>2019-11-12 12:52:17</closed>
	</bug>
	<bug>
		<id>7586</id>
		<title>Portal - All templates are loaded on page rendering</title>
		<body>Check why all templates are loaded on page rendering</body>
		<created>2019-10-30 11:39:37</created>
		<closed>2020-02-05 08:13:57</closed>
	</bug>
	<bug>
		<id>7585</id>
		<title>Post processing is not working in POST requests</title>
		<body>https://discuss.enonic.com/t/handle-post-requests-in-parts-on-the-page-url/2009  - Check if post processing is working on POST requests - If reproduced, fix the post processing to work with POST</body>
		<created>2019-10-30 09:26:33</created>
		<closed>2019-11-12 12:52:19</closed>
	</bug>
	<bug>
		<id>7572</id>
		<title>Missing local-preference for getByIds</title>
		<body>Testing cluster failover has discovered that the `getByIds`-command asks in a "round-robin" fashion instead of using the "local" preference. This means that even if a node is rejected from the LB, until the cluster kicks the node out of the cluster it will be served requests from `getByIds` slowing down the performance considerably.   The kick-node-from-cluster operation is more brutal than just not serving request to the troubled node, so the best thing will be to use the local preference to avoid this issue.   This will probably also increase performance noticeably since the local will usually be faster that the round-robin.  This should be fixed in 6.15.8 </body>
		<created>2019-10-24 12:15:30</created>
		<closed>2019-10-29 13:00:14</closed>
	</bug>
	<bug>
		<id>7486</id>
		<title>Error after scheduled publishing of content</title>
		<body>1. Open new folder wizard, type a name., save it. (open existing folder) 2. Open Publish menu and click on Publish menu item. 3. Add Schedule Form and select correct date:   ![image](https://user-images.githubusercontent.com/3728712/65948317-b0ff3300-e442-11e9-9f7c-2de028546772.png)  4. Click on Schedule button.  BUG - The content is not published, error message appears after clicking on Schedule button.  ![image](https://user-images.githubusercontent.com/3728712/65948591-37b41000-e443-11e9-8ec1-cd3be3669f09.png)      </body>
		<created>2019-10-01 09:02:14</created>
		<closed>2019-10-15 14:31:30</closed>
	</bug>
	<bug>
		<id>7477</id>
		<title>CreateContentParams uses invalid property name in error message</title>
		<body>If `parentPath` parameter of lib-content's `create` method is empty, the error message says "_parentContentPath cannot be null_" while correct parameter name is `parentPath`, not `parentContentPath`.</body>
		<created>2019-09-30 12:48:44</created>
		<closed>2019-10-15 14:31:34</closed>
	</bug>
	<bug>
		<id>7470</id>
		<title>Revert of attachments does not work</title>
		<body></body>
		<created>2019-09-27 07:30:23</created>
		<closed>2019-10-01 10:47:44</closed>
	</bug>
	<bug>
		<id>7467</id>
		<title>All unit tests fail on app-users</title>
		<body>On Concourse (https://ci.enonic.io/teams/dev/pipelines/xp-all-master/jobs/build-app-users/builds/721) and locally on my Mac, all the unit tests in app-users fail.  Strangely enought, this does not seem to happen on Travis.  Please investigate and fix the tests.</body>
		<created>2019-09-26 09:17:40</created>
		<closed>2019-10-01 10:47:44</closed>
	</bug>
	<bug>
		<id>7434</id>
		<title>VersionTableCleanupTaskTest is failing regularly on Concourse</title>
		<body>It seems that after the latest improvements to testing were implemented, the test, `com.enonic.xp.core.repo.vacuum.versiontable.VersionTableCleanupTaskTest`, which has caused us problems before, has started acting up again.  In the last 7 builds of xp, 4 has failed.  - Please review test and find a way to run it in a stable way.</body>
		<created>2019-09-19 12:49:20</created>
		<closed>2019-10-01 10:47:41</closed>
	</bug>
	<bug>
		<id>7396</id>
		<title>Can't serialize Page with config and without the descriptor</title>
		<body>_Related to the [second bug](https://github.com/enonic/app-contentstudio/issues/947), described in app-contentstudio._ 1. Download source code of the Superhero app and replace `&lt;form/&gt;` with the simple config in the  default template (`src/main/resources/site/pages/default/default.xml`): ```xml &lt;form&gt;     &lt;input type="TextLine" name="title"&gt;         &lt;label&gt;Title&lt;/label&gt;         &lt;occurrences minimum="0" maximum="1"/&gt;     &lt;/input&gt; &lt;/form&gt; ```  2. Deploy the Superhero;  3. Open post "Featured image" for edit;  4. Open the "Components" widget and switch to the "Page" tab.   5. Switch from "Automatic" template to "Post show - 2 columns".  6. Click "Apply".  __The exception will occur:__  ![localhost_8080_admin_tool_com enonic app contentstudio_main (2)](https://user-images.githubusercontent.com/1847621/64704830-96771100-d4b7-11e9-9d97-2adbd1f91178.png)  __The server log:__  &lt;details&gt;   &lt;summary&gt;Click to show log&lt;/summary&gt;  ```log ERROR c.e.x.j.i.e.JsonExceptionMapper - NullPointerException java.lang.NullPointerException: null         at com.enonic.xp.core.impl.content.serializer.PageDataSerializer.serializePage(PageDataSerializer.java:104)         at com.enonic.xp.core.impl.content.serializer.PageDataSerializer.toData(PageDataSerializer.java:66)         at com.enonic.xp.core.impl.content.serializer.ContentDataSerializer.toUpdateNodeData(ContentDataSerializer.java:148)         at com.enonic.xp.core.impl.content.UpdateNodeParamsFactory.toNodeEditor(UpdateNodeParamsFactory.java:83)         at com.enonic.xp.core.impl.content.UpdateNodeParamsFactory.produce(UpdateNodeParamsFactory.java:58)         at com.enonic.xp.core.impl.content.UpdateContentCommand.doExecute(UpdateContentCommand.java:129)         at com.enonic.xp.core.impl.content.UpdateContentCommand.execute(UpdateContentCommand.java:84)         at com.enonic.xp.core.impl.content.ContentServiceImpl.update(ContentServiceImpl.java:326)         at com.enonic.xp.core.impl.content.page.CreatePageCommand.execute(CreatePageCommand.java:59)         at com.enonic.xp.core.impl.content.page.PageServiceImpl.create(PageServiceImpl.java:42)         at com.enonic.xp.admin.impl.rest.resource.content.page.PageResource.create(PageResource.java:48)         at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)         at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)         at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)         at java.base/java.lang.reflect.Method.invoke(Method.java:566)         at org.jboss.resteasy.core.MethodInjectorImpl.invoke(MethodInjectorImpl.java:137)         at org.jboss.resteasy.core.ResourceMethodInvoker.invokeOnTarget(ResourceMethodInvoker.java:296)         at org.jboss.resteasy.core.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:250)         at org.jboss.resteasy.core.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:237)         at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:356)         at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:179)         at org.jboss.resteasy.plugins.server.servlet.ServletContainerDispatcher.service(ServletContainerDispatcher.java:220)         at com.enonic.xp.jaxrs.impl.JaxRsServlet.service(JaxRsServlet.java:46)         at javax.servlet.http.HttpServlet.service(HttpServlet.java:790)         at com.enonic.xp.web.impl.dispatch.mapping.ServletDefinitionImpl.service(ServletDefinitionImpl.java:39)         at com.enonic.xp.web.impl.dispatch.pipeline.ServletPipelineImpl.service(ServletPipelineImpl.java:40)         at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:45)         at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36)         at com.enonic.xp.portal.impl.idprovider.IdProviderFilter.doHandle(IdProviderFilter.java:45)         at com.enonic.xp.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:31)         at com.enonic.xp.web.filter.BaseWebFilter.doFilter(BaseWebFilter.java:33)         at com.enonic.xp.web.impl.dispatch.mapping.FilterDefinitionImpl.doFilter(FilterDefinitionImpl.java:40)         at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:50)         at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36)         at com.enonic.xp.web.impl.auth.BasicAuthFilter.doHandle(BasicAuthFilter.java:33)         at com.enonic.xp.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:31)         at com.enonic.xp.web.filter.BaseWebFilter.doFilter(BaseWebFilter.java:33)         at com.enonic.xp.web.impl.dispatch.mapping.FilterDefinitionImpl.doFilter(FilterDefinitionImpl.java:40)         at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:50)         at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36)         at com.enonic.xp.web.impl.context.ContextFilter.lambda$doHandle$0(ContextFilter.java:33)         at com.enonic.xp.context.ContextImpl.callWith(ContextImpl.java:101)         at com.enonic.xp.web.impl.context.ContextFilter.doHandle(ContextFilter.java:32)         at com.enonic.xp.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:31)         at com.enonic.xp.web.filter.BaseWebFilter.doFilter(BaseWebFilter.java:33)         at com.enonic.xp.web.impl.dispatch.mapping.FilterDefinitionImpl.doFilter(FilterDefinitionImpl.java:40)         at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:50)         at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36)         at com.enonic.xp.web.vhost.impl.VirtualHostFilter.doHandle(VirtualHostFilter.java:60)         at com.enonic.xp.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:31)         at com.enonic.xp.web.filter.BaseWebFilter.doFilter(BaseWebFilter.java:33)         at com.enonic.xp.web.impl.dispatch.mapping.FilterDefinitionImpl.doFilter(FilterDefinitionImpl.java:40)         at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:50)         at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36)         at com.enonic.xp.web.impl.dos.DosFilterWrapper.doFilter(DosFilterWrapper.java:65)         at com.enonic.xp.web.impl.dispatch.mapping.FilterDefinitionImpl.doFilter(FilterDefinitionImpl.java:40)         at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:50)         at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36)         at com.enonic.xp.web.impl.dispatch.pipeline.FilterPipelineImpl.filter(FilterPipelineImpl.java:39)         at com.enonic.xp.web.impl.dispatch.DispatchServletImpl.service(DispatchServletImpl.java:49)         at javax.servlet.http.HttpServlet.service(HttpServlet.java:790)         at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:860)         at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:535)         at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:143)         at org.eclipse.jetty.server.handler.gzip.GzipHandler.handle(GzipHandler.java:455)         at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:132)         at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:190)         at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:1595)         at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:188)         at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1253)         at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:168)         at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:473)         at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:1564)         at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:166)         at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1155)         at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)         at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:219)         at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:132)         at org.eclipse.jetty.server.Server.handle(Server.java:530)         at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:347)         at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:256)         at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:279)         at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:102)         at org.eclipse.jetty.io.ChannelEndPoint$2.run(ChannelEndPoint.java:124)         at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.doProduce(EatWhatYouKill.java:247)         at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.produce(EatWhatYouKill.java:140)         at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.run(EatWhatYouKill.java:131)         at org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run(ReservedThreadExecutor.java:382)         at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:708)         at org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:626)         at java.base/java.lang.Thread.run(Thread.java:834) ``` &lt;/details&gt; </body>
		<created>2019-09-11 14:19:51</created>
		<closed>2019-11-12 12:52:15</closed>
	</bug>
	<bug>
		<id>7346</id>
		<title>Node push target should never be inherited</title>
		<body></body>
		<created>2019-09-02 10:45:12</created>
		<closed>2019-09-03 12:10:34</closed>
	</bug>
	<bug>
		<id>7345</id>
		<title>Local copy of inherited content won't be created if parent content has language</title>
		<body>If parent of an inherited content has a language, a local copy for such content will not be created when opened in the wizard. Even after selecting "create local copy" in the confirmation dialog, the content remains inherited.</body>
		<created>2019-09-01 15:15:03</created>
		<closed>2019-09-03 12:10:35</closed>
	</bug>
	<bug>
		<id>7340</id>
		<title>ConfigLoader - FileReader is not properly closed</title>
		<body>#7368 introduces JUnit5 and TmpDir annotation which exposed a bug: `com.enonic.xp.server.internal.config.ConfigLoader ` creates `java.io.FileReader` but never closes it.  Junit5 tests fail on Windows due to this: JUnit5 tries to delete contents of temporary folder but fails due to file still being open.  Fix is easy: wrap FileReader with try-with-resources block.</body>
		<created>2019-08-30 13:05:57</created>
		<closed>2019-09-03 12:10:34</closed>
	</bug>
	<bug>
		<id>7338</id>
		<title>contentsInLayers gives 404 if selected content doesn't exist in any ancestor layer</title>
		<body>@alansemenov commented on [Thu Aug 29 2019](https://github.com/enonic/app-contentstudio/issues/872)  To reproduce this, build branch _epic-contentlayer-workflow_ in _xp_, _lib-admin-ui_ and _app-contentstudio_  1. Create a site in Content Studio, or install the Features app 2. Create a new child layer under the base layer 3. Switch to this new layer 4. Open the layers widget 5. Select the site in the grid. The layer will show info about the site in two layers. 6. Create a child content under the site.  The widget will not update as it should and there will be console errors. contentsInLayers gives 404 because it expects selected content to be in the base layer. If selected content doesn't exist in any of parent layers, there will be an error. Content can be created in any level, so the widget should never crash because the item doesn't exist in parent layers.  </body>
		<created>2019-08-30 08:17:53</created>
		<closed>2019-09-03 12:10:33</closed>
	</bug>
	<bug>
		<id>7333</id>
		<title>Handle localization format errors</title>
		<body>Localization message format allows only number value inside `{}` braces. Adding text value leads to `MessageFormat` parser failing and crash FormJson serialization process without any exceptions. </body>
		<created>2019-08-28 14:36:21</created>
		<closed>2019-09-17 12:26:41</closed>
	</bug>
	<bug>
		<id>7324</id>
		<title>lib-mail fails to send an email with attachment</title>
		<body>Originally reported by @hjelmevold. Verify and fix if reproduced. When/if fixed, let Bjørnar know so that he could release a new version of the form builder app.  Example can be found [here](https://developer.enonic.com/docs/xp/stable/api/lib-mail) (scroll down to _Send an e-mail with attachments_)  &gt; In 7.0 with lib-mail, I can't seem to send e-mail with attachments (but plain text e-mails are sent properly). I get the following stack trace:  ``` org.eclipse.jetty.server.HttpChannel - /admin/site/preview/default/draft/superhero/form-test/_/component/main/0/left/0 java.lang.LinkageError: loader constraint violation: when resolving method "javax.mail.internet.MimeBodyPart.setDataHandler(Ljavax/activation/DataHandler;)V" the class loader org.apache.felix.framework.BundleWiringImpl$BundleClassLoader @6309e4b4 (instance of org.apache.felix.framework.BundleWiringImpl$BundleClassLoader, child of 'bootstrap') of the current class, com/enonic/xp/lib/mail/SendMailHandler, and the class loader 'app' (instance of jdk.internal.loader.ClassLoaders$AppClassLoader) for the method's defining class, javax/mail/internet/MimeBodyPart, have different Class objects for the type javax/activation/DataHandler used in the signature     at com.enonic.xp.lib.mail.SendMailHandler.compose(SendMailHandler.java:172)     at com.enonic.xp.mail.impl.MailServiceImpl.send(MailServiceImpl.java:48)     at com.enonic.xp.lib.mail.SendMailHandler.send(SendMailHandler.java:117)     at jdk.scripting.nashorn.scripts/jdk.nashorn.internal.scripts.Script$Recompilation$3159$2347A$mail.L:1#send(com.enonic.app.formbuilder:/lib/xp/mail.js:66) ```</body>
		<created>2019-08-26 15:10:55</created>
		<closed>2019-09-17 12:26:40</closed>
	</bug>
	<bug>
		<id>7316</id>
		<title>Potential problem with localization file resolution</title>
		<body>Ref: https://discuss.enonic.com/t/localization-trouble/1952/7  Seems, the country extension of language is not resolved correctly?</body>
		<created>2019-08-22 08:15:59</created>
		<closed>2019-09-13 08:47:48</closed>
	</bug>
	<bug>
		<id>7314</id>
		<title>Random NPE on core-api tests</title>
		<body></body>
		<created>2019-08-21 11:30:05</created>
		<closed>2019-09-03 12:10:30</closed>
	</bug>
	<bug>
		<id>7296</id>
		<title>Dump failing on missing blob</title>
		<body> If dumping a repository with missing blob, the whole dump will fail with exception. The dumper should not quit, but rather finish the dump and log / report on failing nodes  ``` 2019-08-13 12:58:13,743 ERROR c.e.x.j.i.e.JsonExceptionMapper - Cannot get blob with blobKey: 43c7e0a9533b1e10ce87fead5c0c9260d6b68405: blob is null java.lang.IllegalArgumentException: Cannot get blob with blobKey: 43c7e0a9533b1e10ce87fead5c0c9260d6b68405: blob is null at com.enonic.xp.repo.impl.node.dao.NodeVersionServiceImpl.getFromBlob(NodeVersionServiceImpl.java:84) at com.enonic.xp.repo.impl.node.dao.NodeVersionServiceImpl.doGetNodeVersion(NodeVersionServiceImpl.java:72) at com.enonic.xp.repo.impl.node.dao.NodeVersionServiceImpl.get(NodeVersionServiceImpl.java:55) at com.enonic.xp.repo.impl.storage.NodeStorageServiceImpl.get(NodeStorageServiceImpl.java:267) at com.enonic.xp.repo.impl.node.NodeServiceImpl.getByNodeVersion(NodeServiceImpl.java:644) at com.enonic.xp.repo.impl.dump.RepoDumper.doStoreVersion(RepoDumper.java:189) at com.enonic.xp.repo.impl.dump.RepoDumper.lambda$dumpVersions$2(RepoDumper.java:174) at java.util.HashMap$KeySpliterator.forEachRemaining(HashMap.java:1553) at java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:580) at com.enonic.xp.repo.impl.dump.RepoDumper.dumpVersions(RepoDumper.java:166) at com.enonic.xp.repo.impl.dump.RepoDumper.lambda$execute$1(RepoDumper.java:94) at com.enonic.xp.context.ContextImpl.runWith(ContextImpl.java:85) at com.enonic.xp.repo.impl.dump.RepoDumper.execute(RepoDumper.java:94) at com.enonic.xp.repo.impl.dump.DumpServiceImpl.dump(DumpServiceImpl.java:107) at com.enonic.xp.impl.server.rest.SystemResource.systemDump(SystemResource.java:88) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:498) at org.jboss.resteasy.core.MethodInjectorImpl.invoke(MethodInjectorImpl.java:137) at org.jboss.resteasy.core.ResourceMethodInvoker.invokeOnTarget(ResourceMethodInvoker.java:296) at org.jboss.resteasy.core.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:250) at org.jboss.resteasy.core.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:237) at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:356) at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:179) at org.jboss.resteasy.plugins.server.servlet.ServletContainerDispatcher.service(ServletContainerDispatcher.java:220) at com.enonic.xp.jaxrs.impl.JaxRsServlet.service(JaxRsServlet.java:46) at javax.servlet.http.HttpServlet.service(HttpServlet.java:790) at com.enonic.xp.web.impl.dispatch.mapping.ServletDefinitionImpl.service(ServletDefinitionImpl.java:39) at com.enonic.xp.web.impl.dispatch.pipeline.ServletPipelineImpl.service(ServletPipelineImpl.java:30) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:45) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36) at com.enonic.xp.portal.impl.auth.AuthFilter.doHandle(AuthFilter.java:45) at com.enonic.xp.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:31) at com.enonic.xp.web.filter.BaseWebFilter.doFilter(BaseWebFilter.java:33) at com.enonic.xp.web.impl.dispatch.mapping.FilterDefinitionImpl.doFilter(FilterDefinitionImpl.java:40) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:50) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36) at com.enonic.xp.web.impl.auth.BasicAuthFilter.doHandle(BasicAuthFilter.java:33) at com.enonic.xp.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:31) at com.enonic.xp.web.filter.BaseWebFilter.doFilter(BaseWebFilter.java:33) at com.enonic.xp.web.impl.dispatch.mapping.FilterDefinitionImpl.doFilter(FilterDefinitionImpl.java:40) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:50) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36) at com.enonic.xp.web.impl.context.ContextFilter.lambda$doHandle$0(ContextFilter.java:33) at com.enonic.xp.context.ContextImpl.callWith(ContextImpl.java:101) at com.enonic.xp.web.impl.context.ContextFilter.doHandle(ContextFilter.java:32) at com.enonic.xp.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:31) at com.enonic.xp.web.filter.BaseWebFilter.doFilter(BaseWebFilter.java:33) at com.enonic.xp.web.impl.dispatch.mapping.FilterDefinitionImpl.doFilter(FilterDefinitionImpl.java:40) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:50) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36) at com.enonic.xp.web.vhost.impl.VirtualHostFilter.doHandle(VirtualHostFilter.java:57) at com.enonic.xp.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:31) at com.enonic.xp.web.filter.BaseWebFilter.doFilter(BaseWebFilter.java:33) at com.enonic.xp.web.impl.dispatch.mapping.FilterDefinitionImpl.doFilter(FilterDefinitionImpl.java:40) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:50) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36) at com.enonic.xp.web.impl.dos.DosFilterWrapper.doFilter(DosFilterWrapper.java:64) at com.enonic.xp.web.impl.dispatch.mapping.FilterDefinitionImpl.doFilter(FilterDefinitionImpl.java:40) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:50) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36) at com.enonic.xp.web.impl.dispatch.pipeline.FilterPipelineImpl.filter(FilterPipelineImpl.java:29) at com.enonic.xp.web.impl.dispatch.DispatchServletImpl.service(DispatchServletImpl.java:35) at javax.servlet.http.HttpServlet.service(HttpServlet.java:790) at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:860) at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:535) at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:143) at org.eclipse.jetty.server.handler.gzip.GzipHandler.handle(GzipHandler.java:455) at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:132) at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:190) at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:1595) at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:188) at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1253) at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:168) at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:473) at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:1564) at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:166) at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1155) at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141) at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:132) at com.codahale.metrics.jetty9.InstrumentedHandler.handle(InstrumentedHandler.java:240) at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:132) at org.eclipse.jetty.server.Server.handle(Server.java:530) at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:347) at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:256) at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:279) at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:102) at org.eclipse.jetty.io.ChannelEndPoint$2.run(ChannelEndPoint.java:124) at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.doProduce(EatWhatYouKill.java:247) at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.produce(EatWhatYouKill.java:140) at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.run(EatWhatYouKill.java:131) at org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run(ReservedThreadExecutor.java:382) at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:708) at org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:626) at java.lang.Thread.run(Thread.java:748) 2019-08-13 13:01:00,444 INFO  org.elasticsearch.snapshots - [cfc6e6fc-bbb7-4c87-a791-1b7d3b25b587] snapshot [enonic-xp-snapshot-repo:hourly_2019-08-13t11_01_00.011z] is done  ```</body>
		<created>2019-08-13 11:05:27</created>
		<closed>2019-09-17 12:26:46</closed>
	</bug>
	<bug>
		<id>7276</id>
		<title>Default config of Content Selector doesn't allow selecting site content</title>
		<body>By default Content Selector allows child items of the site, but not the site itself. This should be fixed so that the site itself can also be selected. If user wants to disable selecting the site, he can do it by specifiying regex in `allowContentType`.</body>
		<created>2019-08-01 10:04:11</created>
		<closed>2019-08-27 14:34:39</closed>
	</bug>
	<bug>
		<id>7255</id>
		<title>Content lib - Modify-method changes values to strings in the site config</title>
		<body>Hi,  I think I've found a bug where contentLib.modify will change booleans in the siteConfig to strings (eg true -&gt; "true"). (Enonic XP version 7.0.1) To reproduce it:  ``` &lt;?xml version="1.0" encoding="UTF-8"?&gt; &lt;site&gt;   &lt;form&gt;     &lt;input type="CheckBox" name="someConfigValue"&gt;       &lt;label&gt;label&lt;/label&gt;       &lt;occurrences minimum="0" maximum="1"/&gt;       &lt;default&gt;checked&lt;/default&gt;     &lt;/input&gt;   &lt;/form&gt; &lt;/site&gt;  ```  And the function that modifies it is just ```   contentLib.modify({     key: '/path',     branch: 'draft',     requireValid: false, //to see the changes in the data structures.      editor: site =&gt; {       return site     }   }) ```  Using data toolbox we can inspect the config values before and after Before: ``` "data": {   "siteConfig": {     "applicationKey": "com.example",     "config": {       "someConfigValue": true     }   } } ``` After:  ``` "data": {   "siteConfig": {     "applicationKey": "com.example",     "config": {       "someConfigValue": "true"     }   } } ```</body>
		<created>2019-07-24 07:22:44</created>
		<closed>2019-09-03 12:10:33</closed>
	</bug>
	<bug>
		<id>7220</id>
		<title>Node lib - Modify method runs supplied editor function twice</title>
		<body>Hi,  I think I've found an error in node-lib. The .modify-method seems to run the provided editor-function twice.   XP version: 7.0.1  Calling the following function ``` const testFunction = (someNodeId) =&gt; {   log.info("This is printed once");   const repo = nodeLib.connect({     repoId: config.repoId,     branch: config.branch,   });   repo.modify({     key: someNodeId,     editor: function(node){       log.info("This is printed twice, but should be printed only once!")       return node;     }   }) } ```  Results in the following output: ``` [pathstuff] This is printed once [pathstuff] This is printed twice, but should be printed only once! [pathstuff] This is printed twice, but should be printed only once! ```  ... meaning that the supplied editor function is run twice, when (as far as I can tell) it should only get run once!  In the interest of reproduction the function is being  run from the context of the controller of an admin-tool. I have not tested if the behavior is present in other contexts. </body>
		<created>2019-07-09 13:28:23</created>
		<closed>2019-07-23 10:49:22</closed>
	</bug>
	<bug>
		<id>7167</id>
		<title>Updating the app name installs two applications</title>
		<body>Renaming an app will create two apps and only one can be deleted (Delete from deploy folder)  Reproduce: 1. Deploy app 2. Rename the appName (gradle.properties) 3. Re deploy app  Creates two applications  Can only uninstall one  ![image](https://user-images.githubusercontent.com/3340349/59605208-9660b280-910e-11e9-966a-8741381ad7cc.png) </body>
		<created>2019-06-17 12:46:40</created>
		<closed>2019-06-17 13:52:06</closed>
	</bug>
	<bug>
		<id>7164</id>
		<title>Admin - Image Resource - Rollback default image scaling</title>
		<body>@mortyeriksen commented on [Wed May 15 2019](https://github.com/enonic/app-contentstudio/issues/479)  We have around 10-15 gifs not working on enonic.com. They works fine in the browser, but not when processed in Content Studio. Can we do a quick check before I change them into screenshots?  ![enonic-xp-navigation](https://user-images.githubusercontent.com/702065/57775949-883e0180-771e-11e9-9a37-65565b3f5b4b.gif)  ![enonic-simplifies-image-problems-05](https://user-images.githubusercontent.com/702065/57776148-03071c80-771f-11e9-9269-34a644efcee7.gif)  To reproduce, just upload one of these to XP.  ---  @mortyeriksen commented on [Wed May 15 2019](https://github.com/enonic/app-contentstudio/issues/479#issuecomment-492639456)  I'm quick fixing by switching from image:// to media:// in the html source.  ---  @mortyeriksen commented on [Wed May 15 2019](https://github.com/enonic/app-contentstudio/issues/479#issuecomment-492639559)  They still can't be opened in the rich text editor...  ---  @alansemenov commented on [Mon Jun 03 2019](https://github.com/enonic/app-contentstudio/issues/479#issuecomment-498235748)  Works fine in 6.15.6, gives an exception on 7.0.0  ``` 14:26:49.840 ERROR c.e.x.j.i.e.JsonExceptionMapper - Index 4096 out of bounds for length 4096 java.lang.ArrayIndexOutOfBoundsException: Index 4096 out of bounds for length 4096 at java.desktop/com.sun.imageio.plugins.gif.GIFImageReader.read(GIFImageReader.java:992) at java.desktop/javax.imageio.ImageIO.read(ImageIO.java:1468) at java.desktop/javax.imageio.ImageIO.read(ImageIO.java:1363) at com.enonic.xp.image.ImageHelper.toBufferedImage(ImageHelper.java:54) at com.enonic.xp.core.impl.image.ImageServiceImpl.retrieveBufferedImage(ImageServiceImpl.java:233) at com.enonic.xp.core.impl.image.ImageServiceImpl.readBufferedImage(ImageServiceImpl.java:185) at com.enonic.xp.core.impl.image.ImageServiceImpl.createImage(ImageServiceImpl.java:71) at com.enonic.xp.core.impl.image.ImageServiceImpl.lambda$readImage$0(ImageServiceImpl.java:56) at com.enonic.xp.core.impl.image.ImmutableFilesHelper.computeIfAbsent(ImmutableFilesHelper.java:47) at com.enonic.xp.core.impl.image.ImageServiceImpl.readImage(ImageServiceImpl.java:56) at com.enonic.xp.admin.impl.rest.resource.content.ContentImageResource.resolveResponseFromContentImageAttachment(ContentImageResource.java:171) at com.enonic.xp.admin.impl.rest.resource.content.ContentImageResource.getContentImage(ContentImageResource.java:96) at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.base/java.lang.reflect.Method.invoke(Method.java:566) at org.jboss.resteasy.core.MethodInjectorImpl.invoke(MethodInjectorImpl.java:137) at org.jboss.resteasy.core.ResourceMethodInvoker.invokeOnTarget(ResourceMethodInvoker.java:296) at org.jboss.resteasy.core.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:250) at org.jboss.resteasy.core.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:237) at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:356) at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:179) at org.jboss.resteasy.plugins.server.servlet.ServletContainerDispatcher.service(ServletContainerDispatcher.java:220) at com.enonic.xp.jaxrs.impl.JaxRsServlet.service(JaxRsServlet.java:46) at javax.servlet.http.HttpServlet.service(HttpServlet.java:790) at com.enonic.xp.web.impl.dispatch.mapping.ServletDefinitionImpl.service(ServletDefinitionImpl.java:39) at com.enonic.xp.web.impl.dispatch.pipeline.ServletPipelineImpl.service(ServletPipelineImpl.java:40) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:45) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36) at com.enonic.xp.portal.impl.idprovider.IdProviderFilter.doHandle(IdProviderFilter.java:45) at com.enonic.xp.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:31) at com.enonic.xp.web.filter.BaseWebFilter.doFilter(BaseWebFilter.java:33) at com.enonic.xp.web.impl.dispatch.mapping.FilterDefinitionImpl.doFilter(FilterDefinitionImpl.java:40) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:50) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36) at com.enonic.xp.web.impl.auth.BasicAuthFilter.doHandle(BasicAuthFilter.java:33) at com.enonic.xp.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:31) at com.enonic.xp.web.filter.BaseWebFilter.doFilter(BaseWebFilter.java:33) at com.enonic.xp.web.impl.dispatch.mapping.FilterDefinitionImpl.doFilter(FilterDefinitionImpl.java:40) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:50) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36) at com.enonic.xp.web.impl.context.ContextFilter.lambda$doHandle$0(ContextFilter.java:33) at com.enonic.xp.context.ContextImpl.callWith(ContextImpl.java:101) at com.enonic.xp.web.impl.context.ContextFilter.doHandle(ContextFilter.java:32) at com.enonic.xp.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:31) at com.enonic.xp.web.filter.BaseWebFilter.doFilter(BaseWebFilter.java:33) at com.enonic.xp.web.impl.dispatch.mapping.FilterDefinitionImpl.doFilter(FilterDefinitionImpl.java:40) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:50) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36) at com.enonic.xp.web.vhost.impl.VirtualHostFilter.doHandle(VirtualHostFilter.java:60) at com.enonic.xp.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:31) at com.enonic.xp.web.filter.BaseWebFilter.doFilter(BaseWebFilter.java:33) at com.enonic.xp.web.impl.dispatch.mapping.FilterDefinitionImpl.doFilter(FilterDefinitionImpl.java:40) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:50) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36) at com.enonic.xp.web.impl.dos.DosFilterWrapper.doFilter(DosFilterWrapper.java:65) at com.enonic.xp.web.impl.dispatch.mapping.FilterDefinitionImpl.doFilter(FilterDefinitionImpl.java:40) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:50) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36) at com.enonic.xp.web.impl.dispatch.pipeline.FilterPipelineImpl.filter(FilterPipelineImpl.java:39) at com.enonic.xp.web.impl.dispatch.DispatchServletImpl.service(DispatchServletImpl.java:49) at javax.servlet.http.HttpServlet.service(HttpServlet.java:790) at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:860) at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:535) at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:143) at org.eclipse.jetty.server.handler.gzip.GzipHandler.handle(GzipHandler.java:527) at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:132) at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:190) at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:1595) at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:188) at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1253) at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:168) at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:473) at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:1564) at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:166) at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1155) at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141) at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:219) at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:132) at org.eclipse.jetty.server.Server.handle(Server.java:530) at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:347) at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:256) at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:279) at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:102) at org.eclipse.jetty.io.ChannelEndPoint$2.run(ChannelEndPoint.java:124) at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.doProduce(EatWhatYouKill.java:247) at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.produce(EatWhatYouKill.java:140) at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.run(EatWhatYouKill.java:131) at org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run(ReservedThreadExecutor.java:382) at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:708) at org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:626) at java.base/java.lang.Thread.run(Thread.java:834) ```  ---  @vbradnitski commented on [Wed Jun 05 2019](https://github.com/enonic/app-contentstudio/issues/479#issuecomment-499134342)  Issue moved to [enonic/xp #7140](https://github.com/enonic/xp/issues/7140) via [**ZenHub**](https://www.zenhub.com/)   ---  @GlennRicaud commented on [Thu Jun 13 2019](https://github.com/enonic/app-contentstudio/issues/479#issuecomment-501609211)  Pass parameter scaleWidth as false in preview to have same behaviour as 6.15  </body>
		<created>2019-06-17 09:39:25</created>
		<closed>2019-06-25 20:19:01</closed>
	</bug>
	<bug>
		<id>7159</id>
		<title>Some content gives NPE when resolving dependencies </title>
		<body>1. Install Superhero app 2. Select the site in the Content grid 3. Click Publish button  Bug: There's NPE in the log and a popup with error message saying "null" in Content Studio</body>
		<created>2019-06-14 10:43:56</created>
		<closed>2019-06-25 20:18:58</closed>
	</bug>
	<bug>
		<id>7140</id>
		<title>Gifs not working correctly</title>
		<body>@mortyeriksen commented on [Wed May 15 2019](https://github.com/enonic/app-contentstudio/issues/479)  We have around 10-15 gifs not working on enonic.com. They works fine in the browser, but not when processed in Content Studio. Can we do a quick check before I change them into screenshots?  ![enonic-xp-navigation](https://user-images.githubusercontent.com/702065/57775949-883e0180-771e-11e9-9a37-65565b3f5b4b.gif)  ![enonic-simplifies-image-problems-05](https://user-images.githubusercontent.com/702065/57776148-03071c80-771f-11e9-9269-34a644efcee7.gif)  To reproduce, just upload one of these to XP.  ---  @mortyeriksen commented on [Wed May 15 2019](https://github.com/enonic/app-contentstudio/issues/479#issuecomment-492639456)  I'm quick fixing by switching from image:// to media:// in the html source.  ---  @mortyeriksen commented on [Wed May 15 2019](https://github.com/enonic/app-contentstudio/issues/479#issuecomment-492639559)  They still can't be opened in the rich text editor...  ---  @alansemenov commented on [Mon Jun 03 2019](https://github.com/enonic/app-contentstudio/issues/479#issuecomment-498235748)  Works fine in 6.15.6, gives an exception on 7.0.0  ``` 14:26:49.840 ERROR c.e.x.j.i.e.JsonExceptionMapper - Index 4096 out of bounds for length 4096 java.lang.ArrayIndexOutOfBoundsException: Index 4096 out of bounds for length 4096 at java.desktop/com.sun.imageio.plugins.gif.GIFImageReader.read(GIFImageReader.java:992) at java.desktop/javax.imageio.ImageIO.read(ImageIO.java:1468) at java.desktop/javax.imageio.ImageIO.read(ImageIO.java:1363) at com.enonic.xp.image.ImageHelper.toBufferedImage(ImageHelper.java:54) at com.enonic.xp.core.impl.image.ImageServiceImpl.retrieveBufferedImage(ImageServiceImpl.java:233) at com.enonic.xp.core.impl.image.ImageServiceImpl.readBufferedImage(ImageServiceImpl.java:185) at com.enonic.xp.core.impl.image.ImageServiceImpl.createImage(ImageServiceImpl.java:71) at com.enonic.xp.core.impl.image.ImageServiceImpl.lambda$readImage$0(ImageServiceImpl.java:56) at com.enonic.xp.core.impl.image.ImmutableFilesHelper.computeIfAbsent(ImmutableFilesHelper.java:47) at com.enonic.xp.core.impl.image.ImageServiceImpl.readImage(ImageServiceImpl.java:56) at com.enonic.xp.admin.impl.rest.resource.content.ContentImageResource.resolveResponseFromContentImageAttachment(ContentImageResource.java:171) at com.enonic.xp.admin.impl.rest.resource.content.ContentImageResource.getContentImage(ContentImageResource.java:96) at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.base/java.lang.reflect.Method.invoke(Method.java:566) at org.jboss.resteasy.core.MethodInjectorImpl.invoke(MethodInjectorImpl.java:137) at org.jboss.resteasy.core.ResourceMethodInvoker.invokeOnTarget(ResourceMethodInvoker.java:296) at org.jboss.resteasy.core.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:250) at org.jboss.resteasy.core.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:237) at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:356) at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:179) at org.jboss.resteasy.plugins.server.servlet.ServletContainerDispatcher.service(ServletContainerDispatcher.java:220) at com.enonic.xp.jaxrs.impl.JaxRsServlet.service(JaxRsServlet.java:46) at javax.servlet.http.HttpServlet.service(HttpServlet.java:790) at com.enonic.xp.web.impl.dispatch.mapping.ServletDefinitionImpl.service(ServletDefinitionImpl.java:39) at com.enonic.xp.web.impl.dispatch.pipeline.ServletPipelineImpl.service(ServletPipelineImpl.java:40) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:45) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36) at com.enonic.xp.portal.impl.idprovider.IdProviderFilter.doHandle(IdProviderFilter.java:45) at com.enonic.xp.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:31) at com.enonic.xp.web.filter.BaseWebFilter.doFilter(BaseWebFilter.java:33) at com.enonic.xp.web.impl.dispatch.mapping.FilterDefinitionImpl.doFilter(FilterDefinitionImpl.java:40) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:50) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36) at com.enonic.xp.web.impl.auth.BasicAuthFilter.doHandle(BasicAuthFilter.java:33) at com.enonic.xp.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:31) at com.enonic.xp.web.filter.BaseWebFilter.doFilter(BaseWebFilter.java:33) at com.enonic.xp.web.impl.dispatch.mapping.FilterDefinitionImpl.doFilter(FilterDefinitionImpl.java:40) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:50) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36) at com.enonic.xp.web.impl.context.ContextFilter.lambda$doHandle$0(ContextFilter.java:33) at com.enonic.xp.context.ContextImpl.callWith(ContextImpl.java:101) at com.enonic.xp.web.impl.context.ContextFilter.doHandle(ContextFilter.java:32) at com.enonic.xp.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:31) at com.enonic.xp.web.filter.BaseWebFilter.doFilter(BaseWebFilter.java:33) at com.enonic.xp.web.impl.dispatch.mapping.FilterDefinitionImpl.doFilter(FilterDefinitionImpl.java:40) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:50) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36) at com.enonic.xp.web.vhost.impl.VirtualHostFilter.doHandle(VirtualHostFilter.java:60) at com.enonic.xp.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:31) at com.enonic.xp.web.filter.BaseWebFilter.doFilter(BaseWebFilter.java:33) at com.enonic.xp.web.impl.dispatch.mapping.FilterDefinitionImpl.doFilter(FilterDefinitionImpl.java:40) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:50) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36) at com.enonic.xp.web.impl.dos.DosFilterWrapper.doFilter(DosFilterWrapper.java:65) at com.enonic.xp.web.impl.dispatch.mapping.FilterDefinitionImpl.doFilter(FilterDefinitionImpl.java:40) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:50) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36) at com.enonic.xp.web.impl.dispatch.pipeline.FilterPipelineImpl.filter(FilterPipelineImpl.java:39) at com.enonic.xp.web.impl.dispatch.DispatchServletImpl.service(DispatchServletImpl.java:49) at javax.servlet.http.HttpServlet.service(HttpServlet.java:790) at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:860) at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:535) at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:143) at org.eclipse.jetty.server.handler.gzip.GzipHandler.handle(GzipHandler.java:527) at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:132) at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:190) at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:1595) at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:188) at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1253) at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:168) at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:473) at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:1564) at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:166) at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1155) at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141) at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:219) at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:132) at org.eclipse.jetty.server.Server.handle(Server.java:530) at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:347) at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:256) at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:279) at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:102) at org.eclipse.jetty.io.ChannelEndPoint$2.run(ChannelEndPoint.java:124) at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.doProduce(EatWhatYouKill.java:247) at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.produce(EatWhatYouKill.java:140) at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.run(EatWhatYouKill.java:131) at org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run(ReservedThreadExecutor.java:382) at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:708) at org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:626) at java.base/java.lang.Thread.run(Thread.java:834) ```  </body>
		<created>2019-06-05 15:31:32</created>
		<closed>2019-06-13 08:42:22</closed>
	</bug>
	<bug>
		<id>7139</id>
		<title>Don't use deep pagination to fetch all entries</title>
		<body>* Use ES 'Search Request Scroll' instead of Deep Pagination for processes like dump and export Linked to https://github.com/enonic/xp/issues/7124</body>
		<created>2019-06-04 10:10:28</created>
		<closed>2020-04-07 12:54:07</closed>
	</bug>
	<bug>
		<id>7132</id>
		<title>Unable to load class because the bundle wiring is no longer valid</title>
		<body>I have some code in main.js that creates a node on startup, and some code in main.js disposer that deletes a node in application stop.  When you start and stop an installed app this works fine.  However when you deploy a new version of the app it looks like the disposer code fail because the app has already been removed.</body>
		<created>2019-05-29 08:59:29</created>
		<closed>2020-04-07 12:54:06</closed>
	</bug>
	<bug>
		<id>7124</id>
		<title>Dump error when repo has more than 10000 nodes</title>
		<body>xpVersion = 7.0.0  Using data tool box app. Right after finishing:  ```bash enonic dump upgrade enonic dump load ```  Log ```txt 13:46:16.330 ERROR s.r.enonic.datatoolbox.RcdScriptBean - Error while creating dump com.enonic.xp.repo.impl.dump.RepoDumpException: Error occurred when dumping repository com.enonic.yase at com.enonic.xp.repo.impl.dump.RepoDumper.doExecute(RepoDumper.java:122) at com.enonic.xp.context.ContextImpl.callWith(ContextImpl.java:101) at com.enonic.xp.repo.impl.dump.RepoDumper.lambda$execute$0(RepoDumper.java:94) at java.base/java.lang.Iterable.forEach(Iterable.java:75) at com.enonic.xp.repo.impl.dump.RepoDumper.execute(RepoDumper.java:94) at com.enonic.xp.repo.impl.dump.DumpServiceImpl.dump(DumpServiceImpl.java:229) at systems.rcd.enonic.datatoolbox.RcdDumpScriptBean.lambda$create$2(RcdDumpScriptBean.java:186) at systems.rcd.enonic.datatoolbox.RcdScriptBean.runSafely(RcdScriptBean.java:46) at systems.rcd.enonic.datatoolbox.RcdScriptBean.runSafely(RcdScriptBean.java:39) at systems.rcd.enonic.datatoolbox.RcdDumpScriptBean.create(RcdDumpScriptBean.java:176) at jdk.scripting.nashorn.scripts/jdk.nashorn.internal.scripts.Script$Recompilation$956$499A$dump_create.L:1#post#task(systems.rcd.enonic.datatoolbox:/services/dump-create/dump-create.js:15) at jdk.nashorn.javaadapters.java_util_function_Function.apply(Unknown Source) at com.enonic.xp.lib.task.TaskWrapper.runTask(TaskWrapper.java:38) at com.enonic.xp.task.TaskProgressReporterContext.lambda$withContext$0(TaskProgressReporterContext.java:36) at com.enonic.xp.lib.task.TaskWrapper.run(TaskWrapper.java:31) at com.enonic.xp.impl.task.TaskWrapper.lambda$callTaskWithContext$0(TaskWrapper.java:90) at com.enonic.xp.context.ContextImpl.callWith(ContextImpl.java:101) at com.enonic.xp.impl.task.TaskWrapper.callTaskWithContext(TaskWrapper.java:89) at com.enonic.xp.impl.task.TaskWrapper.doRun(TaskWrapper.java:75) at com.enonic.xp.impl.task.TaskWrapper.run(TaskWrapper.java:59) at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) at java.base/java.lang.Thread.run(Thread.java:834) Caused by: com.enonic.xp.repository.IndexException: Search request failed after [30s], query: [{   "from" : 10000,   "size" : 5000,   "query" : {     "wildcard" : {       "_parentpath" : "/*"     }   },   "explain" : false,   "sort" : [ {     "_path._orderby" : {       "order" : "asc",       "ignore_unmapped" : true     }   } ] }] at com.enonic.xp.repo.impl.elasticsearch.executor.AbstractExecutor.doSearchRequest(AbstractExecutor.java:66) at com.enonic.xp.repo.impl.elasticsearch.executor.SearchExecutor.doSearch(SearchExecutor.java:77) at com.enonic.xp.repo.impl.elasticsearch.executor.SearchExecutor.execute(SearchExecutor.java:63) at com.enonic.xp.repo.impl.elasticsearch.search.SearchDaoImpl.search(SearchDaoImpl.java:23) at com.enonic.xp.repo.impl.search.NodeSearchServiceImpl.doQuery(NodeSearchServiceImpl.java:57) at com.enonic.xp.repo.impl.search.NodeSearchServiceImpl.query(NodeSearchServiceImpl.java:40) at com.enonic.xp.repo.impl.node.FindNodeIdsByParentCommand.execute(FindNodeIdsByParentCommand.java:79) at com.enonic.xp.repo.impl.node.NodeServiceImpl.executeFindByParent(NodeServiceImpl.java:285) at com.enonic.xp.repo.impl.node.NodeServiceImpl.findByParent(NodeServiceImpl.java:254) at com.enonic.xp.repo.impl.node.executor.BatchedGetChildrenExecutor.execute(BatchedGetChildrenExecutor.java:55) at com.enonic.xp.repo.impl.dump.RepoDumper.dumpBranch(RepoDumper.java:154) at com.enonic.xp.repo.impl.dump.RepoDumper.doExecute(RepoDumper.java:118) ... 24 common frames omitted Caused by: org.elasticsearch.action.search.SearchPhaseExecutionException: all shards failed at org.elasticsearch.action.search.AbstractSearchAsyncAction.onFirstPhaseResult(AbstractSearchAsyncAction.java:206) at org.elasticsearch.action.search.AbstractSearchAsyncAction$1.onFailure(AbstractSearchAsyncAction.java:152) at org.elasticsearch.action.ActionListenerResponseHandler.handleException(ActionListenerResponseHandler.java:46) at org.elasticsearch.transport.TransportService$DirectResponseChannel.processException(TransportService.java:874) at org.elasticsearch.transport.TransportService$DirectResponseChannel.sendResponse(TransportService.java:852) at org.elasticsearch.transport.TransportService$4.onFailure(TransportService.java:389) at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:39) ... 3 common frames omitted Caused by: org.elasticsearch.search.query.QueryPhaseExecutionException: Result window is too large, from + size must be less than or equal to: [10000] but was [15000]. See the scroll api for a more efficient way to request large data sets. This limit can be set by changing the [index.max_result_window] index level parameter. at org.elasticsearch.search.internal.DefaultSearchContext.preProcess(DefaultSearchContext.java:212) at org.elasticsearch.search.query.QueryPhase.preProcess(QueryPhase.java:103) at org.elasticsearch.search.SearchService.createContext(SearchService.java:689) at org.elasticsearch.search.SearchService.createAndPutContext(SearchService.java:633) at org.elasticsearch.search.SearchService.executeFetchPhase(SearchService.java:472) at org.elasticsearch.search.action.SearchServiceTransportAction$SearchQueryFetchTransportHandler.messageReceived(SearchServiceTransportAction.java:392) at org.elasticsearch.search.action.SearchServiceTransportAction$SearchQueryFetchTransportHandler.messageReceived(SearchServiceTransportAction.java:389) at org.elasticsearch.transport.TransportRequestHandler.messageReceived(TransportRequestHandler.java:33) at org.elasticsearch.transport.RequestHandlerRegistry.processMessageReceived(RequestHandlerRegistry.java:77) at org.elasticsearch.transport.TransportService$4.doRun(TransportService.java:378) at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37) ... 3 common frames omitted ```</body>
		<created>2019-05-23 11:48:00</created>
		<closed>2019-06-11 10:57:12</closed>
	</bug>
	<bug>
		<id>7117</id>
		<title>Permission indexing - Anonymous/Everyone mixup</title>
		<body>Reported by @espen42  Nodes with READ permission for "role:system:anonymous" are index with "_permissions.read = 'role:system.everyone'"  Try to reproduce and fix</body>
		<created>2019-05-22 14:15:06</created>
		<closed>2020-02-26 12:22:14</closed>
	</bug>
	<bug>
		<id>7115</id>
		<title>accents gives different results (when it should not due to asciifolding)</title>
		<body>These give different results fulltext('from', 'diare', 'OR', 'standard') fulltext('from', 'diaré', 'OR', 'standard')  https://github.com/enonic/lib-yase/issues/57</body>
		<created>2019-05-22 11:02:58</created>
		<closed>2019-05-28 12:55:46</closed>
	</bug>
	<bug>
		<id>7114</id>
		<title>Check if node exists when checking if content has unpublished children</title>
		<body>@sgauruseu commented on [Tue Apr 02 2019](https://github.com/enonic/app-contentstudio/issues/385)  1. Create and publish a folder. 2. **Click on  checkbox** in the grid and open the folder , press `Delete` button in wizard and confirm it . 3. Do not close the wizard and select Unpublish menu item.  ![image](https://user-images.githubusercontent.com/3728712/55399121-eb9b1800-5552-11e9-9691-7cba769ac977.png)  **BUG**. Wizard closes and NullPointerException in server.log  ![image](https://user-images.githubusercontent.com/3728712/55399325-7845d600-5553-11e9-89b7-d4c8a9ddb072.png)   `NullPointerException: null at com.enonic.xp.repo.impl.node.HasUnpublishedChildrenCommand.execute(HasUnpublishedChildrenCommand.java:34) at com.enonic.xp.repo.impl.node.NodeServiceImpl.hasUnpublishedChildren(NodeServiceImpl.java:968) at com.enonic.xp.core.impl.content.ContentServiceImpl.hasUnpublishedChildren(ContentServiceImpl.java:963) at com.enonic.xp.admin.impl.rest.resource.content.ContentResource.lambda$hasUnpublishedChildren$3(ContentResource.java:541) at java.base/java.lang.Iterable.forEach(Iterable.java:75) at com.enonic.xp.admin.impl.rest.resource.content.ContentResource.hasUnpublishedChildren(ContentResource.java:539) at jdk.internal.reflect.GeneratedMethodAccessor120.invoke(Unknown Source) at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.base/java.lang.reflect.Method.invoke(Method.java:566) at org.jboss.resteasy.core.MethodInjectorImpl.invoke(MethodInjectorImpl.java:137) at org.jboss.resteasy.core.ResourceMethodInvoker.invokeOnTarget(ResourceMethodInvoker.java:296) at org.jboss.resteasy.core.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:250) at org.jboss.resteasy.core.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:237) at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:356) at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:179) at org.jboss.resteasy.plugins.server.servlet.ServletContainerDispatcher.service(ServletContainerDispatcher.java:220) at com.enonic.xp.jaxrs.impl.JaxRsServlet.service(JaxRsServlet.java:46) at javax.servlet.http.HttpServlet.service(HttpServlet.java:790) at com.enonic.xp.web.impl.dispatch.mapping.ServletDefinitionImpl.service(ServletDefinitionImpl.java:39) at com.enonic.xp.web.impl.dispatch.pipeline.ServletPipelineImpl.service(ServletPipelineImpl.java:40) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:45) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36) at com.enonic.xp.portal.impl.idprovider.IdProviderFilter.doHandle(IdProviderFilter.java:45) at com.enonic.xp.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:31) at com.enonic.xp.web.filter.BaseWebFilter.doFilter(BaseWebFilter.java:33) at com.enonic.xp.web.impl.dispatch.mapping.FilterDefinitionImpl.doFilter(FilterDefinitionImpl.java:40) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:50) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36) at com.enonic.xp.web.impl.auth.BasicAuthFilter.doHandle(BasicAuthFilter.java:33) at com.enonic.xp.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:31) at com.enonic.xp.web.filter.BaseWebFilter.doFilter(BaseWebFilter.java:33) at com.enonic.xp.web.impl.dispatch.mapping.FilterDefinitionImpl.doFilter(FilterDefinitionImpl.java:40) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:50) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36) at com.enonic.xp.web.impl.context.ContextFilter.lambda$doHandle$0(ContextFilter.java:33) at com.enonic.xp.context.ContextImpl.callWith(ContextImpl.java:101) at com.enonic.xp.web.impl.context.ContextFilter.doHandle(ContextFilter.java:32) at com.enonic.xp.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:31) at com.enonic.xp.web.filter.BaseWebFilter.doFilter(BaseWebFilter.java:33) at com.enonic.xp.web.impl.dispatch.mapping.FilterDefinitionImpl.doFilter(FilterDefinitionImpl.java:40) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:50) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36) at com.enonic.xp.web.vhost.impl.VirtualHostFilter.doHandle(VirtualHostFilter.java:60) at com.enonic.xp.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:31) at com.enonic.xp.web.filter.BaseWebFilter.doFilter(BaseWebFilter.java:33) at com.enonic.xp.web.impl.dispatch.mapping.FilterDefinitionImpl.doFilter(FilterDefinitionImpl.java:40) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:50) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36) at com.enonic.xp.web.impl.dos.DosFilterWrapper.doFilter(DosFilterWrapper.java:65) at com.enonic.xp.web.impl.dispatch.mapping.FilterDefinitionImpl.doFilter(FilterDefinitionImpl.java:40) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:50) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36) at com.enonic.xp.web.impl.dispatch.pipeline.FilterPipelineImpl.filter(FilterPipelineImpl.java:39) at com.enonic.xp.web.impl.dispatch.DispatchServletImpl.service(DispatchServletImpl.java:49) at javax.servlet.http.HttpServlet.service(HttpServlet.java:790) at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:860) at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:535) at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:143) at org.eclipse.jetty.server.handler.gzip.GzipHandler.handle(GzipHandler.java:455) at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:132) at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:190) at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:1595) at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:188) at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1253) at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:168) at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:473) at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:1564) at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:166) at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1155) at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141) at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:219) at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:132) at org.eclipse.jetty.server.Server.handle(Server.java:530) at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:347) at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:256) at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:279) at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:102) at org.eclipse.jetty.io.ChannelEndPoint$2.run(ChannelEndPoint.java:124) at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.doProduce(EatWhatYouKill.java:247) at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.produce(EatWhatYouKill.java:140) at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.run(EatWhatYouKill.java:131) at org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run(ReservedThreadExecutor.java:382) at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:708) at org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:626) at java.base/java.lang.Thread.run(Thread.java:834) `  </body>
		<created>2019-05-22 08:32:13</created>
		<closed>2019-06-25 20:19:01</closed>
	</bug>
	<bug>
		<id>7113</id>
		<title>Application installation cluster events missing</title>
		<body>In some cases (dump load for example) the event about application installation is not sent Reproduced in both 6.15 and 7.0. Fix in 7.0.1 and 7.1 Merge in 6.15 with the other fix #7058 </body>
		<created>2019-05-22 08:21:03</created>
		<closed>2019-05-28 12:55:47</closed>
	</bug>
	<bug>
		<id>7109</id>
		<title>Unauthorized error if principals are missing</title>
		<body>- I imported content with principals that are not present on my installation - While manipulating these contents, I got 403 errors while being authenticated as an admin user  Resolution of rights should not fail because of missing principals</body>
		<created>2019-05-16 12:28:11</created>
		<closed>2019-05-16 13:45:50</closed>
	</bug>
	<bug>
		<id>7108</id>
		<title>ImageContentProcessor deletes existing custom extra data</title>
		<body>Ticket https://enonic.zendesk.com/agent/tickets/2901  - Create an image with custom extra data  Example: ``` "x": {    "com-enonic-myapp": {      "relatedFile": "41331350-8387-4ad6-9cd6-a8b7897c07bd"    }  } ``` - Reprocess the branch  ``toolbox reprocess -a su:password -s draft:/`` - The custom extra data has been deleted (ImageContentProcessor)  =&gt; To be fixed in 6.15 and 7.0</body>
		<created>2019-05-16 12:16:21</created>
		<closed>2019-06-11 10:57:13</closed>
	</bug>
	<bug>
		<id>7107</id>
		<title>Missing outbound dependencies for extra data references</title>
		<body>Support ticket: https://enonic.zendesk.com/agent/tickets/2901 Report fix #6747 in 6.15</body>
		<created>2019-05-16 12:11:01</created>
		<closed>2019-05-28 12:55:48</closed>
	</bug>
	<bug>
		<id>7106</id>
		<title>Stop resolution of dependency branch on a published reference</title>
		<body>If I want to publish an item, the publishingwizard will traverse "infinitely" to find any referenced items that are not published. i.e.  /my/first (modified)-&gt; second /my/second (published) -&gt; third /my/third (new)  In this case, trying to publish "my/first" will recursively find "/my/thrid" and include it in items to publish. This behaviour is wrong, as we should stop searching when we come to a published item i.e. my/second in this case.  This cause massive publishing listings for editors.</body>
		<created>2019-05-14 15:42:11</created>
		<closed>2019-06-25 20:18:56</closed>
	</bug>
	<bug>
		<id>7105</id>
		<title>Controller of application unassigned executed</title>
		<body>* Assign an application to a site * Create a content and assign a controller from this application * Remove the application =&gt; When rendering the content the controller is still executed</body>
		<created>2019-05-15 12:06:03</created>
		<closed>2019-09-03 13:13:45</closed>
	</bug>
	<bug>
		<id>7100</id>
		<title>Node lib - Push - IncludeChildren is ignored</title>
		<body>Testing out with app-features, I have created a parent and a child, then try to modify them.  The diff status is NEW for the child, untill I push it separately.  This is for 7.0.0-RC3</body>
		<created>2019-05-02 16:08:00</created>
		<closed>2019-09-03 12:10:33</closed>
	</bug>
	<bug>
		<id>7097</id>
		<title>Handle spaces in server script parameters</title>
		<body>@sigdestad commented on [Thu Apr 25 2019](https://github.com/enonic/cli-enonic/issues/127)  At least on macs, spaces are not working properly for sandboxes. Apparently, sandbox is created fine, but XP_HOME is set incorrectly?  See screenshot below: ![Screenshot 2019-04-25 at 12 44 48](https://user-images.githubusercontent.com/482228/56730373-265e2d80-6758-11e9-95a8-ae92ad7ec8eb.png)  Fix and verify on both Mac and Windows..  </body>
		<created>2019-04-30 13:13:40</created>
		<closed>2019-05-15 08:30:14</closed>
	</bug>
	<bug>
		<id>7085</id>
		<title>Default values not set on sub components</title>
		<body>@alansemenov commented on [Thu Apr 11 2019](https://github.com/enonic/app-contentstudio/issues/424)  1. Open a site / Page Editor 2. Open the Page Components view 3. Add a part inside the Page Components view (via context menu) 4. Select descriptor for this part (inside the Inspect panel)  The page auto-saves, the part remains selected on the page and inside the Inspect panel but it's no longer selected inside the Page Components view  </body>
		<created>2019-04-16 12:29:30</created>
		<closed>2019-06-25 20:19:01</closed>
	</bug>
	<bug>
		<id>7083</id>
		<title>Sandbox start/stop trouble</title>
		<body>Created sandbox did not know that it had stopped (as by my command). I solved this problem by creating a new sandbox, possibly could also be solved by ```$enonic sandbox stop``` I'm not sure how to replicate this problem.</body>
		<created>2019-04-16 07:22:17</created>
		<closed>2019-04-16 09:28:52</closed>
	</bug>
	<bug>
		<id>7077</id>
		<title>Repository service available before Repository event listener</title>
		<body>The repository event listener should have been "activated" before the repository service is available</body>
		<created>2019-04-12 13:19:47</created>
		<closed>2019-04-23 11:26:21</closed>
	</bug>
	<bug>
		<id>7074</id>
		<title>Install as service fails</title>
		<body>install_service.sh fails, fix</body>
		<created>2019-04-12 13:03:52</created>
		<closed>2019-04-23 11:26:18</closed>
	</bug>
	<bug>
		<id>7070</id>
		<title>Initialisation waiting failing if taking more than 30s on non-master nodes</title>
		<body>Should handle the case where it becomes master</body>
		<created>2019-04-12 11:51:29</created>
		<closed>2019-04-23 11:26:18</closed>
	</bug>
	<bug>
		<id>7069</id>
		<title>Data import doubly decodes text.</title>
		<body>When importing data that has been exported from cms, using the cms2xp tool, a string like "&amp;amp;quot;" turns into an single quote: "  -  So, it seems the text is decoded twice, first to "&amp;quot;" and then to the quote sign: "  Here is an example from a customer.  In cms, they have this custom HTML: ``` &lt;p&gt;&lt;a href="/naringsliv/tema/forsikrings-og-pensjonspakker" data-event="{&amp;quot;event_category&amp;quot;: &amp;quot;button&amp;quot;, &amp;quot;event_action&amp;quot;: &amp;quot;click&amp;quot;,&amp;quot;event_label&amp;quot;: &amp;quot;se-php&amp;quot;}"&gt;Se pakkene her&lt;/a&gt;&lt;/p&gt; ``` This is also what the import should look like, when we import it to XP.  The cms2xp tool will encode the text to this: ``` &lt;string name="button-link"&gt;&amp;lt;p&amp;gt;&amp;lt;a data-event="{&amp;amp;quot;event_category&amp;amp;quot;: &amp;amp;quot;button&amp;amp;quot;, &amp;amp;quot;event_action&amp;amp;quot;: &amp;amp;quot;click&amp;amp;quot;,&amp;amp;quot;event_label&amp;amp;quot;: &amp;amp;quot;se-php&amp;amp;quot;}" href="/naringsliv/tema/forsikrings-og-pensjonspakker"&amp;gt;Se pakkene her&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;&lt;/string&gt; ``` So, the text "&amp;quot;" have been encoded to "&amp;amp;quot;"  -  This is normal.  The ampersand (&amp;) is a special character that should be encoded.  The problem arise when the text is importet to XP.  Then we get this: ``` "button-link": "&lt;p&gt;&lt;a data-event="{"event_category": "button", "event_action": "click","event_label": "se-php"}" href="/naringsliv/tema/forsikrings-og-pensjonspakker"&gt;Se pakkene her&lt;/a&gt;&lt;/p&gt;", ```  **Please make sure the import only decodes the text once.**</body>
		<created>2019-04-12 10:29:43</created>
		<closed>2019-04-23 11:26:21</closed>
	</bug>
	<bug>
		<id>7063</id>
		<title>Exception in version history panel</title>
		<body>@sgauruseu commented on [Thu Apr 04 2019](https://github.com/enonic/app-contentstudio/issues/393)  1. Install SuperHero 2. Open Filter Panel and check `Post` (Comment, Landing Page) 3. Select any post-content and try to open Versions Widget  ![image](https://user-images.githubusercontent.com/3728712/55553543-246cf580-56e9-11e9-83d5-4153545f60b0.png)   **BUG**: **NullPointerException in server.log and  500 error in console**  java.lang.NullPointerException: null         at com.enonic.xp.core.impl.content.ContentVersionFactory.doCreateContentVersion(ContentVersionFactory.java:53)         at com.enonic.xp.core.impl.content.ContentVersionFactory.create(ContentVersionFactory.java:43)         at com.enonic.xp.core.impl.content.ContentVersionFactory.create(ContentVersionFactory.java:33)         at com.enonic.xp.core.impl.content.FindContentVersionsCommand.doGetContentVersions(FindContentVersionsCommand.java:60)         at com.enonic.xp.core.impl.content.FindContentVersionsCommand.execute(FindContentVersionsCommand.java:37)         at com.enonic.xp.core.impl.content.ContentServiceImpl.getVersions(ContentServiceImpl.java:897)         at com.enonic.xp.admin.impl.rest.resource.content.ContentResource.getContentVersionsForView(ContentResource.java:1234)  </body>
		<created>2019-04-08 12:20:50</created>
		<closed>2019-04-09 12:52:04</closed>
	</bug>
	<bug>
		<id>7058</id>
		<title>Dump load - Global application uninstallation before load</title>
		<body>* All non-system applications should be uninstalled before loading a dump   * If local, keep installed and started. But the uninstall event should be spread to other cluster nodes. * After load, keep the code as it is today (the code under doInstallStoredApplications already checks the presence of a local application)   The behaviour of ApplicationService is a bit complex and should be refactored in the future.</body>
		<created>2019-04-07 12:48:15</created>
		<closed>2019-04-23 11:26:14</closed>
	</bug>
	<bug>
		<id>7056</id>
		<title>FormItem already added: fieldSet1</title>
		<body>Discovered when migrating market.enonic.com from 6.15 to 7.0.0-B5  If a contenttype contains more than one mixin, lib-content getTypes() returns error "FormItem already added: fieldSet1"  Example contenttype: ``` &lt;?xml version="1.0" encoding="UTF-8"?&gt; &lt;content-type&gt;     &lt;display-name&gt;Application&lt;/display-name&gt;     &lt;super-type&gt;base:structured&lt;/super-type&gt;     &lt;form&gt;         &lt;!--mixin name="software-basic"/--&gt;         &lt;mixin name="software-license"/&gt;         &lt;input type="TextLine" name="sourceCodeUrl"&gt;             &lt;label&gt;Source code URL&lt;/label&gt;             &lt;occurrences minimum="0" maximum="1"/&gt;         &lt;/input&gt;         &lt;mixin name="software-artifact"/&gt;         &lt;!--mixin name="software-version"/--&gt;     &lt;/form&gt; &lt;/content-type&gt; ``` Example mixin 1 ``` &lt;?xml version="1.0" encoding="UTF-8"?&gt; &lt;mixin&gt;     &lt;display-name&gt;Software license&lt;/display-name&gt;     &lt;form&gt;         &lt;field-set name="License"&gt;             &lt;label&gt;License&lt;/label&gt;             &lt;items&gt;                 &lt;input name="licenseType" type="ComboBox"&gt;                     &lt;label&gt;License type&lt;/label&gt;                     &lt;occurrences minimum="1" maximum="1"/&gt;                     &lt;config&gt;                         &lt;option value="MIT"&gt;MIT&lt;/option&gt;                         &lt;option value="Apache-2.0"&gt;Apache-2.0&lt;/option&gt;                         &lt;option value="GPL-2.0"&gt;GPL-2.0&lt;/option&gt;                         &lt;option value="GPL-3.0"&gt;GPL-3.0&lt;/option&gt;                         &lt;option value="EPL-1.0"&gt;EPL-1.0&lt;/option&gt;                         &lt;option value="LGPL-3.0"&gt;LGPL-3.0&lt;/option&gt;                         &lt;option value="MPL-2.0"&gt;MPL-2.0&lt;/option&gt;                         &lt;option value="AGPL-3.0"&gt;AGPL-3.0&lt;/option&gt;                         &lt;option value="BSD-2"&gt;BSD 2-clause&lt;/option&gt;                         &lt;option value="BSD-3"&gt;BSD 3-clause&lt;/option&gt;                         &lt;option value="other"&gt;Other&lt;/option&gt;                     &lt;/config&gt;                 &lt;/input&gt;                 &lt;input name="licenseName" type="TextLine"&gt;                     &lt;label&gt;Alt license name&lt;/label&gt;                     &lt;occurrences minimum="0" maximum="1"/&gt;                 &lt;/input&gt;                 &lt;input name="licenseUrl" type="TextLine"&gt;                     &lt;label&gt;Alt license URL&lt;/label&gt;                     &lt;occurrences minimum="0" maximum="1"/&gt;                 &lt;/input&gt;             &lt;/items&gt;         &lt;/field-set&gt;     &lt;/form&gt; &lt;/mixin&gt; ``` Example mixin 2  ``` &lt;?xml version="1.0" encoding="UTF-8"?&gt; &lt;mixin&gt;     &lt;display-name&gt;Software artifact&lt;/display-name&gt;     &lt;form&gt;         &lt;field-set name="artifact"&gt;             &lt;label&gt;Artifact&lt;/label&gt;             &lt;items&gt;                 &lt;input type="TextLine" name="identifier"&gt;                     &lt;label&gt;Identifier&lt;/label&gt;                     &lt;occurrences minimum="1" maximum="1"/&gt;                     &lt;help-text&gt;Unique identifier, ie com.enonic.app.myapp&lt;/help-text&gt;                 &lt;/input&gt;                 &lt;input type="TextLine" name="groupId"&gt;                     &lt;label&gt;Group ID&lt;/label&gt;                     &lt;occurrences minimum="1" maximum="1"/&gt;                     &lt;help-text&gt;Maven group id, ie com.enonic.app&lt;/help-text&gt;                 &lt;/input&gt;                 &lt;input type="TextLine" name="artifactId"&gt;                     &lt;label&gt;Artifact ID&lt;/label&gt;                     &lt;occurrences minimum="1" maximum="1"/&gt;                     &lt;help-text&gt;Maven artifact id, ie myapp&lt;/help-text&gt;                 &lt;/input&gt;                 &lt;input type="TextLine" name="repository"&gt;                     &lt;label&gt;Repository&lt;/label&gt;                     &lt;occurrences minimum="0" maximum="1"/&gt;                     &lt;help-text&gt;https://repo.enonic.com/public/&lt;/help-text&gt;                 &lt;/input&gt;             &lt;/items&gt;         &lt;/field-set&gt;     &lt;/form&gt; &lt;/mixin&gt; ``` Removing the name attribute from the mixin field-set does not have any effect - the error is still there.</body>
		<created>2019-04-05 13:50:16</created>
		<closed>2019-04-23 11:26:13</closed>
	</bug>
	<bug>
		<id>7051</id>
		<title>Rollback banner modifications</title>
		<body>The banner picked in https://github.com/enonic/xp/issues/6872 is not displayed properly on Windows Not sure why https://github.com/enonic/xp/issues/6991 has been closed since this is still a problem Still no fix 2 months after implementation  Rolling back modifications.  Please involve backend developers in the future before modifying the backend.</body>
		<created>2019-04-03 13:11:35</created>
		<closed>2019-04-23 11:26:13</closed>
	</bug>
	<bug>
		<id>7048</id>
		<title>Explain-parameter does not work</title>
		<body>The explain-parameter in MultiRepoConnection.query / NodeConnection.query is not used.  </body>
		<created>2019-04-02 19:21:25</created>
		<closed>2019-09-17 12:26:39</closed>
	</bug>
	<bug>
		<id>7046</id>
		<title>Rollback region name removal</title>
		<body>When calling portal.getComponent() from inside a layout controller, the result in 7.0.0-B4 no longer outputs "name" (which should have had the layout display name) on the root level. This was present in all versions of 6.x  ``` 2019-04-02 09:17:59,948 INFO  com.enonic.web.enonic.com - (/site/layouts/layout-bg-color/layout-bg-color.js) {     "path": "/main/0",     "type": "layout",     "descriptor": "com.enonic.web.enonic.com:layout-bg-color",     "config": {         "paddingTop": false     },     "regions": {         "main": {             "components": []         }     } } ```</body>
		<created>2019-04-02 08:02:33</created>
		<closed>2019-04-23 11:26:21</closed>
	</bug>
	<bug>
		<id>7038</id>
		<title>Add missing descriptions for built-in content types</title>
		<body></body>
		<created>2019-03-28 10:16:46</created>
		<closed>2019-04-02 11:27:05</closed>
	</bug>
	<bug>
		<id>7027</id>
		<title>Path cache invalidation - Expose Branch service</title>
		<body>https://enonic.zendesk.com/agent/tickets/2825  Review the path cache invalidation Expose Branch Service to allow eviction of paths</body>
		<created>2019-03-26 08:48:02</created>
		<closed>2019-08-06 10:40:42</closed>
	</bug>
	<bug>
		<id>7024</id>
		<title>Node Export - Handle unicode characters</title>
		<body>https://enonic.zendesk.com/agent/tickets/2821  * Add \u000B in the value of a property in a blob * Restart XP (to avoid it being cached) * Export this node or a parent =&gt; Today the entire export fails  To be corrected in 6.15 branch and then merged to master</body>
		<created>2019-03-25 08:17:26</created>
		<closed>2019-04-23 11:26:20</closed>
	</bug>
	<bug>
		<id>7021</id>
		<title>Keep order on membership resolution</title>
		<body>@sgauruseu commented on [Fri Nov 16 2018](https://github.com/enonic/app-users/issues/174)  1. Create an user with roles: `Administration Console Login` , `Users Administrator`, `Content Manager Expert`, `Content Manager App` 2. Click on the user in grid  **Bug**:  **Expected**- roles should be sorted by 'name' **Actual** :   ![image](https://user-images.githubusercontent.com/3728712/48616730-88df2080-e9a5-11e8-9459-76deba43f2d0.png)   3. Click on `Transitive memberships`   Sorting is changed to :  ![image](https://user-images.githubusercontent.com/3728712/48616802-bdeb7300-e9a5-11e8-8dad-3c1222010d6a.png)  ### Expected : sorting should be the same (by name)  </body>
		<created>2019-03-22 13:59:10</created>
		<closed>2019-04-02 11:27:03</closed>
	</bug>
	<bug>
		<id>7015</id>
		<title>Rest services &amp; trackers ordering</title>
		<body>https://enonic.zendesk.com/agent/tickets/2816</body>
		<created>2019-03-19 07:46:00</created>
		<closed>2020-02-26 12:37:46</closed>
	</bug>
	<bug>
		<id>7012</id>
		<title>NPE on content update</title>
		<body>``` java.lang.NullPointerException: null at java.base/java.util.Objects.requireNonNull(Objects.java:221) at com.enonic.xp.portal.impl.processor.HtmlAreaContentProcessor.getProperties(HtmlAreaContentProcessor.java:215) at com.enonic.xp.portal.impl.processor.HtmlAreaContentProcessor.processPageData(HtmlAreaContentProcessor.java:148) at com.enonic.xp.portal.impl.processor.HtmlAreaContentProcessor.lambda$processUpdate$0(HtmlAreaContentProcessor.java:108) at com.enonic.xp.core.impl.content.UpdateContentCommand.editContent(UpdateContentCommand.java:197) at com.enonic.xp.core.impl.content.UpdateContentCommand.updateContentWithProcessedData(UpdateContentCommand.java:172) at com.enonic.xp.core.impl.content.UpdateContentCommand.runContentProcessors(UpdateContentCommand.java:159) at com.enonic.xp.core.impl.content.UpdateContentCommand.processContent(UpdateContentCommand.java:139) at com.enonic.xp.core.impl.content.UpdateContentCommand.doExecute(UpdateContentCommand.java:109) at com.enonic.xp.core.impl.content.UpdateContentCommand.execute(UpdateContentCommand.java:84) at com.enonic.xp.core.impl.content.ContentServiceImpl.update(ContentServiceImpl.java:324) ```</body>
		<created>2019-03-18 11:32:39</created>
		<closed>2019-04-02 11:27:01</closed>
	</bug>
	<bug>
		<id>7003</id>
		<title>Block ApplicationDeployerManager activation until services required by core libraries are activated</title>
		<body>On Deactivation/activation of a transitive dependency, ApplicationDeployerManager will be reactivated The main controller of applications having a dependency to a service might be executed before these services are available The current behaviour of libraries is not blocking until the activation of required services. This should be fixed in future versions of the libraries.  Meanwhile, we should add some dependencies on ApplicationDeployerManager to the necessary services: AdminToolDescriptorService ContentTypeService HtmlSanitizer LocaleService MailService MultipartService PortalUrlService SecurityService ScriptEventManager TaskDescriptorService TaskService ViewFunctionService WebSocketManager  </body>
		<created>2019-03-12 15:34:05</created>
		<closed>2019-03-19 12:02:36</closed>
	</bug>
	<bug>
		<id>7000</id>
		<title>Attachment binary is not deleted after the attachment was removed from content</title>
		<body>1. Create a new content of type "Attachments" under the Features site 2. Upload an attachment to both Attachment Uploaders in the Wizard. 3. Open the "Details" widget and note that both attachments are listed at the bottom of the panel  ![image](https://user-images.githubusercontent.com/11612490/54126119-1b994480-4407-11e9-922c-e84aabe56da2.png)  4. Now delete both attachments using the "X" icon. 5. They are deleted from the content but still available on the node layer (still listed in the Details widget and can be accessed via Data Toolbox)  ![image](https://user-images.githubusercontent.com/11612490/54126246-6a46de80-4407-11e9-8554-26f6d28ebf72.png)  ![image](https://user-images.githubusercontent.com/11612490/54126322-89457080-4407-11e9-8bee-b4f2186fc09e.png)  What's even worse is that attachmentUrl to such attachments are still available online after they are deleted from the content.   https://enonic.zendesk.com/agent/filters/56419022</body>
		<created>2019-03-11 13:15:22</created>
		<closed>2019-03-14 14:39:31</closed>
	</bug>
	<bug>
		<id>6991</id>
		<title>Xp ascii logo breaks in windows terminals.</title>
		<body>The logo looks like this on windows terminals: ![image](https://user-images.githubusercontent.com/3340349/54037435-6d02c300-41be-11e9-9ca9-39e61e248d96.png)  Tried out all of this: Checked if the banner.txt file has the wrong encoding. (Does not utf-8) Checked if it was terminal specific. (Is not same output in CMD, powershell) Checked to see if we did not handle propper print out in out bannerPrinter:  `xp/modules/launcher/launcher-impl/src/main/java/com/enonic/xp/launcher/impl/util/BannerPrinter.java`  Looks like we have proper printing (utf-8)  The consoles do have utf-8 support:   ![image](https://user-images.githubusercontent.com/3340349/54038857-d46e4200-41c1-11e9-987d-15a8f302c67d.png)  So i do not think its the terminals encoding causing the problem.  Here is a workaround: [Banner_2.txt](https://github.com/enonic/xp/files/2946532/Banner_2.txt) Using latin1 supported characters (even if the file is utf-8 encoded) seems to nok get the java utf-8 print confused in windows.  Here is my tiny java program that recreated the same print in windows terminal:  [BannerPrint.txt](https://github.com/enonic/xp/files/2946550/BannerPrint.txt) </body>
		<created>2019-03-08 16:12:07</created>
		<closed>2019-03-18 14:42:44</closed>
	</bug>
	<bug>
		<id>6987</id>
		<title>Check for empty config in PageDataSerializer</title>
		<body>From https://github.com/enonic/xp/pull/6988:  &gt; So I am not against fixing the config serialization. There are clearly problems here &gt; - For example before issue#6697, DescriptorBasedComponent::hasConfig was always returning true. So clearly better. &gt; But now we have cases like ComponentMapper:71 that gets the config and check if null (and this will always be true...) instead of reusing hasConfig. &gt; - Page does not necessarily always have a config not null unlike DescriptorBasedComponent. &gt; - This check added inside PageDataSerializer would be better inside Page::hasConfig, ( like it is now in DescriptorBasedComponent::hasConfig). &gt;  &gt; So to sum up: &gt; - "config" set in the constructor of Page the same way as DescriptorBasedComponent &gt; - Use hasConfig instead of (getConfig != null) when using DescriptorBasedComponent (The way it is done for Page) &gt; - Move this new check inside Page::hasConfig</body>
		<created>2019-03-07 21:20:14</created>
		<closed>2019-06-06 08:31:43</closed>
	</bug>
	<bug>
		<id>6985</id>
		<title>Fix inconsistent behaviour of Caption and Alt text fields of image content</title>
		<body>**Current state of things:** 1. Image media content has "Caption" field (rendered in the Wizard form) which is not used for anything  ![image](https://user-images.githubusercontent.com/11612490/53957978-1e7ef700-40e0-11e9-81b4-ad1105ad8ae0.png)  2. Default values for the "Insert Image" dialog's own "Caption" and "Alt text" fields come from the meta data "Description" field and image name respectively.  ![image](https://user-images.githubusercontent.com/11612490/53957705-55084200-40df-11e9-9f40-d94211c808a3.png)  3. There's "Caption" field in the Inspect panel but it never has any default value set.  4. No Alt text (`alt` attribute) is set on an image rendered by an image component.  **What we will fix:** 1. Add "Alt text" field to the media content (just like "Caption" described in step 1 above) 2. Values for the "Caption" and "Alt text" fields in the "Insert image" dialog will be taken from the media's "Caption" and "Alt text" fields respectively, with fallback to "Description" and image name (like now) 3. Default value for the Inspect panel's "Caption" field will be taken from the media's "Caption" field (with fallback to "Description"). 4. When an image from image component is rendered, we will apply `alt` attribute to `img` element, with value from the media's Alt text field (with fallback to image name). </body>
		<created>2019-03-07 13:06:24</created>
		<closed>2019-03-19 12:02:31</closed>
	</bug>
	<bug>
		<id>6973</id>
		<title>When restoring snapshots; the server continues beyone the init, making e.g applications not beein installed after restore snapshot</title>
		<body></body>
		<created>2019-03-01 19:13:12</created>
		<closed>2019-03-13 09:36:34</closed>
	</bug>
	<bug>
		<id>6968</id>
		<title>Dump migration - Cms-repo repo enty not upgraded</title>
		<body>If the dump does not include versions, the id inside the cms-repo blob is not renamed.</body>
		<created>2019-02-26 16:50:21</created>
		<closed>2019-03-05 14:00:23</closed>
	</bug>
	<bug>
		<id>6957</id>
		<title>Widget Resource - Incorrect icon URL</title>
		<body>The icon URL points to the application icon and not the widget icon. There is no endpoint to serve widget icons.  * Rename WidgetDescriptorResource to WidgetResource * Create the getIcon endpoint on WidgetResource * Fix WidgetIconUrlResolver </body>
		<created>2019-02-20 09:02:24</created>
		<closed>2019-03-19 12:02:33</closed>
	</bug>
	<bug>
		<id>6952</id>
		<title>Component config - Group by descriptor key and not application key</title>
		<body>The implementation is not done exactly as described in the issue https://github.com/enonic/xp/issues/6697 The component configs are not stored by descriptor key (applicationKey + descriptor name) but simply as application key.  For example the component described in the issue: ``` "part": {   "descriptor": "com.enonic.app.superhero:categories",   "config": {     "com-enonic-app-superhero": {       "categories": {         "showPostCount": false,         "showHierarchy": true       }     }   } } ```  This component would today be stored as: ``` "part": {   "descriptor": "com.enonic.app.superhero:categories",   "config": {     "com-enonic-app-superhero": {       "showPostCount": false,       "showHierarchy": true     }   } } ```  There are multiple places impacted: - Storage (Serialization/Deserialization) - Config processors - Dump migration of data - Dump migration of IndexConfig</body>
		<created>2019-02-20 08:38:57</created>
		<closed>2019-03-19 12:02:35</closed>
	</bug>
	<bug>
		<id>6950</id>
		<title>DecideByType - Too many types indexed as allText</title>
		<body>References and Boolean are indexed in _allText (Check for other types)  Investigate and fix</body>
		<created>2019-02-20 08:27:22</created>
		<closed>2019-04-02 11:27:01</closed>
	</bug>
	<bug>
		<id>6948</id>
		<title>Processed References - Add missing cases</title>
		<body>Some cases of HTML areas are not handled. The ones already handled: content data, extra data and site config.  But there could be in theory - Value of Text page components - Components config  I might be missing some here.</body>
		<created>2019-02-19 14:58:04</created>
		<closed>2019-03-19 12:02:36</closed>
	</bug>
	<bug>
		<id>6947</id>
		<title>Dump migration - Flat page - Migration not executed on all contents</title>
		<body>There seems to be tests that make the migration not run on most contents: - My guess: IndexConfigUpgrader.upgradePageIndexConfig  I agree that it makes no sense to have this page index configs if there are no components but it has always been like this and we should try to have a similar result between a content migrated and a new content. But the main impact and bug is that old configs (page.regions, ...)  will not be removed then.  Also it would be good to add a check that the node in question if of type "content" (To not apply this to other node of the CMS repo like issues).</body>
		<created>2019-02-19 14:23:45</created>
		<closed>2019-03-05 14:00:17</closed>
	</bug>
	<bug>
		<id>6940</id>
		<title>Last publisher info shown in the preview toolbar is incorrect</title>
		<body>1. Add a folder. 2. Create an user. 3.  Select the folder and add 'Can Publish' permission to the user.  4. Do log in with the just created user, select the folder and publish it.  **BUG**: ContentItemPreviewPanel showing that it is published by Super User, but it actually was published by a different user.  ![image](https://user-images.githubusercontent.com/3728712/52788076-dd5f6e00-3070-11e9-9a09-0a38c49a2be0.png)   **On the nightly** :   ![image](https://user-images.githubusercontent.com/3728712/52789804-fae30680-3075-11e9-9828-547050806bcd.png) </body>
		<created>2019-02-14 12:54:57</created>
		<closed>2019-03-14 09:00:47</closed>
	</bug>
	<bug>
		<id>6931</id>
		<title>XP crashes on second boot with CLI</title>
		<body>Used enonic project deploy, second time XP failed seriously spamming the log with this info:    ], s[INITIALIZING], a[id=wLz24qOaSTGXFKmQ_PnNKQ], unassigned_info[[reason=ALLOCATION_FAILED], at[2019-02-12T10:57:39.314Z], details[failed recovery, failure IndexShardRecoveryException[failed to recovery from gateway]; nested: EngineCreationFailureException[failed to create engine]; nested: EOFException; ]]], indexUUID [qVumxMSoQN6mpr-Jt60EoQ], message [failed recovery], failure [IndexShardRecoveryException[failed to recovery from gateway]; nested: EngineCreationFailureException[failed to create engine]; nested: EOFException; ] org.elasticsearch.index.shard.IndexShardRecoveryException: failed to recovery from gateway at org.elasticsearch.index.shard.StoreRecoveryService.recoverFromStore(StoreRecoveryService.java:250) at org.elasticsearch.index.shard.StoreRecoveryService.access$100(StoreRecoveryService.java:56) at org.elasticsearch.index.shard.StoreRecoveryService$1.run(StoreRecoveryService.java:129) at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) at java.base/java.lang.Thread.run(Thread.java:834) Caused by: org.elasticsearch.index.engine.EngineCreationFailureException: failed to create engine at org.elasticsearch.index.engine.InternalEngine.&lt;init&gt;(InternalEngine.java:152) at org.elasticsearch.index.engine.InternalEngineFactory.newReadWriteEngine(InternalEngineFactory.java:25) at org.elasticsearch.index.shard.IndexShard.newEngine(IndexShard.java:1513) at org.elasticsearch.index.shard.IndexShard.createNewEngine(IndexShard.java:1497) at org.elasticsearch.index.shard.IndexShard.internalPerformTranslogRecovery(IndexShard.java:970) at org.elasticsearch.index.shard.IndexShard.performTranslogRecovery(IndexShard.java:942) at org.elasticsearch.index.shard.StoreRecoveryService.recoverFromStore(StoreRecoveryService.java:241) ... 5 common frames omitted Caused by: java.io.EOFException: null at org.apache.lucene.store.InputStreamDataInput.readByte(InputStreamDataInput.java:37) at org.apache.lucene.store.DataInput.readInt(DataInput.java:101) at org.apache.lucene.store.DataInput.readLong(DataInput.java:157) at org.elasticsearch.index.translog.Checkpoint.&lt;init&gt;(Checkpoint.java:54) at org.elasticsearch.index.translog.Checkpoint.read(Checkpoint.java:83) at org.elasticsearch.index.translog.Translog.recoverFromFiles(Translog.java:337) at org.elasticsearch.index.translog.Translog.&lt;init&gt;(Translog.java:179) at org.elasticsearch.index.engine.InternalEngine.openTranslog(InternalEngine.java:205) at org.elasticsearch.index.engine.InternalEngine.&lt;init&gt;(InternalEngine.java:148) ... 11 common frames omitted 2019-02-12 11:57:39,326 WARN  org.elasticsearch.indices.cluster - [24406af8-6715-4ce4-acd4-89c5873c5069] [[storage-com.enonic.cms.default][0]] marking and sending shard failed due to [failed recovery] org.elasticsearch.index.shard.IndexShardRecoveryException: failed to recovery from gateway at org.elasticsearch.index.shard.StoreRecoveryService.recoverFromStore(StoreRecoveryService.java:250) at org.elasticsearch.index.shard.StoreRecoveryService.access$100(StoreRecoveryService.java:56) at org.elasticsearch.index.shard.StoreRecoveryService$1.run(StoreRecoveryService.java:129) at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) at java.base/java.lang.Thread.run(Thread.java:834) Caused by: org.elasticsearch.index.engine.EngineCreationFailureException: failed to create engine at org.elasticsearch.index.engine.InternalEngine.&lt;init&gt;(InternalEngine.java:152) at org.elasticsearch.index.engine.InternalEngineFactory.newReadWriteEngine(InternalEngineFactory.java:25) at org.elasticsearch.index.shard.IndexShard.newEngine(IndexShard.java:1513) at org.elasticsearch.index.shard.IndexShard.createNewEngine(IndexShard.java:1497) at org.elasticsearch.index.shard.IndexShard.internalPerformTranslogRecovery(IndexShard.java:970) at org.elasticsearch.index.shard.IndexShard.performTranslogRecovery(IndexShard.java:942) at org.elasticsearch.index.shard.StoreRecoveryService.recoverFromStore(StoreRecoveryService.java:241) ... 5 common frames omitted Caused by: java.io.EOFException: null at org.apache.lucene.store.InputStreamDataInput.readByte(InputStreamDataInput.java:37) at org.apache.lucene.store.DataInput.readInt(DataInput.java:101) at org.apache.lucene.store.DataInput.readLong(DataInput.java:157) at org.elasticsearch.index.translog.Checkpoint.&lt;init&gt;(Checkpoint.java:54) at org.elasticsearch.index.translog.Checkpoint.read(Checkpoint.java:83) at org.elasticsearch.index.translog.Translog.recoverFromFiles(Translog.java:337) at org.elasticsearch.index.translog.Translog.&lt;init&gt;(Translog.java:179) at org.elasticsearch.index.engine.InternalEngine.openTranslog(InternalEngine.java:205) at org.elasticsearch.index.engine.InternalEngine.&lt;init&gt;(InternalEngine.java:148) ... 11 common frames omitted 2019-02-12 11:57:39,326 WARN  o.elasticsearch.cluster.action.shard - [24406af8-6715-4ce4-acd4-89c5873c5069] [storage-com.enonic.cms.default][0] received shard failed for target shard [[storage-com.enonic.cms.default][0], node[5Iku8F00RVihdOQEKxp3Lw], [P], v[1630], s[INITIALIZING], a[id=FwXavpiVSGapq9JJ_H6K1A], unassigned_info[[reason=ALLOCATION_FAILED], at[2019-02-12T10:57:39.320Z], details[failed recovery, failure IndexShardRecoveryException[failed to recovery from gateway]; nested: EngineCreationFailureException[failed to create engine]; nested: EOFException; ]]], indexUUID [qVumxMSoQN6mpr-Jt60EoQ], message [failed recovery], failure [IndexShardRecoveryException[failed to recovery from gateway]; nested: EngineCreationFailureException[failed to create engine]; nested: EOFException; ] org.elasticsearch.index.shard.IndexShardRecoveryException: failed to recovery from gateway at org.elasticsearch.index.shard.StoreRecoveryService.recoverFromStore(StoreRecoveryService.java:250) at org.elasticsearch.index.shard.StoreRecoveryService.access$100(StoreRecoveryService.java:56) at org.elasticsearch.index.shard.StoreRecoveryService$1.run(StoreRecoveryService.java:129) at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) at java.base/java.lang.Thread.run(Thread.java:834) Caused by: org.elasticsearch.index.engine.EngineCreationFailureException: failed to create engine at org.elasticsearch.index.engine.InternalEngine.&lt;init&gt;(InternalEngine.java:152) at org.elasticsearch.index.engine.InternalEngineFactory.newReadWriteEngine(InternalEngineFactory.java:25) at org.elasticsearch.index.shard.IndexShard.newEngine(IndexShard.java:1513) at org.elasticsearch.index.shard.IndexShard.createNewEngine(IndexShard.java:1497) at org.elasticsearch.index.shard.IndexShard.internalPerformTranslogRecovery(IndexShard.java:970) at org.elasticsearch.index.shard.IndexShard.performTranslogRecovery(IndexShard.java:942) at org.elasticsearch.index.shard.StoreRecoveryService.recoverFromStore(StoreRecoveryService.java:241) ... 5 common frames omitted Caused by: java.io.EOFException: null at org.apache.lucene.store.InputStreamDataInput.readByte(InputStreamDataInput.java:37) at org.apache.lucene.store.DataInput.readInt(DataInput.java:101) at org.apache.lucene.store.DataInput.readLong(DataInput.java:157) at org.elasticsearch.index.translog.Checkpoint.&lt;init&gt;(Checkpoint.java:54) at org.elasticsearch.index.translog.Checkpoint.read(Checkpoint.java:83) at org.elasticsearch.index.translog.Translog.recoverFromFiles(Translog.java:337) at org.elasticsearch.index.translog.Translog.&lt;init&gt;(Translog.java:179) at org.elasticsearch.index.engine.InternalEngine.openTranslog(InternalEngine.java:205) at org.elasticsearch.index.engine.InternalEngine.&lt;init&gt;(InternalEngine.java:148) ... 11 common frames omitted 2019-02-12 11:57:39,330 INFO  c.e.x.l.i.framework.FrameworkService - Server has been stopped</body>
		<created>2019-02-12 11:01:10</created>
		<closed>2019-03-14 08:28:09</closed>
	</bug>
	<bug>
		<id>6912</id>
		<title>lib-content query() filter: unable to exclude by _id values in array</title>
		<body>XP version: 6.15.5  Why can I exclude content from a query by using a NOT IN query constraint, but if I use filters instead, I still get the undesired content in my query result?  ```javascript // Works var result = contentLib.query({     query: '_path LIKE "/content/mysite/*" AND _id NOT IN ("04e749e0-f621-4304-9f48-22cfce29606a","44af8a7e-496c-4031-b940-43f69fd23430")' });  // Doesn't work: var result = contentLib.query({     query: '_path LIKE "/content/mysite/*"',     filters: {         boolean: {             mustNot: {                 hasValue: {                     field: '_id',                     values: ['04e749e0-f621-4304-9f48-22cfce29606a','44af8a7e-496c-4031-b940-43f69fd23430']                 }             }         }     } }); ```  The documentation recommends using filters whenever possible, since the results are then are not scored and thus faster.  I have also tried using the ids filter ```javascript mustNot: {    ids: {            values: ['04e749e0-f621-4304-9f48-22cfce29606a','44af8a7e-496c-4031-b940-43f69fd23430']        } } ``` …which also doesn't seem to work - the undesired content is still included in the results.</body>
		<created>2019-02-05 13:17:50</created>
		<closed>2019-03-14 10:00:23</closed>
	</bug>
	<bug>
		<id>6899</id>
		<title>"Save" button doesn't get disabled after assigning a template with no regions to a site</title>
		<body>1. Make sure the Features app is installed. 2. Create a new site in CS, select Features, save. "Save" button is disabled now. 3. In the controller selector select "No regions".  The site is saved, but "Save" button is still enabled (pressing "Save" manually won't help). If you add a region to the template (``pages/no-regions/no-regions.xml``) in the Features app, it starts working as it should.  It shouldn't matter if the template has regions or not.</body>
		<created>2019-01-28 13:39:11</created>
		<closed>2019-02-21 12:44:36</closed>
	</bug>
	<bug>
		<id>6897</id>
		<title>ID Provider mappings - Enabled ID Prov. should not be used as default</title>
		<body></body>
		<created>2019-01-28 11:58:33</created>
		<closed>2019-02-05 13:54:56</closed>
	</bug>
	<bug>
		<id>6882</id>
		<title>Error when having more than 500 phrases</title>
		<body>Started to work on it but postponed now since we have a workaround. Seems to be a problem in Nashorn but to be confirmed. And should be dealt with before the release since this seems to be a JDK10 problem.  To reproduce the problem: * Create an app * Add the properties common and phrases from content studio and lib-admin-ui * Create a service of webapp: ``` var b = i18n.getPhrases(admin.getLocales(), ['i18n/common', 'i18n/phrases']); ``` The number of phrases keeps changing  - Try with newer JDK: - Try setting "nashorn.propmap.queue.threshold"</body>
		<created>2019-01-22 14:13:15</created>
		<closed>2020-03-02 11:45:13</closed>
	</bug>
	<bug>
		<id>6880</id>
		<title>Localization resources are not entirely loaded</title>
		<body>@sgauruseu commented on [Fri Jan 18 2019](https://github.com/enonic/app-contentstudio/issues/85)  Case 1:  This happens right after you have logged in. 1. Do Log out (if you  are logged in ) and log in again . 2. Select Features and open wizard for  Checkbox content  Bug:  text for `Publish` button is not loaded:  ![image](https://user-images.githubusercontent.com/3728712/51377556-43151480-1b1c-11e9-95cb-1a52d9579a3a.png)   Case 2: The same issue in the grid . This screenshot was created on Concourse : ![content_arrow_right](https://user-images.githubusercontent.com/3728712/51380636-3ea02a00-1b23-11e9-8c56-06eeca1fddc9.png)  Case 3  Open Issues List : ![image](https://user-images.githubusercontent.com/3728712/51525336-268d1b00-1e41-11e9-9e70-b61ca3235606.png)  Case 4: Filter Panel:  ![image](https://user-images.githubusercontent.com/3728712/51525471-7966d280-1e41-11e9-9c33-c6684d7fcb03.png)  Case 5 :   ![image](https://user-images.githubusercontent.com/3728712/51526180-d9aa4400-1e42-11e9-8a5d-ce554d644f1a.png)  Case 6 :  USERS app   ![image](https://user-images.githubusercontent.com/3728712/51526357-386fbd80-1e43-11e9-9d82-f33d4a2bfbfa.png) </body>
		<created>2019-01-22 08:56:47</created>
		<closed>2019-01-28 08:25:36</closed>
	</bug>
	<bug>
		<id>6869</id>
		<title>Setting key on dateRange aggregation ranges does not work in js API</title>
		<body>https://discuss.enonic.com/t/custom-keys-with-date-range/1795/3</body>
		<created>2019-01-18 14:09:34</created>
		<closed>2019-03-19 12:02:35</closed>
	</bug>
	<bug>
		<id>6863</id>
		<title>Handle trailing spaces in content names</title>
		<body>https://enonic.zendesk.com/agent/tickets/2731  We get multiple problems with trailing spaces in content names Either forbid it or handle it correctly</body>
		<created>2019-01-15 14:20:05</created>
		<closed>2020-02-05 09:16:44</closed>
	</bug>
	<bug>
		<id>6859</id>
		<title>No error message in Content Studio when the Content Studio app is stopped</title>
		<body>1. Open `Content Studio` in browser. 2. Open Applications and stop the `Content Studio` app 3. Go to `Content Studio` again and select any content in the grid  Issue :  Delete, Move, Duplicate are available for the content Expected :  Message should be displayed in the browser page : "Admin application [com.enonic.app.contentstudio:main] not found"</body>
		<created>2019-01-14 12:42:18</created>
		<closed>2019-03-21 14:39:21</closed>
	</bug>
	<bug>
		<id>6853</id>
		<title>Applications - Handle concurrent requests</title>
		<body>https://enonic.zendesk.com/agent/tickets/2712  To test: ``` curl -i -X POST \    -H "Content-Type:application/json" \    --cookie "JSESSIONID=8cb889e7-63c3-428b-9bfd-68c8e158a1d559ufko7j8lufqnxv9wun1vfi1.8cb889e7-63c3-428b-9bfd-68c8e158a1d5" \    -d \ '{"URL":"https://repo.enonic.com/public/com/enonic/app/imagexpert/2.0.0/imagexpert-2.0.0.jar"}' \  'http://localhost:8080/admin/rest/application/installUrl' \  &amp; \ curl -i -X POST \     -H "Content-Type:application/json" \     --cookie "JSESSIONID=8cb889e7-63c3-428b-9bfd-68c8e158a1d559ufko7j8lufqnxv9wun1vfi1.8cb889e7-63c3-428b-9bfd-68c8e158a1d5" \     -d \  '{"URL":"https://repo.enonic.com/public/com/enonic/app/imagexpert/2.0.0/imagexpert-2.0.0.jar"}' \   'http://localhost:8080/admin/rest/application/installUrl' ```</body>
		<created>2019-01-09 13:12:57</created>
		<closed>2019-08-06 10:40:41</closed>
	</bug>
	<bug>
		<id>6848</id>
		<title>Node permissions - Deny does not work</title>
		<body>Functionality not implemented (No impact on the search index)</body>
		<created>2019-01-04 14:50:46</created>
		<closed>2020-02-26 12:10:03</closed>
	</bug>
	<bug>
		<id>6843</id>
		<title>i18n defaulting to language</title>
		<body># Country and langauge code does not fallback to language code.  If the langauge code is set to `en-GB` it should default to `en`.  This does not resolve when using [localize](http://repo.enonic.com/public/com/enonic/xp/docs/6.15.4/docs-6.15.4-libdoc.zip!/module-i18n.html#.localize)  With the file being: phrases_en.properties</body>
		<created>2019-01-03 11:04:53</created>
		<closed>2019-01-08 08:40:17</closed>
	</bug>
	<bug>
		<id>6836</id>
		<title>Admin rest - Fix required role for application management</title>
		<body></body>
		<created>2018-12-28 13:39:52</created>
		<closed>2019-01-08 13:25:50</closed>
	</bug>
	<bug>
		<id>6822</id>
		<title>Fix security issue</title>
		<body>https://github.com/enonic/xp-security/issues/2</body>
		<created>2018-12-18 19:46:45</created>
		<closed>2019-01-02 09:23:11</closed>
	</bug>
	<bug>
		<id>6820</id>
		<title>Flatten page structure - Error for content mixing template and components</title>
		<body>There seems to be a problem when displaying content with both template and components * Use app-superhero in branch issue-18   * The blog posts are correctly displayed but the main page /superhero is not correct. Its components are not displayed.  Investigate and fix</body>
		<created>2018-12-17 13:40:15</created>
		<closed>2019-01-08 13:25:48</closed>
	</bug>
	<bug>
		<id>6816</id>
		<title>Use name instead of id in notification message after updating permissions for a single content</title>
		<body>@sgauruseu commented on [Sun Dec 16 2018](https://github.com/enonic/app-users/issues/183)  1. Select a folder in root or open it in wizard 2. Open Edit Permissions Dialog and  update permissions for the content 3. Press Apply button, dialog closes...  Expected : 'display name ' should be displayed in the message Bug - Incorrect notification message appears,  ![image](https://user-images.githubusercontent.com/3728712/50054322-b4465e00-0151-11e9-9cb3-a3c68d9c2a97.png)   </body>
		<created>2018-12-17 10:03:59</created>
		<closed>2019-01-08 13:25:50</closed>
	</bug>
	<bug>
		<id>6813</id>
		<title>Dump load - Obsolete repositories not deleted</title>
		<body>As discussed: The deletion of repositories is done after the load of system-repo. Thus obsolete repositories not deleted. Do the deletion before the load of system-repo</body>
		<created>2018-12-13 13:26:39</created>
		<closed>2019-01-08 13:25:51</closed>
	</bug>
	<bug>
		<id>6812</id>
		<title>Shortcut content should not be limited to site</title>
		<body>@sgauruseu commented on [Wed Dec 12 2018](https://github.com/enonic/app-contentstudio/issues/613)  1. Open  wizard for shortcut in root. 2. click on dropdawn handle (in target)  or type a name in filter options input Bug: "No matching items" appears and options do not load ![image](https://user-images.githubusercontent.com/3728712/49937099-c53f6700-fee6-11e8-9d64-da9fdfe57928.png)   `15:50:04.369 ERROR c.e.x.j.i.e.JsonExceptionMapper - Could not resolve parent site for content: java.lang.RuntimeException: Could not resolve parent site for content:         at com.enonic.xp.admin.impl.rest.resource.content.ContentSelectorQueryJsonToContentQueryConverter.resolveParentSiteIfNeeded(ContentSelectorQueryJsonToContentQueryConverter.java:119)         at com.enonic.xp.admin.impl.rest.resource.content.ContentSelectorQueryJsonToContentQueryConverter.createQueryExpr(ContentSelectorQueryJsonToContentQueryConverter.java:105)         at com.enonic.xp.admin.impl.rest.resource.content.ContentSelectorQueryJsonToContentQueryConverter.createQuery(ContentSelectorQueryJsonToContentQueryConverter.java:59)         at com.enonic.xp.admin.impl.rest.resource.content.ContentResource.findContentsBySelectorQuery(ContentResource.java:1160)`  **Click on  'ModeTogglerButton' , error notification message appears:**  ![image](https://user-images.githubusercontent.com/3728712/49937220-1d766900-fee7-11e8-8326-1333228987d2.png)   </body>
		<created>2018-12-13 12:34:18</created>
		<closed>2018-12-18 14:44:06</closed>
	</bug>
	<bug>
		<id>6807</id>
		<title>NPE on pending-delete publish</title>
		<body>While publishing pending delete contents, I got the exception below. Investigate how this happened and fix.   ```` 2018-12-10 14:12:10,772 ERROR c.e.x.j.i.e.JsonExceptionMapper - NullPointerException java.lang.NullPointerException: null at com.enonic.xp.repo.impl.node.HasUnpublishedChildrenCommand.execute(HasUnpublishedChildrenCommand.java:34) at com.enonic.xp.repo.impl.node.NodeServiceImpl.hasUnpublishedChildren(NodeServiceImpl.java:950) at com.enonic.xp.core.impl.content.ContentServiceImpl.hasUnpublishedChildren(ContentServiceImpl.java:945) at com.enonic.xp.admin.impl.rest.resource.content.ContentResource.lambda$hasUnpublishedChildren$3(ContentResource.java:539) at java.base/java.lang.Iterable.forEach(Iterable.java:75) at com.enonic.xp.admin.impl.rest.resource.content.ContentResource.hasUnpublishedChildren(ContentResource.java:537) at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.base/java.lang.reflect.Method.invoke(Method.java:566) at org.jboss.resteasy.core.MethodInjectorImpl.invoke(MethodInjectorImpl.java:137) at org.jboss.resteasy.core.ResourceMethodInvoker.invokeOnTarget(ResourceMethodInvoker.java:296) at org.jboss.resteasy.core.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:250) at org.jboss.resteasy.core.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:237) at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:356) at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:179) at org.jboss.resteasy.plugins.server.servlet.ServletContainerDispatcher.service(ServletContainerDispatcher.java:220) at com.enonic.xp.jaxrs.impl.JaxRsServlet.service(JaxRsServlet.java:46) at javax.servlet.http.HttpServlet.service(HttpServlet.java:790) at com.enonic.xp.web.impl.dispatch.mapping.ServletDefinitionImpl.service(ServletDefinitionImpl.java:39) at com.enonic.xp.web.impl.dispatch.pipeline.ServletPipelineImpl.service(ServletPipelineImpl.java:30) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:45) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36) at com.enonic.xp.portal.impl.auth.AuthFilter.doHandle(AuthFilter.java:45) at com.enonic.xp.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:31) at com.enonic.xp.web.filter.BaseWebFilter.doFilter(BaseWebFilter.java:33) at com.enonic.xp.web.impl.dispatch.mapping.FilterDefinitionImpl.doFilter(FilterDefinitionImpl.java:40) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:50) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36) at com.enonic.xp.web.impl.auth.BasicAuthFilter.doHandle(BasicAuthFilter.java:33) at com.enonic.xp.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:31) at com.enonic.xp.web.filter.BaseWebFilter.doFilter(BaseWebFilter.java:33) at com.enonic.xp.web.impl.dispatch.mapping.FilterDefinitionImpl.doFilter(FilterDefinitionImpl.java:40) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:50) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36) at com.enonic.xp.web.impl.context.ContextFilter.lambda$doHandle$0(ContextFilter.java:33) at com.enonic.xp.context.ContextImpl.callWith(ContextImpl.java:101) at com.enonic.xp.web.impl.context.ContextFilter.doHandle(ContextFilter.java:32) at com.enonic.xp.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:31) at com.enonic.xp.web.filter.BaseWebFilter.doFilter(BaseWebFilter.java:33) at com.enonic.xp.web.impl.dispatch.mapping.FilterDefinitionImpl.doFilter(FilterDefinitionImpl.java:40) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:50) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36) at com.enonic.xp.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:26) at com.enonic.xp.web.filter.BaseWebFilter.doFilter(BaseWebFilter.java:33) at com.enonic.xp.web.impl.dispatch.mapping.FilterDefinitionImpl.doFilter(FilterDefinitionImpl.java:40) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:50) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36) at com.enonic.xp.web.impl.dos.DosFilterWrapper.doFilter(DosFilterWrapper.java:64) at com.enonic.xp.web.impl.dispatch.mapping.FilterDefinitionImpl.doFilter(FilterDefinitionImpl.java:40) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:50) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36) at com.enonic.xp.web.impl.dispatch.pipeline.FilterPipelineImpl.filter(FilterPipelineImpl.java:29) at com.enonic.xp.web.impl.dispatch.DispatchServletImpl.service(DispatchServletImpl.java:35) at javax.servlet.http.HttpServlet.service(HttpServlet.java:790) at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:860) at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:535) at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:143) at org.eclipse.jetty.server.handler.gzip.GzipHandler.handle(GzipHandler.java:420) at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:132) at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:190) at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:1595) at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:188) at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1253) at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:168) at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:473) at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:1564) at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:166) at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1155) at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141) at org.eclipse.jetty.server.Dispatcher.forward(Dispatcher.java:203) at org.eclipse.jetty.server.Dispatcher.forward(Dispatcher.java:73) at com.enonic.xp.web.vhost.impl.VirtualHostFilter.doHandle(VirtualHostFilter.java:50) at com.enonic.xp.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:31) at com.enonic.xp.web.filter.BaseWebFilter.doFilter(BaseWebFilter.java:33) at com.enonic.xp.web.impl.dispatch.mapping.FilterDefinitionImpl.doFilter(FilterDefinitionImpl.java:40) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:50) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36) at com.enonic.xp.web.impl.dos.DosFilterWrapper.doFilter(DosFilterWrapper.java:64) at com.enonic.xp.web.impl.dispatch.mapping.FilterDefinitionImpl.doFilter(FilterDefinitionImpl.java:40) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:50) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36) at com.enonic.xp.web.impl.dispatch.pipeline.FilterPipelineImpl.filter(FilterPipelineImpl.java:29) at com.enonic.xp.web.impl.dispatch.DispatchServletImpl.service(DispatchServletImpl.java:35) at javax.servlet.http.HttpServlet.service(HttpServlet.java:790) at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:860) at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:535) at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:143) at org.eclipse.jetty.server.handler.gzip.GzipHandler.handle(GzipHandler.java:455) at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:132) at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:190) at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:1595) at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:188) at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1253) at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:168) at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:473) at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:1564) at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:166) at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1155) at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141) at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:132) at com.codahale.metrics.jetty9.InstrumentedHandler.handle(InstrumentedHandler.java:240) at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:132) at org.eclipse.jetty.server.Server.handle(Server.java:530) at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:347) at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:256) at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:279) at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:102) at org.eclipse.jetty.io.ChannelEndPoint$2.run(ChannelEndPoint.java:124) at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.doProduce(EatWhatYouKill.java:247) at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.produce(EatWhatYouKill.java:140) at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.run(EatWhatYouKill.java:131) at org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run(ReservedThreadExecutor.java:382) at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:708) at org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:626) at java.base/java.lang.Thread.run(Thread.java:834) ````</body>
		<created>2018-12-10 13:16:21</created>
		<closed>2018-12-20 12:24:05</closed>
	</bug>
	<bug>
		<id>6805</id>
		<title>APNG format is not supported</title>
		<body>Animation should work (like for GIF).  ![julekalenderpngif](https://user-images.githubusercontent.com/11612490/49654422-055e9f80-fa38-11e8-9112-d700f72e2b07.png) </body>
		<created>2018-12-07 14:52:14</created>
		<closed>2019-03-26 08:46:28</closed>
	</bug>
	<bug>
		<id>6793</id>
		<title>router.get does not work in an admin tool</title>
		<body>@sigdestad told me to make this.  router.dispatch works and router.filter too, but when calling next in filter it never arrives at router.get</body>
		<created>2018-12-03 09:54:32</created>
		<closed>2018-12-17 09:58:59</closed>
	</bug>
	<bug>
		<id>6788</id>
		<title>getUser() inside a namedTask returns probably the user that submitted the task</title>
		<body>I consider this a security issue because repo connect defaults to current user.  This means a named task is able to create nodes in a repo without running under a context, nor providing principals explicitly.</body>
		<created>2018-11-29 15:24:08</created>
		<closed>2018-11-30 07:21:03</closed>
	</bug>
	<bug>
		<id>6784</id>
		<title>Layout loses components when saved as fragment</title>
		<body>- Create a page with a layout. - Add components to the layout regions - Select the layout and Save as Fragment  The fragment is created, but the regions of the layout in the fragment content are empty.</body>
		<created>2018-11-28 09:11:45</created>
		<closed>2018-12-04 14:36:29</closed>
	</bug>
	<bug>
		<id>6783</id>
		<title>Delete content - Pending delete progression</title>
		<body>Follows the issue https://github.com/enonic/xp/issues/6743  - The delete progression for pending delete contents is incorrect. - Additional task: Remove the use of DeleteRunnableTask.countContentsToDelete and DeleteRunnableTask.countChildrenToDelete if possible   </body>
		<created>2018-11-27 11:01:19</created>
		<closed>2018-12-18 14:44:04</closed>
	</bug>
	<bug>
		<id>6779</id>
		<title>NodeVersion serialization - Modification of order of pattern configs on each update</title>
		<body>The ordering of patternConfigs when reading a node version is not maintained. NodeVersionJsonSerializer.toNodeVersion: - First step correctly maps the JSON string to NodeVersionJson - But the next steps will change the order by storing it in a TreeSet </body>
		<created>2018-11-26 14:05:17</created>
		<closed>2019-01-08 13:25:50</closed>
	</bug>
	<bug>
		<id>6776</id>
		<title>Illegal name character - Colon</title>
		<body>1 - Content Studio Binary names should be sanitized.  The list of illegal characters should be: '/', '\\', '*', '?', '|', ':'  2: XP 2.1 - Add ':' to the list of EXPLICITLY_ILLEGAL_CHARACTERS in com.enonic.xp.name.NameCharacterHelper 2.2 - Dump migration: Replace names that contain a name with ':'  Original issue: https://github.com/enonic/xp/issues/6444</body>
		<created>2018-11-23 12:59:12</created>
		<closed>2019-03-13 09:40:51</closed>
	</bug>
	<bug>
		<id>6768</id>
		<title>Image referenced by an HTML Area is not listed as its outbound dependency in the widget</title>
		<body>@sgauruseu commented on [Tue Nov 20 2018](https://github.com/enonic/app-contentstudio/issues/554)  1. Select `Features` and add select `Html Area`, type a name of the content . 2. Insert an image in html-area (upload an image) and save all  3. Go to the grid and select the html-area content   **Bug**: `Outbound Dependency`  for the content is empty    ![image](https://user-images.githubusercontent.com/3728712/48776476-04600b00-ece1-11e8-9877-6b105fba1204.png)   **click on uploaded image, `Inbound Dependency`  is present :**   ![image](https://user-images.githubusercontent.com/3728712/48776528-26598d80-ece1-11e8-9538-1c5c83fe6e98.png)   </body>
		<created>2018-11-21 14:24:59</created>
		<closed>2018-12-04 14:36:27</closed>
	</bug>
	<bug>
		<id>6760</id>
		<title>Small server crash on locally run server</title>
		<body>Enonic version: 6.15.4 OS: Windows  Running a server for 4+ hours locally creates a small server error. The server seems to still works like normal after the crash. ``` Exception in thread "AWT-EventQueue-0" java.lang.ClassCastException:  sun.java2d.HeadlessGraphicsEnvironment cannot be cast to sun.awt.Win32GraphicsEnvironment         at sun.awt.windows.WToolkit$3.run(WToolkit.java:841)         at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:311)         at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:758)         at java.awt.EventQueue.access$500(EventQueue.java:97)         at java.awt.EventQueue$3.run(EventQueue.java:709)         at java.awt.EventQueue$3.run(EventQueue.java:703)         at java.security.AccessController.doPrivileged(Native Method)         at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:74)         at java.awt.EventQueue.dispatchEvent(EventQueue.java:728)         at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:205)         at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:116)         at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:105)         at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)         at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:93)         at java.awt.EventDispatchThread.run(EventDispatchThread.java:82) ``` </body>
		<created>2018-11-21 09:00:17</created>
		<closed>2018-11-29 10:51:23</closed>
	</bug>
	<bug>
		<id>6755</id>
		<title>MTS video is uploaded with "unknown" content type </title>
		<body>An MTS file is a video saved in the Advanced Video Coding High Definition (AVCHD) format. It is the standard video format used by many Sony and Panasonic HD camcorders.  ![image](https://user-images.githubusercontent.com/3728712/48705867-7a923e00-ec0b-11e8-8d6d-2f3bc964ed3d.png)    </body>
		<created>2018-11-19 11:58:04</created>
		<closed>2018-12-04 14:36:25</closed>
	</bug>
	<bug>
		<id>6749</id>
		<title>Delete all existing repositories on dump load</title>
		<body></body>
		<created>2018-11-15 11:21:35</created>
		<closed>2019-03-13 09:34:25</closed>
	</bug>
	<bug>
		<id>6732</id>
		<title>Toolbox client fails with an exception</title>
		<body>It seems to be a conflict with the Guava version after the Java 11 upgrade.</body>
		<created>2018-11-09 14:42:21</created>
		<closed>2018-11-20 12:03:20</closed>
	</bug>
	<bug>
		<id>6728</id>
		<title>Incorrect order of x-data in Content Wizard</title>
		<body>When we render x-data forms in the Content Wizard we should follow the same order in which they are included in the XML schema. Now they seem to be rendered in a random order.   Note that we should render non-optional x-data first and then optional, since they look different in the UI.  Example:  _site.xml_: ```xml   &lt;x-data name="x-data-1"/&gt;   &lt;x-data name="x-data-2" optional="true"/&gt;   &lt;x-data name="x-data-3"/&gt; ```  _Wizard_:   1. x-data-1   2. x-data-3   3. x-data-2  https://discuss.enonic.com/t/is-it-possible-to-order-x-data-fields-in-form/1711/5</body>
		<created>2018-11-08 15:42:16</created>
		<closed>2018-11-20 12:03:21</closed>
	</bug>
	<bug>
		<id>6700</id>
		<title>ClusterHealth-implementation returns status RED if cluster-health message fails</title>
		<body>We have seen that cluster issues happens if a node does not respond in time due to prolonged cluster health requests.  This code in the ElasticsearchCluster:  ` try         {             final ClusterHealthResponse healthResponse = doGetHealth();             return toClusterHealth( healthResponse.getStatus() );         }         catch ( Exception e )         {             return ClusterHealth.create().                 status( ClusterHealthStatus.RED ).                 errorMessage( e.getClass().getSimpleName() + "[" + e.getMessage() + "]" ).                 build();         } `  If the clsuter-health message failes to be delivered due to GC-pauses on one of the nodes, the cluster will set itself into state RED even if the current node is not in state error. The catch exception part is too strict,. it should NOT return RED.</body>
		<created>2018-10-29 19:41:37</created>
		<closed>2020-07-28 12:05:08</closed>
	</bug>
	<bug>
		<id>6689</id>
		<title>Update of content item's display name or path is very slow</title>
		<body>1. Open any content item 2. Change display name or path 3. Save  It takes 7-8 seconds on the [nightly build server](http://nightly.enonic.net/admin/) and 3 seconds on my local server. Updating any other field is fast. I guess it's connected with the fact that path also changes and the item is "moved", but it didn't use to be (and shouldn't be) so slow.</body>
		<created>2018-10-24 15:33:33</created>
		<closed>2018-10-24 17:05:48</closed>
	</bug>
	<bug>
		<id>6682</id>
		<title>Repository map - Race condition?</title>
		<body>After the start of a cluster, I got the following everytime I tried to login on non master node: ``` 12:50:44.715 ERROR c.e.x.p.i.e.ExceptionRendererImpl - Branch with id [draft] not found com.enonic.xp.web.WebException: Branch with id [draft] not found at com.enonic.xp.web.impl.exception.ExceptionMapperImpl.map(ExceptionMapperImpl.java:32) at com.enonic.xp.portal.handler.BasePortalHandler.handleError(BasePortalHandler.java:62) at com.enonic.xp.portal.handler.BasePortalHandler.doHandle(BasePortalHandler.java:54) at com.enonic.xp.web.handler.BaseWebHandler.handle(BaseWebHandler.java:66) at com.enonic.xp.web.impl.handler.WebHandlerChainImpl.handle(WebHandlerChainImpl.java:30) at com.enonic.xp.web.impl.trace.TraceWebFilter.doHandle(TraceWebFilter.java:38) at com.enonic.xp.web.handler.BaseWebHandler.handle(BaseWebHandler.java:66) at com.enonic.xp.web.impl.handler.WebHandlerChainImpl.handle(WebHandlerChainImpl.java:30) at com.enonic.xp.web.impl.handler.WebDispatcherImpl.dispatch(WebDispatcherImpl.java:50) at com.enonic.xp.web.impl.handler.WebDispatcherServlet.doHandle(WebDispatcherServlet.java:135) at com.enonic.xp.web.impl.handler.WebDispatcherServlet.service(WebDispatcherServlet.java:63) ```  Best guess: There is a problem with the invalidation of the repository map. Confirm that this is the problem and find a robust solution</body>
		<created>2018-10-22 11:26:37</created>
		<closed>2018-10-24 12:19:36</closed>
	</bug>
	<bug>
		<id>6681</id>
		<title>Repository caching - Race condition?</title>
		<body>After the start of a cluster, I got the following everytime I tried to login on non master node: ``` 12:50:44.715 ERROR c.e.x.p.i.e.ExceptionRendererImpl - Branch with id [draft] not found com.enonic.xp.web.WebException: Branch with id [draft] not found at com.enonic.xp.web.impl.exception.ExceptionMapperImpl.map(ExceptionMapperImpl.java:32) at com.enonic.xp.portal.handler.BasePortalHandler.handleError(BasePortalHandler.java:62) at com.enonic.xp.portal.handler.BasePortalHandler.doHandle(BasePortalHandler.java:54) at com.enonic.xp.web.handler.BaseWebHandler.handle(BaseWebHandler.java:66) at com.enonic.xp.web.impl.handler.WebHandlerChainImpl.handle(WebHandlerChainImpl.java:30) at com.enonic.xp.web.impl.trace.TraceWebFilter.doHandle(TraceWebFilter.java:38) at com.enonic.xp.web.handler.BaseWebHandler.handle(BaseWebHandler.java:66) at com.enonic.xp.web.impl.handler.WebHandlerChainImpl.handle(WebHandlerChainImpl.java:30) at com.enonic.xp.web.impl.handler.WebDispatcherImpl.dispatch(WebDispatcherImpl.java:50) at com.enonic.xp.web.impl.handler.WebDispatcherServlet.doHandle(WebDispatcherServlet.java:135) at com.enonic.xp.web.impl.handler.WebDispatcherServlet.service(WebDispatcherServlet.java:63) ```  Best guess: There is a problem with the invalidation of the repository map. - Confirm that this is the problem and find a robust solution</body>
		<created>2018-10-22 11:23:32</created>
		<closed>2020-07-28 12:05:08</closed>
	</bug>
	<bug>
		<id>6674</id>
		<title>libadmin.getLauncherPath in main.js gives Empty message in exception</title>
		<body>```javascript import {toStr} from '/lib/enonic/util'; import {getLauncherPath} from '/lib/xp/admin'; log.info(toStr({getLauncherPath: getLauncherPath()})); ```</body>
		<created>2018-10-18 08:23:44</created>
		<closed>2018-10-18 11:17:29</closed>
	</bug>
	<bug>
		<id>6673</id>
		<title>libadmin.getHomeToolUrl in main.js gives Empty message in exception</title>
		<body>```javascript import {toStr} from '/lib/enonic/util'; import {getHomeToolUrl} from '/lib/xp/admin'; log.info(toStr({getHomeToolUrl: getHomeToolUrl()})); ```</body>
		<created>2018-10-18 08:22:24</created>
		<closed>2018-10-18 11:17:39</closed>
	</bug>
	<bug>
		<id>6670</id>
		<title>Event listeners may block event dispatching</title>
		<body>Events are dispatched sequentially with a single thread. That makes that an event listener function may block all event dispatching in the system.   Original issue:  ---- Event listeners in main.js and in tasks are affected by sleep in main.js  The code below should produce the following log: send got send got send got send got send got  It actually produces: send send send send send got got got got got  ```javascript lib.event.listener({ type: 'custom.*', callback: (event) =&gt; { log.info(toStr({gotEvent: event})); } }); for (let i = 0; i &lt; 5; i += 1) { lib.task.sleep(2000); const event = { type: 'whatever', distributed: false, // Send only to current cluster node. data: { a: 1 } }; log.info(toStr({sendingEvent: event})); lib.event.send(event); } ```  I will try a workaround by making the listener start inside a task.</body>
		<created>2018-10-18 07:36:15</created>
		<closed>2020-05-04 20:47:19</closed>
	</bug>
	<bug>
		<id>6667</id>
		<title>Invalid BundleContext when using libEvent.send in main.js</title>
		<body>It should be possible to use libEvent.send in main.js, right?  I'm trying to make a queue that wakes up and looks for something to do whenever it gets a event.  So basically I do this: ``` listen for FINISHED | FAILED | HUP and when available power submitNamedTask; while (true) { sleep(delay) and send HUP }; ```  But I just get Invalid BundleContext</body>
		<created>2018-10-17 13:01:04</created>
		<closed>2020-06-02 07:09:01</closed>
	</bug>
	<bug>
		<id>6660</id>
		<title>Content resolution contains dependencies of excluded dependencies</title>
		<body>1. Install Superhero app 2. Select content called "Search" and click Publish button. There are 4 items in the list of dependencies.  ![image](https://user-images.githubusercontent.com/11612490/46862007-3f366f80-ce14-11e8-9c1c-645c8503221f.png)  3. Open the Superhero site for edit. 4. Open Page Components view, select "Meta" part, open the Inspect panel.  5. In the "Links" section select content called "Link" in the "Content link" dropdown. Save the site.  ![image](https://user-images.githubusercontent.com/11612490/46862432-18c50400-ce15-11e8-9129-09f3f7f5d038.png)  5. Switch back to the grid, select "Search" again.  6. Click "Publish". There are 9 dependencies now, because Superhero has a reference to "posts/links" and dependencies of "posts/links" are also resolved and added to the list.  ![image](https://user-images.githubusercontent.com/11612490/46862220-b1a74f80-ce14-11e8-85db-b74a32b55462.png)  7. Now click "x" for the "posts/links" to remove it from the list.  The expected behaviour is that the list of dependencies goes back to 4 items, when there was no link between Superhero and "posts/links". However, only one item is deleted - dependencies of the deleted item remain in the list.  ![image](https://user-images.githubusercontent.com/11612490/46862311-e0bdc100-ce14-11e8-8dd7-e3bd14525c7c.png) </body>
		<created>2018-10-12 09:51:30</created>
		<closed>2018-10-24 07:36:10</closed>
	</bug>
	<bug>
		<id>6654</id>
		<title>requireValid param isn't taken into account during x-data PropertyTree initialization</title>
		<body>If you try to store data with potentially illegal object property names like 'Accept-Ranges' rather than 'acceptRanges' content modify will lead to the following error message: "No mapping defined for property empty with value false". No data will be stored under x, even though requireValid: false is set to false.</body>
		<created>2018-10-10 12:45:23</created>
		<closed>2019-03-19 12:02:36</closed>
	</bug>
	<bug>
		<id>6645</id>
		<title>Set-replicas is not applied to new repositories</title>
		<body>When creating a new repository, its settings should include the correct number of replicas. This information can be retrieved from the settings of `system-repo`</body>
		<created>2018-10-08 12:01:24</created>
		<closed>2019-03-13 09:33:22</closed>
	</bug>
	<bug>
		<id>6633</id>
		<title>NPE on missing model version</title>
		<body>Issue #6440 bugged. We get a NPE on missing modelVersion.</body>
		<created>2018-10-02 13:06:49</created>
		<closed>2018-10-09 10:54:21</closed>
	</bug>
	<bug>
		<id>6632</id>
		<title>Meta fields are not visible with new implementation of x-data</title>
		<body>This is not  XP-bug, this is issue in `SEO metadata ` application 1. Install the  https://market.enonic.com/vendors/enonic/com.enonic.app.metafields 2. Open new site wizard , select the application  Bug:  Meta fields are not visible  ![image](https://user-images.githubusercontent.com/3728712/46294794-44d3c000-c59f-11e8-92f2-4519d67ac2f1.png) </body>
		<created>2018-10-01 14:27:43</created>
		<closed>2018-10-02 09:26:03</closed>
	</bug>
	<bug>
		<id>6629</id>
		<title>Incorrect handling of multiple x-data entries</title>
		<body>1. Add 'select-image' x-data 2. specify  2 tags with x-data  in `application/site.xml `  -  \&lt;x-data name="select-image" optional="false" allowContentTypes="portal:site"\/&gt;   - x-data name="select-image" optional="false" allowContentTypes="base:folder"  3. deploy the application and start the server 4. Go to Applications:  ![image](https://user-images.githubusercontent.com/3728712/46286255-2d88d880-c587-11e8-88c9-9d76b68c64f6.png)   The similar issue appears, when x-data incorrectly configured.  For example-  when you use   the previous version of x-data `x-data mixin="select-image"` </body>
		<created>2018-10-01 11:35:15</created>
		<closed>2018-10-09 10:54:20</closed>
	</bug>
	<bug>
		<id>6628</id>
		<title>X-data config - impossible to specify several content types  in  allowContentTypes attribute</title>
		<body>1. add 'select-image' x-data in `x-data` folder 2. try to configure this x-data for 2 content-types **none of these options work**  - x-data name="select-image" optional="false" allowContentTypes="portal:site| base:folder" -  x-data name="select-image" optional="false" allowContentTypes="portal:site,base:folder" -  x-data name="select-image" optional="false" allowContentTypes="(portal:site|base:folder)"</body>
		<created>2018-10-01 11:09:06</created>
		<closed>2018-10-09 10:54:20</closed>
	</bug>
	<bug>
		<id>6611</id>
		<title>Only first app with controller mappings work. All other apps mappings gets ignored.</title>
		<body>App WHATEVER: ```xml &lt;mapping controller="/unversionedAssetsWHATEVER.js" order="10"&gt;             &lt;pattern&gt;/assets/WHATEVER/.*&lt;/pattern&gt; &lt;/mapping&gt; ```  App SOMETHING: ```xml &lt;mapping controller="/unversionedAssetsSOMETHING.js" order="10"&gt;             &lt;pattern&gt;/assets/SOMETHING/.*&lt;/pattern&gt; &lt;/mapping&gt; ```  If app WHATEVER is first in site, its mapping work and not app SOMETHING  mappings.   If app SOMETHING is first in site, its mapping work and not app WHATEVER  mappings.   </body>
		<created>2018-09-27 10:45:58</created>
		<closed>2018-09-28 07:13:16</closed>
	</bug>
	<bug>
		<id>6608</id>
		<title>Application config is not available in main.js</title>
		<body>The `app.config` object, when accessed in the application `main.js` script, does not contain the configuration options from the app .cfg file.  It works when the same is done from a JavaScript controller.  To reproduce it, create a main.js in the application with this code: ``` log.info('App:\r\n' + JSON.stringify(app, null, 4)); ```  Create a configuration file for the app: $XP_HOME/config/com.enonic.myappname.cfg ``` param1=value1 param2=value2 ```  Build and deploy. The config is printed out in the log but without the configuration properties.  ``` {     "name": "com.enonic.myappname",     "version": "6.15.3",     "config": {} } ```   Reported in Discuss: https://discuss.enonic.com/t/app-config-not-loaded-upon-executing-main-es6/1668/4</body>
		<created>2018-09-26 12:41:07</created>
		<closed>2018-11-06 13:51:28</closed>
	</bug>
	<bug>
		<id>6600</id>
		<title>Inline mixins don't work in macros</title>
		<body>Seen in 6.15.2 using Text component. Perhaps this is related to the new HTMLArea.</body>
		<created>2018-09-24 10:39:18</created>
		<closed>2018-11-14 08:18:49</closed>
	</bug>
	<bug>
		<id>6590</id>
		<title>Re-deploying app will close Inspect Panel in Page Editor</title>
		<body>The panel where you edit config for components is closed the moment XP detects the app is gone (actually when it is being reloaded because of changes to the app source and `gradle deploy -t` is active). This is very annoying when testing things out locally and the panel keeps closing itself all the time.  Happens at least in *6.15*</body>
		<created>2018-09-21 07:15:06</created>
		<closed>2018-12-03 09:21:21</closed>
	</bug>
	<bug>
		<id>6585</id>
		<title>DEFAULT_JAVA_OPTS for windows script</title>
		<body></body>
		<created>2018-09-20 10:48:31</created>
		<closed>2018-09-26 07:08:36</closed>
	</bug>
	<bug>
		<id>6583</id>
		<title>ES&amp;Ignite Config - Allow to define socket addresses</title>
		<body>#Override discovery.unicast.hosts &amp; discovery.unicast.port #discovery.unicast.sockets = 127.0.0.1[9300]</body>
		<created>2018-09-20 08:45:39</created>
		<closed>2018-12-04 14:36:27</closed>
	</bug>
	<bug>
		<id>6555</id>
		<title>valueLib.binary() throws Exception</title>
		<body>Trying to invoke valueLib.binary(name, stream) fails with Exception: `java.lang.ClassCastException: Cannot cast com.google.common.io.Files$FileByteSource to com.google.common.io.ByteSource`  That's weird, especially when FileByteSource extends ByteSource  Code to try: ``` var tempFile = Java.type('java.io.File').createTempFile("perm-report-", ".csv"); var Files = Java.type('com.google.common.io.Files'); var byteSource = Files.asByteSource(tempFile); var binary = valueLib.binary('report', byteSource); ``` </body>
		<created>2018-09-07 12:58:37</created>
		<closed>2019-06-27 07:08:00</closed>
	</bug>
	<bug>
		<id>6549</id>
		<title>Not possible to see full description for ID Providers in User admin tool</title>
		<body>6.15, 6.14, etc.  Description for an ID Provider in XP might need to be a bit longer than the limited with of the modal we have in User admin tool. If installing the ADFS ID Provider, the text will not fit, and will be cut. It is not possible to read it in any way (hover, break row, read more-toggle, etc). Could this be handled better?  ![screen shot 2018-09-06 at 14 59 13](https://user-images.githubusercontent.com/1465598/45158919-b0677f00-b1e5-11e8-918c-898088ee75cb.png) </body>
		<created>2018-09-06 13:01:19</created>
		<closed>2018-09-08 09:34:42</closed>
	</bug>
	<bug>
		<id>6544</id>
		<title>Wrong behaviour for "Enter"-button when inside Move-dialog</title>
		<body>**6.15.1**  When moving a content you'll be presented with the "Move dialog". Here you'll find a ContentSelector for selecting a new parent. After you have selected that parent, you might hit the Enter-key to perform the move. This doesn't work, instead the selected item in the background (current item) will be opened for editing. This is a confusing behaviour, expected is that either 1. don't support enter key and don't do anything, or 2. let enter key be the same as clicking the "Move" confirmation button and perform the move. Now, the enter-key "leaks" downwards through the dialog and is used as it would be if you just clicked something in the grid and hit enter (open for edit).  Reported by Norsk Tipping during training.</body>
		<created>2018-09-06 10:06:46</created>
		<closed>2018-09-06 12:00:07</closed>
	</bug>
	<bug>
		<id>6543</id>
		<title>Content query with mustBeReferencedById parameter incorrectly resolves outbound dependencies</title>
		<body>When content is saved in the Wizard, we're supposed to refresh previews (both in Grid and Wizard) of those items that have direct outbound references to the updated content. It was implemented [here](https://github.com/enonic/lib-admin-ui/issues/623) and [here](https://github.com/enonic/app-contentstudio/issues/243).  However, it looks that when ``api.content.ContentQueryRequest`` is called with ``mustBeReferencedBy`` parameter, it will sometimes returns a hit even if the content in ``mustBeReferencedBy`` is not a *direct* outgoing dependency (it's not show in the Dependencies widget at all).  Most likely this happens because the two contents has some indirect relation, but we are only interested in direct reference here.  It results in wizard suddenly being refreshed when a seemingly unrelated content is modified.   ![image](https://user-images.githubusercontent.com/11612490/45148769-52786e80-b1c8-11e8-9f71-2e25a941c9f2.png)  Reported by Tine [here](https://enonic.zendesk.com/agent/tickets/2540)</body>
		<created>2018-09-06 09:35:56</created>
		<closed>2018-09-26 07:08:32</closed>
	</bug>
	<bug>
		<id>6540</id>
		<title>Pasting full image data:image/jpeg type url into an ImageSelector in Content Studio leads to stackoverflow exception and in one case a server crash</title>
		<body>A student during the developer 101 course was able to get an exception and crash the server by typing a data:image type url from a google image search to an image on the web. This gives a red "null" message in Content Studio.  This should not work, but it should not be able to crash a server, as a non experienced publisher may try something like this.  1. Do a google search for an image (preferably large / high-res) 2. Right click and select "Copy image address" 3. Paste the resulting "data:image/jpeg;base64,/9j/4" .. string into an ImageSelector in a contenttype  Log from the students pc: [exception.txt](https://github.com/enonic/xp/files/2348581/exception.txt)  Stackoverflow exception when using a data/image type url from google image search (see below) [exception2-stackoverflow.txt](https://github.com/enonic/xp/files/2348586/exception2-stackoverflow.txt)  &lt;img width="515" alt="screen shot 2018-09-04 at 14 38 49" src="https://user-images.githubusercontent.com/951293/45031847-53869000-b050-11e8-9671-bc655788ceec.png"&gt; &lt;img width="341" alt="screen shot 2018-09-04 at 14 37 24" src="https://user-images.githubusercontent.com/951293/45031848-53869000-b050-11e8-80f2-0f6e4d24eb39.png"&gt;   </body>
		<created>2018-09-04 12:44:10</created>
		<closed>2018-12-18 14:44:07</closed>
	</bug>
	<bug>
		<id>6539</id>
		<title>Make it possible to override host/port discovery-settings</title>
		<body>It should be possible to set a specific host/port-combination in the discovery-settings. This has been possible earlier, and must be supported.  in 6.15.1/2 there are two different settings for this:  **In specific cluster type/provider config:** ``discovery.tcp.port`` - Accepts a port or range of ports  **In general cluster config:** ``discovery.tcp.hosts`` - Accepts a range of hosts without ports  It should be possible to e.g specify the discovery.tcp.hosts_port or similar in the specific cluster provider to override this with a &lt;host&gt;:&lt;port&gt; - setting    </body>
		<created>2018-09-04 11:42:37</created>
		<closed>2018-10-04 07:17:42</closed>
	</bug>
	<bug>
		<id>6538</id>
		<title>Error when rolling back to version of content with x-data that contains Image Selector</title>
		<body>1. Configure x-data with image selector  2. specify in the x-data allowContentType&gt;base:folder&lt;/allowContentType 3. Deploy  the application 4. Add a site, then open new folder-wizard 5. Select 2-3 images in  x-data form, save the content 6. Open Versions widget in the wizard 7. roll back the previous version  Error in console:  `_all.js:19536 Uncaught Error: Invalid content id:      at new ContentId (http://localhost:8080/admin/tool/com.enonic.xp.app.contentstudio/main/_/asset/com.enonic.xp.app.contentstudio:1536048481/admin/common/js/_all.js:1:1355160)     at http://localhost:8080/admin/tool/com.enonic.xp.app.contentstudio/main/_/asset/com.enonic.xp.app.contentstudio:1536048481/admin/common/js/_all.js:1:1441307     at Array.map (&lt;anonymous&gt;)     at ImageOptionDataLoader.sendPreLoadRequest (http://localhost:8080/admin/tool/com.enonic.xp.app.contentstudio/main/_/asset/com.enonic.xp.app.contentstudio:1536048481/admin/common/js/_all.js:1:1441283)     at ImageOptionDataLoader.BaseLoader.preLoad (`    ![image](https://user-images.githubusercontent.com/3728712/45024763-65f9cd00-b042-11e8-93ac-e9702896013c.png) </body>
		<created>2018-09-04 09:59:59</created>
		<closed>2018-09-05 12:36:53</closed>
	</bug>
	<bug>
		<id>6537</id>
		<title>Error when rolling back to version of content with x-data that contains Html Area</title>
		<body>This error appears when x-data contains occurrences of htmlArea 1. specify in the x-data   `allowContentType&gt;base:folder&lt;/allowContentType` 2. insert Htmlarea (0:0) in the config 3. Deploy the application with the x-data 4. Create a site, add new folder 5. Type text in htmlArea and save the content 6. Open the folder in wizard, open Versions widget 7. Switch to the previous version   **Bug: error appears in console :**   `Uncaught TypeError: Cannot read property 'on' of undefined     at $.attachListener (_all.js:21692)     at $.setup (_all.js:21703)     at $.m (_all.js:22238)     at _all.js:21357` `Editor with id 'api.ui.text.TextArea-8' not found` `htmlArea.setEditorContent | @ | _all.js:1 -- | -- | --   | HtmlArea.updateInputOccurrenceElement | @ | _all.js:1   | InputOccurrenceView._this.propertyValueChangedHandler | @ | _all.js:1   | (anonymous) | @ | _all.js:1   | Property.notifyPropertyValueChangedEvent | @ | _a `  **Text is not restored, when switch between versions.**  ![1](https://user-images.githubusercontent.com/3728712/45020784-9472aa80-b038-11e8-9774-9de695b8894c.png)  </body>
		<created>2018-09-04 08:47:56</created>
		<closed>2018-09-05 12:42:27</closed>
	</bug>
	<bug>
		<id>6534</id>
		<title>Content lib doesn't support new format of x-data when creating content</title>
		<body>```Javascript   var contentLib = require('/lib/xp/content');   contentLib.create({     name: 'mycontent',     data: {},     x: {         "com-enonic-app-features": {             "menu-item": {                 "menuItem": true             }         }     } ```  When x-data is passed as a part of content object when creating a content via ``create`` method of the content lib, the operation will fail with an exception:  _ERROR c.e.x.p.i.e.ExceptionRendererImpl - Mixin not found [com.enonic.app.features:menu-item] com.enonic.xp.web.WebException: Mixin not found [com.enonic.app.features:menu-item]_  Can be easily reproduced with _JS Libraries/Content_ helper in ``app-features``. </body>
		<created>2018-09-03 12:15:17</created>
		<closed>2018-09-26 07:08:32</closed>
	</bug>
	<bug>
		<id>6529</id>
		<title>GeoDistance aggregation - Allow double values</title>
		<body>https://discuss.enonic.com/t/geo-distance-aggregations-not-returning-anything/1638/6 Not really the same issue but: https://enonic.zendesk.com/agent/tickets/2541  If you pass a computed value. Example parseInt('10') instead of 10. The following exception appears: java.lang.Double cannot be cast to java.lang.Integer  Change the cast to Number. It will also allow to receive double values (which is actually what we use)</body>
		<created>2018-09-03 09:42:09</created>
		<closed>2018-09-11 11:42:02</closed>
	</bug>
	<bug>
		<id>6523</id>
		<title>Incorrect  message when user with no admin permissions tries to move content to the root directory</title>
		<body>@sgauruseu commented on [Tue Jul 10 2018](https://github.com/enonic/app-contentstudio/issues/310)  1. Create an User with roles 'Content Manager App' and 'Administration Console Login' 2. Expand Features and try to move any child content - select the content, press `Move...` on toolbar and press Move button on the modal dialog.   ![image](https://user-images.githubusercontent.com/3728712/42500084-036c2172-8439-11e8-902d-d87e6d701009.png)   </body>
		<created>2018-08-23 08:27:11</created>
		<closed>2018-08-28 11:34:14</closed>
	</bug>
	<bug>
		<id>6519</id>
		<title>Handle endpoint calls to /_/[endpoint]</title>
		<body>Today the endpoint handlers are correctly handling requests to /_/[endpoint]/[path] but not /_/[endpoint].  This problem can be seen today by trying to edit a fragment while having virtual hosting on (because the virtual hosting is normalizing /_/component/ to /_/component).  Merge both into master and 6.15</body>
		<created>2018-08-22 13:44:01</created>
		<closed>2018-08-28 11:34:25</closed>
	</bug>
	<bug>
		<id>6517</id>
		<title>Satisfied WebDispatcherServlet</title>
		<body>Happened when restarting one node of a 3nodes cluster in RED state. The 12 following OSGI services were 'SATISFIED':   com.enonic.xp.web.impl.exception.ExceptionMapperImpl   com.enonic.xp.web.impl.handler.WebDispatcherServlet   com.enonic.xp.admin.impl.portal.AdminPortalHandler    com.enonic.xp.portal.impl.app.AppHandler   com.enonic.xp.portal.impl.error.ErrorHandlerScriptFactoryImpl   com.enonic.xp.portal.impl.exception.ExceptionRendererImpl    com.enonic.xp.portal.impl.handler.attachment.AttachmentHandler   com.enonic.xp.portal.impl.handler.identity.IdentityHandler   com.enonic.xp.portal.impl.handler.mapping.MappingHandler   com.enonic.xp.portal.impl.handler.portal.PortalHandler   com.enonic.xp.portal.impl.handler.service.ServiceHandler   com.enonic.xp.portal.impl.websocket.WebSocketManagerImpl  Also to note. There was an exception on startup for this node: ``` 23:45:17.473 ERROR c.e.x.c.i.app.ApplicationServiceImpl - Cannot install application [no.gjensidige.intra.redirect] java.lang.NullPointerException: null at com.enonic.xp.core.impl.app.ApplicationServiceImpl.storedApplicationIsStarted(ApplicationServiceImpl.java:448) at com.enonic.xp.core.impl.app.ApplicationServiceImpl.doInstallStoredApplications(ApplicationServiceImpl.java:212) ```  The Enonic XP version (&lt;6.15) is to be confirmed. It matters when trying to reproduce since the startup has been changed with the new cluster behaviour in 6.15 </body>
		<created>2018-08-22 10:10:51</created>
		<closed>2020-09-15 11:59:45</closed>
	</bug>
	<bug>
		<id>6508</id>
		<title>Incorrect URL generation from endpoints under /admin/tool</title>
		<body>There is no BasePortalHandler for '/admin/tool'. The implication can be seen, for example, when generating URL from a service served under '/admin/tool'  Call to 'http://localhost:8080/admin/tool/com.enonic.app.features/mytool/_/service/com.enonic.app.features/test' ``` exports.get = function () {         return {         body: require('/lib/xp/portal').serviceUrl({             'service': 'myservice'         })     }; }; ``` Returns: ``/_/service/com.enonic.app.features/myservice`` When it should return: ``/admin/tool/com.enonic.app.features/mytool/_/service/com.enonic.app.features/myservice``   </body>
		<created>2018-08-20 08:47:37</created>
		<closed>2018-08-28 11:35:45</closed>
	</bug>
	<bug>
		<id>6506</id>
		<title>Handle case of '/content' node and call to controllers with content path '/'</title>
		<body>The main question to answer is the following: Is the node '/content' a content or are contents only the nodes under '/content'? (I would now balance to '/content' not being a content)  There are many inconsistencies at different level:  At data level: **Not treated as a content**: The node '/content' has a _nodeType "default" and not "content", unlike other contents **Treated as a content**: The node '/content' has a type "base:folder", a displayName "Content", ... Basically all the properties of a content  Content Service: **Treated as a content**: Retrieving the content for the path '/' through the content service will return the node '/content'  ContentPath: **Not treated as a content**: You cannot really create a ContentPath for the content path '/'. There is event a check "No content can be "root content": " somewhere in the code.  Portal: **Treated as a content**: If you call a controller (example: http://localhost:8080/portal/draft/_/service/com.enonic.app.myapp/myservice) without a content path, the current content is the node '/content'. A call to portalLib.getContent will return the node '/content' as a content.   An obvious impact of this inconsistencies is for URL generation,  * Controllers with content path '/' have the node '/content' as current content * The content path for the node '/content' is generated as '/content'.  Example of test: ``` exports.get = function () {     return {         body: require('/lib/xp/portal').serviceUrl({             'service': 'myservice'         })     }; }; ```  Correct: http://localhost:8080/portal/draft/features/_/service/com.enonic.app.features/test   ``/portal/draft/features/_/service/com.enonic.app.features/myservice`` http://localhost:8080/portal/draft/features/subcontent/_/service/com.enonic.app.features/test   ``/portal/draft/features/subcontent/_/service/com.enonic.app.features/myservice``  Incorrect(execute while being admin or cms.cm.app) http://localhost:8080/portal/draft/_/service/com.enonic.app.features/test   ``/portal/draft/content/_/service/com.enonic.app.features/myservice``</body>
		<created>2018-08-17 08:52:28</created>
		<closed>2018-08-28 11:35:09</closed>
	</bug>
	<bug>
		<id>6505</id>
		<title>Java env proxy fails in dev mode</title>
		<body>You can setup a lot of environment variables for proxy.  Java will probably ignore these:  - http_proxy - https_proxy - HTTP_PROXY - HTTPS_PROXY - no_proxy  But might use these:  - JAVA_OPTS - DEFAULT_JVM_OPTS  Which are typically setup like:  ``` -Dhttp.proxyHost=SNIP -Dhttps.proxyHost=SNIP -Dhttp.proxyPort=SNIP -Dhttps.proxyPort=SNIP -Dhttp.proxyUser=SNIP -Dhttps.proxyUser=SNIP -Dhttp.proxyPassword=SNIP -Dhttps.proxyPassword=SNIP -Dhttp.nonProxyHosts=SNIP -Dhttps.nonProxyHosts=SNIP ```  Now, this works fine, even with authenticated proxy when you are running XP in normal mode. In DEV mode I get this error:  ``` 2018-08-16 14:05:04,789 INFO  c.e.x.c.i.app.ApplicationServiceImpl - Application [com.enonic.app.test.lib.git] installed successfully Exception in thread "pool-38-thread-1" java.lang.NoClassDefFoundError: org/eclipse/jgit/transport/SshSessionFactory at java.lang.Class.forName0(Native Method) at java.lang.Class.forName(Class.java:348) at com.enonic.xp.script.impl.bean.ScriptBeanFactoryImpl.newBean(ScriptBeanFactoryImpl.java:23) at com.enonic.xp.script.impl.function.ScriptFunctions.newBean(ScriptFunctions.java:68) at jdk.nashorn.internal.scripts.Script$Recompilation$243$1375AAA$main.L:1#L:1-3(com.enonic.app.test.lib.git:/main.js:1) at jdk.nashorn.internal.scripts.Script$Recompilation$241$139I$main.L:1#L:1-1#n(com.enonic.app.test.lib.git:/main.js:1) at jdk.nashorn.internal.scripts.Script$Recompilation$242$1038AAA$main.L:1#L:1-2(com.enonic.app.test.lib.git:/main.js:1) at jdk.nashorn.internal.scripts.Script$Recompilation$241$139I$main.L:1#L:1-1#n(com.enonic.app.test.lib.git:/main.js:1) at jdk.nashorn.internal.scripts.Script$Recompilation$240$116A$main.:scopeCall(com.enonic.app.test.lib.git:/main.js) at jdk.nashorn.internal.scripts.Script$Recompilation$240$116A$main.L:1#L:1-1(com.enonic.app.test.lib.git:/main.js:1) at jdk.nashorn.internal.scripts.Script$Recompilation$239$54AAAAAA$main.L:1(com.enonic.app.test.lib.git:/main.js:1) at jdk.nashorn.internal.runtime.ScriptFunctionData.invoke(ScriptFunctionData.java:649) at jdk.nashorn.internal.runtime.ScriptFunction.invoke(ScriptFunction.java:494) at jdk.nashorn.internal.runtime.ScriptRuntime.apply(ScriptRuntime.java:393) at jdk.nashorn.api.scripting.ScriptObjectMirror.call(ScriptObjectMirror.java:117) at com.enonic.xp.script.impl.executor.ScriptExecutorImpl.executeRequire(ScriptExecutorImpl.java:218) at com.enonic.xp.script.impl.executor.ScriptExecutorImpl.requireJs(ScriptExecutorImpl.java:268) at com.enonic.xp.script.impl.executor.ScriptExecutorImpl.requireJsOrJson(ScriptExecutorImpl.java:282) at com.enonic.xp.script.impl.executor.ScriptExecutorImpl.executeRequire(ScriptExecutorImpl.java:177) at com.enonic.xp.script.impl.executor.ScriptExecutorImpl.executeMain(ScriptExecutorImpl.java:129) at com.enonic.xp.script.impl.standard.ScriptRuntimeImpl.execute(ScriptRuntimeImpl.java:34) at com.enonic.xp.portal.impl.script.PortalScriptServiceImpl.execute(PortalScriptServiceImpl.java:53) at com.enonic.xp.portal.impl.main.MainExecutor.executeMain(MainExecutor.java:63) at com.enonic.xp.portal.impl.main.MainExecutor.started(MainExecutor.java:51) at com.enonic.xp.portal.impl.main.MainExecutor.started(MainExecutor.java:46) at com.enonic.xp.portal.impl.main.MainExecutor.onEvent(MainExecutor.java:40) at com.enonic.xp.core.impl.event.EventMulticaster.publish(EventMulticaster.java:51) at com.enonic.xp.core.impl.event.EventMulticaster.publish(EventMulticaster.java:43) at com.enonic.xp.core.impl.event.EventPublisherImpl.lambda$dispatchEvent$0(EventPublisherImpl.java:66) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) at java.lang.Thread.run(Thread.java:748) Caused by: java.lang.ClassNotFoundException: org.eclipse.jgit.transport.SshSessionFactory not found by com.enonic.app.test.lib.git [120] at org.apache.felix.framework.BundleWiringImpl.findClassOrResourceByDelegation(BundleWiringImpl.java:1558) at org.apache.felix.framework.BundleWiringImpl.access$400(BundleWiringImpl.java:79) at org.apache.felix.framework.BundleWiringImpl$BundleClassLoader.loadClass(BundleWiringImpl.java:1998) at java.lang.ClassLoader.loadClass(ClassLoader.java:357) ... 32 more ```</body>
		<created>2018-08-17 07:25:31</created>
		<closed>2020-09-15 12:30:26</closed>
	</bug>
	<bug>
		<id>6503</id>
		<title>Page template property not indexed</title>
		<body></body>
		<created>2018-08-16 12:39:56</created>
		<closed>2018-08-28 11:34:27</closed>
	</bug>
	<bug>
		<id>6497</id>
		<title>Steps with media data disappeared from Image wizard</title>
		<body>6.15: ![image](https://user-images.githubusercontent.com/11612490/44029994-acdb3406-9eff-11e8-8648-369dce449c78.png)  Current master: ![image](https://user-images.githubusercontent.com/11612490/44030034-cce53918-9eff-11e8-8653-823586bc2c82.png)  Most likely caused by the changes done in https://github.com/enonic/xp/issues/6477 and https://github.com/enonic/xp/issues/6478</body>
		<created>2018-08-13 11:51:47</created>
		<closed>2018-08-28 11:34:12</closed>
	</bug>
	<bug>
		<id>6493</id>
		<title>HTMLArea GUI does not appear</title>
		<body>In the browser console I get these errors: ``` GET http://localhost:8080/admin/_/asset/com.enonic.xp.app.contentstudio/admin/common/lib/ckeditor/lang/nb.js?t=HBDD 404 (Not Found) append @ _all.js:31870 appendTo @ _all.js:31844 B @ _all.js:32023 load @ _all.js:32023 load @ _all.js:32021 r @ _all.js:32038 (anonymous) @ _all.js:32038 b @ _all.js:32287 loadPart @ _all.js:32289 m @ _all.js:32038 (anonymous) @ _all.js:32038 m @ _all.js:31782 (anonymous) @ _all.js:31784 CKEDITOR.editor.CKEDITOR.editor.fire @ _all.js:31785 fireOnce @ _all.js:31784 CKEDITOR.editor.CKEDITOR.editor.fireOnce @ _all.js:31785 k @ _all.js:32036 (anonymous) @ _all.js:32036 callback @ _all.js:32024 e @ _all.js:32022 y @ _all.js:32022 x @ _all.js:32022 (anonymous) @ _all.js:32023 setTimeout (async) B.CKEDITOR.env.ie.e.$.onload @ _all.js:32023 load (async) B @ _all.js:32023 load @ _all.js:32023 a @ _all.js:32024 (anonymous) @ _all.js:32024 k @ _all.js:32036 g @ _all.js:32038 (anonymous) @ _all.js:32034 (anonymous) @ _all.js:31800 setTimeout (async) setTimeout @ _all.js:31800 a @ _all.js:32034 CKEDITOR.inline @ _all.js:32116 HTMLAreaBuilderCKE.createEditor @ _all.js:1 TextComponentViewCK.doInitEditor @ _all.js:1 TextComponentViewCK.initEditor @ _all.js:1 TextComponentViewCK.setEditMode @ _all.js:1 (anonymous) @ _all.js:1 PageView.setTextEditMode @ _all.js:1 (anonymous) @ _all.js:1 PageViewController.notifyTextEditModeChanged @ _all.js:1 PageViewController.setTextEditMode @ _all.js:1 TextComponentViewCK.startPageTextEditMode @ _all.js:1 TextComponentViewCK.doHandleDbClick @ _all.js:1 TextComponentViewCK.handleClick @ _all.js:1 _all.js:32021 Uncaught TypeError: Cannot set property 'dir' of undefined     at Object.d (_all.js:32021)     at e (_all.js:32022)     at Array.y (_all.js:32022)     at x (_all.js:32022)     at HTMLScriptElement.B.CKEDITOR.env.ie.e.$.onerror (_all.js:32023) d @ _all.js:32021 e @ _all.js:32022 y @ _all.js:32022 x @ _all.js:32022 B.CKEDITOR.env.ie.e.$.onerror @ _all.js:32023 error (async) B @ _all.js:32023 load @ _all.js:32023 load @ _all.js:32021 r @ _all.js:32038 (anonymous) @ _all.js:32038 b @ _all.js:32287 loadPart @ _all.js:32289 m @ _all.js:32038 (anonymous) @ _all.js:32038 m @ _all.js:31782 (anonymous) @ _all.js:31784 CKEDITOR.editor.CKEDITOR.editor.fire @ _all.js:31785 fireOnce @ _all.js:31784 CKEDITOR.editor.CKEDITOR.editor.fireOnce @ _all.js:31785 k @ _all.js:32036 (anonymous) @ _all.js:32036 callback @ _all.js:32024 e @ _all.js:32022 y @ _all.js:32022 x @ _all.js:32022 (anonymous) @ _all.js:32023 setTimeout (async) B.CKEDITOR.env.ie.e.$.onload @ _all.js:32023 load (async) B @ _all.js:32023 load @ _all.js:32023 a @ _all.js:32024 (anonymous) @ _all.js:32024 k @ _all.js:32036 g @ _all.js:32038 (anonymous) @ _all.js:32034 (anonymous) @ _all.js:31800 setTimeout (async) setTimeout @ _all.js:31800 a @ _all.js:32034 CKEDITOR.inline @ _all.js:32116 HTMLAreaBuilderCKE.createEditor @ _all.js:1 TextComponentViewCK.doInitEditor @ _all.js:1 TextComponentViewCK.initEditor @ _all.js:1 TextComponentViewCK.setEditMode @ _all.js:1 (anonymous) @ _all.js:1 PageView.setTextEditMode @ _all.js:1 (anonymous) @ _all.js:1 PageViewController.notifyTextEditModeChanged @ _all.js:1 PageViewController.setTextEditMode @ _all.js:1 TextComponentViewCK.startPageTextEditMode @ _all.js:1 TextComponentViewCK.doHandleDbClick @ _all.js:1 TextComponentViewCK.handleClick @ _all.js:1 ```   ``` _all.js:32021 Uncaught TypeError: Cannot set property 'dir' of undefined     at Object.d (_all.js:32021)     at e (_all.js:32022)     at Array.y (_all.js:32022)     at x (_all.js:32022)     at HTMLScriptElement.B.CKEDITOR.env.ie.e.$.onerror (_all.js:32023) d @ _all.js:32021 e @ _all.js:32022 y @ _all.js:32022 x @ _all.js:32022 B.CKEDITOR.env.ie.e.$.onerror @ _all.js:32023 error (async) B @ _all.js:32023 load @ _all.js:32023 load @ _all.js:32021 r @ _all.js:32038 (anonymous) @ _all.js:32038 b @ _all.js:32287 loadPart @ _all.js:32289 m @ _all.js:32038 (anonymous) @ _all.js:32038 m @ _all.js:31782 (anonymous) @ _all.js:31784 CKEDITOR.editor.CKEDITOR.editor.fire @ _all.js:31785 fireOnce @ _all.js:31784 CKEDITOR.editor.CKEDITOR.editor.fireOnce @ _all.js:31785 k @ _all.js:32036 (anonymous) @ _all.js:32036 callback @ _all.js:32024 e @ _all.js:32022 y @ _all.js:32022 x @ _all.js:32022 (anonymous) @ _all.js:32023 setTimeout (async) B.CKEDITOR.env.ie.e.$.onload @ _all.js:32023 load (async) B @ _all.js:32023 load @ _all.js:32023 a @ _all.js:32024 (anonymous) @ _all.js:32024 k @ _all.js:32036 g @ _all.js:32038 (anonymous) @ _all.js:32034 (anonymous) @ _all.js:31800 setTimeout (async) setTimeout @ _all.js:31800 a @ _all.js:32034 CKEDITOR.inline @ _all.js:32116 HTMLAreaBuilderCKE.createEditor @ _all.js:1 TextComponentViewCK.doInitEditor @ _all.js:1 TextComponentViewCK.initEditor @ _all.js:1 TextComponentViewCK.setEditMode @ _all.js:1 (anonymous) @ _all.js:1 PageView.setTextEditMode @ _all.js:1 (anonymous) @ _all.js:1 PageViewController.notifyTextEditModeChanged @ _all.js:1 PageViewController.setTextEditMode @ _all.js:1 TextComponentViewCK.startPageTextEditMode @ _all.js:1 TextComponentViewCK.doHandleDbClick @ _all.js:1 TextComponentViewCK.handleClick @ _all.js:1 ```</body>
		<created>2018-08-09 06:29:00</created>
		<closed>2018-08-13 09:12:13</closed>
	</bug>
	<bug>
		<id>6489</id>
		<title>content-display-name-script using an optional field deletes the name</title>
		<body>Lets say you use &lt;content-display-name-script&gt;$('tag')&lt;/content-display-name-script&gt;  And tag is minium occurences="0", aka its optional.  When I first create the content I write a displayName and save. Everything is fine.  Later I come back to change the content, and the displayName gets deleted, so when I click save the content now has a red icon and is unnamed.</body>
		<created>2018-08-06 08:14:30</created>
		<closed>2018-09-20 08:02:37</closed>
	</bug>
	<bug>
		<id>6479</id>
		<title>customselector is calling service with request.params.ids as JSON string rather than Array of Strings</title>
		<body>Fixing this might break api, so perhaps this should be included in 7.0  Documentation states: "Array of item ids already selected in the CustomSelector. The service is expected to return the items with the specified ids." ref: http://docs.enonic.com/en/stable/developer/schema/input-types/custom-selector.html    Lets say occurences maximum is 1. Then the list of ids will only ever contain 1 entry.  So if it was an array is should be this simple: ```javascript const id = req.params.ids[0]; ```  But since its a string, one have to do something like this???  ```js const id = req.params.ids.substring(2, req.params.ids.length - 2); ```  Or if one is rather stupid:  ```js const ids = eval(req.params.ids); const id = ids[0]; ```</body>
		<created>2018-07-30 15:44:44</created>
		<closed>2018-09-10 10:40:15</closed>
	</bug>
	<bug>
		<id>6472</id>
		<title>Toolbar button is not highlighted when image is selected in HTML Area</title>
		<body>1. Insert an image into HTML Area 2. Single-click the image inside the editor  The toolbar icon for the image dialog is supposed to be highlighted (same as for macro) but it's not.</body>
		<created>2018-07-26 12:36:24</created>
		<closed>2018-07-26 12:36:49</closed>
	</bug>
	<bug>
		<id>6465</id>
		<title>Resolve relative to wrong path</title>
		<body>So I have a macro which imports the get function from a part.  In the part code the view file is resolved outside the get method.  Resolve fails because it tries to resolve relative to the macro path, rather than the part path.  Workaround: Since parts and macros is on the same level the resolve path can be prefixed with '../../parts/partname/'</body>
		<created>2018-07-23 13:07:44</created>
		<closed>2018-09-07 11:46:18</closed>
	</bug>
	<bug>
		<id>6463</id>
		<title>Can't access content after application is uninstalled</title>
		<body>@alansemenov commented on [Thu Jul 19 2018](https://github.com/enonic/app-contentstudio/issues/325)  1. Install Superhero 2. Create a new site in Content Studio, assign Superhero app to it. Don't close the Wizard. 3. Uninstall Superhero (notification pops up in the Wizard - fine) 4. Refresh the Content Wizard page.   There are console errors in the browser, an error message saying "null" and endless spinners in both panels. The content is now basically unusable.  Correct behaviour is that we show the same message as the one that pops up after the app is uninstalled and that it's possible to unlink the missing app from the site. This used to work before.  ![image](https://user-images.githubusercontent.com/11612490/42934111-74235e56-8b57-11e8-9208-c2531167a18e.png)   </body>
		<created>2018-07-23 09:07:44</created>
		<closed>2018-07-26 11:21:39</closed>
	</bug>
	<bug>
		<id>6461</id>
		<title>JsonExceptionMapper - label is required</title>
		<body>https://discuss.enonic.com/t/enonic-version-6-15-0-has-been-released/1595  Apparently some mixin schemas are breaking with 6.15. The label is now mandatory. Find out why and fix</body>
		<created>2018-07-20 13:39:27</created>
		<closed>2018-08-14 11:34:38</closed>
	</bug>
	<bug>
		<id>6449</id>
		<title>Handle app request to /app/[app.name]/</title>
		<body>Did not manage to reproduce locally, Jetty strips the last slash from the path. But it seems to not be the case for others. To be investigated. For now fix the code to handle the case of path with an ending slash  @alansemenov will need to review</body>
		<created>2018-07-13 12:46:51</created>
		<closed>2018-07-26 11:20:56</closed>
	</bug>
	<bug>
		<id>6411</id>
		<title>Server not restarted properly after config change</title>
		<body>Change a value in com.enonic.xp.cluster.cfg For example, set cluster.enabled=true  The server does not restart properly and keeps logging the following: WARN  c.e.x.c.impl.ClusterManagerImpl - Waiting for cluster providers</body>
		<created>2018-07-05 08:59:08</created>
		<closed>2020-01-14 12:14:15</closed>
	</bug>
	<bug>
		<id>6401</id>
		<title>Ignite - No timeout on cache:put</title>
		<body>Current situation: Block one node of the cluster (debug on IgniteSessionDataStore for example)  The other node gets blocked on igniteCache.put for 10 minutes (The failing node seems to have been removed from the cluster). Use ignite.putAsync with a timeout.  If linked investigate these two other issues, otherwise, create separate issue: - On startup ther eis a mention of no SessionScavenger set =&gt; Scavenging every 600000ms (10mins) - When the failing node was restarted it did not manage to join the Ignite cluster again</body>
		<created>2018-07-02 13:19:42</created>
		<closed>2018-07-12 10:38:14</closed>
	</bug>
	<bug>
		<id>6400</id>
		<title>Rest services missing in Jaxrs registry</title>
		<body> Screenshots: [osgi-resources.zip](https://github.com/enonic/xp/files/2155183/osgi-resources.zip)   Existing random problem that was mentioned multiple times and fixed with a restart.  Now reproduced 2 times (may be more frequent due to 6.15 changes): All the OSGI services are correctly started but some are missing from the JaxRs registry. Last time it was reproduced, on the 22 usual admin resources, the 5 following were missing:  * ContentResource * SecurityResource * Tasks * Macro * Application  For testing, try to reproduce systematically by delaying the initialization of a resource. Fix the recording in JaxRsServlet</body>
		<created>2018-07-02 12:23:17</created>
		<closed>2020-02-26 12:41:29</closed>
	</bug>
	<bug>
		<id>6399</id>
		<title>Ignite - Port not released on shutdown </title>
		<body>Reported by Rfo. After a shutdown and a restart in a same terminal, Ignite fails to bind TCP server socket (see exception below).  Works again when closing the terminal window   Exception stacktrace: ``` 2018-07-02 13:39:58,256 ERROR com.enonic.xp.core.ignite - [com.enonic.xp.ignite.impl.IgniteCluster(62)] The activate method has thrown an exception org.apache.ignite.IgniteException: Failed to start manager: GridManagerAdapter [enabled=true, name=org.apache.ignite.internal.managers.discovery.GridDiscoveryManager] at org.apache.ignite.internal.util.IgniteUtils.convertException(IgniteUtils.java:966) at org.apache.ignite.Ignition.start(Ignition.java:325) at com.enonic.xp.ignite.impl.IgniteCluster.activate(IgniteCluster.java:65) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:498) at org.apache.felix.scr.impl.helper.BaseMethod.invokeMethod(BaseMethod.java:222) at org.apache.felix.scr.impl.helper.BaseMethod.access$500(BaseMethod.java:37) at org.apache.felix.scr.impl.helper.BaseMethod$Resolved.invoke(BaseMethod.java:615) at org.apache.felix.scr.impl.helper.BaseMethod.invoke(BaseMethod.java:499) at org.apache.felix.scr.impl.helper.ActivateMethod.invoke(ActivateMethod.java:295) at org.apache.felix.scr.impl.manager.SingleComponentManager.createImplementationObject(SingleComponentManager.java:302) at org.apache.felix.scr.impl.manager.SingleComponentManager.createComponent(SingleComponentManager.java:113) at org.apache.felix.scr.impl.manager.SingleComponentManager.getService(SingleComponentManager.java:866) at org.apache.felix.scr.impl.manager.SingleComponentManager.getServiceInternal(SingleComponentManager.java:833) at org.apache.felix.scr.impl.manager.SingleComponentManager.getService(SingleComponentManager.java:774) at org.apache.felix.framework.ServiceRegistrationImpl.getFactoryUnchecked(ServiceRegistrationImpl.java:347) at org.apache.felix.framework.ServiceRegistrationImpl.getService(ServiceRegistrationImpl.java:247) at org.apache.felix.framework.ServiceRegistry.getService(ServiceRegistry.java:343) at org.apache.felix.framework.Felix.getService(Felix.java:3692) at org.apache.felix.framework.BundleContextImpl.getService(BundleContextImpl.java:470) at org.apache.felix.scr.impl.manager.SingleRefPair.getServiceObject(SingleRefPair.java:72) at org.apache.felix.scr.impl.helper.BindMethod.getServiceObject(BindMethod.java:646) at org.apache.felix.scr.impl.manager.DependencyManager.getServiceObject(DependencyManager.java:2137) at org.apache.felix.scr.impl.manager.DependencyManager$MultipleDynamicCustomizer.prebind(DependencyManager.java:389) at org.apache.felix.scr.impl.manager.DependencyManager.prebind(DependencyManager.java:1457) at org.apache.felix.scr.impl.manager.AbstractComponentManager.collectDependencies(AbstractComponentManager.java:983) at org.apache.felix.scr.impl.manager.SingleComponentManager.getServiceInternal(SingleComponentManager.java:812) at org.apache.felix.scr.impl.manager.AbstractComponentManager.activateInternal(AbstractComponentManager.java:724) at org.apache.felix.scr.impl.manager.AbstractComponentManager.enable(AbstractComponentManager.java:399) at org.apache.felix.scr.impl.config.ConfigurableComponentHolder.enableComponents(ConfigurableComponentHolder.java:676) at org.apache.felix.scr.impl.BundleComponentActivator.initialEnable(BundleComponentActivator.java:339) at org.apache.felix.scr.impl.Activator.loadComponents(Activator.java:360) at org.apache.felix.scr.impl.Activator.access$000(Activator.java:53) at org.apache.felix.scr.impl.Activator$ScrExtension.start(Activator.java:260) at org.apache.felix.utils.extender.AbstractExtender.createExtension(AbstractExtender.java:259) at org.apache.felix.utils.extender.AbstractExtender.modifiedBundle(AbstractExtender.java:232) at org.osgi.util.tracker.BundleTracker$Tracked.customizerModified(BundleTracker.java:482) at org.osgi.util.tracker.BundleTracker$Tracked.customizerModified(BundleTracker.java:415) at org.osgi.util.tracker.AbstractTracked.track(AbstractTracked.java:232) at org.osgi.util.tracker.BundleTracker$Tracked.bundleChanged(BundleTracker.java:444) at org.apache.felix.framework.util.EventDispatcher.invokeBundleListenerCallback(EventDispatcher.java:913) at org.apache.felix.framework.util.EventDispatcher.fireEventImmediately(EventDispatcher.java:834) at org.apache.felix.framework.util.EventDispatcher.fireBundleEvent(EventDispatcher.java:516) at org.apache.felix.framework.Felix.fireBundleEvent(Felix.java:4544) at org.apache.felix.framework.Felix.startBundle(Felix.java:2166) at org.apache.felix.framework.Felix.setActiveStartLevel(Felix.java:1365) at org.apache.felix.framework.FrameworkStartLevelImpl.run(FrameworkStartLevelImpl.java:308) at java.lang.Thread.run(Thread.java:745) Caused by: org.apache.ignite.IgniteCheckedException: Failed to start manager: GridManagerAdapter [enabled=true, name=org.apache.ignite.internal.managers.discovery.GridDiscoveryManager] at org.apache.ignite.internal.IgniteKernal.startManager(IgniteKernal.java:1857) at org.apache.ignite.internal.IgniteKernal.start(IgniteKernal.java:1002) at org.apache.ignite.internal.IgnitionEx$IgniteNamedInstance.start0(IgnitionEx.java:1909) at org.apache.ignite.internal.IgnitionEx$IgniteNamedInstance.start(IgnitionEx.java:1652) at org.apache.ignite.internal.IgnitionEx.start0(IgnitionEx.java:1080) at org.apache.ignite.internal.IgnitionEx.start(IgnitionEx.java:600) at org.apache.ignite.internal.IgnitionEx.start(IgnitionEx.java:525) at org.apache.ignite.Ignition.start(Ignition.java:322) ... 48 common frames omitted Caused by: org.apache.ignite.IgniteCheckedException: Failed to start SPI: TcpDiscoverySpi [addrRslvr=org.apache.ignite.configuration.BasicAddressResolver@2dac7972, sockTimeout=2000, ackTimeout=2000, marsh=JdkMarshaller [], reconCnt=10, maxAckTimeout=600000, forceSrvMode=false, clientReconnectDisabled=false] at org.apache.ignite.internal.managers.GridManagerAdapter.startSpi(GridManagerAdapter.java:300) at org.apache.ignite.internal.managers.discovery.GridDiscoveryManager.start(GridDiscoveryManager.java:882) at org.apache.ignite.internal.IgniteKernal.startManager(IgniteKernal.java:1852) ... 55 common frames omitted Caused by: org.apache.ignite.spi.IgniteSpiException: Failed to bind TCP server socket (possibly all ports in range are in use) [firstPort=47500, lastPort=47500, addr=/127.0.0.1] at org.apache.ignite.spi.discovery.tcp.ServerImpl$TcpServer.&lt;init&gt;(ServerImpl.java:5614) at org.apache.ignite.spi.discovery.tcp.ServerImpl.spiStart(ServerImpl.java:331) at org.apache.ignite.spi.discovery.tcp.TcpDiscoverySpi.spiStart(TcpDiscoverySpi.java:1846) at org.apache.ignite.internal.managers.GridManagerAdapter.startSpi(GridManagerAdapter.java:297) ... 57 common frames omitted 2018-07-02 13:39:58,257 ERROR com.enonic.xp.core.ignite - [com.enonic.xp.ignite.impl.IgniteCluster(62)] Failed creating the component instance; see log for reason 2018-07-02 13:39:58,259 INFO  c.e.x.c.impl.ClusterManagerImpl - Adding cluster-provider: elasticsearch 2018-07-02 13:39:58,260 WARN  c.e.x.c.impl.ClusterManagerImpl - Waiting for cluster providers 2018-07-02 13:39:59,261 WARN  c.e.x.c.impl.ClusterManagerImpl - Waiting for cluster providers 2018-07-02 13:40:00,271 WARN  c.e.x.c.impl.ClusterManagerImpl - Waiting for cluster providers 2018-07-02 13:40:01,273 WARN  c.e.x.c.impl.ClusterManagerImpl - Waiting for cluster providers ^C2018-07-02 13:40:01,416 INFO  c.e.x.l.i.framework.FrameworkService - Stopping server... 2018-07-02 13:40:02,277 WARN  c.e.x.c.impl.ClusterManagerImpl - Waiting for cluster providers ```</body>
		<created>2018-07-02 12:12:19</created>
		<closed>2020-01-08 09:52:48</closed>
	</bug>
	<bug>
		<id>6398</id>
		<title>Session storage - Save on each logged-in request</title>
		<body>Current situation: For logged in user, the session is stored for every request.  FI: There is a savePeriod config property (set by default 0ms =&gt; always save). Investigate if there is a better alternative</body>
		<created>2018-07-02 09:32:16</created>
		<closed>2018-07-12 10:38:19</closed>
	</bug>
	<bug>
		<id>6393</id>
		<title>Vacuum - fielddata</title>
		<body>https://discuss.enonic.com/t/fielddata-data-too-large-data-for-parent-child-id-cache/1571  http://localhost:9200/search-cms-repo/_stats/fielddata?fields=* http://localhost:9200/storage-cms-repo/_stats/fielddata?fields=* http://localhost:9200/search-system-repo/_stats/fielddata?fields=* http://localhost:9200/storage-system-repo/_stats/fielddata?fields=*  http://localhost:9200/storage-cms-repo/_cache/clear  http://localhost:9200/search-cms-repo/draft/_search http://localhost:9200/storage-cms-repo/version/_search http://localhost:9200/storage-cms-repo/branch/_search  #indices.fielddata.cache.size = 600kb #indices.breaker.fielddata.limit = 700kb</body>
		<created>2018-06-27 14:35:09</created>
		<closed>2019-02-06 12:26:17</closed>
	</bug>
	<bug>
		<id>6367</id>
		<title>Image Selector -  impossible to select an image in drop down list, when it is switched to tree mode</title>
		<body>@sgauruseu commented on [Tue Jun 19 2018](https://github.com/enonic/lib-admin-ui/issues/620)  1. Select `Features `and  open new wizard for` Image Selector` 2. go to `Tree Mode selector `and click on drop-down handle 3. expand a folder and click on any image  **Bug**: image has been clicked, but the option is not selected  ![image](https://user-images.githubusercontent.com/3728712/41584945-52063ed2-73b1-11e8-9ba8-e5927991f167.png)   </body>
		<created>2018-06-20 12:24:48</created>
		<closed>2018-06-26 10:45:52</closed>
	</bug>
	<bug>
		<id>6364</id>
		<title>Support network adapter aliases for Ignite settings</title>
		<body>When setting up the ignite-cluster, we should accept aliases for using a specific network adapter in the ``discovery_tcp_localAddress`` - setting, e.g:   ``_en0:ipv4_`` ``_et0:ipv4_``  Check out ES docs on values and code on how to resolve this: https://www.elastic.co/guide/en/elasticsearch/reference/6.3/modules-network.html#network-interface-values  This is kind of a bug, since its impossible to support docker-installations without this feature-. </body>
		<created>2018-06-20 09:14:27</created>
		<closed>2018-06-26 10:54:02</closed>
	</bug>
	<bug>
		<id>6361</id>
		<title>Wrong tooltips for keyboard shortcut issues in CKEditor</title>
		<body>Two minor things in 6.15:  * The keyboard shortcut for inserting links has always been Ctrl/Cmd + K (a lot of other systems use this too). The tooltip displayed, however, shows another shortcut. **This should be corrected to Ctrl/Cmd + K**. ![screen shot 2018-06-20 at 10 00 49](https://user-images.githubusercontent.com/1465598/41645371-16eb11cc-7471-11e8-95d9-7a701124d00e.png)   * The keyboard shortcut for inserting images has always been Ctrl/Cmd + L. This is not displayed in the tooltip. **Add shortcut in tooltip**. ![screen shot 2018-06-20 at 10 00 55](https://user-images.githubusercontent.com/1465598/41645374-1b6dacc8-7471-11e8-9eed-176f5921f7ad.png) </body>
		<created>2018-06-20 08:03:35</created>
		<closed>2018-07-09 13:34:39</closed>
	</bug>
	<bug>
		<id>6360</id>
		<title>Fully deleted images still visible in the HtmlArea</title>
		<body>Grabbed 6.15-SNAPSHOT just now and repeated this bug. It surfaced yesterday during Content training when a lot of editors got to try the CKEditor.  To repeat, do this: * Open a Content Type with a HtmlArea * Upload an image inside the text here * Publish content and image * Go back and delete (and publish) the image. * Image is still visible in the HtmlArea, and output on page is a broken URL. * Double clicking image will say image cannot be found, but still somehow it is visible  ![screen shot 2018-06-20 at 09 49 04](https://user-images.githubusercontent.com/1465598/41644897-c0c2b63e-746f-11e8-93c4-af091ff8fdab.png) ![screen shot 2018-06-20 at 09 49 13](https://user-images.githubusercontent.com/1465598/41644899-c0dc64ee-746f-11e8-8259-42e3b8e9a9ca.png) ![screen shot 2018-06-20 at 09 49 30](https://user-images.githubusercontent.com/1465598/41644900-c0f8385e-746f-11e8-96ba-53ac21ee1427.png)  Could other references also be shown this way? It's only for admins, but I would take for granted that if an image is unpublished or deleted, it would not be in the resulting HTML from a HtmlArea. </body>
		<created>2018-06-20 07:54:51</created>
		<closed>2018-06-27 20:33:20</closed>
	</bug>
	<bug>
		<id>6357</id>
		<title>Users from groups that are allowed publishing cannot be assigned to an issue</title>
		<body>@sgauruseu commented on [Thu Jun 14 2018](https://github.com/enonic/app-contentstudio/issues/230)  1. Create a group with roles: ![image](https://user-images.githubusercontent.com/3728712/41401772-5dccee50-6fc9-11e8-8ae1-3208f8b0b037.png) 2. Add  some users and add  these users to the group  3. Open `Create Issue dialog ` and assign an user that is added to the group 4. Click on `Create Issue` button Bug:  user was not saved in assignees:  ![image](https://user-images.githubusercontent.com/3728712/41401446-921537f4-6fc8-11e8-8251-f641e72feac2.png)   </body>
		<created>2018-06-19 13:46:22</created>
		<closed>2018-06-26 10:46:49</closed>
	</bug>
	<bug>
		<id>6354</id>
		<title>Fix missing config for Ignite to do discovery in Dockered env</title>
		<body>There is some little piece missing to make Ignite discover in a clustered Docker environment. Its difficult to debug atm since Ignite is configured to be very non-verbose.  Theory; * We need to implement the https://ignite.apache.org/releases/latest/javadoc/org/apache/ignite/configuration/class-use/AddressResolver.html to map from the internal to the external (publish) - address.   In case the above is correct, we can use the publish-address in combination with the discovery_tcp_localAddress config to create this map automatically</body>
		<created>2018-06-19 05:26:16</created>
		<closed>2018-06-26 10:53:59</closed>
	</bug>
	<bug>
		<id>6353</id>
		<title>Ignite discovery must include local address in StaticIp discovery-array</title>
		<body>To be able to form a single node cluster, the StaticIpFinder must include discovery_tcp_localAddress in array of hosts.</body>
		<created>2018-06-19 05:20:45</created>
		<closed>2018-06-26 10:53:42</closed>
	</bug>
	<bug>
		<id>6350</id>
		<title>Detach session from context for separated threads</title>
		<body>Depending on https://github.com/enonic/xp/pull/6346  * Go through the list of context creations and detach the session if the context was created for a different thread than the HTTP request thread</body>
		<created>2018-06-18 10:31:49</created>
		<closed>2018-06-20 10:12:32</closed>
	</bug>
	<bug>
		<id>6342</id>
		<title>List of options in content selector is empty in tree mode</title>
		<body>@sgauruseu commented on [Wed Jun 13 2018](https://github.com/enonic/lib-admin-ui/issues/589)  This bug reproduced in Move dialog as well. List of options is empty, when dropdown handle has been clicked, so this is a problem of LoaderComboBox  1. Open a site and insert ImageComponent 2. Click on mode toggler and switch to tree mode  Bug: `No matching items`  is displayed  ![image](https://user-images.githubusercontent.com/3728712/41350827-154dd862-6f1d-11e8-86a2-b5c9843a4ba0.png)   </body>
		<created>2018-06-14 12:23:47</created>
		<closed>2018-06-26 10:52:22</closed>
	</bug>
	<bug>
		<id>6341</id>
		<title>[MS Edge] Toolbar is not available when editing text component inside a fragment</title>
		<body>@sgauruseu commented on [Thu Jun 14 2018](https://github.com/enonic/lib-admin-ui/issues/591)  Open XP in Edge 1. Open a site, insert a text component and type a text 2. Save the component as fragment 3. Go to the fragment-wizard and try to change the text  Bug: toolbar  does not appear  `SCRIPT5022: SCRIPT5022: Inline element mode is not supported on IE quirks.`  ![image](https://user-images.githubusercontent.com/3728712/41399684-a273531a-6fc3-11e8-9e80-a6b11d7c568f.png)   </body>
		<created>2018-06-14 11:58:15</created>
		<closed>2018-06-26 10:52:14</closed>
	</bug>
	<bug>
		<id>6332</id>
		<title>Number of assignees disappears from the tab after an issue is published</title>
		<body>@sgauruseu commented on [Wed May 30 2018](https://github.com/enonic/app-contentstudio/issues/169)  1. Create a issue, add an user in assignees, select items. 2. Open the issue in `IssueDetails Dialog` ![step1](https://user-images.githubusercontent.com/3728712/40711707-8e6c3c76-6404-11e8-8836-af3f7a44e9da.png)   3. Press the `Publish and Close`  Bug: Assignees is getting empty ;  ![image](https://user-images.githubusercontent.com/3728712/40711750-afb30090-6404-11e8-90ed-1fd13b294f5a.png)   **But the different behavior when we close an issue -  user is present in Assignees**     </body>
		<created>2018-06-12 13:22:52</created>
		<closed>2018-06-26 10:46:10</closed>
	</bug>
	<bug>
		<id>6331</id>
		<title>SessionData cannot be serialized</title>
		<body>We get the warning below. Investigate and fix or close the issue   2018-06-12 14:44:37,035 WARN  o.a.i.internal.binary.BinaryContext - Class "org.eclipse.jetty.server.session.SessionData" cannot be serialized using BinaryMarshaller because it either implements Externalizable interface or have writeObject/readObject methods. OptimizedMarshaller will be used instead and class instances will be deserialized on the server. Please ensure that all nodes have this class in classpath. To enable binary serialization either implement Binarylizable interface or set explicit serializer using BinaryTypeConfiguration.setSerializer() method.</body>
		<created>2018-06-12 12:50:11</created>
		<closed>2018-06-26 10:55:40</closed>
	</bug>
	<bug>
		<id>6329</id>
		<title>Some media files are uploaded with "unknown" content type [Windows only]</title>
		<body>@sgauruseu commented on [Thu Apr 19 2018](https://github.com/enonic/app-contentstudio/issues/24)  @sgauruseu commented on [Thu Mar 29 2018](https://github.com/enonic/xp-apps/issues/720) This issue reproduced when upload only `zip`- and `tar` archives 1. Click on New button  2. Upload a zip file  BUG: Unknown type is displayed in notification message  Expected: Archive should appear in aggregation-view, when the archive has been uploaded  &lt;img width="800" alt="arch" src="https://user-images.githubusercontent.com/3728712/38092123-0f445204-3370-11e8-8c22-45f839ff2859.png"&gt;  &lt;img width="532" alt="arch2" src="https://user-images.githubusercontent.com/3728712/38092203-46e9a20e-3370-11e8-981b-ad15c2eada3e.png"&gt;  ![image](https://user-images.githubusercontent.com/3728712/40413735-3fac03d0-5e7f-11e8-9fda-5b591f067f8c.png)     ---  @alansemenov commented on [Fri Jun 01 2018](https://github.com/enonic/app-contentstudio/issues/24#issuecomment-393843407)  This works fine for me.  ---  @alansemenov commented on [Fri Jun 01 2018](https://github.com/enonic/app-contentstudio/issues/24#issuecomment-393882976)  Seems like this is only reproduced under Windows. Reopening  </body>
		<created>2018-06-12 07:08:29</created>
		<closed>2018-06-12 10:34:33</closed>
	</bug>
	<bug>
		<id>6327</id>
		<title>Error notification message appears when Deleted content has been published</title>
		<body>@sgauruseu commented on [Wed May 02 2018](https://github.com/enonic/app-contentstudio/issues/64)  1. Select a Deleted-content in the grid 2. Click on `Publish `button  Bug: error notification appears   ![image](https://user-images.githubusercontent.com/3728712/39517404-70acc3ca-4e08-11e8-8f90-d5e731b5c4d3.png)   ---  @alansemenov commented on [Mon May 14 2018](https://github.com/enonic/app-contentstudio/issues/64#issuecomment-388823847)  @sgauruseu can you add more details here? when I simply delete and publish any content it works fine for me.  </body>
		<created>2018-06-11 15:31:37</created>
		<closed>2018-06-26 10:46:06</closed>
	</bug>
	<bug>
		<id>6324</id>
		<title>[MS Edge] Attachment content has incorrect label and produces 404 error on click</title>
		<body>@sgauruseu commented on [Fri Apr 20 2018](https://github.com/enonic/lib-admin-ui/issues/449)  1. Open CS in `Edge` 2. Select `Features`, click on `New`, select `Attachments` 3. Upload an  attachment  **Bug**: path to the local resource is displayed  ![att](https://user-images.githubusercontent.com/3728712/39048035-ce5cb736-44a4-11e8-9fd8-19215f77c31c.png)  4.  type name and Save the content 5. Click on the attachment-link **BUG**:  404 Error appears in the browser  ![404](https://user-images.githubusercontent.com/3728712/39048078-ed129222-44a4-11e8-9800-2993c8e391aa.png)     </body>
		<created>2018-06-11 14:37:20</created>
		<closed>2018-06-26 10:48:15</closed>
	</bug>
	<bug>
		<id>6322</id>
		<title>Incorrect label in ContentWizardStepForm, when Excel-file is opened</title>
		<body>@sgauruseu commented on [Thu Apr 19 2018](https://github.com/enonic/app-contentstudio/issues/25)  @sgauruseu commented on [Fri Mar 30 2018](https://github.com/enonic/xp-apps/issues/723)  1. Upload a xlsx file. 2. Select the file and open it  BUG: incorrect label is in the wizard: The same label when a file with Text type is opened  &lt;img width="812" alt="spr" src="https://user-images.githubusercontent.com/3728712/38135852-208b9834-3423-11e8-9515-9588590164ed.png"&gt;     ![image](https://user-images.githubusercontent.com/3728712/38135950-c43ce582-3423-11e8-9a3f-a55eb52ae42f.png)     </body>
		<created>2018-06-09 20:23:47</created>
		<closed>2018-06-12 10:38:50</closed>
	</bug>
	<bug>
		<id>6320</id>
		<title>X-data form(s) from newly added app won't appear in the Wizard until refresh</title>
		<body>@alansemenov commented on [Thu May 31 2018](https://github.com/enonic/lib-admin-ui/issues/553)  1. Add one or more x-data to an app, without "allowContentType" so that they match the site's content type. Don't add them to site.xml. 2. Create a new site in CS 3. Assign the app to the site 4. The x-data form(s) from the app are supposed to be instantly added to the wizard but they won't. If you save and reload the page, then they will show up.   It works fine if you add x-data to site.xml, but it should work just the same if x-data matches content type of the site.  </body>
		<created>2018-06-08 13:23:38</created>
		<closed>2018-06-12 10:34:29</closed>
	</bug>
	<bug>
		<id>6310</id>
		<title>Main.js randomly not called</title>
		<body>Randomly the main controller is not called for already installed or deployed applications</body>
		<created>2018-06-06 12:00:40</created>
		<closed>2018-06-12 10:34:37</closed>
	</bug>
	<bug>
		<id>6307</id>
		<title>Exception occurs and endless spinner appears in Page Editor , when create fragment from layout</title>
		<body>@sgauruseu commented on [Thu Apr 19 2018](https://github.com/enonic/app-contentstudio/issues/21)  @sgauruseu commented on [Thu Apr 12 2018](https://github.com/enonic/xp-apps/issues/764) **Case 1:**   - Open new site-wizard, select Features, type a name and select `main region` - insert 3 column layout - insert images in each region of the layout - Select the layout  and `Save as Fragment`    **Case 2**  1. Open new site-wizard, select `Features`, select  `main region` ![step1](https://user-images.githubusercontent.com/3728712/38677203-356f6166-3e66-11e8-9641-a84a36edd7ae.png)  2. Open `Page Component View` 3. Insert the layout (3 column), do not insert anything in regions, but `Save as Fragment` the layout  ![ss2](https://user-images.githubusercontent.com/3728712/38677513-25b4c116-3e67-11e8-8070-3da364acd8aa.png)  4. Go to the `fragment-wizard` and  insert an image(or part) in the top region  ![ss3](https://user-images.githubusercontent.com/3728712/38677544-3f1df014-3e67-11e8-9c6d-a27a864b5152.png)  5. Go to the `site-wizard`: Error notification and endless spinner appear in the `PageEditor`  **Exception in the server.log**  `com.enonic.xp.web.WebException: Expected component to be a LayoutComponent: FragmentComponent at com.enonic.xp.web.impl.exception.ExceptionMapperImpl.map(ExceptionMapperImpl.java:29) at com.enonic.xp.portal.handler.BasePortalHandler.handleError(BasePortalHandler.java:62) at com.enonic.xp.portal.handler.BasePortalHandler.doHandle(BasePortalHandler.java:54) at com.enonic.xp.web.handler.BaseWebHandler.handle(BaseWebHandler.java:66) at com.enonic.xp.web.impl.handler.WebHandlerChainImpl.handle(WebHandlerChainImpl.java:30) at com.enonic.xp.web.impl.trace.TraceWebFilter.doHandle(TraceWebFilter.java:37) at com.enonic.xp.web.handler.BaseWebHandler.handle(BaseWebHandler.java:66) at com.enonic.xp.web.impl.handler.WebHandlerChainImpl.handle(WebHandlerChainImpl.java:30) at com.enonic.xp.web.impl.handler.WebDispatcherImpl.dispatch(WebDispatcherImpl.java:50) at com.enonic.xp.web.impl.handler.WebDispatcherServlet.doHandle(WebDispatcherServlet.java:135) at com.enonic.xp.web.impl.handler.WebDispatcherServlet.service(WebDispatcherServlet.java:63) at javax.servlet.http.HttpServlet.service(HttpServlet.java:790) at com.enonic.xp.web.impl.dispatch.mapping.ServletDefinitionImpl.service(ServletDefinitionImpl.java:39) at com.enonic.xp.web.impl.dispatch.pipeline.ServletPipelineImpl.service(ServletPipelineImpl.java:30) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:45) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36) at com.enonic.xp.portal.impl.auth.AuthFilter.doHandle(AuthFilter.java:45) at com.enonic.xp.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:31) at com.enonic.xp.web.filter.BaseWebFilter.doFilter(BaseWebFilter.java:33) at com.enonic.xp.web.impl.dispatch.mapping.FilterDefinitionImpl.doFilter(FilterDefinitionImpl.java:40) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:50) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36) at com.enonic.xp.web.impl.auth.BasicAuthFilter.doHandle(BasicAuthFilter.java:33) at com.enonic.xp.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:31) at com.enonic.xp.web.filter.BaseWebFilter.doFilter(BaseWebFilter.java:33) at com.enonic.xp.web.impl.dispatch.mapping.FilterDefinitionImpl.doFilter(FilterDefinitionImpl.java:40) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:50) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36) at com.enonic.xp.web.impl.context.ContextFilter.lambda$doHandle$0(ContextFilter.java:33) at com.enonic.xp.context.ContextImpl.callWith(ContextImpl.java:101) at com.enonic.xp.web.impl.context.ContextFilter.doHandle(ContextFilter.java:32) at com.enonic.xp.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:31) at com.enonic.xp.web.filter.BaseWebFilter.doFilter(BaseWebFilter.java:33) at com.enonic.xp.web.impl.dispatch.mapping.FilterDefinitionImpl.doFilter(FilterDefinitionImpl.java:40) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:50) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36) at com.enonic.xp.web.vhost.impl.VirtualHostFilter.doHandle(VirtualHostFilter.java:57) at com.enonic.xp.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:31) at com.enonic.xp.web.filter.BaseWebFilter.doFilter(BaseWebFilter.java:33) at com.enonic.xp.web.impl.dispatch.mapping.FilterDefinitionImpl.doFilter(FilterDefinitionImpl.java:40) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:50) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36) at com.enonic.xp.web.impl.dos.DosFilterWrapper.doFilter(DosFilterWrapper.java:64) at com.enonic.xp.web.impl.dispatch.mapping.FilterDefinitionImpl.doFilter(FilterDefinitionImpl.java:40) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:50) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36) at com.enonic.xp.web.impl.dispatch.pipeline.FilterPipelineImpl.filter(FilterPipelineImpl.java:29) at com.enonic.xp.web.impl.dispatch.DispatchServletImpl.service(DispatchServletImpl.java:35) at javax.servlet.http.HttpServlet.service(HttpServlet.java:790) at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:821) at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:583) at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:143) at org.eclipse.jetty.server.handler.gzip.GzipHandler.handle(GzipHandler.java:437) at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:226) at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1158) at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:511) at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:185) at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1090) at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141) at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:119) at com.codahale.metrics.jetty9.InstrumentedHandler.handle(InstrumentedHandler.java:240) at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:119) at org.eclipse.jetty.server.Server.handle(Server.java:517) at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:306) at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:242) at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:261) at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:95) at org.eclipse.jetty.io.SelectChannelEndPoint$2.run(SelectChannelEndPoint.java:75) at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.produceAndRun(ExecuteProduceConsume.java:213) at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.run(ExecuteProduceConsume.java:147) at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:654) at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:572) at java.lang.Thread.run(Thread.java:748)`     </body>
		<created>2018-06-06 10:33:25</created>
		<closed>2018-06-12 10:34:47</closed>
	</bug>
	<bug>
		<id>6300</id>
		<title>Applications main.js executed before all bundles are started</title>
		<body>While running in cluster, the applications main.js are executed before some of the services (e.g. SecurityService) are started, causing the main.js to fail.  Review start levels of the bundles and make sure the applications are installed at the end, after all other services/bundles are ready.  This is more visible in a cluster due to timing, but it is probably also affecting single node installations.</body>
		<created>2018-06-05 07:49:37</created>
		<closed>2018-06-12 10:38:10</closed>
	</bug>
	<bug>
		<id>6299</id>
		<title>Deletion of user with Upper cases - Roles/groups not removed</title>
		<body></body>
		<created>2018-06-05 07:21:22</created>
		<closed>2018-06-05 07:47:58</closed>
	</bug>
	<bug>
		<id>6295</id>
		<title>Templates folder should be created automatically, when a site was duplicated</title>
		<body>@sgauruseu commented on [Thu May 31 2018](https://github.com/enonic/app-contentstudio/issues/173)  1. Select  Features 2. Press Duplicate button 3. Click on `Exclude child` icon and press Duplicate button on the modal dialog  Expected:  _templates folder should be created in the duplicated site  ---  @alansemenov commented on [Thu May 31 2018](https://github.com/enonic/app-contentstudio/issues/173#issuecomment-393465145)  Same logic as when user creates a new site - we create "_templates" folder automatically.  </body>
		<created>2018-06-01 10:43:49</created>
		<closed>2018-06-04 07:31:23</closed>
	</bug>
	<bug>
		<id>6292</id>
		<title>Status servlet down when ES/Ignite are down</title>
		<body></body>
		<created>2018-05-31 07:47:50</created>
		<closed>2018-06-12 10:35:12</closed>
	</bug>
	<bug>
		<id>6291</id>
		<title>Model XSD - Fix &amp; refactor for x-data and mixins</title>
		<body>Fix model.xsd</body>
		<created>2018-05-30 13:26:40</created>
		<closed>2018-06-12 10:36:32</closed>
	</bug>
	<bug>
		<id>6287</id>
		<title>Duplicate Dialog - Incorrect number of duplicated items is displayed in  Notification Message</title>
		<body>@sgauruseu commented on [Tue May 29 2018](https://github.com/enonic/app-contentstudio/issues/159)  1. Select 2 sites in grid 2. Click on `Duplicate`  - 74 items for duplicate   ![image](https://user-images.githubusercontent.com/3728712/40647448-8f4d2a36-6334-11e8-81e9-c4a864682719.png)  3. Click on Duplicate  button on the modal dialog  Bug: incorrect number is displayed in notification message  ![image](https://user-images.githubusercontent.com/3728712/40647639-06a3b9ce-6335-11e8-9efb-070647677aa0.png)   </body>
		<created>2018-05-30 10:10:04</created>
		<closed>2018-06-12 10:38:19</closed>
	</bug>
	<bug>
		<id>6284</id>
		<title>Incorrect duplication progress if parent &amp; child are selected</title>
		<body>This bug was already present in 6.14.3 (so not due to last duplication changes). * Select  a parent and a child content * Duplicate them * Look at the progress: The current will go over the total. =&gt; The total was incorrect.  =&gt; Fix DuplicateRunnableTask::run  ![Screen Shot 2018-05-30 at 09.34.55.png](https://images.zenhubusercontent.com/58a5657151aa2c3057749a34/1f48ae8d-5f97-4f1b-83af-0a6dd534f9b8) </body>
		<created>2018-05-30 07:37:51</created>
		<closed>2018-06-12 10:38:18</closed>
	</bug>
	<bug>
		<id>6281</id>
		<title>Fix app prefix adding behavior for content types</title>
		<body>1. ApplicationRelativeResolver should not add app prefixes for regexps. 2. Fix wildcards for xData.</body>
		<created>2018-05-29 11:47:46</created>
		<closed>2018-06-12 10:35:19</closed>
	</bug>
	<bug>
		<id>6274</id>
		<title>Cluster defined as operational while nodes are missing</title>
		<body>Cluster started with 1 node / 3. The cluster is defined as operational...   09:48:23.334 INFO  o.a.i.i.m.d.GridDiscoveryManager - Topology snapshot [ver=1, servers=1, clients=0, CPUs=8, heap=3.9GB] 09:48:23.335 INFO  c.e.x.c.impl.ClusterManagerImpl - Adding cluster-provider: ignite 09:48:23.335 INFO  c.e.x.c.impl.ClusterManagerImpl - Activating cluster providers 09:48:23.336 INFO  c.e.x.e.impl.ElasticsearchCluster - Cluster operational, register elasticsearch-client 09:48:23.336 INFO  c.e.xp.ignite.impl.IgniteCluster - Cluster operational, register ignite 09:48:25.068 WARN  o.a.ignite.internal.GridDiagnostic - Default local host is unreachable. This may lead to delays on grid network operations. Check your OS network setting to correct it. 09:48:28.549 ERROR com.enonic.xp.core.repo - [com.enonic.xp.repo.impl.repository.RepositoryServiceImpl(91)] The initialize method has thrown an exception org.elasticsearch.ElasticsearchTimeoutException: Timeout waiting for task. at org.elasticsearch.action.support.AdapterActionFuture.actionGet(AdapterActionFuture.java:73) at org.elasticsearch.action.support.AdapterActionFuture.actionGet(AdapterActionFuture.java:65) at org.elasticsearch.action.support.AdapterActionFuture.actionGet(AdapterActionFuture.java:55) at com.enonic.xp.repo.impl.elasticsearch.IndexServiceInternalImpl.isMaster(IndexServiceInternalImpl.java:98) at com.enonic.xp.repo.impl.repository.SystemRepoInitializer.isMaster(SystemRepoInitializer.java:86) at com.enonic.xp.init.Initializer.initialize(Initializer.java:18) at com.enonic.xp.repo.impl.repository.RepositoryServiceImpl.initialize(RepositoryServiceImpl.java:68) </body>
		<created>2018-05-28 07:52:49</created>
		<closed>2018-06-12 10:35:23</closed>
	</bug>
	<bug>
		<id>6273</id>
		<title>java.lang.IllegalStateException: STREAM</title>
		<body>For a cluster configured for 3 nodes but 2 nodes down. When checking /status/cluster.manager:  =&gt; Caused by: java.lang.IllegalStateException: STREAM at org.eclipse.jetty.server.Response.getWriter(Response.java:931) at javax.servlet.ServletResponseWrapper.getWriter(ServletResponseWrapper.java:152) at com.enonic.xp.portal.impl.auth.AuthResponseWrapper.getWriter(AuthResponseWrapper.java:59) at com.enonic.xp.server.impl.status.StatusServlet.serializeJson(StatusServlet.java:120) at com.enonic.xp.server.impl.status.StatusServlet.serializeError(StatusServlet.java:132) at com.enonic.xp.server.impl.status.StatusServlet.reportFromReporter(StatusServlet.java:98) at com.enonic.xp.server.impl.status.StatusServlet.doGet(StatusServlet.java:69) at javax.servlet.http.HttpServlet.service(HttpServlet.java:687) at javax.servlet.http.HttpServlet.service(HttpServlet.java:790) at com.enonic.xp.web.impl.dispatch.mapping.ServletDefinitionImpl.service(ServletDefinitionImpl.java:39) at com.enonic.xp.web.impl.dispatch.pipeline.ServletPipelineImpl.service(ServletPipelineImpl.java:30) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:45) at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36) at com.enonic.xp.portal.impl.auth.AuthFilter.doHandle(AuthFilter.java:45) at com.enonic.xp.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:31) at com.enonic.xp.web.filter.BaseWebFilter.doFilter(BaseWebFilter.java:33) ... 61 more</body>
		<created>2018-05-25 08:42:57</created>
		<closed>2018-06-12 10:35:16</closed>
	</bug>
	<bug>
		<id>6271</id>
		<title>URL generation failing for apps under virtual host</title>
		<body>Does not seem to have ever worked  Example 1 - http://localhost:8080/app/com.enonic.app.sandbox/_/idprovider/system/login -&gt; works 2 - http://localhost:8080/_/idprovider/system/login -&gt; fails     With vhost mapping / -&gt; /app/com.enonic.app.sandbox  </body>
		<created>2018-05-24 08:23:03</created>
		<closed>2018-06-26 10:45:48</closed>
	</bug>
	<bug>
		<id>6262</id>
		<title>Same field-set and child item-set name-attribute in a contenttype throws exception in the content.modify API</title>
		<body>Enonic XP 6.14.2  In a contenttype, when a field-set name-attribute is the same as the name-attribute of a child item-set, it works in Content Studio, but produces exception when the content is modified with the content.modify API call.  Exception Message: FormItem [] in [attributes] is not of type Input: com.enonic.xp.form.FieldSet  Example schema (renaming field-set name to f.x. inputAttributes will avoid exception) [Real life example](https://bitbucket.org/openxp/freeform/src/83cba3cfe15766848b86f9f1b5b2b58075cdda94/src/main/resources/site/mixins/freeform-elements/freeform-elements.xml#lines-13)  ```xml &lt;field-set name="attributes"&gt;     &lt;label&gt;Input attributes&lt;/label&gt;     &lt;items&gt;         &lt;item-set name="attributes"&gt;             &lt;label&gt;attributes&lt;/label&gt;             &lt;occurrences minimum="0" maximum="0"/&gt;             &lt;items&gt;                 &lt;inline mixin="freeform-name-value"/&gt;             &lt;/items&gt;         &lt;/item-set&gt;     &lt;/items&gt; &lt;/field-set&gt; ```</body>
		<created>2018-05-18 13:12:22</created>
		<closed>2018-06-12 10:38:15</closed>
	</bug>
	<bug>
		<id>6255</id>
		<title>Initialization on non-master nodes</title>
		<body>With a clean cluster configured with 3 nodes (6.14.3):  - Start first node   - The node waits or is in RED state - Starts the second node   - Multiple exceptions when starting: ``` com.enonic.xp.repository.RepositoryNotFoundException: Repository with id [system-repo] not found at com.enonic.xp.repo.impl.node.NodeServiceImpl.lambda$verifyBranchExists$10(NodeServiceImpl.java:982) at com.enonic.xp.context.ContextImpl.runWith(ContextImpl.java:85) at com.enonic.xp.repo.impl.node.NodeHelper.runAsAdmin(NodeHelper.java:15) at com.enonic.xp.repo.impl.node.NodeServiceImpl.verifyBranchExists(NodeServiceImpl.java:976) at com.enonic.xp.repo.impl.node.NodeServiceImpl.verifyContext(NodeServiceImpl.java:958) at com.enonic.xp.repo.impl.node.NodeServiceImpl.refresh(NodeServiceImpl.java:711) at com.enonic.xp.core.impl.app.ApplicationRepoServiceImpl.getApplications(ApplicationRepoServiceImpl.java:90) at com.enonic.xp.core.impl.app.ApplicationServiceImpl.doInstallStoredApplications(ApplicationServiceImpl.java:201) ```  Visually, this has, for example, as a result that the IssueService is not started (-&gt;ContentServiceImpl-&gt;ContentTypeServiceImpl-&gt;ApplicationServiceImpl): ![Screen Shot 2018-05-15 at 15.41.52.png](https://images.zenhubusercontent.com/58a5657151aa2c3057749a34/e4258cb3-6b49-42c6-9b77-56e89c848b73)   </body>
		<created>2018-05-15 13:56:00</created>
		<closed>2018-05-29 10:30:50</closed>
	</bug>
	<bug>
		<id>6254</id>
		<title>Update text of notifications messages that appear in wizard and grid</title>
		<body>1. New wizard is opened.   **Expected** : `Item is created` (name is not typed yet) **Actual**: `Content created`  2. Save button(wizard toolbar) has been pressed. **Expected**:  `Item "name" is saved.` **Actual**: `"name" saved.`  3. Duplicate button in wizard-toolbar has been pressed  One item: **Actual**: `Item "id" was duplicated.` **Expected**:  `Item "name" is duplicated.` (or, if not possible to fetch name, `Item is duplicated`)  Multiple: **Expected**:  `X items are duplicated.` **Actual**: `Duplicated X items`  4. Select a `Deleted` content in the grid and press the 'Undo deleted'  Actual: `The item are successfully undeleted` Expected: `Item is undeleted` and `Items are undeleted`  5. Select a folder in the root, press 'Move...' button and  then press Move on the dialog  Incorrect message appears (incorrect name- it is  always `content`)  ![image](https://user-images.githubusercontent.com/3728712/40107730-b55613c4-5901-11e8-8d29-871a7c8eb63f.png)  **Expected**: `Item is moved` or `Item is already moved`  6. Open new content wizard , do not type a name and click on Duplicate: **Issue**:   ![image](https://user-images.githubusercontent.com/3728712/40171467-f9f1721c-59d3-11e8-9366-566e86a7ab1e.png)   **Expected**  `Item "name" is duplicated`  7. Restore a version of a content **Expected**:    `Version was changed to 51bd93021e76e6c5a76289d61059bce59d41710a.` `Actual` :  `Version is changed to 51bd93021e76e6c5a76289d61059bce59d41710a.`  8. Open new wizard, select a language, save Actual: `Content saved` Expected: `Item "name" is saved.`  ![image](https://user-images.githubusercontent.com/3728712/40473176-1d14b522-5f44-11e8-9f1c-b6be569ade11.png) </body>
		<created>2018-05-15 13:04:08</created>
		<closed>2018-06-26 10:59:56</closed>
	</bug>
	<bug>
		<id>6248</id>
		<title>Inconsistencies in the Norwegian translations of UI</title>
		<body>During training I get quite a number of confused students (Norwegian speaking) due to the number of inconsistencies in the translations of Enonic XP. Some places translate names of things, like Content Studio, Part, Layout, into something Norwegian, and even if it feels odd in my opinion it is not done everywhere, so we end up with a solution that translate some instances of a name, but not all.  Perhaps this needs some decision-making on what should be kept in all languages etc? Content Studio is to me a name and should not be translated, Part component and Layout component are also names that should not be translated. But if they are, they should be translated everywhere.  Attaching a few screensshots on this.  In app overview "Layout" is translated to a word I cannot find anywhere else in the UI: ![screen shot 2018-05-15 at 12 36 34](https://user-images.githubusercontent.com/1465598/40052248-c010123e-583d-11e8-838d-523431b875a2.png)  In the Component overview, all component names are written in English only: ![screen shot 2018-05-15 at 12 37 01](https://user-images.githubusercontent.com/1465598/40052250-c02a0874-583d-11e8-865b-de634e8481ce.png)  When inserting components from the Insert tab in the Inspect Panel of the Page Editor, Layout is not translated: ![screen shot 2018-05-15 at 12 37 10](https://user-images.githubusercontent.com/1465598/40052252-c041ca36-583d-11e8-9d5c-7cbf22f75762.png)  In the Launcher the Content Studio name is translated, but not when running/using the admin tool: ![screen shot 2018-05-15 at 12 37 53](https://user-images.githubusercontent.com/1465598/40052253-c0586c96-583d-11e8-8e85-354e29263c1f.png)  When totally new to us and XP, it is very confusing that the system is littered with inconsistent translations. These where just four screenshots I took during one minute of clicking around, I'm sure there's plenty more.  Also, it would we wise to draw guidelines for all translations and translators on what is a name and should not be translated so we don't end up translating too much.</body>
		<created>2018-05-15 10:45:03</created>
		<closed>2018-06-12 10:37:21</closed>
	</bug>
	<bug>
		<id>6247</id>
		<title>lib-content sets default value of focalPoint for new media content</title>
		<body>When content lib creates a new media content, it sets ``focalPoint`` property to ``{ "x": 0, "y": 0 }``. This should not happen, default value should not be set.   https://discuss.enonic.com/t/createmedia-default-focus/1442</body>
		<created>2018-05-14 12:00:50</created>
		<closed>2018-06-26 10:52:13</closed>
	</bug>
	<bug>
		<id>6246</id>
		<title>Core libraries - Required parameters check</title>
		<body>Some mandatory parameters are not check before the call to the bean. The error message will then not be clear for the library user and some strange behaviour can then happen with for example portalLib.imageUrl trying to create the URL for the current content...  Check or implement the missing checks in libraries.  7.0.0?   If a library was incorrectly used, it could break   Warning: The library function documentation is maybe wrong and a mandatory attribute is not supposed to be mandatory</body>
		<created>2018-05-14 11:57:34</created>
		<closed>2020-02-26 12:26:52</closed>
	</bug>
	<bug>
		<id>6244</id>
		<title>Never disappearing tooltips on the command line in Content Studio</title>
		<body>I get this all the time in Chrome (and have for some time) but cannot really reproduce it in a step-by-step way. But what happens is I demonstrate editing of a content so I save a lot. And after a while (sometimes sooner than later) the tooltop for "Save"-button opens and gets stuck. It never disappears (until tab is reloaded).  Could we clean this up? The mouse is nowhere near it so I'm not sure why it still shows. Maybe it is because it pops up and I save at the same time? Anyways, it should be possible to fix and make sure tooltips doesn't get stuck like that for ever.  There's no way in Chrome to get it to go away, except reload the tab: ![screen shot 2018-05-09 at 16 21 24](https://user-images.githubusercontent.com/1465598/39820025-1d070e86-53a5-11e8-8ada-5079d2157df8.png) ![screen shot 2018-05-09 at 16 21 30](https://user-images.githubusercontent.com/1465598/39820026-1d26576e-53a5-11e8-90f6-0e0fbe643b5a.png) </body>
		<created>2018-05-09 14:25:06</created>
		<closed>2018-06-14 07:34:18</closed>
	</bug>
	<bug>
		<id>6242</id>
		<title>Change related contents name in an ContentSelector and selector flat list not updated</title>
		<body>Reproduced in Firefox and Chrome with Corporate Theme app from market. But goes for all contents with a ContentSelector.  * Use the ContentSelector to add a related Content. * Click the pen-icon to edit this content. * Change the Display Name. * Ctrl+Enter to save and close tab. * _Super exciting, the changed name shows in the list under the ContentSelector._ * Open the flat list again using the arrow icon on the ContentSelector and the old name shows  there.  It would be expected to see the new name - Emma - everywhere, not only just underneath the list.  Underneath the ContentSelector we see updated content names: ![screen shot 2018-05-09 at 16 05 23](https://user-images.githubusercontent.com/1465598/39819091-d8d629ce-53a2-11e8-8ec9-b32a817f963f.png)  In the list we only see old names, never changes: ![screen shot 2018-05-09 at 16 05 20](https://user-images.githubusercontent.com/1465598/39819090-d8be4f02-53a2-11e8-824e-61d9924b9a9e.png) </body>
		<created>2018-05-09 14:08:50</created>
		<closed>2018-05-30 10:22:13</closed>
	</bug>
	<bug>
		<id>6226</id>
		<title>Toolbox init-project command does not set project name for library</title>
		<body>Using the init-project command with the starter-lib, does not set the artifact name correctly in the gradle build.   This is because the maven plugin works different than the app plugin. It seems that the settings.gradle file should be handled.</body>
		<created>2018-05-04 13:14:47</created>
		<closed>2019-08-05 12:28:53</closed>
	</bug>
	<bug>
		<id>6218</id>
		<title>Services without descriptor are not listed</title>
		<body>Investigate if backend or only app-applications Fix</body>
		<created>2018-05-03 12:11:53</created>
		<closed>2018-05-03 12:23:23</closed>
	</bug>
	<bug>
		<id>6213</id>
		<title>query filter boolan must array with single entry is not expected format</title>
		<body>``` 2018-04-30 14:25:43,229 INFO  com.enonic.app.eff - (/services/searchService/searchService.js) {     "filters": {         "boolean": {             "must": [                 {                     "hasValue": {                         "field": "_references",                         "values": [                             "5e673263-8990-4e12-8bb7-dfd2eba84a2a"                         ]                     }                 }             ]         }     } } 2018-04-30 14:25:43,331 ERROR c.e.x.p.i.e.ExceptionRendererImpl - Filter not on expected format ```</body>
		<created>2018-04-30 12:35:37</created>
		<closed>2018-05-25 09:02:46</closed>
	</bug>
	<bug>
		<id>6212</id>
		<title>Item set label - First input value displayed</title>
		<body>While editing an ID Provider config, I noticed that the value of the first input was displayed at the place where the item set label should be. If I delete the item set and recreate it, I get the correct value. If I click on help, the bug reappears.  Wrong item set label. It should be "User mappings" ![Screen Shot 2018-04-30 at 10.13.12.png](https://images.zenhubusercontent.com/58a5657151aa2c3057749a34/7f896c3e-fe2d-498b-aeed-2398bc2873ec)  When deleted, it uses "User mappings" ![Screen Shot 2018-04-30 at 10.13.20.png](https://images.zenhubusercontent.com/58a5657151aa2c3057749a34/a367b158-523f-47a9-a5a5-2e2c524bf13e)  If I add a new item, it uses "User mappings" ![Screen Shot 2018-04-30 at 10.13.27.png](https://images.zenhubusercontent.com/58a5657151aa2c3057749a34/491b8767-550f-4849-bbe3-deb908552aee)  If I click on help, the first input value is displayed ![Screen Shot 2018-04-30 at 10.13.33.png](https://images.zenhubusercontent.com/58a5657151aa2c3057749a34/76b5fcd3-dbe1-4499-a39b-e1c99f58b53a)</body>
		<created>2018-04-30 08:16:52</created>
		<closed>2018-04-30 09:39:46</closed>
	</bug>
	<bug>
		<id>6210</id>
		<title>ContentTypeFilter incorrectly filters content types in context</title>
		<body>@alansemenov commented on [Mon Apr 16 2018](https://github.com/enonic/lib-admin-ui/issues/441)  Input type **ContentTypeFilter** is supposed to support ``config.context`` option which enables fetching content types only in current context (only content types from application assigned to current site), [see here](http://docs.enonic.com/en/stable/developer/schema/input-types/contenttypefilter.html).   However, in this mode we are using incorrect REST API ``GetAllContentTypesRequest``. We should use ``GetContentTypesByApplicationRequest`` instead - send one request per application and then concatenate the results.  [Support ticket](https://enonic.zendesk.com/agent/tickets/2419)  </body>
		<created>2018-04-28 15:06:17</created>
		<closed>2018-05-02 10:34:29</closed>
	</bug>
	<bug>
		<id>6208</id>
		<title>Incorrect number of deleted items in the Notification Message</title>
		<body>@sgauruseu commented on [Thu Apr 19 2018](https://github.com/enonic/app-contentstudio/issues/20)  @sgauruseu commented on [Mon Apr 09 2018](https://github.com/enonic/xp-apps/issues/753)  1. Click on checkbox and select Features 2.  Click on two checkboxes and select 2 folders in the root dir 3. Press the delete button   &lt;img width="627" alt="1" src="https://user-images.githubusercontent.com/3728712/38490872-ece19b78-3bf2-11e8-982c-4539aabe2658.png"&gt;  4. Confirm the deleting  Bug: **96 items was confirmed to delete, but notification is "Deleted 3 items"**  &lt;img width="777" alt="2" src="https://user-images.githubusercontent.com/3728712/38490974-3d8a3eb8-3bf3-11e8-8b0f-1898f9ad0578.png"&gt;      </body>
		<created>2018-04-27 14:57:15</created>
		<closed>2018-05-02 10:34:29</closed>
	</bug>
	<bug>
		<id>6201</id>
		<title>Administrator role is persisted when user is deleted and re-created</title>
		<body>Environment: Enonic XP 6.14.1 ldap-id-provider 1.0.3  1. Create user by logging in (ldap-id-provider) 2. Add role 'Administrator' to user 3. Delete user 4. Create same user by logging in (ldap-id-provider) 5. User still have 'Administrator' role  </body>
		<created>2018-04-26 08:54:02</created>
		<closed>2018-06-19 10:16:15</closed>
	</bug>
	<bug>
		<id>6200</id>
		<title>Publishing a content changes value in modifiedTime</title>
		<body>When a content item is published we create a new version and set `publish.first`. This also causes  modifiedTime to be updated with current date/time. We need to avoid modifiedTime being updated. It's common to have content sorted by modifiedTime and publishing should not affect this order. </body>
		<created>2018-04-25 10:05:16</created>
		<closed>2018-05-15 10:08:21</closed>
	</bug>
	<bug>
		<id>6199</id>
		<title>Unpublish creates a new version of content in Draft</title>
		<body>When unpublishing a content item we create a new version in Draft (and update ModifiedDate field) instead of simply deleting the published version from Master.</body>
		<created>2018-04-25 10:01:20</created>
		<closed>2018-05-15 10:08:17</closed>
	</bug>
	<bug>
		<id>6174</id>
		<title>Auth Lib - ModifyProfile - Properties with non JS type are converted to string</title>
		<body>This problem has been solved for modify node (issue 4632). Apply the same idea to modifyProfile</body>
		<created>2018-04-16 14:19:07</created>
		<closed>2018-07-12 10:37:53</closed>
	</bug>
	<bug>
		<id>6169</id>
		<title>Cannot publish changes to Text Component directly</title>
		<body>If I edit a Text Component on a page, the "Save"-button will light up on 6.14.1 when it detects changes. However, I cannot publish these changes until I have saved first. This is not in tune with how the functionality behaves elsewhere (if I changes input fields on a content, a can save or publish directly).  If you need something to test, go to this page on QA - https://enonic.com/company/careers/fullstack-javascript-developer and try to change the Text Component there. You'd expect to be able to publish when you changes something, but you must save first, then publish-button lights up.</body>
		<created>2018-04-16 06:28:13</created>
		<closed>2018-04-27 09:01:19</closed>
	</bug>
	<bug>
		<id>6164</id>
		<title>Wrong task executed with multiple named tasks in the same app</title>
		<body>If there are more than 1 named task defined in an application, submitting a task by name (using `taskLib. submitNamed`) selects always the same task handler to execute.  To reproduce the issue:  Add 2 tasks in an app: - /src/main/resources/tasks/task1/task1.js - /src/main/resources/tasks/task2/task2.js  Submit them from a controller: ```taskLib.submitNamed({name: 'task1'});``` ```taskLib.submitNamed({name: 'task2'});```  One of them will be executed 2 times, while the other one won't be executed. </body>
		<created>2018-04-12 11:50:56</created>
		<closed>2018-04-19 11:14:12</closed>
	</bug>
	<bug>
		<id>6163</id>
		<title>Portal URL - Url generation to services/assets/... fails when vhost mapping is targeting an app subpath</title>
		<body>Add a vhost targetting a subpath of an app: mapping.sandbox.host = localhost mapping.sandbox.source = /sandboxabc mapping.sandbox.target = /app/com.enonic.app.sandbox/abc  If the controller called tries to generate a serviceUrl , the generation will fail</body>
		<created>2018-04-11 12:45:21</created>
		<closed>2020-02-26 12:28:25</closed>
	</bug>
	<bug>
		<id>6158</id>
		<title>Controller Mapping - URL pattern not matching for non-root sites</title>
		<body>https://enonic.zendesk.com/agent/tickets/2406</body>
		<created>2018-04-09 08:37:00</created>
		<closed>2018-04-19 11:14:13</closed>
	</bug>
	<bug>
		<id>6157</id>
		<title>Node data information missing for root node </title>
		<body>Making a modify operation and passing the root node path "/" on a repository, returns the node as if it was successfully updated. But the changes are not actually stored. </body>
		<created>2018-04-06 10:43:23</created>
		<closed>2018-06-26 10:48:23</closed>
	</bug>
	<bug>
		<id>6150</id>
		<title>Macros with too many inputs breaks display in MacroModalDialog</title>
		<body>Macros with too many inputs breaks out of the MacroModalDialog and it is impossible to scroll.  &lt;img width="689" alt="screen shot 2018-04-03 at 12 06 31" src="https://user-images.githubusercontent.com/951293/38244735-e173fd46-373b-11e8-9f2e-4b42e97f0835.png"&gt;  Tested in 6.14 with following macro from [here](https://raw.githubusercontent.com/storebrand/smarterevalg/master/src/main/resources/site/macros/factbox/factbox.xml?token=AA6D_QlztK_tavWvAJHVPNAXzez5iEhwks5azJRlwA%3D%3D) ```xml &lt;macro&gt;   &lt;display-name&gt;Faktaboks&lt;/display-name&gt;   &lt;description&gt;Sett inn en faktaboks&lt;/description&gt;     &lt;form&gt;         &lt;input name="header" type="TextLine"&gt;             &lt;label&gt;Tittel&lt;/label&gt;         &lt;/input&gt;         &lt;input name="text" type="TextLine"&gt;             &lt;label&gt;Tekst over&lt;/label&gt;         &lt;/input&gt;         &lt;input name="linkText" type="TextLine"&gt;             &lt;label&gt;Lenketekst&lt;/label&gt;         &lt;/input&gt;         &lt;input name="link" type="TextLine"&gt;             &lt;label&gt;url&lt;/label&gt;         &lt;/input&gt;         &lt;input name="listType" type="RadioButton"&gt;             &lt;label&gt;Type liste&lt;/label&gt;             &lt;occurrences minimum="0" maximum="0"/&gt;             &lt;config&gt;                 &lt;option value="ul"&gt; Punktliste&lt;/option&gt;                 &lt;option value="ol"&gt; Nummerliste&lt;/option&gt;             &lt;/config&gt;             &lt;default&gt;ul&lt;/default&gt;         &lt;/input&gt;         &lt;input name="line1" type="TextLine"&gt;             &lt;label&gt;Rad 1&lt;/label&gt;         &lt;/input&gt;         &lt;input name="line2" type="TextLine"&gt;             &lt;label&gt;Rad 2&lt;/label&gt;         &lt;/input&gt;         &lt;input name="line3" type="TextLine"&gt;             &lt;label&gt;Rad 3&lt;/label&gt;         &lt;/input&gt;         &lt;input name="line4" type="TextLine"&gt;             &lt;label&gt;Rad 4&lt;/label&gt;         &lt;/input&gt;         &lt;input name="line5" type="TextLine"&gt;             &lt;label&gt;Rad 5&lt;/label&gt;         &lt;/input&gt;         &lt;input name="textEnd" type="TextLine"&gt;             &lt;label&gt;Tekst under&lt;/label&gt;         &lt;/input&gt;         &lt;input name="hiddenUnlessParameter" type="TextLine"&gt;             &lt;label&gt;Hvis definert url parameter har verdi, key=value, vis denne elementen, f.ex:fordel=yes&lt;/label&gt;         &lt;/input&gt;     &lt;/form&gt; &lt;/macro&gt; ```</body>
		<created>2018-04-03 10:41:54</created>
		<closed>2018-04-04 20:00:09</closed>
	</bug>
	<bug>
		<id>6144</id>
		<title>Create Issue Dialog - Exception occurs, when assigned user's name contains one char</title>
		<body>@sgauruseu commented on [Fri Mar 09 2018](https://github.com/enonic/lib-admin-ui/issues/400)  1. Go to Users and add user with name 'u', Add Administrator role him 2. Go to CS , click on "Publishing Issues" button,  then click on Create Issue button(No items to publish) 3. Type a title and select the user in Assignees 4. Press the `Create Issue` button   Bug: exception occurs  &lt;img width="704" alt="user-1" src="https://user-images.githubusercontent.com/3728712/37200733-be86ad32-2396-11e8-9acf-1e8878f401f5.png"&gt;   `12:34:17.592 ERROR c.e.x.j.i.e.JsonExceptionMapper - String index out of range: 2 java.lang.StringIndexOutOfBoundsException: String index out of range: 2 at java.lang.String.substring(String.java:1963) at com.enonic.xp.admin.impl.rest.resource.issue.IssueMailMessageGenerator.makeShortName(IssueMailMessageGenerator.java:232) at com.enonic.xp.admin.impl.rest.resource.issue.IssueMailMessageGenerator.generateAppoverHtml(IssueMailMessageGenerator.java:215) at com.enonic.xp.admin.impl.rest.resource.issue.IssueMailMessageGenerator.lambda$generateApproversHtml$3(IssueMailMessageGenerator.java:209) at java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193) at java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382) at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481) at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471) at java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708) at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) at java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:499) at com.enonic.xp.admin.impl.rest.resource.issue.IssueMailMessageGenerator.generateApproversHtml(IssueMailMessageGenerator.java:209) at com.enonic.xp.admin.impl.rest.resource.issue.IssueMailMessageGenerator.generateMessageBody(IssueMailMessageGenerator.java:100) at com.enonic.xp.admin.impl.rest.resource.issue.IssueMailMessageGenerator.generateMessage(IssueMailMessageGenerator.java:45) at com.enonic.xp.admin.impl.rest.resource.issue.IssueNotificationsSenderImpl.notifyIssueCreated(IssueNotificationsSenderImpl.java:42) at com.enonic.xp.admin.impl.rest.resource.issue.IssueResource.create(IssueResource.java:124) at sun.reflect.GeneratedMethodAccessor346.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:498) at org.jboss.resteasy.core.MethodInjectorImpl.invoke(MethodInjectorImpl.java:137) at org.jboss.resteasy.core.ResourceMethodInvoker.invokeOnTarget(ResourceMethodInvoker.java:296)`  </body>
		<created>2018-03-30 12:20:44</created>
		<closed>2018-04-03 10:41:21</closed>
	</bug>
	<bug>
		<id>6139</id>
		<title>isRenderable REST API always returns true for a page template with no controller</title>
		<body>REST API ``content/page/template/isRenderable`` always returns **true** for a page template, even when  it doesn't have a controller. Fix so that it returns **false** when controller is not selected.   When this is done, roll back [this commit](https://github.com/enonic/xp-apps/commit/6696962eba1035ce3b05b835caa00aaa786349bf) and test that: - when creating a new page template the editor panel is not blank but shows descriptor selector - Preview button is disabled for a page template with no controller both in the Grid and the Wizard - Preview panel in the grid shows "Preview not available" text for a page template with no controller</body>
		<created>2018-03-28 13:17:09</created>
		<closed>2018-04-03 10:41:22</closed>
	</bug>
	<bug>
		<id>6129</id>
		<title>New user stores missing permissions for user admin</title>
		<body>User stores created from the Users app don't get write permissions for the "system.user.admin" role, only for "system.admin".  Now the Graphql request to create user store includes these permissions: ``` [   {     "principal": "role:system.authenticated",     "access": "READ"   },   {     "principal": "role:system.admin",     "access": "ADMINISTRATOR"   } ] ```  It should also have the "system.user.admin" role:  ``` [   {     "principal": "role:system.authenticated",     "access": "READ"   },   {     "principal": "role:system.admin",     "access": "ADMINISTRATOR"   },   {     "principal": "system.user.admin",     "access": "ADMINISTRATOR"   } ] ```  This issue was reported in a support case (ticket 2354).</body>
		<created>2018-03-22 11:55:43</created>
		<closed>2018-04-03 10:41:19</closed>
	</bug>
	<bug>
		<id>6116</id>
		<title>Fragments can't be moved or imported to another site?</title>
		<body>I have a fragment which I want to move to another site. I just get the error message in a green box: "Content can't be moved".  I also tried exporting it. Which worked. But when I try importing it to the other site. I get the imported content box as expected. But no content appears in the site.</body>
		<created>2018-03-07 09:08:26</created>
		<closed>2018-03-27 16:21:17</closed>
	</bug>
	<bug>
		<id>6115</id>
		<title>Moving content out of the site should not remove its x-data</title>
		<body>https://github.com/enonic/xp/issues/5874</body>
		<created>2018-03-06 12:19:05</created>
		<closed>2018-03-20 11:53:44</closed>
	</bug>
	<bug>
		<id>6111</id>
		<title>Error rendering empty parts </title>
		<body>Rendering a part fails if the output HTML from the part controller is empty.  It seems that this bug was introduced while fixing handling for files with BOM encoding (#5990)  This issue was [reported in Discuss](https://discuss.enonic.com/t/updating-to-enonic-6-14-0/1429).</body>
		<created>2018-03-05 12:57:10</created>
		<closed>2018-03-20 11:54:18</closed>
	</bug>
	<bug>
		<id>6107</id>
		<title>Page component View - Error after duplicating an empty Fragment</title>
		<body>@sgauruseu commented on [Thu Mar 01 2018](https://github.com/enonic/xp-apps/issues/662)  1. Open Features, open Page component View 2. click on 'main' and select inseret/Fragment 3. select the Fragment and select 'Duplicate' in context menu  Exception occurs and error in the browser console &lt;img width="934" alt="fr1" src="https://user-images.githubusercontent.com/3728712/36843687-bcaff388-1d60-11e8-82fe-4ddc97c1b0aa.png"&gt;   `Caused by: java.lang.NullPointerException: null         at com.enonic.xp.core.impl.content.GetContentByIdCommand.execute(GetContentByIdCommand.java:27)         at com.enonic.xp.core.impl.content.ContentServiceImpl.doGetById(ContentServiceImpl.java:517)         at com.enonic.xp.core.impl.content.ContentServiceImpl.getById(ContentServiceImpl.java:495)         at com.enonic.xp.portal.impl.handler.render.ComponentHandlerWorker.getFragmentComponent(ComponentHandlerWorker.j`  </body>
		<created>2018-03-02 10:13:27</created>
		<closed>2018-03-06 12:21:08</closed>
	</bug>
	<bug>
		<id>6102</id>
		<title>System admins should not require System admin login role</title>
		<body>* Change the initialization of the super user to create it without role:system.admin.login * Add the role RoleKeys.ADMIN_ID for the JaxRsComponents requiring RoleKeys.ADMIN_LOGIN_ID * Try to find other possible problems with not having role:system.admin.login</body>
		<created>2018-03-01 12:45:16</created>
		<closed>2018-09-11 11:43:06</closed>
	</bug>
	<bug>
		<id>6095</id>
		<title>Change or remove questionmark in navigation bar in Content Studio</title>
		<body>Version 6.13.1     The questionmark in the navigation bar in the edit view in Content Studio should either  - show an explanation of what navigation bar does  - toggle all questionmarks in all the subsections - be removed  Currently, if I navigate to another subsection, it will still only toggle (the now invisible) questionmarks in the first section. And if you have a question about the second field of the first section, you will click on the querstion mark next to it, not the one in the navigation bar.  This is very confusing and an issue for all content I've tried this in.  Steps to reproduce:   1. Create a site with acme wireframe 2. Edit the page 3. Click the question mark in the editor navigation bar 4. Click on "Publiseringsplan" and click the questionmark in the navigation bar, the questionmark will seem to do nothing.   ![image](https://user-images.githubusercontent.com/1007261/36779707-23f52fcc-1c71-11e8-89a0-e52c79872dcd.png) </body>
		<created>2018-02-28 09:39:35</created>
		<closed>2018-02-28 13:41:05</closed>
	</bug>
	<bug>
		<id>6093</id>
		<title>Details panel refresh for Version history widget</title>
		<body>- Have a content - Take a snapshot - Edit the content and display the version history widget. -&gt; The widget displays the new version - Keep the tab opened and restore the snapshot  - Unselect and select the content -&gt; The widget still display the new version - Select another content and select back the content -&gt; The widget has the correct display now</body>
		<created>2018-02-27 11:02:55</created>
		<closed>2018-03-04 17:04:17</closed>
	</bug>
	<bug>
		<id>6085</id>
		<title>Opening multiple contents for editing will make the last one freeze</title>
		<body>*6.14 B2* *Chrome*  * Open Content Studio * Expand a site, for example Corporate Theme * Select 3 items  ![screen shot 2018-02-23 at 12 52 14](https://user-images.githubusercontent.com/1465598/36593156-e5407858-1898-11e8-8df3-df2706fd74ee.png)  * Click Edit * They'll open in new tabs - happy days * However, the last tab will get frontend errors and never load, requiring full reload of page.  ![screen shot 2018-02-23 at 12 52 06](https://user-images.githubusercontent.com/1465598/36593081-a28829ca-1898-11e8-92f2-7ec628853f8f.png)  This happens for the last item (no matter if you select 2, 3, 4, etc of items. It looks, in Chrome, like this is the tab that gets auto focus. The other tabs will start to load when focused, just like expected.</body>
		<created>2018-02-23 11:54:29</created>
		<closed>2018-03-30 14:44:48</closed>
	</bug>
	<bug>
		<id>6075</id>
		<title>Incorrect type of notification about failed operation when the repo is in readonly mode</title>
		<body>@alansemenov commented on [Thu Jan 25 2018](https://github.com/enonic/xp-apps/issues/505)  When the repo is in readonly mode (``./toolbox.sh set-read-only -a su:password -b -r cms-repo true``) and user attempts to move, duplicate or delete content, he gets a notification about failed operation, see below. However, the color of this notification is wrong - it's an error, so it should be red and not green.  ![image](https://user-images.githubusercontent.com/11612490/35388498-5a5ed804-01d4-11e8-9edb-85010be83a82.png)   </body>
		<created>2018-02-22 12:08:20</created>
		<closed>2018-04-19 11:14:10</closed>
	</bug>
	<bug>
		<id>6074</id>
		<title>Publish Wizard - warning should be displayed, when an user do not have permissions to publish content in dependent list</title>
		<body>1. Login with new created user(Content Manager App , Administration Console Login roles) 2. Add a shortcut and select read-only image in the target 3. select the shortcut and press the publish  Issue: only Cancel button is present on the dialog: &lt;img width="778" alt="pub2" src="https://user-images.githubusercontent.com/3728712/36537422-223c7ddc-17e1-11e8-8ccc-9eed041f3a1a.png"&gt;  Expected: "you have no permissions to publish the content" and disabled Publish button</body>
		<created>2018-02-22 12:02:19</created>
		<closed>2018-03-01 10:56:14</closed>
	</bug>
	<bug>
		<id>6073</id>
		<title>Editing permissions - the context menu with different capabilities gets stuck inside its container</title>
		<body>**6.14 B2** **Chrome**  * Open Detail Panel for any content * Click "Edit Permissions" * Make sure "Inherit..." is not checked * Click to edit any of the permissions  When you open the Detail Panel and click Edit Permissions, then try to edit one of the rights, the box popping up will be cut because it doesn't popup outside of the container but inside of it. One can scroll inside the container, but that just feels odd.  ![screen shot 2018-02-22 at 11 37 02](https://user-images.githubusercontent.com/1465598/36533757-dbad1c76-17c4-11e8-983e-08d105f7a6c9.png)  The scrollbar is not in the area before clicking, but appears when you click and the context menu appears.  ![screen shot 2018-02-22 at 11 38 13](https://user-images.githubusercontent.com/1465598/36533794-f68af70c-17c4-11e8-9da0-904bafd3450b.png) ![screen shot 2018-02-22 at 11 38 21](https://user-images.githubusercontent.com/1465598/36533795-f6a36710-17c4-11e8-93db-e20561d38bc3.png) </body>
		<created>2018-02-22 10:40:15</created>
		<closed>2018-03-12 14:04:36</closed>
	</bug>
	<bug>
		<id>6072</id>
		<title>Scrollbar covers part of "status" text in Chrome when grid has many items</title>
		<body>**6.14 B2**  With the contents of The Grid fully expanded, we'll get a vertical scrollbar. In Chrome, this scrollbar is painted on top of the grid area making it cover parts of the status text on each content. Looks "off" even if one can still understand what it says.  ![screen shot 2018-02-22 at 11 33 06](https://user-images.githubusercontent.com/1465598/36533607-4f1ff634-17c4-11e8-9d9f-8ce012fca974.png) </body>
		<created>2018-02-22 10:35:17</created>
		<closed>2018-02-26 16:01:50</closed>
	</bug>
	<bug>
		<id>6069</id>
		<title>Searching for content types in the Template "supports" field doesn't match DisplayName</title>
		<body>Ref: this issue - https://discuss.enonic.com/t/cant-search-by-display-name/1418  You can search for the content type's name (like 'article') but not the Display Name it has. These two may often differ, so it's expected to be able to search in both. Also, an editor will have a relation to the Display Name, never the actual name only used in code.</body>
		<created>2018-02-22 09:54:55</created>
		<closed>2018-02-23 19:44:59</closed>
	</bug>
	<bug>
		<id>6068</id>
		<title>Users app - Unsaved changes</title>
		<body>* Create a user store * Give it a name * Assign the ID Provider 'LDAP ID Provider' * Close the tab  =&gt; We keep getting the 'Close Wizard' dialog when we press 'Yes'</body>
		<created>2018-02-22 09:03:00</created>
		<closed>2018-02-22 09:12:00</closed>
	</bug>
	<bug>
		<id>6066</id>
		<title>ContentResource - getVersionsForView should not filter on modifiedTime</title>
		<body>https://enonic.zendesk.com/agent/tickets/2343  The filtering (if it really must be done) should be instead on the _timestamp</body>
		<created>2018-02-21 14:40:04</created>
		<closed>2018-04-03 08:52:31</closed>
	</bug>
	<bug>
		<id>6046</id>
		<title>Report on elasticsearch nodes does not display the correct local node</title>
		<body>All nodes in the cluster will display the same node as "local", seems like the wrong stat is used to display this report.  Ask me for help if necessary. </body>
		<created>2018-02-14 11:35:28</created>
		<closed>2018-03-06 12:09:58</closed>
	</bug>
	<bug>
		<id>6045</id>
		<title>HtmlArea saved content lagging behind what is shown in the form</title>
		<body>To reproduce: * Clean install of XP v6.13.1 * Install Superhero app (but this occurs inside other apps as well) * Create a new content of type Post * _Quickly_ move focus to the Post text field, and _quickly_ type something, in my case this was "Ingen stillinger tilgjengelig." * Save using keyboard shortcut command-s on Mac  The saved result in the content will then either: * not be registered at all, and the surrounding input field being marked as required * be truncated to a shorter value, such as ```&lt;/p&gt;I&lt;/p&gt;```  You then cannot "re-save" the content that is shown in the browser, since no changes seem to have been made since the last time you saved. But if you _slowly_ make a new change, you can save and then revert.</body>
		<created>2018-02-14 10:59:53</created>
		<closed>2018-03-16 12:27:05</closed>
	</bug>
	<bug>
		<id>6040</id>
		<title>Requests to a component URL fail when component is converted to a fragment</title>
		<body>- Create a part with a controller that makes a POST request to itself (using componentUrl) - Put it in a page, inside a layout - The part POST request works correctly - Make the layout into a fragment - The part POST request fails with an exception `"Expected component to be a LayoutComponent: FragmentComponent"`  The problem is that the fragment is not inlined in the page before doing the component path resolving.  So the look up for the component path (e.g. main/0/right/0) ends up in the unexpanded fragment component, and it fails.  This is done in `ComponentHandlerWorker`.   https://discuss.enonic.com/t/fragment-post-request/1408/6</body>
		<created>2018-02-14 07:20:49</created>
		<closed>2018-02-20 11:33:47</closed>
	</bug>
	<bug>
		<id>6039</id>
		<title>Enforce email uniqueness for users in Auth API</title>
		<body>Currently it is possible to create 2 users with the same email, using either JavaScript or Java API. The only validation is done in the UI in Users app.  Add a check to enforce the email is unique in a user store. This should be fixed in `SecurityService.createUser()` and `SecurityService.updateUser()`. And throw an exception if the update is in conflict with an existing user.  This issue was reported in support case 2331</body>
		<created>2018-02-13 11:59:47</created>
		<closed>2018-02-20 11:33:52</closed>
	</bug>
	<bug>
		<id>6037</id>
		<title>HtmlArea: Editing existing links on images deletes the image</title>
		<body>Error happened for multiple students during training. Basically they wanted to link a smaller thumbnail images in a news article to the full width image, or to external website on a logo image. It's been reproduced on Windows and Mac, in Chrome and Firefox. All running XP *6.13*.  Do this:  * Edit any HtmlArea on a content * Insert an image (new or old, doesn't matter) * Click it and create a link anywhere  You now have a clickable image, that's nice.  Now you see that the URL (or content) target is wrong. And you try to edit it. That looks good, so you correct your target and clicks "insert" again. The image disappears. It is actually removed from code, leaving only the empty link, meaning that when you save the image is gone.  Source HTML looks like this. ``` &lt;figure class="justify"&gt;&lt;a href="content://9379cf99-24ae-4ef5-bbd4-ff5167b16267"&gt;&lt;/a&gt; &lt;figcaption style="text-align: left;"&gt;&lt;/figcaption&gt; &lt;/figure&gt; ```  Linked image - error happens when you Edit the link and "insert" those changes. ![screen shot 2018-02-09 at 14 20 02](https://user-images.githubusercontent.com/1465598/36029762-d734f058-0da4-11e8-9470-5ba60cded9fd.png) </body>
		<created>2018-02-09 13:24:12</created>
		<closed>2018-02-23 12:46:36</closed>
	</bug>
	<bug>
		<id>6036</id>
		<title>Images with invalid date metadata cannot be edited in Content Studio</title>
		<body>Upload an image with invalid dates in their metadata (exif) and that image is impossible to open up for editing in Content Studio. The image will work otherwise (able to be displayed with code, preview works, and so on). Edit screen will open, but be totally blank.  This is one image that has that problem.  This error occurred during Content 101 training. It's been reproduced on Mac, Windows, Chrome and Firefox.  Guess some checks needs to be made on all metadata on images so Content Studio doesn't fail just because the data was wrong, like negative dimensions or similar.  This is the image:  ![giraffe_standing](https://user-images.githubusercontent.com/1465598/36029451-8a661b5e-0da3-11e8-8bbf-c19d23a9d018.jpg)  This is how CS looks when trying to edit that image: ![screen shot 2018-02-09 at 14 14 52](https://user-images.githubusercontent.com/1465598/36029481-a3a1f372-0da3-11e8-86d9-b71244c73cb8.png) </body>
		<created>2018-02-09 13:15:19</created>
		<closed>2018-02-15 15:25:46</closed>
	</bug>
	<bug>
		<id>6033</id>
		<title>Most popular items are not shown in the New Content dialog when no parent content is selected</title>
		<body></body>
		<created>2018-02-08 13:57:09</created>
		<closed>2018-02-23 11:36:59</closed>
	</bug>
	<bug>
		<id>6027</id>
		<title>HTML Macro Evaluation - Reduce call stack</title>
		<body>The code in charge or macro evaluation in HTML is not suitable for text with a big amount of XML/HTML tags. It seems to call recursively without ever going out.  Ticket: https://enonic.zendesk.com/agent/tickets/2314</body>
		<created>2018-02-05 15:04:55</created>
		<closed>2018-02-20 11:29:56</closed>
	</bug>
	<bug>
		<id>6006</id>
		<title>Item set is collapsed when clicking on help text</title>
		<body>- Create a content of type "shortcut" - Click on "Add Parameters" - If you click on the ? button next to "Parameters", the help text is shown but also the item set is collapsed and its fields hidden.</body>
		<created>2018-01-25 08:51:28</created>
		<closed>2018-02-24 18:15:49</closed>
	</bug>
	<bug>
		<id>6002</id>
		<title>Fragment content cannot be moved inside a site</title>
		<body>Trying to move a content of type fragment, even when inside the same Site, does not work and shows the message "Content could not be moved."  To reproduce: - Create a fragment from superhero site, edit site and make one of the parts a fragment - Try to move the fragment from /superhero/fragment-posts-list to /superhero/posts - Content is not moved and the message "Content could not be moved." is shown  Looks like the logic for `isOutOfSite` is not correct in `MoveContentCommand`.</body>
		<created>2018-01-24 10:43:04</created>
		<closed>2018-02-06 11:41:53</closed>
	</bug>
	<bug>
		<id>5990</id>
		<title>Error parsing application files with UTF8 BOM encoding</title>
		<body>There is an exception parsing XML descriptors with UTF-8 BOM encoded files. Check if it affects HTML files in Thymeleaf, Mustache.  The BOM mark is common in files generated in Windows editors.  [Reported in Discuss](https://discuss.enonic.com/t/support-for-bom-encoded-files/1386). </body>
		<created>2018-01-23 06:29:19</created>
		<closed>2018-03-06 12:08:13</closed>
	</bug>
	<bug>
		<id>5989</id>
		<title>Users App - GraphQL - Opening &amp; closing a user store tab proposes to save changes</title>
		<body>![screen shot 2018-01-22 at 12 54 38](https://user-images.githubusercontent.com/12030113/35222176-3f303e14-ff7d-11e7-8373-114a7aca3e91.png) </body>
		<created>2018-01-22 13:04:56</created>
		<closed>2018-01-22 13:19:49</closed>
	</bug>
	<bug>
		<id>5988</id>
		<title>Users App - GraphQL - Update of user store without description fails</title>
		<body>![screen shot 2018-01-22 at 13 57 41](https://user-images.githubusercontent.com/12030113/35222103-00a7e426-ff7d-11e7-8756-63dbdb7cbc44.png) </body>
		<created>2018-01-22 13:03:14</created>
		<closed>2018-01-22 13:18:42</closed>
	</bug>
	<bug>
		<id>5981</id>
		<title>Toolbox - Add default repository for init-app on Windows</title>
		<body></body>
		<created>2018-01-19 13:11:45</created>
		<closed>2018-04-03 08:46:39</closed>
	</bug>
	<bug>
		<id>5929</id>
		<title>Macro is not found when name contains hyphen "-" in name</title>
		<body>A macro with a hyphen in its folder / file name are not found / processed. For example I had to rename the macro linked-image/[linked-image.xml | linked-image.js] to linkedImage/[linkedImage.xml | linkedImage.js] for it to work.  Tested in XP 6.11.0, 6.13.0.</body>
		<created>2018-01-10 10:50:27</created>
		<closed>2018-01-23 12:03:14</closed>
	</bug>
	<bug>
		<id>5928</id>
		<title>Macro parameters from TextLine, TextArea are converted with Html Entities</title>
		<body>When parameters from Macro TextLine or TextArea contain special characters like f.x. æøå the context.params object in javascript controller delivered the values escaped as HtmlEntities &amp;aelig;&amp;oslash;&amp;aring;  Either this is a bug, or it should be documented in the macro documentation that this is the case, and how to best decode these back to normal text.  Tested in XP 6.11.0 and 6.13.0.  &lt;img width="1283" alt="screen shot 2018-01-10 at 11 36 39" src="https://user-images.githubusercontent.com/951293/34768396-00f6e11a-f5fb-11e7-9b64-d39e00eccf28.png"&gt; </body>
		<created>2018-01-10 10:44:44</created>
		<closed>2018-06-26 10:48:32</closed>
	</bug>
	<bug>
		<id>5925</id>
		<title>Toolbox CLI - Load of dump with skipped versions fails</title>
		<body>Using Toolbox CLI, the following throws an error: ``` toolbox dump -a su:password -t mydump --skip-versions toolbox load -a su:password -s mydump ```  It also seems that the options --max-versions do not work as planned also. But I am not sure about this second one. I might have misunderstood.</body>
		<created>2018-01-08 14:30:35</created>
		<closed>2018-03-06 12:11:44</closed>
	</bug>
	<bug>
		<id>5919</id>
		<title>&lt;content-display-name-script&gt; not working</title>
		<body>Content Types support something called content display name scripts. It's not commonly used, but it is used here and there (for instance in the Superhero Theme, lib-urlredirect, and other apps done by Enonic). It's also been in [the documentation](http://docs.enonic.com/en/stable/developer/site/content-types/custom-types.html) for some time.  Try this Content Type in XP 6.13 and you will get `$ is not a function` errors in the console. Perhaps also there in 6.12.  ``` &lt;?xml version="1.0" encoding="UTF-8"?&gt; &lt;content-type&gt;   &lt;display-name&gt;URL&lt;/display-name&gt;   &lt;content-display-name-script&gt;$('url')&lt;/content-display-name-script&gt;   &lt;super-type&gt;base:structured&lt;/super-type&gt;   &lt;form&gt;     &lt;input type="TextLine" name="url"&gt;       &lt;label&gt;URL&lt;/label&gt;       &lt;occurrences minimum="1" maximum="1"/&gt;   &lt;help-text&gt;Include the protocol name ("https://") for the URL.&lt;/help-text&gt;     &lt;/input&gt;   &lt;/form&gt; &lt;/content-type&gt; ```  Expected behavior is that when typing anything into the field `url` a DisplayName would be generated out of it. The docs also have an example of how concatenating fields works.  ![screen shot 2018-01-03 at 11 55 47](https://user-images.githubusercontent.com/1465598/34518154-6cc7b6e4-f07e-11e7-8ce1-a5dd7e290b7b.png) </body>
		<created>2018-01-03 11:05:50</created>
		<closed>2018-01-16 09:45:02</closed>
	</bug>
	<bug>
		<id>5910</id>
		<title>Content &amp; Node lib - Multiple filters at root level </title>
		<body>The documentation says:  `If specifying several filters on the filter object root level, the filters are joined automatically with a boolean “must” clause, meaning all filters much match. `  Linked to #5906  After #5906, the following works: ``` contentLib.query({     filters: {                 boolean: {             must: [{                 hasValue: {                     field: "_path",                     values: [                         "/content/features"                     ]                 }             }, {                 hasValue: {                     field: "_name",                     values: [                         "features"                     ]                 }             }]         }             } }); ```   But this does not: ``` contentLib.query({     filters:         [{             hasValue: {                 field: "_path",                 values: [                     "/content/features"                 ]             }         }, {             hasValue: {                 field: "_name",                 values: [                     "features"                 ]             }         }] }); ```</body>
		<created>2017-12-20 09:02:33</created>
		<closed>2018-03-06 12:20:10</closed>
	</bug>
	<bug>
		<id>5904</id>
		<title>Node-api - Boolean filters does not support arrays of filters</title>
		<body></body>
		<created>2017-12-19 22:07:22</created>
		<closed>2018-01-09 11:15:54</closed>
	</bug>
	<bug>
		<id>5903</id>
		<title>Content-api - Boolean filters does not support arrays of filters</title>
		<body></body>
		<created>2017-12-19 21:46:22</created>
		<closed>2018-01-09 11:15:57</closed>
	</bug>
	<bug>
		<id>5896</id>
		<title>Cache properties in LocaleServiceImpl</title>
		<body>Now the localization-resource is fetched for every invocation of localize. This seems to make off-heap memory grow on certain customer installations using the localize-lib.   Cache properties on applicationKey+bundleName. Make sure reloaded application invalidates entry.</body>
		<created>2017-12-18 09:21:06</created>
		<closed>2017-12-19 11:36:23</closed>
	</bug>
	<bug>
		<id>5894</id>
		<title>UserWizard - trim spaces in a password field</title>
		<body>@sgauruseu commented on [Mon Oct 23 2017](https://github.com/enonic/xp-apps/issues/173)  1. Add new User(add required roles). Specify a password with  extra space  after the password 2. Try to login with the name and do not type the extra space in the password  Bug: 'login failed' - message appears when you did not type extra space  after the password Expected: white spaces should be trimmed  </body>
		<created>2017-12-18 09:01:41</created>
		<closed>2017-12-19 11:34:28</closed>
	</bug>
	<bug>
		<id>5889</id>
		<title>Changes in permissions are not propagated down to inheriting children</title>
		<body>@alansemenov commented on [Wed Dec 13 2017](https://github.com/enonic/xp-apps/issues/358)  1. Open Content Wizard for a content that has children with "Inherit permissions" ON 2. Open Edit permissions dialog 3. Uncheck the "Inherit permissions" checkbox if it's on, to be able to change the permissions 4. Make some changes (add new user, modify permissions etc.) 5. Click Apply  New changes are now supposed to propagate down to child content that inherits permissions from the parent, but it doesn't happen.  When doing the same thing via Edit permissions dialog opened from the detail panel, everything works correctly.  </body>
		<created>2017-12-14 11:34:04</created>
		<closed>2017-12-19 11:48:03</closed>
	</bug>
	<bug>
		<id>5887</id>
		<title>New permission of a parent is propagated to a child element not inheriting permissions</title>
		<body>@alansemenov commented on [Thu Dec 14 2017](https://github.com/enonic/xp-apps/issues/367)  1. Choose a content item that has a parent and turn off "Inherit permissions" 2. Open Edit permissions dialog of the parent element from the Details panel 3. Add a new permission (select a role or a user from the dropdown) 4. Click Apply 5. The child element also gets the new permission even though it's not supposed to inherit permissions from the parent  </body>
		<created>2017-12-14 11:31:37</created>
		<closed>2018-04-16 10:20:14</closed>
	</bug>
	<bug>
		<id>5886</id>
		<title>Check why test VersionTableCleanupTaskTest fails</title>
		<body>This test fails sometimes on build-server.  </body>
		<created>2017-12-14 11:19:34</created>
		<closed>2018-06-05 09:45:00</closed>
	</bug>
	<bug>
		<id>5885</id>
		<title>Users App - trim spaces in displayName input (Wizards)</title>
		<body>@sgauruseu commented on [Wed Oct 25 2017](https://github.com/enonic/xp-apps/issues/184)  1. Open a user-wizard or role-wizard, type a data and type a display name with spaces 2. Save the item, go to the grid Bug: display-name was saved with spaces.   ![space](https://user-images.githubusercontent.com/3728712/31992299-9b5bcb40-b982-11e7-9d68-e7b9fbb50252.png)   </body>
		<created>2017-12-14 10:36:11</created>
		<closed>2017-12-19 11:34:14</closed>
	</bug>
	<bug>
		<id>5884</id>
		<title>Multiple occurrences not working in macro form</title>
		<body>Currently macros only support single input elements in the form. If an input has max occurrences &gt; 1, it will fail when the macro is processed.  To solve it we can allow repeating parameter names in the macro strings, and just add the values with the same name.  This requires fixing the parsing and serialisation for: - Macro instructions: `[macro myField="value1" myField="value2"]` - Macro postprocessing comments: `&lt;!--#MACRO _name="macro" myField="value1" myField="value2"--&gt;`  And in the `Macro` class use a `Multimap` instead of a `Map` for the parameters.  It should not affect existing macros, since the format does not change for single occurrences. It's backwards compatible.  This issue was [reported in Discuss](https://discuss.enonic.com/t/macro-with-contentselector/1344) And there is a support issue: ticket 2243 </body>
		<created>2017-12-14 09:52:18</created>
		<closed>2017-12-19 11:47:49</closed>
	</bug>
	<bug>
		<id>5881</id>
		<title>Service - Access restriction based on site context - Forbidden content/site</title>
		<body></body>
		<created>2017-12-14 08:54:31</created>
		<closed>2018-01-09 11:13:24</closed>
	</bug>
	<bug>
		<id>5875</id>
		<title>HTTP Cookies - Implementation/Documentation incoherence for path parameter</title>
		<body></body>
		<created>2017-12-13 12:45:07</created>
		<closed>2017-12-29 13:14:15</closed>
	</bug>
	<bug>
		<id>5862</id>
		<title>Issue when restoring a snapshot - cluster state RED</title>
		<body>     2017-12-12 08:00:40,483 INFO  org.elasticsearch.cluster.metadata - [local-node] closing indices      [[search-system-repo]]     2017-12-12 08:00:40,493 INFO  c.e.x.r.i.e.s.AbstractSnapshotExecutor - Closed index search-system-repo     2017-12-12 08:00:40,493 INFO  org.elasticsearch.cluster.metadata - [local-node] closing indices [[storage-system-repo]]     2017-12-12 08:00:40,499 INFO  c.e.x.r.i.e.s.AbstractSnapshotExecutor - Closed index storage-system-repo     2017-12-12 08:00:40,551 WARN  org.elasticsearch.cluster.metadata - [local-node] [search-system-repo] re-syncing mappings with cluster state for types [[_default_]]         2017-12-12 08:00:40,764 INFO  org.elasticsearch.snapshots - [local-node] restore [enonic-xp-snapshot-repo:vif-full-22] is done     2017-12-12 08:00:40,771 INFO  c.e.x.r.i.e.s.AbstractSnapshotExecutor - Opened index search-system-repo     2017-12-12 08:00:40,771 INFO  c.e.x.r.i.e.s.AbstractSnapshotExecutor - Opened index storage-system-repo     2017-12-12 08:00:40,782 INFO  org.elasticsearch.cluster.metadata - [local-node] closing indices [[search-cms-repo]]     2017-12-12 08:00:40,788 INFO  c.e.x.r.i.e.s.AbstractSnapshotExecutor - Closed index search-cms-repo     2017-12-12 08:00:40,789 INFO  org.elasticsearch.cluster.metadata - [local-node] closing indices [[storage-cms-repo]]     2017-12-12 08:00:40,793 INFO  c.e.x.r.i.e.s.AbstractSnapshotExecutor - Closed index storage-cms-repo     2017-12-12 08:00:45,931 ERROR c.e.x.e.impl.ClientActivator - Cluster health in state 'RED'     2017-12-12 08:00:45,991 INFO  c.e.x.e.impl.ClientActivator - Cluster not operational, unregister elasticsearch-client     2017-12-12 08:00:51,484 ERROR c.e.x.r.i.r.NodeRepositoryServiceImpl - Cluster not healthy: timed out: true, state: RED     2017-12-12 08:00:51,487 ERROR c.e.x.p.i.e.ExceptionRendererImpl - Unable to initialize repositories     com.enonic.xp.web.WebException: Unable to initialize repositories     at com.enonic.xp.web.impl.exception.ExceptionMapperImpl.map(ExceptionMapperImpl.java:32)     at com.enonic.xp.web.impl.handler.WebDispatcherServlet.handleError(WebDispatcherServlet.java:146)     at com.enonic.xp.web.impl.handler.WebDispatcherServlet.doHandle(WebDispatcherServlet.java:140)     at com.enonic.xp.web.impl.handler.WebDispatcherServlet.service(WebDispatcherServlet.java:63)     at javax.servlet.http.HttpServlet.service(HttpServlet.java:790)     at com.enonic.xp.web.impl.dispatch.mapping.ServletDefinitionImpl.service(ServletDe</body>
		<created>2017-12-12 07:05:30</created>
		<closed>2017-12-12 07:22:57</closed>
	</bug>
	<bug>
		<id>5854</id>
		<title>Portal lib - Get current content/site/siteConfig - Use contentPath as alternative</title>
		<body>If the site or content set is null, we could use the contentPath from the portal request.</body>
		<created>2017-12-08 11:24:14</created>
		<closed>2017-12-19 11:35:17</closed>
	</bug>
	<bug>
		<id>5841</id>
		<title>Generic HTTP OPTIONS handler overrides options handler in controller </title>
		<body>In a cross site situation CORS headers needs to be added on the "pre-flight" OPTIONS request in order for a normal fetch to work: https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API  I have found no way of doing this in Enonic XP.  In my usecase it's a service, but this should apply to all controllers.  I've tried implementing exports.handle exports.handleOptions exports.options  I've tried filters, but they don't apply to services even though applyFilters=true.  Filters probably don't even apply to an OPTIONS request.  I've heard Enonic XP currently has its own default handling of OPTIONS requests. Perhaps it should be possible to override or extend it. Response filters...  Or maybe CORS could be handeled in a more graceful way so that the default OPTIONS handling could implement it too. </body>
		<created>2017-12-05 12:17:05</created>
		<closed>2018-03-06 12:07:53</closed>
	</bug>
	<bug>
		<id>5837</id>
		<title>Component Viewer - issues with collapsed segments of the tree</title>
		<body>*CV = Component Viewer.*  Bug is in 6.12 and 6.13, except it behaves slightly different. Discovered and reported by multiple students during class.  * Open up any content and go into the Page Editor. * Open the CV * Collapse one of the branches that contains Parts * Locate one of those Parts in the Page Editor and left-click it.  Expected behavior: * Part is highlighted in CV and in Page Editor, if CV branch is collapsed it should open.  What happens instead: * 6.12: Part is selected but no highlight is shown in CV * 6.13: The page is selected instead, in CV and Page Editor.  &lt;img width="565" alt="screen shot 2017-12-01 at 13 52 49" src="https://user-images.githubusercontent.com/1465598/33483622-f33d4152-d69e-11e7-86d8-a03cb105a240.png"&gt; </body>
		<created>2017-12-01 12:53:42</created>
		<closed>2017-12-04 13:55:34</closed>
	</bug>
	<bug>
		<id>5827</id>
		<title>Changing snapshot-location does not work</title>
		<body>If a snapshot location is already created, its not possible to change to another location without deleting the index.  Related to issue: https://enonic.zendesk.com/agent/tickets/2222</body>
		<created>2017-11-27 11:00:16</created>
		<closed>2017-12-05 11:31:29</closed>
	</bug>
	<bug>
		<id>5818</id>
		<title>Error when saving a site with an empty part or layout component</title>
		<body>@sgauruseu commented on [Mon Nov 20 2017](https://github.com/enonic/xp-apps/issues/271)  1. Open Features and open the PageComponentView 2. Insert a part-component or layout-component 3. Do not select option in the selector 4. Press the Save button  Bug: error apears in the console and error-notification message appears  ![part](https://user-images.githubusercontent.com/3728712/33021166-f038473a-ce11-11e7-8fe3-b7f9acf47598.png)  ![notification](https://user-images.githubusercontent.com/3728712/33021226-258656f2-ce12-11e7-831c-80aadb238de7.png)    </body>
		<created>2017-11-22 15:02:09</created>
		<closed>2017-12-05 11:32:07</closed>
	</bug>
	<bug>
		<id>5809</id>
		<title>Not possible to move pages under a shortcut</title>
		<body>- Create a shortcut in Content Studio - Select another existing content and click Move - Expand the dropdown tree selector to find the shortcut - It is disabled so it cannot be selected to move under  There is no reason why it should not be allowed, "base:shortcut" ctype has allowChildContent=true.  Reported in Discuss:  https://discuss.enonic.com/t/not-possible-to-move-pages-under-a-shortcut/1288</body>
		<created>2017-11-21 14:30:55</created>
		<closed>2017-11-22 08:29:03</closed>
	</bug>
	<bug>
		<id>5808</id>
		<title>portal.componentUrl() fails with Empty message in exception</title>
		<body>If you call it without any arguments it fails.  portal.componentUrl() -&gt; fails portal.componentUrl({}) -&gt; works  It fails with: Empty message in exception on this line: https://github.com/enonic/xp/blob/a2d0447ecccde2da490d9e3a88f04dd2d6600516/modules/lib/lib-portal/src/main/resources/site/lib/xp/portal.js#L67  The documentation says all params are optional: http://repo.enonic.com/public/com/enonic/xp/docs/6.12.2/docs-6.12.2-libdoc.zip!/module-portal.html#.componentUrl</body>
		<created>2017-11-21 13:29:28</created>
		<closed>2017-12-19 11:42:16</closed>
	</bug>
	<bug>
		<id>5802</id>
		<title>Portal Lib - loginURl - Unnecessary userstore parameter</title>
		<body></body>
		<created>2017-11-21 09:33:23</created>
		<closed>2017-12-29 12:18:24</closed>
	</bug>
	<bug>
		<id>5792</id>
		<title>Content cannot be deleted if content type is missing</title>
		<body>If the content type of some created content is deleted, the "Delete" button in Content Studio is disabled. This makes not possible to delete content when a content type has been deleted or an app has been uninstalled.  Also, in the case the content type is not found, the "New" button is enabled, but it should not be.  This issue was reported in a support case (2204)</body>
		<created>2017-11-16 08:19:40</created>
		<closed>2017-11-24 11:56:45</closed>
	</bug>
	<bug>
		<id>5776</id>
		<title>Invalid input type for AttachmentUpload</title>
		<body>Steps to reproduce issue: - create a content type with an AttachmentUpload field - create a content of the type - in the AU field, upload a file with a name containing spaces  - trying to modify this content using `contentLib.modify` will always fail with an exception  The problem is that `AttachmentUploaderType` uses `Reference` as underlying type. When trying to convert from the JavaScript string type to a `Reference` it fails because a `Reference` is a wrapper for a `NodeId`, and `NodeId` allows a limited set of characters.  Is it correct that `AttachmentUpload` is based on a `Reference`? Shouldn't it have been `BinaryReference`?  This was reported in Discuss:  https://discuss.enonic.com/t/unable-to-edit-object-with-attachment-with-content-modify/1285  Stack trace: ``` Caused by: com.enonic.xp.data.ValueTypeException: Value of type [java.lang.String] cannot be converted to [Reference]: NodeId format incorrect: Screenshot from 2017-10-03 15-29-40.png at com.enonic.xp.data.ValueType.convertError(ValueType.java:92) at com.enonic.xp.data.ValueType.convert(ValueType.java:74) at com.enonic.xp.data.Value.asReference(Value.java:193) at com.enonic.xp.inputtype.AttachmentUploaderType.createValue(AttachmentUploaderType.java:21) at com.enonic.xp.lib.common.FormJsonToPropertyTreeTranslator.mapValue(FormJsonToPropertyTreeTranslator.java:96) at com.enonic.xp.lib.common.FormJsonToPropertyTreeTranslator.addValue(FormJsonToPropertyTreeTranslator.java:74) at com.enonic.xp.lib.common.FormJsonToPropertyTreeTranslator.lambda$addValue$0(FormJsonToPropertyTreeTranslator.java:70) at java.util.Iterator.forEachRemaining(Iterator.java:116) at com.enonic.xp.lib.common.FormJsonToPropertyTreeTranslator.addValue(FormJsonToPropertyTreeTranslator.java:70) at com.enonic.xp.lib.common.FormJsonToPropertyTreeTranslator.traverse(FormJsonToPropertyTreeTranslator.java:54) at com.enonic.xp.lib.common.FormJsonToPropertyTreeTranslator.translate(FormJsonToPropertyTreeTranslator.java:43) at com.enonic.xp.lib.content.BaseContextHandler.translateToPropertyTree(BaseContextHandler.java:76) at com.enonic.xp.lib.content.ModifyContentHandler.createPropertyTree(ModifyContentHandler.java:157) at com.enonic.xp.lib.content.ModifyContentHandler.updateContent(ModifyContentHandler.java:103) at com.enonic.xp.lib.content.ModifyContentHandler.lambda$newContentEditor$0(ModifyContentHandler.java:81) ```</body>
		<created>2017-11-10 13:13:15</created>
		<closed>2017-11-20 13:10:50</closed>
	</bug>
	<bug>
		<id>5766</id>
		<title>Errors during ScrollExecutors are not caught properly</title>
		<body>If e.g a timeout occurs during a scroll executor execution, the result is returned with a wrong number of total hits. See issue @ posten:   https://enonic.zendesk.com/agent/tickets/2192</body>
		<created>2017-11-08 13:50:23</created>
		<closed>2020-02-26 11:42:29</closed>
	</bug>
	<bug>
		<id>5745</id>
		<title>Runtime artifact not installed in local repository</title>
		<body>https://docs.gradle.org/current/userguide/maven_plugin.html#sub:installing_to_the_local_repository</body>
		<created>2017-11-06 15:36:14</created>
		<closed>2018-04-03 10:41:19</closed>
	</bug>
	<bug>
		<id>5724</id>
		<title>Texts in app-main not translated</title>
		<body>Looks like an issue introduced in the latest changes in lib-i18n.</body>
		<created>2017-10-25 13:05:14</created>
		<closed>2017-11-07 11:40:51</closed>
	</bug>
	<bug>
		<id>5721</id>
		<title>App Users - URL are not server relative</title>
		<body></body>
		<created>2017-10-24 07:44:59</created>
		<closed>2017-12-07 15:43:28</closed>
	</bug>
	<bug>
		<id>5720</id>
		<title>Latest Market apps are not retrieved by name from getMarketApplications REST API</title>
		<body>None of the latest apps on the Market can be retrieved by passing ``id`` parameter to ``getMarketApplications`` REST API, although they are returned when getting the full list of apps (when ``id`` parameter is not used).   Example: com.enonic.app.officeleague, com.enonic.app.guillotine, com.enonic.app.corporate.theme etc. Looks like there's ``count`` sitting somewhere in the code which limits the list somehow.  ![image](https://user-images.githubusercontent.com/11612490/31914679-eb779a42-b84b-11e7-9720-20e562bc894a.png) </body>
		<created>2017-10-23 21:50:06</created>
		<closed>2017-10-25 14:19:46</closed>
	</bug>
	<bug>
		<id>5716</id>
		<title>Restore snapshot fails on first attempt on empty repo/index</title>
		<body>When restoring a repository-snapshot on an empty/new index, the path-cache is not cleared properly before the index is restored.   I WILL work of doing the following: 1) Restore snapshot (get an exception) 2) Restart the xp-instance 3) Do the restore snapshot again.</body>
		<created>2017-10-23 11:06:10</created>
		<closed>2017-11-07 11:39:45</closed>
	</bug>
	<bug>
		<id>5715</id>
		<title>Dump fails for content with name more that 95 characters</title>
		<body>Due to a limitation in the default tar archive implementation, file-names longer that 100 bytes fails.   </body>
		<created>2017-10-23 08:45:35</created>
		<closed>2017-11-07 11:42:42</closed>
	</bug>
	<bug>
		<id>5699</id>
		<title>ContentNodeHelper.translateNodePathToContentPath resolves wrong path</title>
		<body>ContentNodeHelper.translateNodePathToContentPath seems to resolve a relative path instead of a absolute content-path:       final ContentPath contentPath =             ContentNodeHelper.translateNodePathToContentPath( NodePath.create( "/content/fisk/myContent" ).build() );  This yields "fisk/myContent" but should be /fisk/myContent Apparently this doesnt make anything fail, but it should be corrected.</body>
		<created>2017-10-16 13:35:01</created>
		<closed>2018-06-26 10:48:29</closed>
	</bug>
	<bug>
		<id>5688</id>
		<title>Fix performance issues in Tree Content Selector</title>
		<body>Tree Content Selector is slow when expanding the dropdown for the first time and when expanding a node with children. The first case is also very confusing because it shows "No matching items" while loading content, so user thinks that the dropdown is simply empty (see https://github.com/enonic/lib-admin-ui/issues/93).</body>
		<created>2017-10-13 13:18:14</created>
		<closed>2017-10-24 08:28:58</closed>
	</bug>
	<bug>
		<id>5679</id>
		<title>Image orientation not detected if not set in content metadata</title>
		<body>- Create a content uploading the attached image - Open in admin or render using imageUrl - It appears without rotation, ignoring the orientation set in the image metadata  The problem is in the logic obtaining the orientation. It assumes that it has been stored in the image metadata using the orientation numeric value. But the metadata in the content has the orientation in text format: `"orientation": "Right side, top (Rotate 90 CW)"`  In this case we should use the orientation value extracted using Apache Tika.  ![borgarting](https://user-images.githubusercontent.com/430739/31440172-3865982a-ae8f-11e7-882f-f9f69234e958.jpg) </body>
		<created>2017-10-11 12:20:02</created>
		<closed>2017-10-24 08:34:49</closed>
	</bug>
	<bug>
		<id>5675</id>
		<title>Implement paging in ContentTreeSelector</title>
		<body>@alansemenov commented on [Tue Oct 10 2017](https://github.com/enonic/lib-admin-ui/issues/86)  When dropdown is expanded, all of the matching content items are fetched and there's no paging. We should always use paging, also in the tree mode (same as in the Content grid).  </body>
		<created>2017-10-10 18:31:26</created>
		<closed>2017-10-24 08:34:47</closed>
	</bug>
	<bug>
		<id>5674</id>
		<title>Application controller not called for URL ending with slash</title>
		<body>http://localhost:8080/app/com.enonic.app.features -&gt; Application controller called http://localhost:8080/app/com.enonic.app.features/ -&gt; Application controller not called</body>
		<created>2017-10-10 14:36:05</created>
		<closed>2017-10-24 08:36:22</closed>
	</bug>
	<bug>
		<id>5668</id>
		<title>Restrict access to services based on site context</title>
		<body>Requests to portal services (using a service URL) must be restricted so that only the services in the apps configured for a site can be accessed under the site's context.  Example:  - If there are 2 apps in an Enonic installation: _app1_, _app2_. - _app2_ has a service _svc42_ - There is a site in `/my-site` for which the _app1_ has been added - `/portal/draft/my-site/_/service/app2/svc42` should return 403 Forbidden (consider 404 Not found)  In addition to this, service URLs accessed for a main.js controller should also be allowed for services included in the main.js application. Example:  - the service `/app/com.enonic.myapp/_/service/com.enonic.myapp/ok-svc`  should be allowed - the service `/app/com.enonic.myapp/_/service/org.otherapp/secret-svc`  should be forbidden </body>
		<created>2017-10-09 12:58:59</created>
		<closed>2017-10-24 08:31:31</closed>
	</bug>
	<bug>
		<id>5667</id>
		<title>Recursive getChildren with count 0 does not populate the correct totalHits-value</title>
		<body>The check:  ```` if ( result.getNumberOfHits() == 0 ) ```` in FindNodeIdsByParentCommand line 82  Should yield:  ```` FindNodesByParentResult.create().                 totalHits( result.getTotalHits() ).                 build(); ````</body>
		<created>2017-10-09 10:26:52</created>
		<closed>2017-10-24 08:33:38</closed>
	</bug>
	<bug>
		<id>5664</id>
		<title>Rendering of images with legacy media property fails</title>
		<body>Rendering of images created in older versions of XP fail while trying to obtain the image orientation.  The problem is that originally the images had a property with name `media` of type **String**. But later it was extended making it of type **PropertySet** with more complex data. So the code accessing this property must always handle both cases.  This bug was introduced in changes done for 6.12.</body>
		<created>2017-10-06 09:02:26</created>
		<closed>2017-10-24 08:33:27</closed>
	</bug>
	<bug>
		<id>5660</id>
		<title>ElasticSearch 1.5.Z - EngineCreationFailureException</title>
		<body>Users keep getting: org.elasticsearch.indices.cluster - [local-node] [[storage-system-repo][0]] marking and sending shard failed due to [failed recovery] org.elasticsearch.index.engine.EngineCreationFailureException: [storage-system-repo][0] failed to upgrade 3x segments java.io.EOFException: read past EOF: NIOFSIndexInput(path="/Users/a731597/workspace/kp/enonic/home/repo/index/data/mycluster/nodes/0/indices/storage-system-repo/0/index/segments_3b"  https://discuss.enonic.com/t/cluster-health-in-state-red/455 https://discuss.enonic.com/t/data-import-bug/902 https://discuss.enonic.com/t/elasticsearch-broken-after-restart/1197 https://enonic.zendesk.com/agent/tickets/2148  It seems to be a bug in ElasticSearch 1.5.Z and fixed in 1.6.0. We should upgrade as soon  as possible</body>
		<created>2017-10-03 11:45:47</created>
		<closed>2019-02-16 18:28:05</closed>
	</bug>
	<bug>
		<id>5655</id>
		<title>Controller mappings returns 200 for WebSocket response</title>
		<body>When a mapping controller handles a WebSocket request, the server responds with status 200, instead of 101, which breaks the WebSocket protocol.  ```Javascript function handleGet(req) {     if (!req.webSocket) {         return {             status: 404         };     }      return {         webSocket: {             data: {}, subProtocols: ["foo"]         }     }; } ``` Reported in Discuss: https://discuss.enonic.com/t/controller-mappings-returns-200-when-request-is-websocket-request/1235</body>
		<created>2017-09-29 09:53:51</created>
		<closed>2017-10-11 11:21:15</closed>
	</bug>
	<bug>
		<id>5649</id>
		<title>Incorrect or no error message when trying to create a user store or a principal with existing name</title>
		<body>@sgauruseu commented on [Thu Sep 14 2017](https://github.com/enonic/xp-apps/issues/14)  1. select new User Store in the NewPrincipal dialog 2. type a name and a store with the name already exist BUG: 'User store was not found' this message appears, when Save button has been pressed Expected:  'User Store [%s] could not be created. A User Store with that name already exists'  ![store](https://user-images.githubusercontent.com/3728712/30416896-87d4755c-9936-11e7-8845-aa77ce107a4c.png)   </body>
		<created>2017-09-27 12:45:30</created>
		<closed>2017-09-28 10:19:00</closed>
	</bug>
	<bug>
		<id>5643</id>
		<title>Admin path hardcoded</title>
		<body>Step 1: Rename admin using the VHost config file. mapping.adm.host = localhost mapping.adm.source = /adm mapping.adm.target = /admin mapping.adm.userStore = system  Step 2: Go to http://localhost:8080/adm/tool  I get multiple errors due to the fact that "/admin" path is hardcoded. I get for example errors on "ws://localhost:8080/admin/event" or "http://localhost:8080/admin/rest/auth/authenticated" which should be "ws://localhost:8080/adm/event" and "http://localhost:8080/adm/rest/auth/authenticated"  This is a regression </body>
		<created>2017-09-21 10:38:51</created>
		<closed>2017-09-26 14:32:50</closed>
	</bug>
	<bug>
		<id>5633</id>
		<title>TextArea with input values longer than max-length should not be sent to backend</title>
		<body>If there are values in TextLine or TextArea input types, with the length of the text value longer than max-length config, the value should not be stored.  ```     &lt;input name="textarea" type="TextArea"&gt;       &lt;label&gt;Text Area&lt;/label&gt;       &lt;occurrences minimum="0" maximum="1"/&gt;       &lt;config&gt;         &lt;max-length&gt;3&lt;/max-length&gt;       &lt;/config&gt;     &lt;/input&gt; ```  Currently if the user types a text longer than max-length and then click Save, the value is sent to the server in the update request, even though is marked as invalid. The server checks the validation and throws an exception.  It should work in the same way as TextLine with regexp config, or Long/Double with man/min config. The value should not be set internally if it is not valid according to the config. If the value typed is invalid it should be sent as empty when clicking on Save. This is what happens now for regexp, max, min config.  </body>
		<created>2017-09-18 11:30:08</created>
		<closed>2017-09-25 07:59:09</closed>
	</bug>
	<bug>
		<id>5625</id>
		<title>Test fails in build, but not Idea (VersionTableCleanupTaskTest)</title>
		<body>Any ordering?  See the ignored test in `VersionTableCleanupTaskTest`.</body>
		<created>2017-09-14 09:08:47</created>
		<closed>2017-09-26 08:05:43</closed>
	</bug>
	<bug>
		<id>5624</id>
		<title>Default input values don't work inside x-data mixin</title>
		<body>1. Create a new mixin with inputs that have default values, for example: ```xml &lt;?xml version="1.0" encoding="UTF-8"?&gt; &lt;mixin&gt;   &lt;display-name&gt;Mixin&lt;/display-name&gt;   &lt;items&gt;     &lt;input name="myField" type="Long"&gt;       &lt;label&gt;Long&lt;/label&gt;       &lt;occurrences minimum="1" maximum="1"/&gt;       &lt;default&gt;1&lt;/default&gt;     &lt;/input&gt;   &lt;/items&gt; &lt;/mixin&gt; ``` 2. Save it under some name, like "my-mixin" 3. Add this mixin to a content type or ``site.xml``: ```xml &lt;?xml version="1.0" encoding="UTF-8"?&gt; &lt;site&gt;   &lt;x-data mixin="my-mixin"/&gt; &lt;/site&gt; ```  When you now create a new content under this site, the default value won't be set in the field.  ![image](https://user-images.githubusercontent.com/11612490/30366543-ac6a3396-986b-11e7-8b50-87bd567e49ef.png) </body>
		<created>2017-09-13 08:10:26</created>
		<closed>2017-09-26 08:10:08</closed>
	</bug>
	<bug>
		<id>5620</id>
		<title>ScriptExportsCache - Atomic load</title>
		<body>A javascript file should only be loaded if necessary and only once. For this we have the exportsCache in ScriptExecutorImpl, but the get and put is not atomic.  Ex: This causes problem when two requests hit at a same moment the same service. The JS file is then loaded twice.  I first tried:   1 - Transform the get&amp;put into a computeIfAbsent on the ConcurrentMap.    2 - Remove the put which is not necessary (and blocking for computeIfAbsent). But with the require in JS, this method is actually recursive and ConcurrentMap cannot be used like this since we "must not attempt to update any other mappings of this map."  So we will have to implement our own solution to lock by resourcekey - Remember of recursivity - Think about deadlock cases  As inspiration: https://github.com/enonic/xp/pull/2181/files https://dzone.com/refcardz/core-java-concurrency  </body>
		<created>2017-09-12 13:30:33</created>
		<closed>2017-12-19 11:39:02</closed>
	</bug>
	<bug>
		<id>5608</id>
		<title>No node event on node unpublish</title>
		<body>No node event is triggered when a node is unpublished</body>
		<created>2017-09-08 14:05:44</created>
		<closed>2017-09-19 09:44:34</closed>
	</bug>
	<bug>
		<id>5594</id>
		<title>Application Service - Dependencies resolution dependant on activation</title>
		<body>In ApplicationServiceImpl, this.registry is used by addInvalidator/removeInvalidator, but it is only created in the activate method:  * Adapt ApplicationRegistry to be created without a context * Add a method activate on ApplicationRegistry taking as parameter the context * Create the registry in the constructor of ApplicationServiceImpl * Call this.registry.activate in the activate of ApplicationServiceImpl</body>
		<created>2017-09-07 10:43:05</created>
		<closed>2017-10-11 11:21:06</closed>
	</bug>
	<bug>
		<id>5592</id>
		<title>Insert Link dialog - Incorrect behaviour of confirmation about unapplied changes</title>
		<body>1. Add HTML Area content 2. While in HTML Editor, click the "Insert Image" button in the toolbar that opens the modal dialog 3. Write something in the first field 4. Click outside of the dialog 5. The confirmation pops up asking about unapplied changes. Click "Yes". The dialog will be validated for empty mandatory fields, the link will not be inserted. Everything is correct so far. 6. Click outside the dialog again. 7. The same confirmation pops up. This time click "No".   I'm expecting the dialog to close now, but I'm staying in it.</body>
		<created>2017-09-06 12:03:36</created>
		<closed>2017-09-12 08:31:47</closed>
	</bug>
	<bug>
		<id>5591</id>
		<title>Improve unregistering of event listeners</title>
		<body>There is no way to unregister as an event listener.  We should: 1 - Add a method to the event lib. This could be called when an application is stopped for example 2- And/Or we could at least remove listeners from an application that has been stopped</body>
		<created>2017-09-06 11:38:11</created>
		<closed>2018-01-09 11:21:05</closed>
	</bug>
	<bug>
		<id>5590</id>
		<title>Fragment - Wrong display name and subname in Page Component view</title>
		<body>Two bugs here:  1. Add a new Fragment to the page and open Page Components view. Display name of the new fragment's node says ``&lt;Display name&gt;``, but it should say "Fragment", just like it says "Image" for an image component and "Part" for a part component. It should change from "Fragment" to correct display name after fragment's descriptor is selected.  2. Add a part to the page and create a fragment out of it. In the Page Components view subname of the node still says "part", but it should be "fragment".  ![image](https://user-images.githubusercontent.com/11612490/30109022-0bdd5ab8-9305-11e7-851f-0ad681b69f37.png) </body>
		<created>2017-09-06 11:13:27</created>
		<closed>2017-09-12 08:31:50</closed>
	</bug>
	<bug>
		<id>5581</id>
		<title>Incorrect info in Page Template widget when template is not found </title>
		<body>(See also #5488)  When a site is using a page template which was deleted, the info inside the Page Template widget inside Details panel is incorrect - it shows info from the last selected content item and there are console errors when we try to fetch template info. We should handle this in the same way as we do in the Wizard. Since the site is still linked to the deleted template until saved, we should still show "Page Template" in the widget but on the second line instead of template name we should show "Not found".  ![image](https://user-images.githubusercontent.com/11612490/30029118-215aab30-9188-11e7-935a-be1087efdb12.png) </body>
		<created>2017-09-04 13:47:24</created>
		<closed>2017-09-12 08:30:46</closed>
	</bug>
	<bug>
		<id>5580</id>
		<title>Endless spinner after Page Editor panel gets expanded </title>
		<body>1. open Features site 2. click on the "Hide Page Editor" button 3. click on the 'Show Page Editor'  BUG :Page Editor is not loaded, but endless spinner is displayed</body>
		<created>2017-09-04 13:19:37</created>
		<closed>2017-09-12 08:30:24</closed>
	</bug>
	<bug>
		<id>5561</id>
		<title>Move Content dialog - Incorrect confirmation about moving out of site</title>
		<body>Looks like this confirmation always comes up now, no matter if you are trying to move the content out of its site or not.  Example: 1. Expand Features site in the grid 2. Select "media" folder (or any other content item, really) 3. Try to move it to "Features" (which is the same parent "media" already has)  Bug #1: The confirmation dialog comes up while it shouldn't Bug #2: Notification says "media was moved" although nothing has changed</body>
		<created>2017-08-30 12:28:17</created>
		<closed>2017-09-12 08:30:01</closed>
	</bug>
	<bug>
		<id>5529</id>
		<title>Incorrect access rights in the Administrator(system.admin) </title>
		<body>1. add any content and select it  2. open the details panel and look at the  UserAccessWidgetItemView BUG: Can Publish operation is displayed for the SU, but expected is Full Access  ![access](https://user-images.githubusercontent.com/3728712/29772927-a6d4dc98-8c03-11e7-9954-483c102062d1.png) </body>
		<created>2017-08-28 12:15:22</created>
		<closed>2017-08-29 08:33:10</closed>
	</bug>
	<bug>
		<id>5528</id>
		<title>ResponseSerializer - ArithmeticException for big byte sources</title>
		<body>*When downloading a dump (size is over 2GB), an ArithmeticException is thrown.   * Look at the response.setContentLength in ResponseSerializer   * Use the setContentLengthLong for the writeToStream of ByteSource  * Investigate/Modify/Test Support ticket: https://enonic.zendesk.com/agent/tickets/2097  ``` ;Caused by: java.lang.ArithmeticException: integer overflow  &gt;at java.lang.Math.toIntExact(Math.java:1011) ~[na:1.8.0_131]  mat com.enonic.xp.web.impl.serializer.ResponseSerializer.writeToStream(ResponseSerializer.java:132) ~[na:na]  mat com.enonic.xp.web.impl.serializer.ResponseSerializer.serializeBody(ResponseSerializer.java:103) ~[na:na]  lat com.enonic.xp.web.impl.serializer.ResponseSerializer.serializeBody(ResponseSerializer.java:66) ~[na:na]  hat com.enonic.xp.web.impl.serializer.ResponseSerializer.serialize(ResponseSerializer.java:44) ~[na:na]  ?at com.enonic.xp.web.impl.serializer.ResponseSerializationServiceImpl.serialize(ResponseSerializationServiceImpl.java:21) ~[na:na]  gat com.enonic.xp.web.impl.handler.WebDispatcherServlet.service(WebDispatcherServlet.java:71) ~[na:na]  `at javax.servlet.http.HttpServlet.service(HttpServlet.java:790) ~[web-jetty-6.10.3.jar:6.10.3]  rat com.enonic.xp.web.impl.dispatch.mapping.ServletDefinitionImpl.service(ServletDefinitionImpl.java:39) ~[na:na]  oat com.enonic.xp.web.impl.dispatch.pipeline.ServletPipelineImpl.service(ServletPipelineImpl.java:30) ~[na:na]  hat com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:45) ~[na:na]  hat com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36) ~[na:na]  Tat com.enonic.xp.portal.impl.auth.AuthFilter.doHandle(AuthFilter.java:45) ~[na:na]  bat com.enonic.xp.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:31) ~[na:na]  Tat com.enonic.xp.web.filter.BaseWebFilter.doFilter(BaseWebFilter.java:33) ~[na:na]  ... 78 common frames omitted;Caused by: java.lang.ArithmeticException: integer overflow  &gt;at java.lang.Math.toIntExact(Math.java:1011) ~[na:1.8.0_131]  mat com.enonic.xp.web.impl.serializer.ResponseSerializer.writeToStream(ResponseSerializer.java:132) ~[na:na]  mat com.enonic.xp.web.impl.serializer.ResponseSerializer.serializeBody(ResponseSerializer.java:103) ~[na:na]  lat com.enonic.xp.web.impl.serializer.ResponseSerializer.serializeBody(ResponseSerializer.java:66) ~[na:na]  hat com.enonic.xp.web.impl.serializer.ResponseSerializer.serialize(ResponseSerializer.java:44) ~[na:na]  ?at com.enonic.xp.web.impl.serializer.ResponseSerializationServiceImpl.serialize(ResponseSerializationServiceImpl.java:21) ~[na:na]  gat com.enonic.xp.web.impl.handler.WebDispatcherServlet.service(WebDispatcherServlet.java:71) ~[na:na]  `at javax.servlet.http.HttpServlet.service(HttpServlet.java:790) ~[web-jetty-6.10.3.jar:6.10.3]  rat com.enonic.xp.web.impl.dispatch.mapping.ServletDefinitionImpl.service(ServletDefinitionImpl.java:39) ~[na:na]  oat com.enonic.xp.web.impl.dispatch.pipeline.ServletPipelineImpl.service(ServletPipelineImpl.java:30) ~[na:na]  hat com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:45) ~[na:na]  hat com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36) ~[na:na]  Tat com.enonic.xp.portal.impl.auth.AuthFilter.doHandle(AuthFilter.java:45) ~[na:na]  bat com.enonic.xp.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:31) ~[na:na]  Tat com.enonic.xp.web.filter.BaseWebFilter.doFilter(BaseWebFilter.java:33) ~[na:na]  ... 78 common frames omitted ```</body>
		<created>2017-08-28 10:38:28</created>
		<closed>2017-09-26 08:09:41</closed>
	</bug>
	<bug>
		<id>5527</id>
		<title>Preview Panel is not refreshed after page descriptor was changed in the Content Wizard</title>
		<body>Same as fro #5396 but for preview panel</body>
		<created>2017-08-28 09:32:29</created>
		<closed>2017-09-12 08:30:48</closed>
	</bug>
	<bug>
		<id>5519</id>
		<title>Incorrect layout in the Content Wizard after closing the fullscreen mode</title>
		<body>1. Add a content with HTML Area 2. Open the Content Wizard 3. Go to fullscreen mode 4. Open the "Source" dialog 5. Close it 6. Close fullscreen mode  Now the wizard looks like this: ![image](https://user-images.githubusercontent.com/11612490/29654376-4ab05a18-88ad-11e7-808c-8f19a82fcd1b.png)  Funny thing is that it happens only if you open the Source dialog in the fullscreen mode.</body>
		<created>2017-08-24 07:18:19</created>
		<closed>2017-09-12 08:29:56</closed>
	</bug>
	<bug>
		<id>5514</id>
		<title>Broken layout in the Launcher panel when the list of tools is long</title>
		<body>![image](https://user-images.githubusercontent.com/11612490/29614629-2f9e6d7a-880b-11e7-8b1c-9d7b4694200a.png) </body>
		<created>2017-08-23 11:59:43</created>
		<closed>2017-08-29 08:32:57</closed>
	</bug>
	<bug>
		<id>5509</id>
		<title>Remove empty space when custom selector doesn't have thumbnails</title>
		<body>If ``xp-admin-common-wrapper`` container is empty then we should remove the empty space between the checkbox and the ``names-view`` container.   Now: ![image](https://user-images.githubusercontent.com/11612490/29604848-14e7fad6-87e9-11e7-8d06-99b6746d4a26.png)  Should be: ![image](https://user-images.githubusercontent.com/11612490/29604933-5de78544-87e9-11e7-8c04-6fbf3ad4c6d6.png) </body>
		<created>2017-08-23 08:01:48</created>
		<closed>2017-08-29 08:31:50</closed>
	</bug>
	<bug>
		<id>5506</id>
		<title>Launcher - wemjq is not defined</title>
		<body>Tried to integrate the launcher panel into a new admin tool. It works well. But when the panel is opened, I cannot close it by clicking outside of it. I then get the following exception  ![screen shot 2017-08-22 at 14 35 23](https://user-images.githubusercontent.com/12030113/29565697-4a8b29bc-8747-11e7-8165-454f00784bc7.png)  To create a tool with the launcher panel, follow the following steps: http://xp.readthedocs.io/en/latest/developer/admin/tools/index.html</body>
		<created>2017-08-22 12:37:35</created>
		<closed>2017-08-29 08:30:19</closed>
	</bug>
	<bug>
		<id>5499</id>
		<title>ItemSet content - HtmlArea stops working after DnD of an item</title>
		<body> [item-set0_0.txt](https://github.com/enonic/xp/files/1234028/item-set0_0.txt) 1. start to add a content with type(in attachments) 2.  click on 'Add Item Set' and add 2 sets ![step1](https://user-images.githubusercontent.com/3728712/29454110-a5e5ff0c-8414-11e7-9780-b7a6e8eecd40.png)  3. click on the second set and try to drag it to up(swap sets)  BUG: when sets have been swapped, htmlarea in the second set is getting disabled and text has been lost. There are no any errors in the console ![result](https://user-images.githubusercontent.com/3728712/29454261-2c03d9f6-8415-11e7-92db-43529c0e4ced.png)   </body>
		<created>2017-08-18 10:00:50</created>
		<closed>2017-08-29 08:29:08</closed>
	</bug>
	<bug>
		<id>5497</id>
		<title>Show notification about unconfirmed changes in HTML Area modal dialogs</title>
		<body>We should notify user about unconfirmed changes in all of the HTML Area's modal dialogs. It's already supported by ``api.ui.dialog.ModalDialog`` class so it should be fairly easy to enable it in ``api.util.htmlarea.dialog.ModalDialog``.  Note that the confirmation should be shown only on click outside of the dialog (see #5400).</body>
		<created>2017-08-18 08:52:31</created>
		<closed>2017-09-12 08:30:51</closed>
	</bug>
	<bug>
		<id>5491</id>
		<title>Image Editor should store custom orientation data in data.media</title>
		<body>We should store custom orientation data in ``data.media``, like we do with cropping and focal point. Now we overwrite default orientation value in ``media.cameraInfo`` and after that there's no way to roll back to the original value.  Commit to branch issue-5328</body>
		<created>2017-08-17 08:53:53</created>
		<closed>2017-08-29 08:30:52</closed>
	</bug>
	<bug>
		<id>5488</id>
		<title>Page Editor shows an error after selected page template is deleted</title>
		<body>1. start to add a new site, select Features in the apps. close the wizard 2. expand the site and add a new page-template, select the 'main-page' in controller 3. insert an Image(for example) in the page-template, save it and close the wizard 4. open  the site-wizard again. open InspectPanel and select the just created template in the dropdown options. See the first screenshot  ![step1](https://user-images.githubusercontent.com/3728712/29365704-9e861988-82a0-11e7-8f5d-de0bf6d98325.png)  5. go to the browse panel, select and remove the template ![step2](https://user-images.githubusercontent.com/3728712/29365732-b3852e00-82a0-11e7-92f9-5c91a2095a36.png)  6. open the site; BUG: 404 error is displayed and impossible to select another controller  ![result](https://user-images.githubusercontent.com/3728712/29365776-ce29e264-82a0-11e7-9ba6-696f9d8b6ccc.png)  </body>
		<created>2017-08-16 13:37:46</created>
		<closed>2017-09-12 08:30:21</closed>
	</bug>
	<bug>
		<id>5482</id>
		<title>UserItemStatisticsPanel - Information about an user-item is not cleared, when switch between rows in the grid</title>
		<body>1. Open Users app 2. click on row and select on any existing user. 3. click on another user or role  BUG:  when new item is selected, information about the previous item still displayed ![statistic](https://user-images.githubusercontent.com/3728712/29269948-f656b366-80fc-11e7-8185-b1dc6067fca8.png) </body>
		<created>2017-08-14 11:29:26</created>
		<closed>2017-08-29 08:31:09</closed>
	</bug>
	<bug>
		<id>5481</id>
		<title>Unlinking an application from a site with fragments results in console errors</title>
		<body>1. open Features and insert a Cities List and create a fragment from the part 2. click on  remove button and remove selected option in the Application-selector  BUG: see the screenshot ![fr-app](https://user-images.githubusercontent.com/3728712/29268898-9d2fef3c-80f7-11e7-8130-06af06d94249.png) </body>
		<created>2017-08-14 10:51:21</created>
		<closed>2017-08-29 08:30:43</closed>
	</bug>
	<bug>
		<id>5480</id>
		<title>Move Content Dialog - incorrect behavior of filtering, when a search-text was typed in the options-filter</title>
		<body>1. select the Features site,press the Move 2. type Features in the options-filter Expected: Features option should be disabled BUG: Features-site is enabled in the filtered-options Click on the Feature-option and press the Move button: "Not allowed to move content to itself (/content/features)"  message appears ![move](https://user-images.githubusercontent.com/3728712/29263994-f5c37bfa-80e3-11e7-8bfc-7769261a051d.png)  Option is selected: ![step2](https://user-images.githubusercontent.com/3728712/29264008-05690c14-80e4-11e7-9202-c2b6bd3c723f.png)   BUT: if do not type a search-text   and  expand the options, Features is disabled in the options</body>
		<created>2017-08-14 08:31:09</created>
		<closed>2017-08-29 08:29:30</closed>
	</bug>
	<bug>
		<id>5479</id>
		<title>Form items with duplicated name are not detected when inside a field-set</title>
		<body>If a form has duplicated items with the same name at the same level, but wrapped in a field-set, the error is not detected in the backend, but fails in UI and will cause unexpected consequences when data is updated.  Duplicated names in form items are detected if they are at the same level, not inside a field-set. But the field-set is only a visual grouping, it does not change the structure of the data.  For example, adding the config below to a site.xml will fail when edited in admin: ```xml   &lt;config&gt;     &lt;field-set name="fieldset1"&gt;       &lt;label&gt;fieldset1&lt;/label&gt;       &lt;items&gt;         &lt;item-set name="duplicated"&gt;           &lt;label&gt;set label&lt;/label&gt;           &lt;occurrences minimum="1" maximum="1"/&gt;           &lt;items&gt;             &lt;input name="something" type="TextLine"&gt;               &lt;label&gt;Duplicated field&lt;/label&gt;             &lt;/input&gt;           &lt;/items&gt;         &lt;/item-set&gt;       &lt;/items&gt;     &lt;/field-set&gt;     &lt;field-set name="fieldset2"&gt;       &lt;label&gt;fieldset2&lt;/label&gt;       &lt;items&gt;         &lt;input type="ContentSelector" name="duplicated"&gt;           &lt;label&gt;Duplicated field&lt;/label&gt;         &lt;/input&gt;       &lt;/items&gt;     &lt;/field-set&gt;   &lt;/config&gt; ```</body>
		<created>2017-08-14 07:46:22</created>
		<closed>2017-10-24 08:35:49</closed>
	</bug>
	<bug>
		<id>5478</id>
		<title>Fragment Wizard - LiveEdit is not available, when a fragment was moved from the site</title>
		<body>Probably this issue is similar to  XP #5397 Not able to edit page-template if it was 'moved  Steps: 1. open Features, insert a part 2. create a fragment from the part 3. move the fragment to the root directory 4. open the fragment in wizard Issue: LiveEdit is not available. How to edit the fragment?  ![fragm-moved](https://user-images.githubusercontent.com/3728712/29218793-99ea35ca-7ebe-11e7-908a-59073607f257.png) </body>
		<created>2017-08-11 14:58:09</created>
		<closed>2017-08-18 13:19:03</closed>
	</bug>
	<bug>
		<id>5468</id>
		<title>Instantly validate app after adding it to site</title>
		<body>1. Create a site 2. Add an application with some mandatory fields in the config 3. The app will not be highlighted as invalid even though you cannot publish content 4. Open the site config 5. Close it without changing anything  Now the app is highlighted as invalid. It should have happened right away, after the app was added.</body>
		<created>2017-08-11 10:42:52</created>
		<closed>2017-09-12 08:29:05</closed>
	</bug>
	<bug>
		<id>5467</id>
		<title>Remove site content type from new content dialogue if user does not have the "content manager admin" role</title>
		<body>Currently, this returns a nasty error on the new page anyway.</body>
		<created>2017-08-11 10:32:30</created>
		<closed>2017-09-12 08:30:12</closed>
	</bug>
	<bug>
		<id>5462</id>
		<title>StackOverflowError extracting metadata from excel media</title>
		<body>Creating an attachment from the Excel .xlsx below, triggers a StackOverflow exception and the content is not created.   Attached source file and stack trace: [VolumPrisIndeksar2016.xlsx](https://github.com/enonic/xp/files/1217129/VolumPrisIndeksar2016.xlsx) [fileError.txt](https://github.com/enonic/xp/files/1217130/fileError.txt)  It seems to be some recursive call in Java Pattern, but the call comes from Tika ```org.apache.tika.parser.AutoDetectParser```.  This issue was reported in the Discuss forum: https://discuss.enonic.com/t/xlsx-file-upload-error/1157</body>
		<created>2017-08-11 07:14:03</created>
		<closed>2017-09-12 08:31:06</closed>
	</bug>
	<bug>
		<id>5460</id>
		<title>Edit icon for an image component in the Inspect panel is not working</title>
		<body>1. Open a site 2. Add an image component to the page 3. Select an image from the selector 4. Click the image so that the component is selected on the page 5. In the Inspect panel click the pencil icon  The wizard tab won't open and there are errors in the console.  ![image](https://user-images.githubusercontent.com/11612490/29175038-46eb2022-7de8-11e7-8047-b945ea87fd82.png) </body>
		<created>2017-08-10 14:24:48</created>
		<closed>2017-08-29 08:20:34</closed>
	</bug>
	<bug>
		<id>5458</id>
		<title>Content Wizard - 'Create Issue' menu item doesn't work when content is invalid</title>
		<body>1. select Features and start to add Double(required) content 2. type a name , but not type a double-value 3. click on the 'Create Issue' menu item  BUG: button has been clicked, but dialog does not appear ![inv-double](https://user-images.githubusercontent.com/3728712/29170639-4513b13e-7de2-11e7-91b8-1578adeef52d.png) </body>
		<created>2017-08-10 12:41:14</created>
		<closed>2017-08-29 08:30:38</closed>
	</bug>
	<bug>
		<id>5454</id>
		<title>Inspection Panel - Fragment selector is not refreshed when fragments are added or removed</title>
		<body>Part 1: 1. Open Features, open PageComponentView and insert 2 images, create 2 new fragments from images 2. click on any fragment and inspect it  BUG: new fragments are not present in the list of options: ![refresh](https://user-images.githubusercontent.com/3728712/29159677-17da6cf0-7db8-11e7-951a-7c026b85785a.png)  Close the wizard and open the site again, open the Inspect Panel, options are present now:  ![expected1](https://user-images.githubusercontent.com/3728712/29159709-4056bbca-7db8-11e7-97d1-c5523c0f6882.png)  Part 2: options in the 'Page Template'- dropdown list are not updated, when a page-template was removed   - open a site, navigate to the browse panel and remove one of the templates  - go to site-wizard and open the 'Page Template'- dropdown and select the template, that was removed  BUG: 404 error appears on the LiveEdit  ![templ-removed](https://user-images.githubusercontent.com/3728712/29309826-02d3e76e-81b4-11e7-84ee-e1da0d7d20e2.png)  </body>
		<created>2017-08-10 07:51:40</created>
		<closed>2017-09-12 08:30:49</closed>
	</bug>
	<bug>
		<id>5450</id>
		<title>Double Content - Value with fractional part is incorrectly validated</title>
		<body>1.  start to add a double content 2. type a double with fractional part  BUG: Validation message appears, see the screenshot ![double](https://user-images.githubusercontent.com/3728712/29127021-8b3b1c84-7d28-11e7-9487-fede86b7748c.png) </body>
		<created>2017-08-09 14:31:26</created>
		<closed>2017-08-29 08:20:28</closed>
	</bug>
	<bug>
		<id>5448</id>
		<title>Services &amp; Tools - System admin access</title>
		<body>* System Admin access   * 'role:system.admin' should always have access to all services and tools * Refactoring of WidgetDescriptorService/WidgetDescriptorHandlerWorker (linked to #5215 )   * We should refactor the permissions control to follow the same pattern as the tools and services. The check should be on the execution of the linked controller and not the retrieval of the descriptor itself. It makes sense when reading the code of ServiceDescriptorServiceImpl     * Rename getByInterfaces to getAllowedByInterfaces (similar to tools)     * Adapt code of WidgetDescriptorHandlerWorker to be similar to tools and services</body>
		<created>2017-08-09 13:34:11</created>
		<closed>2017-10-24 08:38:31</closed>
	</bug>
	<bug>
		<id>5443</id>
		<title>Inspection Panel - fragments from another sites should be available in the FragmentDropdown selector</title>
		<body>Given: Existing a site with fragments. 1. open a new site-wizard, select a controller, open 'PageComponent' View and create a fragment  2. select the  the fragment  in the 'PageComponent' View  and open the Inspection panel 3. click on the dropdown handler on the Inspection panel Expected: fragments from another site should be present in the drop-down list BUG: No matching items is displayed: ![nomatching](https://user-images.githubusercontent.com/3728712/29117122-bb32778e-7d05-11e7-8ca4-767fcc056cf7.png)  4. Reset the fragment. There are some fragments from another sites in the dropdown on the LiveEdit ![reset](https://user-images.githubusercontent.com/3728712/29117182-f936cd78-7d05-11e7-9d8a-234dbed0ea31.png)  </body>
		<created>2017-08-09 10:24:17</created>
		<closed>2017-08-24 07:48:30</closed>
	</bug>
	<bug>
		<id>5442</id>
		<title>Edge specific - context menu in the Page Component View is getting not available after a inserting of 2 components</title>
		<body>1. Open Features and open the PageComponentView 2. Insert the first ImageComponent and select an image. (context-menu on the component is available    OK) 2. Insert one more ImageComponent  and select an image  BUG: the context menu is getting not available ![edge1](https://user-images.githubusercontent.com/3728712/33545635-dd838120-d8ef-11e7-9871-76a96a3a8e5f.png)   </body>
		<created>2017-08-09 09:19:14</created>
		<closed>2017-12-15 14:50:22</closed>
	</bug>
	<bug>
		<id>5441</id>
		<title>Page Components view - Keyboard navigation stops working after an image component is selected</title>
		<body>1. Open a page that contains at least one image component, or add one to the page 2. Open the Page Component view 3. Click the root node and use down arrow to navigate down the tree 4. Once the cursor reaches an image component keyboard navigation stops working. Even if I click the root and try to navigate again it won't work.  Tested in Chrome and Firefox.</body>
		<created>2017-08-09 09:00:19</created>
		<closed>2017-08-29 08:20:38</closed>
	</bug>
	<bug>
		<id>5439</id>
		<title>Invalid value in non-required content should not affect validity of the content</title>
		<body>1. start to add Double(Long, DateTime ...) contents 2. type a name , the content is getting valid, because the input is not required. 3. type not valid value in inputs. BUG:  when not valid value has been typed, red icon appears and Publish button is getting disabled But the content is valid in the grid and Publish button is enabled, when the content is selected  ![double](https://user-images.githubusercontent.com/3728712/29110537-9df62104-7cef-11e7-907a-bc6c1c8a4175.png)  But when the input is empty ![double2](https://user-images.githubusercontent.com/3728712/29110544-a54314a8-7cef-11e7-8a7e-2789efee26c4.png)  </body>
		<created>2017-08-09 07:44:30</created>
		<closed>2017-08-29 08:20:30</closed>
	</bug>
	<bug>
		<id>5438</id>
		<title>Custom Selector is not working in ID provider</title>
		<body>Original discuss page: https://discuss.enonic.com/t/custom-selector-in-id-provider/1131/3  Steps to reproduce: 1 - Git clone an existing ID Provider:  git clone https://github.com/enonic/app-simple-idprovider.git 2 - Deploy the application 3 - Create a user store and assign the ID Provider 'simpleidprovider' =&gt; It works.   4 - Add a custom selector inside the ID Provider config   4.1 - Modify "/idprovider/idprovider.xml": Add the following config input: ```xml &lt;input name="my-custom-selector" type="CustomSelector"&gt;   &lt;label&gt;My Custom Selector&lt;/label&gt;   &lt;occurrences minimum="0" maximum="0"/&gt;   &lt;config&gt;     &lt;service&gt;my-custom-selector-service&lt;/service&gt;   &lt;/config&gt; &lt;/input&gt; ```   4.2 - Add "/services/my-custom-selector-service/my-custom-selector-service.js" with the following content: ```javascript exports.get = function () {     return {         contentType: 'application/json',         body: {             "total": 2,             "count": 2,             "hits": [                 {                     "id": 1,                     "displayName": "Option number 1"                 },                 {                     "id": 2,                     "displayName": "Option number 2"                 }             ]         }     }; }; ``` 5 - Redeploy the application 6 - Refresh the new user store page and reassign the ID Provider 'simpleidprovider'  =&gt; The configuration button is not displayed and we get in the console the following error:  _all.js:70497 Uncaught TypeError: Cannot read property 'toString' of undefined     at CustomSelector.readConfig (_all.js:70497)     at new CustomSelector (_all.js:70492)     at Class.newInstance (_all.js:1955)     at Function.InputTypeManager.createView (_all.js:41806)     at InputView.createInputTypeView (_all.js:40994)     at InputView.layout (_all.js:40921)     at _all.js:40766     at Array.forEach (&lt;anonymous&gt;)     at FormItemLayer.doLayoutPropertySet (_all.js:40721)     at FormItemLayer.layout (_all.js:40712)</body>
		<created>2017-08-08 14:03:53</created>
		<closed>2017-08-29 08:25:09</closed>
	</bug>
	<bug>
		<id>5435</id>
		<title>Create Issue dialog - Error message appears when a text has been typed in the items-option filter</title>
		<body>1. start to create an issue 2. type a text in the items-option filter BUG: item was not found, error message appeared  ![issue-dialog](https://user-images.githubusercontent.com/3728712/29066968-8f3fd936-7c39-11e7-8bcb-92afafaaf4dd.png) </body>
		<created>2017-08-08 10:00:49</created>
		<closed>2017-08-15 08:16:26</closed>
	</bug>
	<bug>
		<id>5433</id>
		<title>PageTemplate wizard - Refresh options inside component selectors when a new application was added</title>
		<body>1. Open a site-wizard , type data, select an application 2. open template-wizard, type data, select a controller,(support is site) 3. insert a part-component  on the template-wizard  4. go to the site-wizard and add one more application, press Save 5. go to template-wizard, click on the dropdown handler(part-component) ISSUE: parts from the second application should be present in the PartComponentView  ![parts](https://user-images.githubusercontent.com/3728712/29065047-8ab1671e-7c33-11e7-8a10-9eb82145f982.png)   BUT these parts are available on the site-wizard ![site-parts](https://user-images.githubusercontent.com/3728712/29065132-cc0044c4-7c33-11e7-8d6b-baecb01e8bd7.png) </body>
		<created>2017-08-08 09:19:25</created>
		<closed>2017-09-26 08:09:56</closed>
	</bug>
	<bug>
		<id>5432</id>
		<title>Page Editor - Remove margins on the sides of empty image component</title>
		<body>1. open site wizard  2. select a controller and insert an ImageComponent and PartComponent BUG: margin for ImageComponent should be 0  ![components](https://user-images.githubusercontent.com/3728712/29064390-6d2b91d0-7c31-11e7-9f77-35f2aac8d727.png) </body>
		<created>2017-08-08 09:02:33</created>
		<closed>2017-09-12 08:29:01</closed>
	</bug>
	<bug>
		<id>5425</id>
		<title>Layout's region should not have "Insert Layout" option in its context menu</title>
		<body>1. start to add a new site, select Features in the applications 2. select the Page Controller and save the site 3. open the Page Component view and insert the 25/75 layout 3. click on the left region, open the context menu  and select  Insert/Layout BUG: error in the console ![nested-layout](https://user-images.githubusercontent.com/3728712/29026311-c911770c-7b83-11e7-9298-afea1510b7a1.png) </body>
		<created>2017-08-07 12:19:42</created>
		<closed>2017-09-12 08:31:49</closed>
	</bug>
	<bug>
		<id>5424</id>
		<title>Page Editor - Incorrect layout of an empty component placeholder inside a fragment</title>
		<body>1. open Features and insert a layout 2. click the layout and create a fragment 3. go to the fragment's wizard and try to insert an image BUG: incorrect location of the dropdown handler , see the scrfeenshot ![fragment-wizard](https://user-images.githubusercontent.com/3728712/29025351-f4819462-7b7e-11e7-9ede-fcf9e685921b.png) </body>
		<created>2017-08-07 11:44:53</created>
		<closed>2017-08-29 08:32:35</closed>
	</bug>
	<bug>
		<id>5415</id>
		<title>Site configuration with mixin</title>
		<body>If a site descriptor includes a mixin in its configuration, listing applications when this application is not started will fail.  Look at ProcessingCache.doProcess (From what I quickly saw, we list applications (all installed), but the resolution of mixin is done only against started application).</body>
		<created>2017-08-04 14:49:59</created>
		<closed>2017-08-15 08:13:06</closed>
	</bug>
	<bug>
		<id>5413</id>
		<title>IssueListDialog - 'Open' tab should open when an issue was opened</title>
		<body>1. create an issue 2. click on the issue and open IssueDetails dialog 3. close the issue , and go to IssueList dialog - 'Closed' tab is active(OK) 4. click on the issue again and open it . Expected: Open-tab should be activated Actual: 'Closed' -tab is opend  ![tabs](https://user-images.githubusercontent.com/3728712/28971237-ebc2bd3a-7933-11e7-8f02-58c1d7e490a7.png) </body>
		<created>2017-08-04 13:43:04</created>
		<closed>2017-12-22 11:06:07</closed>
	</bug>
	<bug>
		<id>5397</id>
		<title>Not able to edit page-template if it was 'moved'</title>
		<body>1. expand templates folder in Features 2. select the 'default' template and press the Move on the toolbar(move it to the root directory) 3. try to edit  the template BUG Error in the console and endless spinner are displayed  ![templ-edit](https://user-images.githubusercontent.com/3728712/28869360-18b4fe76-7785-11e7-9a63-bcb8eb90b17a.png) </body>
		<created>2017-08-02 10:18:53</created>
		<closed>2017-08-30 11:27:29</closed>
	</bug>
	<bug>
		<id>5396</id>
		<title>Page Template widget is not refreshed after page descriptor was changed in the Content Wizard</title>
		<body>1. Add a site and add a page template(select a controller) 2. add a page template and select a controller. Do not close the template-wizard 3. select the site in the browse panel 4. go to the template-wizard and do reset the selected controller 5. go to the browse panel again BUG:  PageTemplateWidgetItem is not updated. Click on the another row and click on the site again- 'Page Template is not used' appears on the widget ![templ-view](https://user-images.githubusercontent.com/3728712/28866741-8d542c42-777c-11e7-89df-3581f58a84d7.png) </body>
		<created>2017-08-02 09:18:06</created>
		<closed>2017-08-29 08:32:38</closed>
	</bug>
	<bug>
		<id>5393</id>
		<title>Page Template Wizard - 'Save as Template' action should not be available</title>
		<body>1. start to add a new page-template in the Features. 2. select a page controller . 3. open the Page Component View and show the context menu. 4. select  'Save as Template'.  BUG: 'Save as Template' should be hidden ![templ](https://user-images.githubusercontent.com/3728712/28830250-e3a8574c-76de-11e7-90ee-022793414f1a.png) </body>
		<created>2017-08-01 14:28:57</created>
		<closed>2017-10-20 15:34:03</closed>
	</bug>
	<bug>
		<id>5388</id>
		<title>Status message when deleting multiple users should say how many are deleted</title>
		<body>This is a follow-up to this improvement: https://github.com/enonic/xp/issues/5284  When deleting many users, a blue status line appears at the bottom for one of the deleted users.  Instead, it should say "X users deleted".</body>
		<created>2017-08-01 08:52:56</created>
		<closed>2017-08-15 08:06:37</closed>
	</bug>
	<bug>
		<id>5383</id>
		<title>Update Issue Dialog - Excluded items are not removed from the list after save</title>
		<body>1. Add a folder with a children 2. select the folder and create a issue 3. open the issue, click on the 'Edit' button and remove one  dependants-item 4. click on the Save button(Update Issue dialog closes) 5. click on the Edit button again BUG: item that was removed still displayed on the dialog </body>
		<created>2017-07-28 11:40:37</created>
		<closed>2017-08-15 08:06:30</closed>
	</bug>
	<bug>
		<id>5378</id>
		<title>Localisation of common phrases is not working in app-users </title>
		<body></body>
		<created>2017-07-27 12:23:56</created>
		<closed>2017-09-11 12:50:22</closed>
	</bug>
	<bug>
		<id>5377</id>
		<title>'Save as Template' action returns 404 for a new site</title>
		<body>1. open the site wizard and select Features in Applications. Save all 2. select a page controller 3. open Page Component View or Inspection panel and press the Save as Template BUG: new template was not added but 400 error is present in the console ![400](https://user-images.githubusercontent.com/3728712/28667214-3e35522e-72d3-11e7-93b6-e26eb0410e0b.png) </body>
		<created>2017-07-27 10:48:19</created>
		<closed>2017-08-15 08:06:26</closed>
	</bug>
	<bug>
		<id>5374</id>
		<title>Change Password Dialog should always initially display 'Show' link for the password field</title>
		<body>1. open a user and click on the ChangePassword button 2. click  on the Show link,  and click on the Cancel 3. click on the ChangePassword button and open the dialog again Expected: Show should be present in the link Actual: Hide is displayed ![show](https://user-images.githubusercontent.com/3728712/28622201-5cf02e30-721c-11e7-81e4-3873673d375b.png) </body>
		<created>2017-07-26 13:06:39</created>
		<closed>2017-08-15 08:04:48</closed>
	</bug>
	<bug>
		<id>5373</id>
		<title>Redundant warning about unsaved changes when Site Configurator dialog contains an image</title>
		<body>1. Create a site with configuration that contains an image selector (or add ImageSelector to site.xml of the Features app) 2. Open the site for edit 3. Open the Site Configurator dialog 4. Select an image inside the image selector 5. Save and reload the content 6. Open the Site Configurator dialog again 7. Don't change anything and click the "X" icon to close the dialog  The warning about unsaved changes comes up but no changes have been made inside the dialog.</body>
		<created>2017-07-26 12:17:28</created>
		<closed>2017-08-01 08:30:17</closed>
	</bug>
	<bug>
		<id>5372</id>
		<title>List of dependant items is not refreshed after deletion in the Issue Dialog</title>
		<body>1. create an issue , add a site an the items. ( the site has not valid content) 2. assignee the issue to an user 3. log in with the user, click on the issue, click on the Edit button and remove the not valid content 4. don't press the Save button, but press the  'Cancel' 5. close the Issues dialog 6. open the ' List Issues' dialog again BUG: dependant on the 'IssueDetails' and 'Edit Issue Dialog ' are different. because changes were  saved on the 'Edit Issue Dialog ' when 'Cancel' button was pressed ![issuedetails](https://user-images.githubusercontent.com/3728712/28568760-aadf91b8-713f-11e7-8090-08cc2056b3ab.png) ![editissue](https://user-images.githubusercontent.com/3728712/28568772-b280524a-713f-11e7-9f98-66d9803f8ec8.png)  </body>
		<created>2017-07-25 10:46:57</created>
		<closed>2017-08-01 08:30:14</closed>
	</bug>
	<bug>
		<id>5371</id>
		<title>Fragment Selector - Fragments are not shown in the dropdown</title>
		<body>1. open a site 2. insert an image and create a fragment from it  3. open the context menu and insert new fragment 4.click on the drop-down handler and try to find the fragment BUG: fragments are not present in the options ( WARN  c.e.x.p.i.rendering.FragmentRenderer - Fragment content could not be found. ContentId: 2f9b3da2-c546-427d-b325-e89777bef503) ![result](https://user-images.githubusercontent.com/3728712/28562394-b3c849c4-712a-11e7-93f4-c20fd33003cb.png) </body>
		<created>2017-07-25 08:16:33</created>
		<closed>2017-08-15 08:06:48</closed>
	</bug>
	<bug>
		<id>5368</id>
		<title>UserWizard - text in the link under the password input is not correctly updated</title>
		<body>1. Open a UserWizard, 2. type a password and click on the Show link BUG:  1. when 'show' link has been typed, the text in the link should be changed to 'Hide' ![show](https://user-images.githubusercontent.com/3728712/28523309-79247e7e-7084-11e7-933b-d15a03fda936.png)  2. Open an existing user and click on the Change Password button 3. click on the 'generate' and click on the 'Change' 4. click on the  Change Password button and open the dialog BUG: old password still displayed on the Input expected: the input should be clear ![change](https://user-images.githubusercontent.com/3728712/28523396-e6d4b362-7084-11e7-87ed-5ab1913ab68d.png)  </body>
		<created>2017-07-24 12:31:07</created>
		<closed>2017-08-01 08:29:55</closed>
	</bug>
	<bug>
		<id>5367</id>
		<title>UserWizard- button Apply in the roles-dropdown has incorrect label </title>
		<body>1. open a user-wizard 2. try to add roles, click on the checkbox in the dropdown-options BUG: see on the screenshot ![apply](https://user-images.githubusercontent.com/3728712/28517481-2ff514b4-706d-11e7-9701-aaec3b69ddc2.png) </body>
		<created>2017-07-24 09:40:00</created>
		<closed>2017-08-01 08:29:48</closed>
	</bug>
	<bug>
		<id>5366</id>
		<title>404 Error appears in the console, when a content was removed in the grid</title>
		<body>1. open the content studio and add a several folders  2. select and remove a folder, do the same and remove 2-3 folders. BUG: 404 error in the console when the folder has been deleted ![404](https://user-images.githubusercontent.com/3728712/28516260-38de2d44-7069-11e7-831f-a6eaaa2ffebb.png) </body>
		<created>2017-07-24 09:11:31</created>
		<closed>2017-08-01 08:29:50</closed>
	</bug>
	<bug>
		<id>5365</id>
		<title>Remove left padding when tree-structured selector is filtered</title>
		<body>When a content selector (image selector, too) is filtered, there's a padding on the left inside the dropdown that should be removed:  ![image](https://user-images.githubusercontent.com/11612490/28515915-ab8d6bca-705f-11e7-9d26-7664d8f3609e.png) ![image](https://user-images.githubusercontent.com/11612490/28516078-3c7673a2-7060-11e7-808e-75e104317d73.png)  Basically it should in this case look the same as flat selector.</body>
		<created>2017-07-24 09:09:47</created>
		<closed>2017-08-01 08:29:57</closed>
	</bug>
	<bug>
		<id>5357</id>
		<title>ImageSelector -Error appears in the console, when an image was filtered and the option clicked</title>
		<body>Case1 1. open a htmlArea content 2. try to insert an image into the area : type a name in the option filter. 3. click on the image BUG see the screenshot ![insertimg](https://user-images.githubusercontent.com/3728712/28315472-3799fea0-6bc7-11e7-9d6e-0aafd070fb73.png)  Case2: 1.Open a site, open the component view 2. try to insert an image-component 3. type a name of image, click on the option ![img2](https://user-images.githubusercontent.com/3728712/28315505-65c83b66-6bc7-11e7-90bf-d7e6447e3713.png)  </body>
		<created>2017-07-18 11:43:04</created>
		<closed>2017-08-01 08:29:22</closed>
	</bug>
	<bug>
		<id>5356</id>
		<title>Image Selector content - image not displayed, when a saved content was opened</title>
		<body>1. add a content with the ImageSelector 2. insert an image 3. save all and close the wizard 4.open the content  BUG: see the screenshot ![img-wizard](https://user-images.githubusercontent.com/3728712/28309487-3021bc72-6bb2-11e7-8a44-772a377761a9.png)  </body>
		<created>2017-07-18 09:11:24</created>
		<closed>2017-08-01 08:29:46</closed>
	</bug>
	<bug>
		<id>5354</id>
		<title>Content Wizard has not been updated when an version of the content was restored</title>
		<body>Case 1: -Add a shortcut content.(save it ) -Select a target and save it  -Do not close the wizard and restore version without the target. -Restore the version with target again -click on the wizard tab BUG: version with the target is restored, but target is not displayed(need to refresh the page for displaying of it)  Case2: -Add a content with the ImageSelector -Insert 2 images -restore several version See the screenshot ![img](https://user-images.githubusercontent.com/3728712/28306914-ceac04a0-6ba9-11e7-9fab-5155e7bdbfa2.png)   </body>
		<created>2017-07-18 08:11:23</created>
		<closed>2017-08-15 08:10:18</closed>
	</bug>
	<bug>
		<id>5353</id>
		<title>Version History Panel - display name is not readable on the panel</title>
		<body>1. select a content and open the Version History 2. expand a version.   ![vers-h](https://user-images.githubusercontent.com/3728712/28306159-f41aa686-6ba6-11e7-9d54-a8857bb7304e.png) </body>
		<created>2017-07-18 07:51:48</created>
		<closed>2017-08-01 08:29:24</closed>
	</bug>
	<bug>
		<id>5345</id>
		<title>Filtering does not work in the OptionFilter(Image Selector, Move Content Dialog, Shortcut content)</title>
		<body>1. select a content and press Move button 2. type a name of a folder  in the Options Filter BUG: no any options were found The same Issue in the Shortcut-Content ![move](https://user-images.githubusercontent.com/3728712/28211871-846747f6-68a7-11e7-9369-2a62603477b4.png) </body>
		<created>2017-07-14 12:17:23</created>
		<closed>2017-08-01 08:29:13</closed>
	</bug>
	<bug>
		<id>5343</id>
		<title>Incorrect styles in the image selector</title>
		<body>1. open a site 2. insert an image component BUG: see the screenshot ![img-dropdown](https://user-images.githubusercontent.com/3728712/28208775-11887a66-6898-11e7-88fa-cea0e694d655.png) </body>
		<created>2017-07-14 10:27:29</created>
		<closed>2017-07-14 10:45:08</closed>
	</bug>
	<bug>
		<id>5337</id>
		<title>New Content dialog - Misplaced drop zone </title>
		<body>Looks fine when there are a few content types: ![image](https://user-images.githubusercontent.com/11612490/28122463-8eeaf702-671e-11e7-8e13-da5153d7391a.png)  But here it goes outside of the dialog: ![image](https://user-images.githubusercontent.com/11612490/28122523-ba76763a-671e-11e7-8ae4-447ffde55864.png)  Might be a general issue with footer of Modal dialogs.</body>
		<created>2017-07-12 14:26:11</created>
		<closed>2017-08-01 08:28:49</closed>
	</bug>
	<bug>
		<id>5320</id>
		<title>Issue List dialog - State of checkboxes in the filter is not kept after the last issue is published  </title>
		<body>1. Make sure you have some existing Open issues in the list 2. Add user with role(Admin console+ Content Studio App) 3. create an issue and assign it to the user 4. log in with this user and open the Issue List 5. click on the checkbox "Assigned to Me" 6. Open the only issue in the list and publish the content 7. Go back to the list  BUG: We should keep state of the checkboxes in the filter. It's correct that the list of issues is empty because there are no more Open issues assigned to the user, but we should keep "Assigned to me" checkbox checked ON to be able to uncheck it and go back to full list. ![step1](https://user-images.githubusercontent.com/3728712/28068433-347825ae-664e-11e7-83c7-6b738b24ce2f.png)  ![result](https://user-images.githubusercontent.com/3728712/28068504-8551b2a6-664e-11e7-9262-76d22008e369.png)   </body>
		<created>2017-07-11 12:35:13</created>
		<closed>2017-08-01 08:28:45</closed>
	</bug>
	<bug>
		<id>5318</id>
		<title>Page Components view is not masked by a modal dialog in Content Wizard</title>
		<body>![image](https://user-images.githubusercontent.com/11612490/28056310-d76f8a86-661c-11e7-805a-610d0ac87272.png) </body>
		<created>2017-07-11 07:52:21</created>
		<closed>2017-08-01 08:28:42</closed>
	</bug>
	<bug>
		<id>5316</id>
		<title>Issue Details - "Include children" toggler changes state after an issue is updated</title>
		<body>1. Select Features site in the grid 2. Create an issue with it via Publish button's menu in the toolbar (don't include child contents) 3. Click "Edit Issue" button 4. Click "Save" (without changing anything) 5. Click "Edit Issue" again.  "Include children" toggler is turned on.</body>
		<created>2017-07-10 15:06:01</created>
		<closed>2017-08-01 08:29:20</closed>
	</bug>
	<bug>
		<id>5315</id>
		<title>Misplaced Content selector dropdown in the "Insert Link" dialog of HTMLArea</title>
		<body>![image](https://user-images.githubusercontent.com/11612490/28021476-4ecf1294-6588-11e7-9157-bdd3712710a1.png) </body>
		<created>2017-07-10 13:57:27</created>
		<closed>2017-08-01 08:25:06</closed>
	</bug>
	<bug>
		<id>5314</id>
		<title>Empty image selector in the "Insert Image" dialog of HTML Area</title>
		<body></body>
		<created>2017-07-10 13:53:18</created>
		<closed>2017-08-01 08:28:40</closed>
	</bug>
	<bug>
		<id>5313</id>
		<title>Wrong content and styling issues in the Image component's selector</title>
		<body>![image](https://user-images.githubusercontent.com/11612490/28021197-5b96d81e-6587-11e7-8be9-ab6e16e69801.png) </body>
		<created>2017-07-10 13:52:05</created>
		<closed>2017-08-01 08:29:15</closed>
	</bug>
	<bug>
		<id>5310</id>
		<title>PageComponentsView not masked when SiteConfiguratorDialog open</title>
		<body>Open PageComponentsView and then SiteConfiguratorDialog  - everything on page is masked except  PageComponentsView  ![image](https://user-images.githubusercontent.com/4255706/28012868-db13aa44-656f-11e7-8341-2db6e8c2a841.png) </body>
		<created>2017-07-10 10:01:57</created>
		<closed>2017-07-12 14:28:02</closed>
	</bug>
	<bug>
		<id>5301</id>
		<title>IssueDetailsDialog - Publish button should be disabled, when user has no rights to publish the content</title>
		<body>1. add a user with roles: Content Manager Administrator + Content Manager App 2. add a content and create issue to publish the content 3. open the content and update permissions:     deny the Publish operation for the user 4. login with the user and open IssueDetails dialog 5. press the Publish button BUG: the user has pressed the Publish button, the content had not published but Issue is closed ![publish1](https://user-images.githubusercontent.com/3728712/27954808-66878f76-631a-11e7-88af-81f7de4ed5df.png) </body>
		<created>2017-07-07 10:45:00</created>
		<closed>2017-08-01 08:28:34</closed>
	</bug>
	<bug>
		<id>5300</id>
		<title>Notification about unclosed issues doesn't disappear after publishing of the last open issue</title>
		<body>1. Create user with roles(Content Manager Administrator + Content Manager App) 2. add a content, select it and create new issue, assign it to the user. 3. login with the user  4. open Issue Details dialog and publish the issue  BUG: content is published, but the circle with 'You have unclosed Publishing Issues' message still present ![icon-bug](https://user-images.githubusercontent.com/3728712/27954286-f475d8a4-6317-11e7-8eb9-e77026acfdc4.png) </body>
		<created>2017-07-07 10:27:18</created>
		<closed>2017-08-01 08:28:11</closed>
	</bug>
	<bug>
		<id>5294</id>
		<title>Exception occurs  when an image has been inserted to a text component</title>
		<body>1. open a site, insert a text component 2. click on the Insert Image button on the component-toolbar and insert an image 3. press the Save BUG: java.lang.StringIndexOutOfBoundsException: String index out of range: -1  ![text-comp](https://user-images.githubusercontent.com/3728712/27908998-4a8af5ce-6257-11e7-9463-b87e953b5850.png) </body>
		<created>2017-07-06 11:27:59</created>
		<closed>2017-08-01 08:28:03</closed>
	</bug>
	<bug>
		<id>5293</id>
		<title>Problem with size of app icon in issue email</title>
		<body>![image](https://user-images.githubusercontent.com/11612490/27907896-bc604234-6249-11e7-915e-465a311ab250.png) </body>
		<created>2017-07-06 10:51:34</created>
		<closed>2017-08-01 08:28:13</closed>
	</bug>
	<bug>
		<id>5292</id>
		<title>No email sent to assignee when a new issue is created by Super Admin</title>
		<body>When SU **updates** an issue or **another user** creates a new issue, emails are sent.</body>
		<created>2017-07-06 10:50:21</created>
		<closed>2017-07-12 08:34:18</closed>
	</bug>
	<bug>
		<id>5291</id>
		<title>Content query on path expects a node path instead of a content path</title>
		<body>Example: When querying contents under features using the _path, "_path LIKE '/content/features/*" will work instead of "_path LIKE '/features/*"  * @runarmyklebust: Seems to be a bug. Do you confirm? Or is that the expected behaviour * Find if this bug is a regression and since when * Fix</body>
		<created>2017-07-06 10:02:26</created>
		<closed>2017-07-17 17:13:07</closed>
	</bug>
	<bug>
		<id>5289</id>
		<title>Content selectors return "No matching items"</title>
		<body>1. In the Move dialog content selector shows "No matching items" right away ![image](https://user-images.githubusercontent.com/11612490/27902795-4e371376-6237-11e7-97ad-f8356685759c.png)  2. In the "Create Issue" dialog expanding the content selector results in endless spinner and errors in the browser console: ![image](https://user-images.githubusercontent.com/11612490/27902910-c50d9c18-6237-11e7-8b53-105b928f9d5e.png)  At the same time, selectors in All input types and other content types from the Features's app work just fine</body>
		<created>2017-07-06 08:43:28</created>
		<closed>2017-08-01 08:28:05</closed>
	</bug>
	<bug>
		<id>5281</id>
		<title>Part descriptor fails if mixin containing option-set is added inside part's item-set</title>
		<body>The config edit for a part will not load with this recipie in **6.11-B2**: `&lt;part&gt;` with `&lt;item-set&gt;` using `&lt;mixin&gt;` containing `&lt;option-set&gt;`  ![screen shot 2017-07-05 at 13 58 11](https://user-images.githubusercontent.com/1465598/27863477-8eede3d4-618a-11e7-8fae-f8fc38543b7d.png)  Mixin (links) with two parts. Part called "button" uses the mixin "normally" and works, the other part called "slider" uses mixin within an `&lt;item-set&gt;` and does not work. Not critical but makes me repeat a lot of xml in multiple files.  [descriptors.zip](https://github.com/enonic/xp/files/1124549/descriptors.zip)    </body>
		<created>2017-07-05 12:07:37</created>
		<closed>2017-08-23 10:49:06</closed>
	</bug>
	<bug>
		<id>5276</id>
		<title>Publish button in the Publish dialog is not visible to a user with Administrator permissions</title>
		<body>"Publish" button in the Publish dialog must always be visible for Administrator, even if content doesn't explicitly allow it. We should use the same logic we are using for enabling "Publish" button in the toolbar.  Here the button is enabled (correct): ![image](https://user-images.githubusercontent.com/11612490/27855991-d0c858c0-616c-11e7-9cac-c1aed7853c0e.png)  Here it's hidden: ![image](https://user-images.githubusercontent.com/11612490/27856018-e8ce3372-616c-11e7-8a65-3ee7fe8c3bac.png) </body>
		<created>2017-07-05 08:25:46</created>
		<closed>2017-08-01 08:26:17</closed>
	</bug>
	<bug>
		<id>5275</id>
		<title>Site Configurator dialog is not entirely masked by additional dialogs</title>
		<body>1. open  a site configurator dialog with a htmlArea. 2. try to insert image, link 3. BUG: when insert-modal dialog is opened, button Upload and Close should be disabled on the SiteConfigurator ![conf](https://user-images.githubusercontent.com/3728712/27854875-1580563a-6171-11e7-9c46-1d349039aa8a.png) </body>
		<created>2017-07-05 08:01:50</created>
		<closed>2017-08-01 08:25:59</closed>
	</bug>
	<bug>
		<id>5274</id>
		<title>Localisation is not working in the Page Editor</title>
		<body>Open a site add an application and try to add controller. Bug: localized message is not correctly displayed on the controller selector The same issue with the Image Selector.   ![controller](https://user-images.githubusercontent.com/3728712/27854601-221a85e2-6170-11e7-97db-4bb28ba07ce0.png)  ![img-selector](https://user-images.githubusercontent.com/3728712/27856442-d8cbf48c-6176-11e7-9249-7443bbc500ca.png)  </body>
		<created>2017-07-05 07:53:54</created>
		<closed>2017-08-01 08:26:21</closed>
	</bug>
	<bug>
		<id>5273</id>
		<title>Broken public API for publishing </title>
		<body>There is a change in `PushContentParams.java` that breaks existing client code. For example xpHoot is calling `ContentService.push()` in DemoInitializer and it fails with an exception because a method was removed in the API class:  ``` 12:39:55.511 ERROR com.enonic.app.xphoot - [com.enonic.xp.app.initialize.DemoInitializer(248)] The initialize method has thrown an exception java.lang.NoSuchMethodError: com.enonic.xp.content.PushContentParams$Builder.includeChildren(Z)Lcom/enonic/xp/content/PushContentParams$Builder; at com.enonic.xp.app.initialize.DemoInitializer.publishContent(DemoInitializer.java:136) ```  We have to be very careful when making changes to Java classes in core-api. Adding methods is normally ok, but removing and renaming is breaking apps.  The changes causing the issue come from this pull request: https://github.com/enonic/xp/pull/4287</body>
		<created>2017-07-05 07:41:38</created>
		<closed>2017-08-01 08:26:28</closed>
	</bug>
	<bug>
		<id>5268</id>
		<title>Issue Details dialog - Disabled Publish button should be shown when there's invalid content in the issue</title>
		<body>1. select invalid content and create new issue 2. open the Issue Details dialog  Problem: "no items to publish" is shown Expected: Disabled Publish button should be shown instead of the text. "No items to publish" should be shown only when all of the issue items are Online.  ![issue2](https://user-images.githubusercontent.com/3728712/27828448-f29aa168-60c4-11e7-9eac-f747f6e30650.png) </body>
		<created>2017-07-04 11:41:32</created>
		<closed>2017-08-01 08:56:23</closed>
	</bug>
	<bug>
		<id>5262</id>
		<title>ContentWizard - Create Issue menu item should be enabled, when the content is 'Online'</title>
		<body>1. open a content and publish it 2.open the publish menu Issue: Create Issue should be enabled  ![issue](https://user-images.githubusercontent.com/3728712/27821000-632bad80-60a9-11e7-8069-c9eb958669e1.png) </body>
		<created>2017-07-04 08:11:29</created>
		<closed>2017-08-01 08:48:09</closed>
	</bug>
	<bug>
		<id>5260</id>
		<title>Caching blobstores should not cache faulty entries</title>
		<body>We have seen an issue at customer installation (RBK) (https://enonic.zendesk.com/agent/tickets/2033) where only parts of a nodeVersion is stored in the cached blob-store. This seems to be happening during imports, and we have seen other issues indicating  several threads trying to create the same content at about the same time.   If an invalid entry is stored in the CachedBlobStore, fetching this node will fail even if the version on disk is correct, and will only be solved by a restart to empty the cache.   Check if the CachedBlobStore could handle this better, e.g by using get with value-loading  </body>
		<created>2017-07-03 10:46:05</created>
		<closed>2017-08-15 08:05:14</closed>
	</bug>
	<bug>
		<id>5259</id>
		<title>Wrong encoding in issue email</title>
		<body>![image](https://user-images.githubusercontent.com/11612490/27788372-9e979d14-5fe8-11e7-875e-4e90d1484a42.png) </body>
		<created>2017-07-03 10:10:51</created>
		<closed>2017-07-04 08:26:16</closed>
	</bug>
	<bug>
		<id>5257</id>
		<title>Event returned by eventlistener in lib-event is not formatted as a javascript object</title>
		<body>An event returned by an eventlistener in javascript library lib-event returns a  toString() from an object. the value is not json and makes it hard to handle in javascript. the separator is = not colon.  "nodes": "[{id=13b2285c-9d57-4936-8916-c6ad908079a3, path=/content/dk/ansatte/kantinen, branch=draft, repo=cms-repo}]"  @srs suggests we should probably implement MapSerializable on the object and then handle it in the javascript bridge.</body>
		<created>2017-07-03 08:07:03</created>
		<closed>2017-12-19 11:38:57</closed>
	</bug>
	<bug>
		<id>5254</id>
		<title>Path-cache not invalidated when deleting repository</title>
		<body>Path-cache is not deleted when repository is deleted.  </body>
		<created>2017-06-30 21:01:47</created>
		<closed>2017-07-04 08:26:13</closed>
	</bug>
	<bug>
		<id>5252</id>
		<title>Possible to avoid path-check for simultaneous create-requests</title>
		<body>Its possible to hit the create point between the population of the path cache and the creation of content or node, resulting in more than one entry with the same path.</body>
		<created>2017-06-30 19:25:39</created>
		<closed>2017-08-15 08:05:03</closed>
	</bug>
	<bug>
		<id>5249</id>
		<title>Schedule action is disabled in "Issue details" dialog for modified content</title>
		<body>1. Publish content item 2. Change it so that its status changes to Modified 3. Create an issue with this item 4. Go to the issue details dialog and expand the Publish button  Schedule action is disabled but it shouldn't be (and it's actually clickable).  ![image](https://user-images.githubusercontent.com/11612490/27746089-24515938-5dc6-11e7-96a2-3107db2705ad.png) </body>
		<created>2017-06-30 17:00:40</created>
		<closed>2017-07-04 08:26:15</closed>
	</bug>
	<bug>
		<id>5242</id>
		<title>Menu of the Publish button must be enabled when grid selection is not empty</title>
		<body>Since anyone can create new issues, "Create Issue" action must always be accessible and therefore menu of the Publish icon should also be always enabled (if something is selected in the grid, of course), doesn't matter whether content is readonly for a user or not.  ![image](https://user-images.githubusercontent.com/11612490/27731481-6073402c-5d8d-11e7-93f1-77ecb3ceedc9.png) </body>
		<created>2017-06-30 10:18:09</created>
		<closed>2017-07-04 08:11:47</closed>
	</bug>
	<bug>
		<id>5241</id>
		<title>Edit action must be disabled when all selected items are read-only</title>
		<body>Both in the grid toolbar and the context menu.  ![image](https://user-images.githubusercontent.com/11612490/27731224-71a9e4e6-5d8c-11e7-8151-b82cb5c731b6.png) </body>
		<created>2017-06-30 10:07:40</created>
		<closed>2017-08-01 08:27:40</closed>
	</bug>
	<bug>
		<id>5235</id>
		<title>Mobile resolution - Checkboxes are not right-aligned in the Application app's grid</title>
		<body>Should be the same as in the Content Studio - checkboxes in the grid must be right-aligned (and vertically aligned with the "Select all" checkbox in the toolbar):  ![image](https://user-images.githubusercontent.com/11612490/27684035-897dc624-5cc8-11e7-8384-ec231b32f0fc.png) </body>
		<created>2017-06-29 10:45:16</created>
		<closed>2017-08-01 08:26:24</closed>
	</bug>
	<bug>
		<id>5232</id>
		<title>Incorrect confirmation about content being moved out of site</title>
		<body>1. Create a new site (or use existing) 2. Create a new folder under the site 3. Create some content in that folder (so that it's on the 2nd level compared to the site) 4. Select this content item in the grid 5. Click "Move" in the toolbar 6. Select the site to move the content from the folder one level up to the site 7. Click the Move button  Confirmation about content being moved out of the site pops up, but the content is not about to be moved **out** of the site, it's about to be moved **under** the site.</body>
		<created>2017-06-29 08:29:56</created>
		<closed>2017-06-30 11:38:42</closed>
	</bug>
	<bug>
		<id>5225</id>
		<title>Wrong permissions on Issues-node</title>
		<body>In IssueInitializer, set the permissions on issues-folder to create/edit/update for content-app also, see response from @sigdestad :  &gt;  &gt; to keep things simple, the “issues/“ folder should have permissions that enable any user with "content manager", or "content app" role to create/edit/update issues. &gt; This is essential, as anyone using content studio should be able to create issues. &gt;   Make sure to test that a user with content-app only is able to create/modify/delete issues.</body>
		<created>2017-06-28 10:15:15</created>
		<closed>2017-07-04 08:26:06</closed>
	</bug>
	<bug>
		<id>5218</id>
		<title>Missing localized phrases in Users App</title>
		<body>There are a number of phrases in the Users app which do not seem to have a representation in the Users app.  ## App Name - The App name is still in English (See screenshot under Action Bar).  Should it be?  ## Tab title - When creating a new user or a new group, the Tab title is "Unnamed Bruker" and "Unnamed Gruppe"  (See screenshot under Action Bar).  Bad mix of English and localized language.  Must be fixed.  ## Action Bar - The Save button (all other buttons on the action bar are localized):  ![screenshot 2017-06-27 15 10 26](https://user-images.githubusercontent.com/477453/27589201-e660b6e6-5b4a-11e7-8dec-b7e68f4b6e7e.png)   ## Dialogs While the main text have an entry, none of the supporting/standardized fields seem to be localized: - Headers/Titles have no entry (screenshot below: "Confirmation") - Buttons like Yes/No does not either (same screenshot, "Yes/No")  ![screenshot 2017-06-27 15 00 58](https://user-images.githubusercontent.com/477453/27588817-b97c2864-5b49-11e7-94b4-03b41be5af0e.png)  </body>
		<created>2017-06-27 13:05:54</created>
		<closed>2017-07-25 08:25:46</closed>
	</bug>
	<bug>
		<id>5217</id>
		<title>Dump/Load fails on missing binary/version file</title>
		<body>Rather than exit when an error like this is occuring:  ``` Caused by: com.enonic.xp.repo.impl.dump.RepoDumpException: Cannot write binary with key [08a710c07a145a4adca6009db3bc0935d686e834], not found in blobStore at com.enonic.xp.repo.impl.dump.writer.FileDumpWriter.writeBinary(FileDumpWriter.java:163) ``` Report as error and continue </body>
		<created>2017-06-27 11:28:39</created>
		<closed>2017-07-04 08:25:52</closed>
	</bug>
	<bug>
		<id>5210</id>
		<title>Details Panel goes blank instead of switching into floating mode</title>
		<body>1. Open Content Studio and resize the browser window so that it's about 700px wide 2. Expand the details panel 3. Select some content 4. Now resize the browser window to be about 450px wide  The details panel is supposed to switch to the floating mode in this resolution but instead it goes blank and stays in docked mode.  ![image](https://user-images.githubusercontent.com/11612490/27581895-53a48d52-5b2f-11e7-9e13-0aba2004454a.png)  If I now resize the window back to its original width, the detail panel's toggle icon will overlap the Issues icon in the toolbar.  ![image](https://user-images.githubusercontent.com/11612490/27581959-87b7875c-5b2f-11e7-99ed-fc9c71d4671b.png) </body>
		<created>2017-06-27 09:55:57</created>
		<closed>2017-07-04 08:25:57</closed>
	</bug>
	<bug>
		<id>5209</id>
		<title>Make sure all data in system-repo:master is deleted before loading data</title>
		<body></body>
		<created>2017-06-27 09:54:38</created>
		<closed>2017-07-04 08:25:44</closed>
	</bug>
	<bug>
		<id>5203</id>
		<title>Portal URLs are generated without branch in admin mode </title>
		<body>* The check should be on the base URI and not the mode * Remove render mode APP</body>
		<created>2017-06-26 14:38:50</created>
		<closed>2017-07-04 08:26:17</closed>
	</bug>
	<bug>
		<id>5197</id>
		<title>'Create Issue Dialog' - incorrect behavior of validation, when required user was set</title>
		<body>1. start to add a new issue. 2. type a title and select items 3. press Create Issue button. Validation message appears(OK) 4. select an user  BUG: when required user field has been selected, validation message is still present ![valid](https://user-images.githubusercontent.com/3728712/27528546-9a09ea3e-5a59-11e7-8d1f-a408fa046834.png) </body>
		<created>2017-06-26 07:24:34</created>
		<closed>2017-07-04 08:25:38</closed>
	</bug>
	<bug>
		<id>5196</id>
		<title>Fix taborder inside Input occurrence view</title>
		<body>When tabbing inside Input occurence view, focus goes to the X icon first, and then to input to the left. Should be the other way around.</body>
		<created>2017-06-23 14:33:28</created>
		<closed>2017-07-04 08:25:33</closed>
	</bug>
	<bug>
		<id>5192</id>
		<title>Dump load - Ignore meta files</title>
		<body>Ignore files generated by OS like .DS_Store and the such</body>
		<created>2017-06-23 11:57:36</created>
		<closed>2017-07-04 08:25:41</closed>
	</bug>
	<bug>
		<id>5191</id>
		<title>Versions-view not correctly displaying "online" status after load</title>
		<body></body>
		<created>2017-06-23 11:36:17</created>
		<closed>2017-08-01 08:26:12</closed>
	</bug>
	<bug>
		<id>5189</id>
		<title>Path-exists check is missing in the load data</title>
		<body>To speed up stuff, this check is not done, but all hell will break loose, put it back.</body>
		<created>2017-06-23 11:34:05</created>
		<closed>2017-07-04 08:12:05</closed>
	</bug>
	<bug>
		<id>5188</id>
		<title>'New' button should be disabled when nothing is selected in the grid and user is not allowed to create content in the root</title>
		<body>1. Add a user with only these two roles:  ![image](https://user-images.githubusercontent.com/11612490/27480286-9fa7e5b6-5817-11e7-8155-57d5b81eb61f.png)  2. Log in with this user 3. Click "New" button 4. Select content type  1)If user is not "Content Manager Administrator" or "Administrator", he's not allowed to create content in the root, so we should disable the "New" action in the toolbar. 2)The same exception thrown when the User tries to move a content to the root directory  BUG:  expected: 'New' button should be disabled if user doesn't have proper rights to create content in the root Actual: when New has been pressed and Folder selected,  exception thrown: om.enonic.xp.content.ContentAccessException: Access denied to [/] for [CREATE] by user [user:system:user20637850] 'user20637850'         at com.enonic.xp.core.impl.content.CreateContentCommand.doExecute(CreateContentCommand.java:115)         at com.enonic.xp.core.impl.content.CreateContentCommand.execute(CreateContentCommand.java:80)         at com.enonic.xp.core.impl.content.ContentServiceImpl.create(ContentServiceImpl.java:227)         at com.enonic.xp.admin.impl.rest.resource.content.ContentResource.create(ContentResource.java:243)         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)         at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)         at java.lang.reflect.Method.invoke(Method.java:498)         at org.jboss.resteasy.core.MethodInjectorImpl.invoke(MethodInjectorImpl.java:137)         at org.jboss.resteasy.core.ResourceMethodInvoker.invokeOnTarget(ResourceMethodInvoker.java:296)         at org.jboss.resteasy.core.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:250)         at org.jboss.resteasy.core.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:237)         at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:356)         at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:179)         at org.jboss.resteasy.plugins.server.servlet.ServletContainerDispatcher.service(ServletContainerDispatcher.java:220)         at com.enonic.xp.jaxrs.impl.JaxRsServlet.service(JaxRsServlet.java:46)         at javax.servlet.http.HttpServlet.service(HttpServlet.java:790)         at com.enonic.xp.web.impl.dispatch.mapping.ServletDefinitionImpl.service(ServletDefinitionImpl.java:39)         at com.enonic.xp.web.impl.dispatch.pipeline.ServletPipelineImpl.service(ServletPipelineImpl.java:30)         at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:45)         at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36)         at com.enonic.xp.portal.impl.auth.AuthFilter.doHandle(AuthFilter.java:45)         at com.enonic.xp.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:31)         at com.enonic.xp.web.filter.BaseWebFilter.doFilter(BaseWebFilter.java:33)         at com.enonic.xp.web.impl.dispatch.mapping.FilterDefinitionImpl.doFilter(FilterDefinitionImpl.java:40)         at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:50)         at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36)         at com.enonic.xp.web.impl.auth.BasicAuthFilter.doHandle(BasicAuthFilter.java:33)         at com.enonic.xp.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:31)         at com.enonic.xp.web.filter.BaseWebFilter.doFilter(BaseWebFilter.java:33)         at com.enonic.xp.web.impl.dispatch.mapping.FilterDefinitionImpl.doFilter(FilterDefinitionImpl.java:40)         at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:50)         at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36)         at com.enonic.xp.web.impl.context.ContextFilter.lambda$doHandle$0(ContextFilter.java:33)         at com.enonic.xp.context.ContextImpl.callWith(ContextImpl.java:101)         at com.enonic.xp.web.impl.context.ContextFilter.doHandle(ContextFilter.java:32)         at com.enonic.xp.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:31)   ![root-f](https://user-images.githubusercontent.com/3728712/27480072-40b82a4a-581f-11e7-976d-7020d767d8f1.png) </body>
		<created>2017-06-23 11:20:38</created>
		<closed>2017-08-01 08:27:38</closed>
	</bug>
	<bug>
		<id>5187</id>
		<title>'Create Issue' menu item should be disabled, if user has no 'Content Manager Administrator' role</title>
		<body>1. Add a user with only these two roles:  ![image](https://user-images.githubusercontent.com/11612490/27480286-9fa7e5b6-5817-11e7-8155-57d5b81eb61f.png)  2. Log in with this user 3. Select content in the grid 4. Expand the Publish menu button and select "Create Issue" 5. Fill out the form fields and try to create a new issue  If user is not "Content Manager Administrator" or "Administrator", he's not allowed to create content in the root. Since we create issues in the root, user will get an error (see below).  We should check permissions and if user is not a super admin and is neither "Content Manager Administrator" or "Administrator", hide the following:  * "New Issue" button in the issue list dialog * "Create Issue..." action in the Publish menu button's dropdown (both the grid and the wizard) * "Create Issue" in the Publish menu dropdown in the Publish Content dialog     Access denied to [/issues] for [CREATE] by user [user:system:user20637850] ''user20637850''         at com.enonic.xp.repo.impl.node.NodePermissionsResolver.doRequireContextUserPermission(NodePermissionsResolver.java:43)         at com.enonic.xp.repo.impl.node.NodePermissionsResolver.requireContextUserPermission(NodePermissionsResolver.java:18)         at com.enonic.xp.repo.impl.node.CreateNodeCommand.execute(CreateNodeCommand.java:74)         at com.enonic.xp.repo.impl.node.NodeServiceImpl.doCreate(NodeServiceImpl.java:236)         at com.enonic.xp.repo.impl.node.NodeServiceImpl.create(NodeServiceImpl.java:224)         at com.enonic.xp.core.impl.issue.CreateIssueCommand.doExecute(CreateIssueCommand.java:60)         at com.enonic.xp.core.impl.issue.CreateIssueCommand.execute(CreateIssueCommand.java:44)         at com.enonic.xp.core.impl.issue.IssueServiceImpl.create(IssueServiceImpl.java:41)         at com.enonic.xp.admin.impl.rest.resource.issue.IssueResource.create(IssueResource.java:67)         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)         at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)         at java.lang.reflect.Method.invoke(Method.java:498)         at org.jboss.resteasy.core.MethodInjectorImpl.invoke(MethodInjectorImpl.java:137)         at org.jboss.resteasy.core.ResourceMethodInvoker.invokeOnTarget(ResourceMethodInvoker.java:296)         at org.jboss.resteasy.core.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:250)         at org.jboss.resteasy.core.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:237)         at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:356)         at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:179)         at org.jboss.resteasy.plugins.server.servlet.ServletContainerDispatcher.service(ServletContainerDispatcher.java:220)         at com.enonic.xp.jaxrs.impl.JaxRsServlet.service(JaxRsServlet.java:46)         at javax.servlet.http.HttpServlet.service(HttpServlet.java:790)         at com.enonic.xp.web.impl.dispatch.mapping.ServletDefinitionImpl.service(ServletDefinitionImpl.java:39)         at com.enonic.xp.web.impl.dispatch.pipeline.ServletPipelineImpl.service(ServletPipelineImpl.java:30)         at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:45)         at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36)         at com.enonic.xp.portal.impl.auth.AuthFilter.doHandle(AuthFilter.java:45)         at com.enonic.xp.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:31)         at com.enonic.xp.web.filter.BaseWebFilter.doFilter(BaseWebFilter.java:33)         at com.enonic.xp.web.impl.dispatch.mapping.FilterDefinitionImpl.doFilter(FilterDefinitionImpl.java:40)         at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:50)         at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36)         at com.enonic.xp.web.impl.auth.BasicAuthFilter.doHandle(BasicAuthFilter.java:33)         at com.enonic.xp.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:31)         at com.enonic.xp.web.filter.BaseWebFilter.doFilter(BaseWebFilter.java:33)         at com.enonic.xp.web.impl.dispatch.mapping.FilterDefinitionImpl.doFilter(FilterDefinitionImpl.java:40)         at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:50)         at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36)         at com.enonic.xp.web.impl.context.ContextFilter.lambda$doHandle$0(ContextFilter.java:33)         at com.enonic.xp.context.ContextImpl.callWith(ContextImpl.java:101)         at com.enonic.xp.web.impl.context.ContextFilter.doHandle(ContextFilter.java:32)         at com.enonic.xp.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:31)         at com.enonic.xp.web.filter.BaseWebFilter.doFilter(BaseWebFilter.java:33)         at com.enonic.xp.web.impl.dispatch.mapping.FilterDefinitionImpl.doFilter(FilterDefinitionImpl.java:40)         at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:50)         at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36)         at com.enonic.xp.web.vhost.impl.VirtualHostFilter.doHandle(VirtualHostFilter.java:57)         at com.enonic.xp.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:31)         at com.enonic.xp.web.filter.BaseWebFilter.doFilter(BaseWebFilter.java:33)         at com.enonic.xp.web.impl.dispatch.mapping.FilterDefinitionImpl.doFilter(FilterDefinitionImpl.java:40)         at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:50) ![access-d](https://user-images.githubusercontent.com/3728712/27479841-47836f8e-581e-11e7-839c-e64bab326e58.png)   </body>
		<created>2017-06-23 11:14:56</created>
		<closed>2017-06-30 07:38:12</closed>
	</bug>
	<bug>
		<id>5184</id>
		<title>IssueDetailsDialog  - Server-side exception when publishing an issue assigned to deleted user</title>
		<body>1. Login with SU and add an user 2.  create new issue and assign it to the user 3. delete the User 4. open the issue BUG: expected: the issue should be published without any errors in the log, we should not try to send an email to a deleted user actual: the button is enabled, 500 error appears, when the button has been pressed JsonRequest.ts:67 POST http://localhost:8080/admin/rest/issue/update 500 (Server Error) ![iss-det](https://user-images.githubusercontent.com/3728712/27479142-4ab73b02-581b-11e7-9e97-ef5af5ddfa6e.png)  13:42:42.389 ERROR c.e.x.j.i.e.JsonExceptionMapper - No value present java.util.NoSuchElementException: No value present         at java.util.Optional.get(Optional.java:135)         at com.enonic.xp.admin.impl.rest.resource.issue.IssueNotificationsSenderImpl.lambda$createMessageParams$5(IssueNotificationsSenderImpl.java:101)         at java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)         at java.util.Iterator.forEachRemaining(Iterator.java:116)         at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)         at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)         at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)         at java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)         at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)         at java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:499)         at com.enonic.xp.admin.impl.rest.resource.issue.IssueNotificationsSenderImpl.createMessageParams(IssueNotificationsSenderImpl.java:101)         at com.enonic.xp.admin.impl.rest.resource.issue.IssueNotificationsSenderImpl.notifyIssuePublished(IssueNotificationsSenderImpl.java:77)         at com.enonic.xp.admin.impl.rest.resource.issue.IssueResource.update(IssueResource.java:102)         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)         at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)         at java.lang.reflect.Method.invoke(Method.java:498)         at org.jboss.resteasy.core.MethodInjectorImpl.invoke(MethodInjectorImpl.java:137)         at org.jboss.resteasy.core.ResourceMethodInvoker.invokeOnTarget(ResourceMethodInvoker.java:296)         at org.jboss.resteasy.core.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:250)         at org.jboss.resteasy.core.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:237)         at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:356)         at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:179)         at org.jboss.resteasy.plugins.server.servlet.ServletContainerDispatcher.service(ServletContainerDispatcher.java:220)         at com.enonic.xp.jaxrs.impl.JaxRsServlet.service(JaxRsServlet.java:46)         at javax.servlet.http.HttpServlet.service(HttpServlet.java:790)         at com.enonic.xp.web.impl.dispatch.mapping.ServletDefinitionImpl.service(ServletDefinitionImpl.java:39)         at com.enonic.xp.web.impl.dispatch.pipeline.ServletPipelineImpl.service(ServletPipelineImpl.java:30)         at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:45)         at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36)         at com.enonic.xp.portal.impl.auth.AuthFilter.doHandle(AuthFilter.java:45)         at com.enonic.xp.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:31)         at com.enonic.xp.web.filter.BaseWebFilter.doFilter(BaseWebFilter.java:33)         at com.enonic.xp.web.impl.dispatch.mapping.FilterDefinitionImpl.doFilter(FilterDefinitionImpl.java:40)         at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:50)         at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36)         at com.enonic.xp.web.impl.auth.BasicAuthFilter.doHandle(BasicAuthFilter.java:33)         at com.enonic.xp.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:31)         at com.enonic.xp.web.filter.BaseWebFilter.doFilter(BaseWebFilter.java:33)         at com.enonic.xp.web.impl.dispatch.mapping.FilterDefinitionImpl.doFilter(FilterDefinitionImpl.java:40)         at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:50)         at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36)         at com.enonic.xp.web.impl.context.ContextFilter.lambda$doHandle$0(ContextFilter.java:33)         at com.enonic.xp.context.ContextImpl.callWith(ContextImpl.java:101)         at com.enonic.xp.web.impl.context.ContextFilter.doHandle(ContextFilter.java:32)         at com.enonic.xp.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:31)         at com.enonic.xp.web.filter.BaseWebFilter.doFilter(BaseWebFilter.java:33)         at com.enonic.xp.web.impl.dispatch.mapping.FilterDefinitionImpl.doFilter(FilterDefinitionImpl.java:40)         at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:50)         at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36)         at com.enonic.xp.web.vhost.impl.VirtualHostFilter.doHandle(VirtualHostFilter.java:57)         at com.enonic.xp.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:31)         at com.enonic.xp.web.filter.BaseWebFilter.doFilter(BaseWebFilter.java:33)         at com.enonic.xp.web.impl.dispatch.mapping.FilterDefinitionImpl.doFilter(FilterDefinitionImpl.java:40)         at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:50)         at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36)         at com.enonic.xp.web.impl.dos.DosFilterWrapper.doFilter(DosFilterWrapper.java:64)         at com.enonic.xp.web.impl.dispatch.mapping.FilterDefinitionImpl.doFilter(FilterDefinitionImpl.java:40)         at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:50)         at com.enonic.xp.web.impl.dispatch.pipeline.FilterChainImpl.doFilter(FilterChainImpl.java:36)         at com.enonic.xp.web.impl.dispatch.pipeline.FilterPipelineImpl.filter(FilterPipelineImpl.java:29)         at com.enonic.xp.web.impl.dispatch.DispatchServletImpl.service(DispatchServletImpl.java:35)         at javax.servlet.http.HttpServlet.service(HttpServlet.java:790)         at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:821)         at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:583)         at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:143)         at org.eclipse.jetty.server.handler.gzip.GzipHandler.handle(GzipHandler.java:375)         at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:226)         at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1158)         at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:511)         at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:185)         at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1090)         at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)         at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:119)         at com.codahale.metrics.jetty9.InstrumentedHandler.handle(InstrumentedHandler.java:240)         at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:119)         at org.eclipse.jetty.server.Server.handle(Server.java:517)         at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:306)         at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:242)         at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:261)         at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:95)         at org.eclipse.jetty.io.SelectChannelEndPoint$2.run(SelectChannelEndPoint.java:75)         at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.produceAndRun(ExecuteProduceConsume.java:213)         at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.run(ExecuteProduceConsume.java:147)         at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:654)         at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:572)         at java.lang.Thread.run(Thread.java:745) </body>
		<created>2017-06-23 10:53:16</created>
		<closed>2017-07-04 08:25:43</closed>
	</bug>
	<bug>
		<id>5170</id>
		<title>Fix messages in notifications about User Store actions </title>
		<body>Expected: 1."User Store" is 2 words  and need to remove the 'Exclamation point' from messages 2 Correct Messages:     User Store "name" is deleted     User Store  is updated     Principal "user:system:user2"  is deleted</body>
		<created>2017-06-22 08:04:39</created>
		<closed>2017-07-04 08:24:46</closed>
	</bug>
	<bug>
		<id>5169</id>
		<title>Content display using a site mapping fails in edit view</title>
		<body>To have a display for a content:   * You can have a template that matches the content   * You can apply a page controller on the content.  But another possibility is that   * You define a site mapping for this content type.  In that case   -&gt; The display in portal mode of the content works   -&gt; But the display in edit view does not work. There is a spinner that never ends   -&gt; There is also the fact that the preview button is not displayed in edit mode (but in is enabled in , but I am not sure we can/should do something there or if it is a consequence of the previous bug  - [ ] Fix the spinner bug</body>
		<created>2017-06-22 07:32:15</created>
		<closed>2017-08-29 08:29:48</closed>
	</bug>
	<bug>
		<id>5168</id>
		<title>Edge specific bug -Details Panel,WidgetSelectorDropdown broken layout in the menu</title>
		<body>1. select a content and open the Details Panel BUG: see the screenshot ![det-p-menu](https://user-images.githubusercontent.com/3728712/27389867-5a34e364-56a8-11e7-8b79-22a7971868ba.png) </body>
		<created>2017-06-21 14:38:02</created>
		<closed>2017-07-04 08:24:10</closed>
	</bug>
	<bug>
		<id>5167</id>
		<title>Error in the console and issues list is empty, when Issues Dialog is opened and assigned user had deleted</title>
		<body>1. Go to Users and add new user. 2. open CS , select a content and create new issue, assign in to the user 3. Go to Users and delete the user. 4. go to the CS and try to open 'Publishing Issues' dialog BUG: list of issues is empty and error is present in the console ![issues-d](https://user-images.githubusercontent.com/3728712/27389281-9ec7facc-56a6-11e7-9fd0-3450b91adae9.png) </body>
		<created>2017-06-21 14:25:36</created>
		<closed>2017-07-04 08:24:42</closed>
	</bug>
	<bug>
		<id>5166</id>
		<title>IllegalArgumentException thrown when an issue was closed(updated)</title>
		<body>1. select a folder with child 2. press the Publish and open the dialog, select "Create issue" menu item  3. type name of the issue and assign it to an user 4. when issue is created, do not close     the dialog and press the "Publish" button BUG: exception thrown:  java.lang.IllegalArgumentException: No enum constant com.enonic.xp.issue.IssueStatus.#issue.status.closed#         at java.lang.Enum.valueOf(Enum.java:238)         at com.enonic.xp.issue.IssueStatus.valueOf(IssueStatus.java:3)         at com.enonic.xp.admin.impl.rest.resource.issue.json.UpdateIssueJson.lambda$new$1(UpdateIssueJson.java:45)         at com.enonic.xp.core.impl.issue.UpdateIssueCommand.editIssue(UpdateIssueCommand.java:55)         at com.enonic.xp.core.impl.issue.UpdateIssueCommand.doExecute(UpdateIssueCommand.java:38)         at ![result](https://user-images.githubusercontent.com/3728712/27387347-266adb76-56a1-11e7-84f5-17296dcded32.png) </body>
		<created>2017-06-21 13:46:26</created>
		<closed>2017-07-04 08:24:22</closed>
	</bug>
	<bug>
		<id>5165</id>
		<title>Edit Permissions Dialog - 'Overwrite child permissions' checkbox is always disabled</title>
		<body>The checkbox is not clickable.  ![ch](https://user-images.githubusercontent.com/3728712/27386211-c385622c-569d-11e7-91e3-cbe66c20c393.png) </body>
		<created>2017-06-21 13:22:23</created>
		<closed>2017-07-04 08:24:11</closed>
	</bug>
	<bug>
		<id>5164</id>
		<title>Hotkeys not working in the Content Grid</title>
		<body>1)Select a row and try to :      Shift+Arrow Down (UP) 2)Select a row and try to : press the Keys.SPACE( expected -row should be  unselected)  There are no problems with: Ctrl+E, Ctrl+D</body>
		<created>2017-06-21 12:39:18</created>
		<closed>2017-06-21 12:54:59</closed>
	</bug>
	<bug>
		<id>5161</id>
		<title>Install Application Dialog - list of applications overlap the dialog</title>
		<body>1. open Applications, press the Install button ![inst](https://user-images.githubusercontent.com/3728712/27383650-95789664-5694-11e7-9e7a-5577e403d7b2.png) </body>
		<created>2017-06-21 12:16:36</created>
		<closed>2017-07-04 08:24:43</closed>
	</bug>
	<bug>
		<id>5160</id>
		<title>Missing translations in the localization properties file</title>
		<body>Part1. Remove extra quotes in  notification messages:  Part2 Missed: 1. Version history item(Details Panel) 2. Filter Panel 3. user-access-widget 4. create issue dialog 5. Publishing Issues dialog ![message](https://user-images.githubusercontent.com/3728712/27384087-3d378562-5696-11e7-8efb-91d140601876.png)  ![localiz](https://user-images.githubusercontent.com/3728712/27383174-733502ce-5692-11e7-81df-2914cfd1b6ba.png) </body>
		<created>2017-06-21 12:01:57</created>
		<closed>2017-06-21 12:46:50</closed>
	</bug>
	<bug>
		<id>5157</id>
		<title>Handle unsupported HTTP methods</title>
		<body>https://enonic.zendesk.com/agent/tickets/2024 </body>
		<created>2017-06-21 10:42:48</created>
		<closed>2017-07-04 08:25:55</closed>
	</bug>
	<bug>
		<id>5146</id>
		<title>Site mapping - Post processing</title>
		<body>Check if page conributions can be executed for mappings  http://xp.readthedocs.io/en/latest/developer/ssjs/http-response.html?highlight=postProcess postProcess: true ? pageContributions?</body>
		<created>2017-06-20 13:17:19</created>
		<closed>2017-11-07 11:40:01</closed>
	</bug>
	<bug>
		<id>5145</id>
		<title>Fix CSS conflict causing broken toolbar of the text editor in inline mode</title>
		<body>There's some kind of CSS conflict between the Enonic site and the TinyMCE's toolbar in inline mode which makes it look like this: ![image](https://user-images.githubusercontent.com/11612490/27328965-34a86476-55b4-11e7-9719-58250c59d4a6.png) </body>
		<created>2017-06-20 10:31:53</created>
		<closed>2017-07-04 08:23:37</closed>
	</bug>
	<bug>
		<id>5117</id>
		<title>Exclamation mark should be removed in few notification messages</title>
		<body>1. create or update an user store BUG: notification message should be without the Exclamation mark ![notif-m](https://user-images.githubusercontent.com/3728712/27275633-f02e6b84-54e0-11e7-8a9e-934daae8fa5e.png) </body>
		<created>2017-06-19 08:18:06</created>
		<closed>2017-06-20 10:58:34</closed>
	</bug>
	<bug>
		<id>5116</id>
		<title>Incorrect notification message, when user or user store is deleted</title>
		<body>1. select an existing user and delete it . BUG: incorrect notification message appears, see the screenshot The same issue when User Store or Role was deleted ![notification-mess](https://user-images.githubusercontent.com/3728712/27275308-7a5001d0-54df-11e7-8aee-f34a512321b7.png)   </body>
		<created>2017-06-19 08:09:23</created>
		<closed>2017-07-04 08:26:04</closed>
	</bug>
	<bug>
		<id>5069</id>
		<title>Node Lib - Modify node - Untouched Long are converted to Double </title>
		<body>* Nashorn converts Long to Double. ** A solution was implemented in MapGeneratorBase::convertValue ** But the solution has not been implemented in MapGeneratorBase::convertRaw</body>
		<created>2017-06-07 11:31:41</created>
		<closed>2017-07-04 08:25:34</closed>
	</bug>
	<bug>
		<id>5065</id>
		<title>Http Library - Temporary file should be deleted after use</title>
		<body>Temporary files created in ResponseMapper::getResponseBodyStream are deleted on exit. But servers are supposed to work without restarting so the files keep stacking up.  Force the deletion of the files after they have been used   I have already worked on something similar for data-toolbox if it helps: https://github.com/GlennRicaud/data-toolbox-app/tree/master/src/main/java/systems/rcd/enonic/datatoolbox</body>
		<created>2017-06-07 10:03:21</created>
		<closed>2017-07-04 08:23:47</closed>
	</bug>
	<bug>
		<id>5064</id>
		<title>repositoryService.deleteBranch does not delete recursivly</title>
		<body>nodeStorageService only deletes the node it's told to delete, so only the root-node is deleted when doing the repositoryService.deleteBranch  </body>
		<created>2017-06-07 09:51:59</created>
		<closed>2017-07-04 08:22:19</closed>
	</bug>
	<bug>
		<id>5046</id>
		<title>Setting manual order value doesnt mark children as modified for publish</title>
		<body>When switching to manual order, the children must be published because the order value is set on every child.  This is not detected when resolving publish work. </body>
		<created>2017-06-02 12:19:31</created>
		<closed>2017-07-04 08:22:29</closed>
	</bug>
	<bug>
		<id>5035</id>
		<title>Array should be rendered same way as object</title>
		<body>Array should be rendered as is. This will not render right now:  ```js exports.get = function () {     return {         body: [],         contentType: 'application/json'     }; } ``` </body>
		<created>2017-05-30 14:38:21</created>
		<closed>2018-05-15 10:09:36</closed>
	</bug>
	<bug>
		<id>5028</id>
		<title>Site Configurator Dialog - Image in a htmlArea overlaps buttons on the toolbar</title>
		<body>The issue does not reproduce in htmlArea content, only in SiteConfigurator modal dialog  1. Open a site, open the site configurator(it should be with the htmlArea) 2. insert an image in the area, click on the Insert button. 3.press the Apply 4. open the dialog again BUGS 1. the image overlaps the toolbar on the dialog 2. try to delete the image(Press Delete button on the keyboard) and click on the Apply button,     the dialog does not close when the button has been clicked  ![site-conf](https://cloud.githubusercontent.com/assets/3728712/26573714/734352d8-4527-11e7-9be1-44f0a482422b.png)     </body>
		<created>2017-05-30 08:05:18</created>
		<closed>2017-06-06 08:20:46</closed>
	</bug>
	<bug>
		<id>5027</id>
		<title>Mobile resolution - ApplicationItemStatisticsPanel is not displayed when an application is selected</title>
		<body>1. set the 480x800 2. select an application see the screenshot  ![app-grid](https://cloud.githubusercontent.com/assets/3728712/26555671/e852afa8-449e-11e7-89d4-36343e2f6856.png) </body>
		<created>2017-05-29 15:45:04</created>
		<closed>2017-07-04 08:26:01</closed>
	</bug>
	<bug>
		<id>5026</id>
		<title>Mobile resolution - Install buttons are shown partially in the Install App dialog</title>
		<body>1. open Applications on 480x800 2. Press the Install dialog BUG:  see the screenshot ![inst](https://cloud.githubusercontent.com/assets/3728712/26555561/48c029ac-449e-11e7-93b6-489eca2d7076.png)    </body>
		<created>2017-05-29 15:40:31</created>
		<closed>2017-07-04 08:25:59</closed>
	</bug>
	<bug>
		<id>5025</id>
		<title>Mobile resolution - Link 'Show Results' should not be displayed when the Search input is empty</title>
		<body>This issue is reproducing only on 480x800 1. Navigate to users 2. click on the 'icon-search' and open the FilterPanel BUG: 'Show Results'  should not be present because search input is empty  ![search](https://cloud.githubusercontent.com/assets/3728712/26555303/178de3a2-449d-11e7-8a3c-8b721475d19c.png)  </body>
		<created>2017-05-29 15:32:06</created>
		<closed>2017-08-01 08:26:15</closed>
	</bug>
	<bug>
		<id>5024</id>
		<title>Mobile resolution - Users App icon is not available in the User wizard </title>
		<body>1. Navigate to Users and open a RoleWizard BUG: Users button is not available, impossible to navigate to the grid  ![users](https://cloud.githubusercontent.com/assets/3728712/26554928/7504357e-449b-11e7-9ffc-ad0f4fdced81.png) </body>
		<created>2017-05-29 15:21:17</created>
		<closed>2017-07-04 08:26:03</closed>
	</bug>
	<bug>
		<id>5023</id>
		<title>Mobile resolution - ImageEditor dialog doesn't fit the viewport</title>
		<body>1. set 480x800 and open an image 2. click on the button-crop and try to crop the image BUG- 'Apply' and 'Close' are not available ![imageeditor](https://cloud.githubusercontent.com/assets/3728712/26554654/0be98fb8-449a-11e7-8e11-a5b5a8ffd85f.png) </body>
		<created>2017-05-29 15:10:11</created>
		<closed>2017-07-04 08:26:07</closed>
	</bug>
	<bug>
		<id>5022</id>
		<title>Mobile resolution - "Instantly delete..." checkbox is too wide</title>
		<body>1. Set size of browser to 480x800 2. Select a site(Online) and press the 'Delete' button BUG: the label overlaps the button on the modal dialog  ![overlap](https://cloud.githubusercontent.com/assets/3728712/26551889/5e06bf4e-448d-11e7-8624-3fd16882e6b9.png) </body>
		<created>2017-05-29 13:40:37</created>
		<closed>2017-07-04 08:25:58</closed>
	</bug>
	<bug>
		<id>5018</id>
		<title>Dropdown of the Publish button is not visible under low resolution</title>
		<body>1. open the content grid  2, set width to 480(min) BUG: 1. Publish button is not available 2. click on the More button, menu is hidden ![1](https://cloud.githubusercontent.com/assets/3728712/26541190/5f75fc12-445d-11e7-8592-5bcd3fc748a2.png)   </body>
		<created>2017-05-29 07:56:16</created>
		<closed>2017-06-06 08:20:21</closed>
	</bug>
	<bug>
		<id>5017</id>
		<title>Edit Permissions Dialog - context menu should be closed by clicking outside of the menu </title>
		<body>1. open a content and open the Permission Dialog 2, click on any 'access-selector' (Can Read), menu is shown Issue - how to close this menu ? Clicking  outside of the menu does not close the menu ![perm-dialog](https://cloud.githubusercontent.com/assets/3728712/26540831/e9984b2c-445b-11e7-8d61-20d6a40c53e1.png) </body>
		<created>2017-05-29 07:45:49</created>
		<closed>2017-07-04 08:24:11</closed>
	</bug>
	<bug>
		<id>5005</id>
		<title>Single quotes are missing in the notification message when an application was installed</title>
		<body>One test failed due to this issue 1. Open applications and install an application BUG: expected notification message is     "Application 'Content Viewer App' installed successfully" but actual is "Application Content Viewer App installed successfully"   Part2 Don't  message should be present when an application has been started or stopped?</body>
		<created>2017-05-25 08:19:03</created>
		<closed>2017-06-06 08:20:48</closed>
	</bug>
	<bug>
		<id>5004</id>
		<title>ApplicationBrowseItemPanel - Titles for id-provider are not correct</title>
		<body>One ui-test is failed due to this issue 1. select an application with idprovider(app-auth0-idprovider) BUG:  titles are not correct ![prov](https://cloud.githubusercontent.com/assets/3728712/26441320/b1c3de80-4138-11e7-90d9-45724f6dcd65.png)  </body>
		<created>2017-05-25 07:56:00</created>
		<closed>2017-07-04 08:24:44</closed>
	</bug>
	<bug>
		<id>5003</id>
		<title>nodeService.findChildren with recursive does not work for root-path</title>
		<body>At least not in branch #4892 </body>
		<created>2017-05-24 14:29:15</created>
		<closed>2017-06-06 08:20:54</closed>
	</bug>
	<bug>
		<id>5002</id>
		<title>Keep form values when creating an issue from the "Publishing Wizard"</title>
		<body>1. Select some content items 2. Open the Publishing Wizard 3. Click "Create issue" inside the Wizard 4. Fill out title, description, select assignees 5. Click Back button to go back to the Wizard 6. Go to the "Create Issue" form again.   All the form values are lost. We should keep them. It's a typical situation when user wants to come back to the Wizard to make some changes to the list of items.  Also, the dialog title is "Create Issues". Should be "Create Issue".  ![image](https://cloud.githubusercontent.com/assets/11612490/26404916/d61037f2-4093-11e7-8908-78e65a3b9e5d.png) </body>
		<created>2017-05-24 13:13:04</created>
		<closed>2017-06-06 08:20:08</closed>
	</bug>
	<bug>
		<id>5001</id>
		<title>Can not set maximum="0" on options in option-set</title>
		<body>I'm trying to create an option-set where you should be able to select all of the available options. To make this work i have to set the options maximum attribute to the number of options or greater.  When defining occurrences for inputs we can set `maximum="0"` when we want to repeat an input infinitely, could this work the same for option-sets? If `maximum="0"` is set it should be possible to select all of the options no matter how many.  It's especially when adding more options that you can forget to update the maximum allowed options.  I can't think of a case where you would present the options but not let anyone select them, which is the what happens when `maximum="0"`.  Here you can't select anything: ```xml &lt;option-set name="options"&gt; &lt;label&gt;Options&lt;/label&gt; &lt;expanded&gt;false&lt;/expanded&gt; &lt;occurrences minimum="0" maximum="1"/&gt; &lt;help-text/&gt; &lt;options minimum="0" maximum="0"&gt; &lt;option name="option_1"&gt; &lt;label&gt;Option 1&lt;/label&gt; &lt;/option&gt; &lt;option name="option_2"&gt; &lt;label&gt;Option 2&lt;/label&gt; &lt;/option&gt; &lt;/options&gt; &lt;/option-set&gt; ```  Here you can select everything: ```xml &lt;option-set name="options"&gt; &lt;label&gt;Options&lt;/label&gt; &lt;expanded&gt;false&lt;/expanded&gt; &lt;occurrences minimum="0" maximum="1"/&gt; &lt;help-text/&gt; &lt;options minimum="0" maximum="2"&gt; &lt;option name="option_1"&gt; &lt;label&gt;Option 1&lt;/label&gt; &lt;/option&gt; &lt;option name="option_2"&gt; &lt;label&gt;Option 2&lt;/label&gt; &lt;/option&gt; &lt;/options&gt; &lt;/option-set&gt; ```</body>
		<created>2017-05-24 12:01:09</created>
		<closed>2017-06-06 08:20:10</closed>
	</bug>
	<bug>
		<id>4986</id>
		<title>Exception when two layouts were swapped in the PageComponentView </title>
		<body>1. open a site wizard 2. open the PageCompView 3. Insert  '3-col' layout and '25/75' layout 4.  swap layouts (click on the '3-col' layout and drag it down).  5. try to back the original order of layouts - click on the '3-col' layout and drag it up BUG: error in the console ![swap](https://cloud.githubusercontent.com/assets/3728712/26352626/31982000-3fc5-11e7-9177-0975fa23e4cc.png) </body>
		<created>2017-05-23 11:36:32</created>
		<closed>2017-07-04 08:26:04</closed>
	</bug>
	<bug>
		<id>4984</id>
		<title>Page Component View -Error appears in the console and layout is broken when a component was dragged out the modal dialog</title>
		<body>1. open a site, opens Page Comp View  and insert two image components 2. click on the first image, drag it out of the modal dialog and drop (let go off the mouse button) 3. move the cursor back to the dialog - the green DnD icon is visible. If you left click inside the dialog now, the error appears in the console:  ![drag1](https://cloud.githubusercontent.com/assets/3728712/26352136/26494cee-3fc3-11e7-8232-892fa96e9317.png) </body>
		<created>2017-05-23 11:22:00</created>
		<closed>2017-07-04 08:24:35</closed>
	</bug>
	<bug>
		<id>4983</id>
		<title>Disable child toggler inside issue dialog when it's in read-only mode</title>
		<body>Inside the issue dialog child toggler is always clickable, but when the dialog is in read-only mode child items won't be shown on click. Change it so that the toggler is not clickable in read-only mode.</body>
		<created>2017-05-23 10:13:20</created>
		<closed>2017-06-06 08:19:37</closed>
	</bug>
	<bug>
		<id>4982</id>
		<title>Issue List - Issue is shown on other tabs after being closed</title>
		<body>After I publish an issue with "Close issue after publish" checkbox on, I am redirected to the "Closed" tab of the Issue list - correct. But at the same time I can see the same issue on "Assigned to me" and "My issues" tab - which is not. After I reopen the dialog, everything is correct.</body>
		<created>2017-05-23 09:48:07</created>
		<closed>2017-05-24 10:16:18</closed>
	</bug>
	<bug>
		<id>4981</id>
		<title>text-components should do html-stripping</title>
		<body>We have issues with special characters not beeing searchable for text-components. Check if applying the html-stripper processor will fix this.  </body>
		<created>2017-05-23 07:56:29</created>
		<closed>2017-07-04 08:26:20</closed>
	</bug>
	<bug>
		<id>4976</id>
		<title>Details Panel - link 'Edit permissions' should not be displayed if an user has no permissions to the content</title>
		<body>Bug reproducing when there are contents that allowed for changing of permissions by the user 1. add an User 2. login with the user  3. click on the content with 'Can Write' permissions for the user and open the Details Panel    'Edit Permissions' is displayed,(Ok) 4. click on  the content with 'Can Read' 5. look at the details panel:  'Edit Permissions' is displayed, this is wrong behavior, because changing of the permissions are not allowed for this user 6. Click on 'Edit Permissions' link 7. modify permissions on the modal dialog, click on the Apply BUG: error appears in the console ![perm](https://cloud.githubusercontent.com/assets/3728712/26311624/a541f82c-3f0d-11e7-94db-18865c9421d0.png) </body>
		<created>2017-05-22 13:42:40</created>
		<closed>2017-07-04 08:21:50</closed>
	</bug>
	<bug>
		<id>4975</id>
		<title>HtmlArea - when inserted image has been removed, text is duplicated in the area</title>
		<body>It reproduced in the 6.10.3 as well.  1. open a wizard with HtmlArea 2. type a text: 'text1' 3. insert an image 4.Press the 'Delete' button on the keyboard BUG: when image has been removed, text is duplicated</body>
		<created>2017-05-22 13:31:00</created>
		<closed>2017-05-23 10:04:04</closed>
	</bug>
	<bug>
		<id>4970</id>
		<title>404 Error appears when the 'home-button' has been clicked</title>
		<body>1. open an content 2. click on the 'home button' BUG: 404 error appears.  Admin application [com.enonic.xp.app.contentstudio:content-studio] not found  ![home-b](https://cloud.githubusercontent.com/assets/3728712/26304633/d624f0fc-3ef4-11e7-8068-24f46ace274a.png) </body>
		<created>2017-05-22 10:45:00</created>
		<closed>2017-06-06 08:20:22</closed>
	</bug>
	<bug>
		<id>4965</id>
		<title>ID Provider outside Portal - Incorrect Content-Length for redirections</title>
		<body>When an ID Provider is executed outside portal (Example: /admin/tool), a redirection will return a response with a content-length &gt; 0.  </body>
		<created>2017-05-19 11:49:08</created>
		<closed>2017-07-04 08:26:18</closed>
	</bug>
	<bug>
		<id>4960</id>
		<title>Error appears in the console, when try to insert a special char into HtmlArea</title>
		<body>1. open a htmlArea content 2. open SpecialChars modal dialog BUG: error in the console ![sp](https://cloud.githubusercontent.com/assets/3728712/26202879/b25d2a06-3be1-11e7-9c25-03b18bb73539.png) </body>
		<created>2017-05-18 12:51:11</created>
		<closed>2017-05-23 10:03:55</closed>
	</bug>
	<bug>
		<id>4959</id>
		<title>Site Wizard - Image-component should not be deleted when related image was deleted</title>
		<body>This bug does not reproduced in the Edge, but reproduced in the Chrome browser 1. open a site wizard, select a page  controller 2. insert an image component(Page Component View) 3. select an image in the component and save the site 4. go to the grid and remove the image  BUG:  image-component is removed,  when the image has been removed,  expected: image selector should be present  ![edge](https://cloud.githubusercontent.com/assets/3728712/26203606/986e8e48-3be4-11e7-84d6-d9e9dcc240cf.png)  </body>
		<created>2017-05-18 12:48:12</created>
		<closed>2017-07-04 08:23:35</closed>
	</bug>
	<bug>
		<id>4957</id>
		<title>Error appears in the console when an Image has been inserted into HtmlArea</title>
		<body>1. open the features/portal-functions/process-html/page-manager/forms  htmlAre   or any HtmlArea in the Features. (or type a several rows in the empty area) 2. try to insert an image into the area BUG: error appears and modal dialog does not close ![hmlarea](https://cloud.githubusercontent.com/assets/3728712/26192638/38b59704-3bbb-11e7-8c42-a2ee3bd45951.png) </body>
		<created>2017-05-18 08:16:57</created>
		<closed>2017-05-23 10:03:59</closed>
	</bug>
	<bug>
		<id>4955</id>
		<title>ApplicationItemStatisticsPanel should be cleared when an application was uninstalled</title>
		<body>1. select  Features (not check the checkbox) 3. install new application 4. close the modal dialog BUG: Features is not selected now, but  the info still present in the ApplicationItemStatisticsPanel . And button 'Stop' ![app-grid](https://cloud.githubusercontent.com/assets/3728712/26149115/b7a3ab9c-3b01-11e7-84f0-22faab821514.png)  not available in the drop down menu as well. </body>
		<created>2017-05-17 10:07:23</created>
		<closed>2017-07-04 08:12:36</closed>
	</bug>
	<bug>
		<id>4952</id>
		<title>Border around selected page component is cut off or invisible on long pages</title>
		<body>![image](https://cloud.githubusercontent.com/assets/11612490/26106623/bc5949c8-3a46-11e7-8e6a-7d76104067df.png) </body>
		<created>2017-05-16 12:49:12</created>
		<closed>2017-05-23 10:03:44</closed>
	</bug>
	<bug>
		<id>4951</id>
		<title>Portal URL generated without branch</title>
		<body>Since #4796, some portal URL are generated without a branch when they generated in admin mode.</body>
		<created>2017-05-16 11:55:37</created>
		<closed>2017-06-26 14:28:40</closed>
	</bug>
	<bug>
		<id>4949</id>
		<title>Edge specific bug: HtmlArea, Insert Image  dialog - button insert is not available</title>
		<body>1. select a site and start to add a HtmlArea content(2 max 4) 2. click on the Insert image button on the toolbar and try to insert a pretty big image BUG: Insert Image dialog appeared, but Insert button is not available ![insert_img](https://cloud.githubusercontent.com/assets/3728712/26098535/c0473484-3a30-11e7-9c64-e04e00ee4c2b.png) </body>
		<created>2017-05-16 09:11:23</created>
		<closed>2017-09-04 06:55:49</closed>
	</bug>
	<bug>
		<id>4945</id>
		<title>Publish Wizard - incorrect tooltip for the Remove -button</title>
		<body>1. select a site with some not valid child contents 2. press the Publish button 3. move cursor to the Remove button(see on the screenshot) BUG: tooltip is 'Edit invalid content' but actually clicking on the button removes the item from the list ![tooltip](https://cloud.githubusercontent.com/assets/3728712/26095625/eedc4a50-3a26-11e7-93f2-69e73fd6df2f.png) </body>
		<created>2017-05-16 08:01:02</created>
		<closed>2017-07-04 08:24:09</closed>
	</bug>
	<bug>
		<id>4944</id>
		<title>Content type icons are not properly rendered in the Dependencies widget (only MS Edge)</title>
		<body>Icons of some content types are not properly rendered inside the Dependencies widget on MS Edge. Folders for example:  ![image](https://user-images.githubusercontent.com/11612490/30536962-36b30582-9c68-11e7-854f-607096c4db7c.png) </body>
		<created>2017-05-15 14:50:06</created>
		<closed>2017-09-21 07:24:44</closed>
	</bug>
	<bug>
		<id>4924</id>
		<title>Move dialog dropdown list doesn't expand fully if site in content studio was expanded</title>
		<body>In Latest Chrome, Firefox Appeared throughout 6.10 development, but problems reproducing. Easy to reproduce in the releases of 6.10.x.  * Go into Content Studio * Expand your site content to see all children * Click and select one of it's children * Click on the Move-button * Click the drop down arrow to the right in the Move dialog * The drop down is only one item tall * A few milliseconds later the content "jumps" (probably because it's first now that the actual site content is opened inside the dropdown), but still the height of the dropdown reminds one item tall * Close it and open it again and the height is calculated properly and the dropdown is useful again  This is how the bug looks now (on first click on the arrow button - right hand side of input field):  ![screen shot 2017-05-10 at 15 00 03](https://cloud.githubusercontent.com/assets/1465598/25899887/de66a1aa-3591-11e7-8f34-65e05a6ca8a2.png)  This is how it should be (even the first time):  ![screen shot 2017-05-10 at 15 00 09](https://cloud.githubusercontent.com/assets/1465598/25899904/ec4b3768-3591-11e7-83d3-1fc0890b6dc8.png) </body>
		<created>2017-05-10 13:04:45</created>
		<closed>2017-06-06 08:20:11</closed>
	</bug>
	<bug>
		<id>4918</id>
		<title>Issues assigned to a user don't show up on his "Assigned to me" tab in the issue list</title>
		<body>The title says it all - issues assigned to a user will never show up on the "Assigned to me" tab, basically it's always empty.</body>
		<created>2017-05-09 10:51:26</created>
		<closed>2017-05-23 10:02:31</closed>
	</bug>
	<bug>
		<id>4914</id>
		<title>Site.xml with only one input type with foldout doesn't show properly</title>
		<body>Tested in 6.9 and 6.10, both fail. Tested in Chrome and Firefox, both fail.  Add the Favicon app from market. This is an app that only has one input type in its site.xml file. This is a ImageSelctor, but the error would also occur if it was a ContentSelector or a ComboBox.  When searching, and/or, clicking the drop down arrow, the dropdown list is displayed above and behind the actual field. It is also very small, showing only half an item. I'd expect the drop down list to display over the edges of the site.xml modal so that it can be used.  See attached screenshots of the error.  &lt;img width="786" alt="screen shot 2017-05-08 at 19 43 54" src="https://cloud.githubusercontent.com/assets/1465598/25838228/60200674-3492-11e7-8ce2-185ea76a69cd.png"&gt;  ![screen shot 2017-05-09 at 08 29 52](https://cloud.githubusercontent.com/assets/1465598/25838235/68af06d2-3492-11e7-9431-ec4e136ed728.png)  </body>
		<created>2017-05-09 06:35:21</created>
		<closed>2017-06-06 08:20:20</closed>
	</bug>
	<bug>
		<id>4895</id>
		<title>Delete content with id that doesnt exists yields NPE</title>
		<body>Give nice exception instead</body>
		<created>2017-05-03 07:19:18</created>
		<closed>2017-05-09 08:31:14</closed>
	</bug>
	<bug>
		<id>4891</id>
		<title>Disable "Create Issue" button when all items are published</title>
		<body>When all of the items are published, the Create Issue button is still enabled. We should disable it.  ![image](https://cloud.githubusercontent.com/assets/11612490/25614302/b6e631ce-2f31-11e7-865c-410c6ecd5564.png) </body>
		<created>2017-05-02 10:20:16</created>
		<closed>2017-05-09 08:31:47</closed>
	</bug>
	<bug>
		<id>4884</id>
		<title>issue with custom permissions: Read permission is denied, but the content is visible</title>
		<body>1. Add an User 2. login with the SU and add a folder 3. open the folder and add custom  permissions.(see the first screenshot ![perm](https://cloud.githubusercontent.com/assets/3728712/25489866/dc136528-2b73-11e7-8de9-12889b9859b6.png)  4. login with the user ISSUE : Read permission is denied, but the content is displayed in the grid ![grid](https://cloud.githubusercontent.com/assets/3728712/25490002/3c7b0826-2b74-11e7-9a53-25bf18a13f21.png)  </body>
		<created>2017-04-27 15:06:39</created>
		<closed>2017-06-20 07:49:10</closed>
	</bug>
	<bug>
		<id>4878</id>
		<title>HTML Area won't scroll inside the Inspect panel</title>
		<body>1. Add an HTML Area to the "cities-list" part config inside the Features app. 2. Deploy the app 3. Create or edit a page inside the Features app in Content Studio 4. Drag the "Cities List" part onto the page and select it to open the Inspect panel 5. Find the HTML Area inside the config, open Source mode (icon in the bottom right corner) and paste some long HTML there 6. Close the Source mode 7. Now hover cursor over the HTML Area and try to scroll up or down. It won't scroll.  It scrolls fine when cursor is outside of the HTML Area. It also scrolls fine when the same content is pasted into HTML Area inside a text component.</body>
		<created>2017-04-27 09:03:02</created>
		<closed>2017-05-23 10:02:30</closed>
	</bug>
	<bug>
		<id>4877</id>
		<title>Fullscreen mode doesn't work for HTML Area in the Inspect panel</title>
		<body>![image](https://cloud.githubusercontent.com/assets/11612490/25475239/60d349b0-2b36-11e7-8851-aee2ea3445f7.png)  If I click on the fullscreen mode button (bottom right corner), the screen goes blank and there's no editor: ![image](https://cloud.githubusercontent.com/assets/11612490/25475272/8452af0c-2b36-11e7-946c-773384ea12c1.png)  Should work in the same way as for HTML Area inside a text component.</body>
		<created>2017-04-27 08:45:34</created>
		<closed>2017-05-09 08:31:36</closed>
	</bug>
	<bug>
		<id>4875</id>
		<title>Error "404 Not Found" appears in the new-site wizard</title>
		<body>Error :Admin application [com.enonic.xp.app.contentstudio:undefined] not found 1. press New and select 'site' BUG:  1)error appears on the wizard 2) try to add new OptionSet(Features) - see the first screenshot 3) try to add the HtmlArea content - see the second screenshot ![opt](https://cloud.githubusercontent.com/assets/3728712/25434819/82ed19c2-2a96-11e7-9919-20d756daf9f3.png) ![htmlarea](https://cloud.githubusercontent.com/assets/3728712/25435042/67d4e4ca-2a97-11e7-85bf-198352cfd32b.png)  </body>
		<created>2017-04-26 12:30:10</created>
		<closed>2017-07-04 08:25:45</closed>
	</bug>
	<bug>
		<id>4861</id>
		<title>http-client lib creates new connection-pool for each request</title>
		<body>This connection will last for a while before shutting down. This means that each http request through the http-client lib will create a new thread in the JVM. </body>
		<created>2017-04-24 14:48:36</created>
		<closed>2017-05-09 08:31:25</closed>
	</bug>
	<bug>
		<id>4855</id>
		<title>Id-filter missing default fieldName</title>
		<body>The id-filter should contain the default value for id's if none specified.</body>
		<created>2017-04-23 11:06:41</created>
		<closed>2017-04-25 07:37:40</closed>
	</bug>
	<bug>
		<id>4854</id>
		<title>query filters should does not work?</title>
		<body>ref: http://xp.readthedocs.io/en/latest/developer/search/filters/boolean.html I get a result when I should get nothing.  &lt;img width="547" alt="screen shot 2017-04-20 at 15 11 33" src="https://cloud.githubusercontent.com/assets/118847/25232562/1736278c-25dc-11e7-96d4-ecbeab8677c5.png"&gt; &lt;img width="575" alt="screen shot 2017-04-20 at 15 00 49" src="https://cloud.githubusercontent.com/assets/118847/25232563/173b861e-25dc-11e7-87ce-1ad14b812bfb.png"&gt; </body>
		<created>2017-04-20 13:15:19</created>
		<closed>2018-02-26 07:57:09</closed>
	</bug>
	<bug>
		<id>4852</id>
		<title>not able to edit content if it points to a non-existing template</title>
		<body>Post has had an issue where - somehow - the site content points to a non-existing template. Its not possible to do any changes to this content in Content Studio</body>
		<created>2017-04-20 11:03:09</created>
		<closed>2017-08-30 11:20:07</closed>
	</bug>
	<bug>
		<id>4850</id>
		<title>Keyboard selection of multiple items in the grid affects only one item</title>
		<body>When selecting several items in the Content grid and then trying to move them, only one of the selected items will be moved. Same thing with publishing and other bulk operations.</body>
		<created>2017-04-20 08:25:43</created>
		<closed>2017-04-25 07:37:31</closed>
	</bug>
	<bug>
		<id>4849</id>
		<title>Trace web filter is skipped with virtual host</title>
		<body>Requests that match with a vhost, are not handled by TraceWebFilter. This affects the live-trace app.</body>
		<created>2017-04-20 08:21:09</created>
		<closed>2017-04-25 07:37:38</closed>
	</bug>
	<bug>
		<id>4845</id>
		<title>Macro dialog is missing vertical scrollbar</title>
		<body>https://discuss.enonic.com/t/no-scrolling-on-large-macro-editor/1018</body>
		<created>2017-04-19 14:13:07</created>
		<closed>2017-04-25 07:37:24</closed>
	</bug>
	<bug>
		<id>4842</id>
		<title>Applications - App-info should be cleared when the application was uninstalled</title>
		<body>1. install the Google Analytics 2. select the application(info is shown in the statistic panel) 3. click on Uninstall button and confirm it  BUG: application is uninstalled, but the info still present on the panel ![step1](https://cloud.githubusercontent.com/assets/3728712/25177362/4110663a-250a-11e7-8350-faabdc40d2db.png)  ![result](https://cloud.githubusercontent.com/assets/3728712/25177372/514689c6-250a-11e7-9027-2ccc8e247ca8.png)  </body>
		<created>2017-04-19 11:13:19</created>
		<closed>2017-05-23 10:02:22</closed>
	</bug>
	<bug>
		<id>4841</id>
		<title>OptionSet -Error appears when an option contains occurrences of htmlArea</title>
		<body>1. start to add a OptionSet content. 2 or more options should be in the Set. And one of the options should be with occurrences of HtmlArea for example: option set-&gt;options-&gt;option-&gt;items-&gt;htmlArea(0:2) 2. open the option and add one more HtmlArea(see the first screenshot) 3. save the  content and click on another option.  BUG: error appears in the browser console and first option has not cleared PropertyPath.ts:41 Uncaught Error: Path element was empty string at index: 4     at http://localhost:8080/admin/assets/1492587651286/common/js/_all.js:8669:31     at Array.forEach (native)     at new PropertyPath (http://localhost:8080/admin/assets/1492587651286/common/js/_all.js:8664:26)     at Function.PropertyPath.fromParent (http://localhost:8080/admin/assets/1492587651286/common/js/_all.js:8688:24)     at PropertyArray.remove (http://localhost:8080/admin/assets/1492587651286/common/js/_all.js:9417:43)     at InputOccurrences.FormItemOccurrences.removeOccurrenceView (http://localhost:8080/admin/assets/1492587651286/common/js/_all.js:37950:36)     at InputOccurrences.FormItemOccurrences.update (http://localhost:8080/admin/assets/1492587651286/common/js/_all.js:37845:30)     at HtmlArea.BaseInputTypeNotManagingAdd.update (http://localhost:8080/admin/assets/1492587651286/common/js/_all.js:41752:54)     at InputView.update (http://localhost:8080/admin/assets/1492587651286/common/js/_all.js:40485:43)     at http://localhost:8080/admin/assets/1492587651286/common/js/_all.js:40335:54 ![step1](https://cloud.githubusercontent.com/assets/3728712/25174724/f0ab55a0-2500-11e7-8af5-07e69dc4034d.png) ![opt1](https://cloud.githubusercontent.com/assets/3728712/25174767/0ca462f6-2501-11e7-8446-d3842e62af97.png)    </body>
		<created>2017-04-19 10:07:03</created>
		<closed>2017-06-06 08:20:47</closed>
	</bug>
	<bug>
		<id>4839</id>
		<title>Missing request path property in tracing info</title>
		<body>Some of the requests (images, components, controller mappings) do not include the request URL path in the tracing info. This is because in some cases it gets overridden by a "path" property with the Content path. This should be fixed so that it does not break the live-trace app.</body>
		<created>2017-04-18 13:30:58</created>
		<closed>2017-04-25 07:37:33</closed>
	</bug>
	<bug>
		<id>4838</id>
		<title>Applications - Installation from Market - 6.10.0 applications not listed</title>
		<body>Since latest fix of the market app, the behaviour is a bit different now: 6.10.0 applications are not listed in 6.9 (which is nice) but there are not listed in 6.10 too :(  I guess it is a market issue again, but I guess 6.10 should not be released before this is fixed</body>
		<created>2017-04-18 13:23:30</created>
		<closed>2017-04-18 17:44:02</closed>
	</bug>
	<bug>
		<id>4834</id>
		<title>Fields overflow the "New issue" dialog</title>
		<body>Bug #1 ![image](https://cloud.githubusercontent.com/assets/11612490/25129817/f574e14e-243f-11e7-87b5-9baf154e59c6.png)  Happens only the first time this dialog opens.  Bug #2   Current user should not be listed as approver in the dropdown</body>
		<created>2017-04-18 12:04:31</created>
		<closed>2017-05-09 08:31:48</closed>
	</bug>
	<bug>
		<id>4832</id>
		<title>Search for special characters in HTML areas</title>
		<body> for HTML areas, special characters are stored using their HTML entity name. For example, “regnskapsførere" is stored and indexed as "regnskapsf&amp;oslash;rere".  Add a new IndexValueProcessors that unescape HTML characters and execute it in IndexConfigVisitor</body>
		<created>2017-04-18 11:16:13</created>
		<closed>2017-04-25 07:37:34</closed>
	</bug>
	<bug>
		<id>4830</id>
		<title>Incorrect validation of OptionSet-content in the grid</title>
		<body>-This bug reproduced, when there is the next level of nesting of OptionSet: content-type-&gt;mixin-&gt;item-set-&gt;item-set-&gt;option-set-&gt;mixin-&gt;option-set  1. Open the wizard and type a display name and save it  2. required inputs are empty, so the content is not valid(in the wizard) BUG: navigate to the grid, the content is valid ![grid](https://cloud.githubusercontent.com/assets/3728712/25121626/f4280f6a-242a-11e7-8cb0-f765cc5c1e7f.png) ![wiz](https://cloud.githubusercontent.com/assets/3728712/25121631/f7f4bad0-242a-11e7-878a-0b8b81bfe6c9.png)  </body>
		<created>2017-04-18 08:34:32</created>
		<closed>2017-07-04 08:24:06</closed>
	</bug>
	<bug>
		<id>4827</id>
		<title>Incorrect notification message when trying to create a userstore or a role with existing name</title>
		<body>1. Create a User Store with the name 'store1' 2. try to create one more store with the same name BUG: incorrect notification message appears ![notif](https://cloud.githubusercontent.com/assets/3728712/25046073/07be0854-2138-11e7-96f6-0934b42b62f1.png) </body>
		<created>2017-04-14 14:31:32</created>
		<closed>2017-07-04 08:12:15</closed>
	</bug>
	<bug>
		<id>4825</id>
		<title>ImageSelector wizard - page is not refreshed when selected image was changed in the new wizard-tab </title>
		<body>1. Start to add an ImageSelector content 2. select an image and click on it('edit' button is getting displayed) 3. click on the Edit button and change the image-content(upload another image) and save it 4. switch to the  ImageSelector content again BUG: the previous image still displayed on the  ImageSelector -wizard when the wizard page has been refreshed, new image is displaed</body>
		<created>2017-04-14 12:20:17</created>
		<closed>2017-05-23 10:02:21</closed>
	</bug>
	<bug>
		<id>4824</id>
		<title>ImageSelector content - errors in the console appear when selected images were moved</title>
		<body>1. Select Features and start to add ImageSelector content 2. go to 2-4 Image selector and insert two images  3. click on any image (Edit, Remove buttons appear) 3. Dragging one of the images image onto a place  bellow the Edit and Remove buttons 4. clicking on images again  BUG: error in the console appears:  PropertyArray.ts:119 Uncaught Error: Index out of bounds: index: 3, size: 2     at PropertyArray.checkIndex (http://localhost:8080/admin/assets/1492070027416/common/js/_all.js:9341:27)     at PropertyArray.set (http://localhost:8080/admin/assets/1492070027416/common/js/_all.js:9386:22)     at http://localhost:8080/admin/assets/1492070027416/common/js/_all.js:67314:58     at http://localhost:8080/admin/assets/1492070027416/common/js/_all.js:29495:29     at Array.forEach (native)     at ImageSelectorSelectedOptionsView.BaseSelectedOptionsView.notifyOptionMoved (http://localhost:8080/admin/assets/1492070027416/common/js/_all.js:29494:51)     at http://localhost:8080/admin/assets/1492070027416/common/js/_all.js:29371:39     at Array.forEach (native)     at ImageSelectorSelectedOptionsView.BaseSelectedOptionsView.handleMovedOccurrence (http://localhost:8080/admin/assets/1492070027416/common/js/_all.js:29369:51)     at ImageSelectorSelectedOptionsView.BaseSelectedOptionsView.handleDnDUpdate (http://localhost:8080/admin/assets/1492070027416/common/js/_all.js:29359:34)  ![img-sel](https://cloud.githubusercontent.com/assets/3728712/25042187/ad896914-211e-11e7-9022-300de6d97d30.png)  ﻿  ​</body>
		<created>2017-04-14 11:29:07</created>
		<closed>2017-04-25 07:37:32</closed>
	</bug>
	<bug>
		<id>4823</id>
		<title>InsertImage dialog - Errors in console when try to upload a svg file</title>
		<body>1. select features and open wizard for  HtmlArea Content 2. click on area and press AddImage 3. try upload 'application.svg' (it it features) BUG: error appears in console, see the screenshot ![area](https://cloud.githubusercontent.com/assets/3728712/25011049/af26f958-2074-11e7-994a-5e0929b2234c.png)     </body>
		<created>2017-04-13 15:12:14</created>
		<closed>2017-04-25 07:37:23</closed>
	</bug>
	<bug>
		<id>4821</id>
		<title>Set in Set content- when ImageSelector is present in the content, button 'Edit' does not open the Image</title>
		<body>1. open the Set in Set content type in the Features 2. Insert ImageSelector to the nested Set 3. redeploy the application 4. start to add a Set in Set content 5. insert or select an Image and click on it BUG: when the image  is selected, button Edit does not open the image(there are no errors in console)  Part2 This issue reproducing when a content type using mixin with ImageSelector  ![edit](https://cloud.githubusercontent.com/assets/3728712/25009054/121c2b5c-206e-11e7-97e3-e609c6880f73.png)  </body>
		<created>2017-04-13 14:24:41</created>
		<closed>2017-06-06 08:37:29</closed>
	</bug>
	<bug>
		<id>4820</id>
		<title>Impossible to upload image in a page template </title>
		<body>Part1 1. Open a template. 2. Open the Page component View and insert Image component 3. press the Upload button and try upload an image  Part2 1. configure a template with ImageSelector   add the " x-data mixin="select-image"  in site.xml 2. open the  template 3. navigate to Selected Image step in the wizard 4. try to upload an image, press the 'Upload' button BUG:  Exception thrown in the server.log and notification warning appears Expected: Upload button should be disabled? ![templ](https://cloud.githubusercontent.com/assets/3728712/25006821/0fc50cd6-2067-11e7-94db-a5b0cd14e933.png) </body>
		<created>2017-04-13 13:35:00</created>
		<closed>2017-05-09 08:31:11</closed>
	</bug>
	<bug>
		<id>4819</id>
		<title>Selected options under Custom Selector should not have Edit icon</title>
		<body>1. select Features and press 'new' button 2. select 'Custom Selector' or Color Picker 3. select an option BUG: edit button is present in the selected option-view. When it is clicked, nothing happens ![custom](https://cloud.githubusercontent.com/assets/3728712/25006060/21f6d798-2064-11e7-9194-77255a882266.png)  </body>
		<created>2017-04-13 13:13:56</created>
		<closed>2017-04-25 07:37:21</closed>
	</bug>
	<bug>
		<id>4817</id>
		<title>Publish Dialog - Remove icon should not be disabled when more than one item selected</title>
		<body>"x" icons look disabled but they are clickable. We should disable the "x" icon only when one item is selected.  ![image](https://cloud.githubusercontent.com/assets/11612490/25003821/8fcd57aa-2051-11e7-94c8-e6563ab54f78.png) </body>
		<created>2017-04-13 12:01:44</created>
		<closed>2017-04-25 07:37:24</closed>
	</bug>
	<bug>
		<id>4815</id>
		<title>Button 'Move' should be disabled when all contents are selcted</title>
		<body>1. select all contents BUG: button Move should be disabled ![move](https://cloud.githubusercontent.com/assets/3728712/24960575/dd4fa7fc-1f9e-11e7-9873-9a95de6749c1.png)  </body>
		<created>2017-04-12 13:41:29</created>
		<closed>2017-05-23 10:03:32</closed>
	</bug>
	<bug>
		<id>4814</id>
		<title>Nested OptionSet -  Broken border in the form when 'ImageSelector' is present in options</title>
		<body>This bug reproducing when the OptionSet is nested in the parent 'option set' option-set-&gt;option-set-&gt;imageSelector  1. click on the drop down handler in the imageSelector 2. close the drop down list BUG: border is broken, this issue can be linked to #4813 ![opt1](https://cloud.githubusercontent.com/assets/3728712/24960389/5269b862-1f9e-11e7-90d8-b7ed68d15c0c.png) </body>
		<created>2017-04-12 13:39:44</created>
		<closed>2017-07-04 08:22:27</closed>
	</bug>
	<bug>
		<id>4813</id>
		<title>OptionSet -Error appears when 'upload' button in the ImageSelector was pressed</title>
		<body>-This bug reproduced, when there is the next level of nesting of OptionSet: content-type-&gt;mixin-&gt;item-set-&gt;item-set-&gt;option-set-&gt;mixin-&gt;option-set-&gt;input[type=ImageSelector] -Probably, the cause of this issue the mixin inside of optionset: inline mixin="freeform-input-types"  this mixin contains an ImageSelector. Error does not appear when the mixin replaced with ImageSelector   -The similar issue when AttachmentUploader present in the nested optionSet  1. create two  mixins with name freeform and freeform-input-types 2. create a content type 'FreeForm' 3. start to create a content with type 4. click on the image radio button and try to upload an image BUG: Upload dialog does not appear , error in the console Uncaught TypeError: Cannot read property 'getInputButton' of undefined     at ImageUploaderEl.UploaderEl.showFileSelectionDialog (_all.js:20191)     at HTMLDivElement.&lt;anonymous&gt; (_all.js:19653)</body>
		<created>2017-04-12 11:43:35</created>
		<closed>2017-04-25 07:37:22</closed>
	</bug>
	<bug>
		<id>4812</id>
		<title>ContentWizard/Inspect panel - Part with attachment uploader is not saved with Apply button </title>
		<body>When a part has an input of type AttachmentUploader with a file attached to it, it won't be saved with Apply button.  Steps to reproduce: 1. Create a simple part with a text input and an attachment uploader (see below) 2. Drag this part onto a page 3. Upload a file into the attachment uploader (content will be saved) 4. Put some text into the text box 5. Click "Apply"  The content is supposed to be saved, but it won't (no errors either).   ```xml &lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt; &lt;part&gt;   &lt;display-name&gt;My part&lt;/display-name&gt;   &lt;config&gt;     &lt;input type="TextLine" name="title"&gt;       &lt;label&gt;Title text&lt;/label&gt;       &lt;occurrences minimum="1" maximum="1"/&gt;     &lt;/input&gt;     &lt;input type="AttachmentUploader" name="uploader"&gt;       &lt;label&gt;My Label&lt;/label&gt;       &lt;occurrences minimum="0" maximum="0"/&gt;     &lt;/input&gt;   &lt;/config&gt; &lt;/part&gt; ```</body>
		<created>2017-04-12 08:57:59</created>
		<closed>2017-04-25 07:37:30</closed>
	</bug>
	<bug>
		<id>4809</id>
		<title>The Wizard page is blank for a new folder</title>
		<body>1. Press the New button and select folder or shortcut BUG: blank page is opened in the new tab</body>
		<created>2017-04-12 08:04:07</created>
		<closed>2017-04-12 08:28:09</closed>
	</bug>
	<bug>
		<id>4802</id>
		<title>BodyMask is not hidden, when dragged content was published</title>
		<body>1. press the 'New' button and  try to upload an image in root 2. when Upload Dialog is opened, drag an image and drop  the image on the drop-zone 3. The image is uploaded, but  Upload Dialog still opened. Do double click on the another image and upload it  4. select the second uploaded image and publish it BUG: Publish Wizard was closed, but 'BodyMask' still displayed and whole grid is disabled </body>
		<created>2017-04-10 11:48:32</created>
		<closed>2017-04-11 11:40:51</closed>
	</bug>
	<bug>
		<id>4795</id>
		<title>Error appears in the browser console when wizard for new folder is opened</title>
		<body>1. Press New and open the Folder-wizard BUG:  1. error appears in the console 2. When close button pressed , alert does not appear and typed  data will be lost ![wizard](https://cloud.githubusercontent.com/assets/3728712/24804184/50d6e650-1bb6-11e7-8566-a51a8c14ebab.png)   _all.js:2935 TypeError: Cannot read property 'isPendingDelete' of undefined     at ContentWizardToolbarPublishControls.isPendingDelete (http://localhost:8080/admin/assets/6.10.0-RC1/apps/content-studio/js/_all.js:17277:29)     at ContentWizardPanel.checkContentCanBePublished (http://localhost:8080/admin/assets/6.10.0-RC1/apps/content-studio/js/_all.js:11343:60)     at WizardValidityManager.&lt;anonymous&gt; (http://localhost:8080/admin/assets/6.10.0-RC1/apps/content-studio/js/_all.js:10408:96)     at http://localhost:8080/admin/assets/6.10.0-RC1/common/js/_all.js:75071:34     at Array.forEach (native)     at WizardValidityManager.notifyValidityChanged (http://localhost:8080/admin/assets/6.10.0-RC1/common/js/_all.js:75070:51)     at ContentWizardPanel.WizardPanel.notifyValidityChanged (http://localhost:8080/admin/assets/6.10.0-RC1/common/js/_all.js:74909:42)     at http://localhost:8080/admin/assets/6.10.0-RC1/common/js/_all.js:74531:31     at http://localhost:8080/admin/assets/6.10.0-RC1/common/js/_all.js:5289:21     at Array.forEach (native) From previous event:     at Panel.Element.initChildren (http://localhost:8080/admin/assets/6.10.0-RC1/common/js/_all.js:4751:48)     at http://localhost:8080/admin/assets/6.10.0-RC1/common/js/_all.js:4736:34</body>
		<created>2017-04-07 14:19:42</created>
		<closed>2017-04-12 07:41:04</closed>
	</bug>
	<bug>
		<id>4792</id>
		<title>Applications -  applications not filtered, when one or more applications were checked and 'Show Selection' has been pressed</title>
		<body>1. open Applications 2. click checkbox and select several applications  3. click on show selections 'circle' BUG: applications are not filtered ![app](https://cloud.githubusercontent.com/assets/3728712/24792575/4e0fb2c8-1b87-11e7-8aed-99de3ff5c6a8.png) </body>
		<created>2017-04-07 08:42:50</created>
		<closed>2017-04-11 11:40:20</closed>
	</bug>
	<bug>
		<id>4791</id>
		<title>Users App grid is empty in "Show selection" mode</title>
		<body>1. Open Users 2. click checkbox and select Roles or  Groups or  System User store 3. click on the 'Show Selections' BUG: grid is getting empty ![sel](https://cloud.githubusercontent.com/assets/3728712/24792388/68286016-1b86-11e7-8e82-f510c3e14095.png) </body>
		<created>2017-04-07 08:36:19</created>
		<closed>2017-04-12 07:41:08</closed>
	</bug>
	<bug>
		<id>4786</id>
		<title>Path-search in selectors doesnt work</title>
		<body>![screen shot 2017-04-06 at 14 46 44](https://cloud.githubusercontent.com/assets/356026/24754739/f6f1163a-1ad7-11e7-854b-1b8d7be73644.png)  ![screen shot 2017-04-06 at 14 47 44](https://cloud.githubusercontent.com/assets/356026/24754759/0376d25a-1ad8-11e7-9f46-3eb4e6ad1fa5.png)  The contents with path /superhero/post* should match </body>
		<created>2017-04-06 12:49:04</created>
		<closed>2017-04-11 11:37:07</closed>
	</bug>
	<bug>
		<id>4768</id>
		<title>Attempt to create a fragment in the page-template wizard throws an exception</title>
		<body>1. open a site, select Features in application selector 2. start to ad a new page-template, select the page controller 3. open the Page Component View and insert a Image 4. select the image and try to create a fragment BUG: Exception is thrown:  java.lang.IllegalArgumentException: Content could not be created. Children not allowed in parent [/site1/_templates/__unnamed__]         at com.enonic.xp.core.impl.content.CreateContentCommand.validateCreationAllowance(CreateContentCommand.java:216) ~[na:na]         at com.enonic.xp.core.impl.content.CreateContentCommand.validateBlockingChecks(CreateContentCommand.java:121) ~[na:na]         at com.enonic.xp.core.impl.content.CreateContentCommand.doExecute(CreateContentCommand.java:83) ~[na:na]         at com.enonic.xp.core.impl.content.CreateContentCommand.execute(CreateContentCommand.java:78) ~[na:na]         at com.enonic.xp.core.impl.content.ContentServiceImpl.create(ContentServiceImpl.java:234) ~[na:na]         at com.enonic.xp.core.impl.content.page.region.CreateFragmentCommand.execute(CreateFragmentCommand.java:60) ~[na</body>
		<created>2017-04-03 13:07:55</created>
		<closed>2017-04-11 11:40:17</closed>
	</bug>
	<bug>
		<id>4765</id>
		<title>Fragment Wizard - Wizard is not updated when related image was updated or changed</title>
		<body>1 Open a site and opemt the Page Component View. 2. insert an image and create a fragment from it 3. Navigate to Fragment-Wizard and click on the 'Edit' button  on the Inspect Panel 4. upload another image in the Image-wizard and press 'Save Draft' button 5. navigate to the fragment wizard BUG: new image was uploaded on the Image-wizard, but changes was not updated on the Fragment-wizard ![fr](https://cloud.githubusercontent.com/assets/3728712/24609963/8077bdb4-1885-11e7-925d-e1ab8b40f517.png)  </body>
		<created>2017-04-03 12:52:29</created>
		<closed>2017-04-25 07:37:25</closed>
	</bug>
	<bug>
		<id>4764</id>
		<title>Page Component View - Fragment's display name disappears after content was saved</title>
		<body>1. open a site , open the Page Component View and insert an image 2. select the image in the View and create a fragment from it (see the first screenshot) 3. press the 'Save draft'  button BUG display name is getting '&lt;Display Name&gt;'  see the second screenshot   ![step1](https://cloud.githubusercontent.com/assets/3728712/24609377/47dcfb42-1883-11e7-8b65-5f3e3794c0b4.png) ![step2](https://cloud.githubusercontent.com/assets/3728712/24609381/4af62934-1883-11e7-8ebd-f587bfa58447.png) </body>
		<created>2017-04-03 12:42:12</created>
		<closed>2017-04-11 11:40:04</closed>
	</bug>
	<bug>
		<id>4756</id>
		<title>remove setter setAggregations( final Map&lt;String, Object&gt; aggregations ) in node.js</title>
		<body>This causes trouble if value passed is null</body>
		<created>2017-03-31 14:08:25</created>
		<closed>2017-04-11 11:39:54</closed>
	</bug>
	<bug>
		<id>4755</id>
		<title>Content Wizard - 'Security Step' is not shown for users with read-only permissions</title>
		<body>1. Add an user and with roles : Content Manager App and Administration Console Login 2. add a folder and  set Permissions for the User:  'allow to Read permissions' and 'do not allow Write Permissions' see the first screenshot 3. login with the user and open the folder BUG: Security Step is not displayed despite of 'read permissions', see the second screenshot ![perm](https://cloud.githubusercontent.com/assets/3728712/24552493/5a6f9d6a-162f-11e7-8b0e-3bc5df13789e.png)  is allowed  ![perm2](https://cloud.githubusercontent.com/assets/3728712/24552510/65df07ee-162f-11e7-9266-af8e3a980933.png) </body>
		<created>2017-03-31 13:30:51</created>
		<closed>2017-04-11 11:40:49</closed>
	</bug>
	<bug>
		<id>4754</id>
		<title>FF specific issue: content wizard does not always open, endless spinner is displayed </title>
		<body>1. open XP in FF and select a folder 2. click on the Edit button BUG: wizard is not loaded, endless spinner displayed  TypeError: _this.formMask is undefined Stack trace: WizardPanel.prototype.doRenderOnDataLoaded/&lt;@http://localhost:8080/admin/assets/1490949765393/common/js/_all.js:74381:25 Element.prototype.notifyRendered/&lt;@http://localhost:8080/admin/assets/1490949765393/common/js/_all.js:5289:21 Element.prototype.notifyRendered@http://localhost:8080/admin/assets/1490949765393/common/js/_all.js:5288:17 Element.prototype.initChildren/&lt;@http://localhost:8080/admin/assets/1490949765393/common/js/_all.js:4764:25 _fulfilled@http://localhost:8080/admin/assets/1490949765393/common/lib/_all.js:32883:54 Promise.prototype.then/&lt;/&lt;@http://localhost:8080/admin/assets/1490949765393/common/lib/_all.js:32912:30 Promise/promise.promiseDispatch@http://localhost:8080/admin/assets/1490949765393/common/lib/_all.js:32845:13 become/&lt;/&lt;@http://localhost:8080/admin/assets/1490949765393/common/lib/_all.js:32653:17 flush@http://localhost:8080/admin/assets/1490949765393/common/lib/_all.js:32204:17 From previous event: Promise.prototype.then@http://localhost:8080/admin/assets/1490949765393/common/lib/_all.js:32877:20 Element.prototype.initChildren@http://localhost:8080/admin/assets/1490949765393/common/js/_all.js:4751:24 Element.prototype.init/&lt;@http://localhost:8080/admin/assets/1490949765393/common/js/_all.js:4736:28 _fulfilled@http://localhost:8080/admin/assets/1490949765393/common/lib/_all.js:32883:54 Promise.prototype.then/&lt;/&lt;@http://localhost:8080/admin/assets/1490949765393/common/lib/_all.js:32912:30 Promise/promise.promiseDispatch@http://localhost:8080/admin/assets/1490949765393/common/lib/_all.js:32845:13 defer/promise.promiseDispatch/&lt;@http://localhost:8080/admin/assets/1490949765393/common/lib/_all.js:32605:17 flush@http://localhost:8080/admin/assets/1490949765393/common/lib/_all.js:32204:17</body>
		<created>2017-03-31 13:05:49</created>
		<closed>2017-06-20 09:07:26</closed>
	</bug>
	<bug>
		<id>4753</id>
		<title>Problem with opening of ItemSet content, when AttachmentUploader is present in the set</title>
		<body>1. add a content-type  with type 'ItemSet'  Bug reproducing when the ItemSet has a 'AttachmentUploader'.  [item-set.txt](https://github.com/enonic/xp/files/885257/item-set.txt)   2. start to add new content with the described type. Type a name, press the 'Add Attachment'  3. save the content and close the wizard 4. try to open the just created content BUG: endless spinner is displayed on the wizard page There are no problems with opening of content with type AttachmentUploader, bug reproducing only if AttachmentUploader located inside of the ItemSet   Error: Must be overridden by inheritor: AttachmentUploader     at AttachmentUploader.BaseInputTypeManagingAdd.giveFocus (http://localhost:8080/admin/assets/1490949765393/common/js/_all.js:41964:31)     at InputView.giveFocus (http://localhost:8080/admin/assets/1490949765393/common/js/_all.js:40485:43)     at http://localhost:8080/admin/assets/1490949765393/common/js/_all.js:38594:53     at Array.forEach (native)     at FormItemSetOccurrenceView.FormSetOccurrenceView.giveFocus (http://localhost:8080/admin/assets/1490949765393/common/js/_all.js:38593:41)     at http://localhost:8080/admin/assets/1490949765393/common/js/_all.js:37852:36 From previous event:     at FormItemSetOccurrences.FormItemOccurrences.addOccurrence (http://localhost:8080/admin/assets/1490949765393/common/js/_all.js:37849:56)     at FormItemSetOccurrences.FormItemOccurrences.createAndAddOccurrence (http://localhost:8080/admin/assets/1490949765393/common/js/_all.js:37823:29)     at http://localhost:8080/admin/assets/1490949765393/common/js/_all.js:37792:45     at http://localhost:8080/admin/assets/1490949765393/common/js/_all.js:9294:21     at Array.forEach (native)     at PropertyArray.forEach (http://localhost:8080/admin/assets/1490949765393/common/js/_all.js:9293:28)     at FormItemSetOccurrences.FormItemOccurrences.update (http://localhost:8080/admin/assets/1490949765393/common/js/_all.js:37782:36)     at FormItemSetView.FormSetView.update (http://localhost:8080/admin/assets/1490949765393/common/js/_all.js:38332:49)</body>
		<created>2017-03-31 10:09:11</created>
		<closed>2017-04-11 11:39:34</closed>
	</bug>
	<bug>
		<id>4752</id>
		<title>Edit Permissions Dialog shows incorrect content name</title>
		<body>1. start to add a content, open wizard and type a name 2. click on the Save button in the wizard 3.press the 'Edit Permissions' button  BUG: incorrect name is displayed on the dialog ![unnamed](https://cloud.githubusercontent.com/assets/3728712/24543789/8fe039bc-1609-11e7-8d72-23d82bee17f6.png) </body>
		<created>2017-03-31 09:00:12</created>
		<closed>2017-04-11 11:40:01</closed>
	</bug>
	<bug>
		<id>4748</id>
		<title>Attachmentuploader in part config creates error message when "upload" button is clicked</title>
		<body>```xml &lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt; &lt;part&gt;   &lt;display-name&gt;Video&lt;/display-name&gt;   &lt;config&gt;     &lt;input type="TextLine" name="title"&gt;       &lt;label&gt;Title&lt;/label&gt;       &lt;occurrences minimum="1" maximum="1"/&gt;       &lt;default&gt;Record your games while you play&lt;/default&gt;     &lt;/input&gt;     &lt;input type="TextLine" name="buttonText"&gt;       &lt;label&gt;Button text&lt;/label&gt;       &lt;occurrences minimum="1" maximum="1"/&gt;       &lt;default&gt;Sign up now&lt;/default&gt;     &lt;/input&gt;     &lt;input type="AttachmentUploader" name="video"&gt;       &lt;label&gt;Video&lt;/label&gt;       &lt;occurrences minimum="1" maximum="1"/&gt;     &lt;/input&gt;   &lt;/config&gt; &lt;/part&gt; ```  ``` Uncaught TypeError: Cannot read property 'getInputButton' of undefined     at AttachmentUploaderEl.UploaderEl.showFileSelectionDialog (_all.js:19955)     at HTMLButtonElement.&lt;anonymous&gt; (_all.js:62801) UploaderEl.showFileSelectionDialog @ _all.js:19955 (anonymous) @ _all.js:62801 ```  </body>
		<created>2017-03-30 11:59:57</created>
		<closed>2017-04-11 11:39:21</closed>
	</bug>
	<bug>
		<id>4746</id>
		<title>Content Mapper - Missing attribute</title>
		<body>"Owner" is not mapped in the content mapper.  Check also that all properties listed there are present: http://xp.readthedocs.io/en/stable/developer/site/content-types/content-anatomy.html?highlight=owner</body>
		<created>2017-03-30 11:28:27</created>
		<closed>2017-04-11 11:39:59</closed>
	</bug>
	<bug>
		<id>4745</id>
		<title>Page Template Wizard - 'Edit' icon for the content type selector must be hidden</title>
		<body>1. open the default page template (features) 2. click on the 'edit the landing page' Bug - nothing happened when the button was clicked ![templ](https://cloud.githubusercontent.com/assets/3728712/24499191/82fa02de-1549-11e7-9145-b52b0d554c90.png)  </body>
		<created>2017-03-30 10:06:19</created>
		<closed>2017-04-11 11:40:02</closed>
	</bug>
	<bug>
		<id>4739</id>
		<title>Publish wizard - Hide offline dependencies when "Include offline" checkbox is unchecked</title>
		<body>1. Select Features (make sure everything is in "New" status) 2. Click "Publish". Two dependencies with "New" status are shown (template and template's folder). 3. Publish the entire site 4. Unpublish the entire site. Everything is in "Offline" status now. 5. Select Features and click "Publish" again 6. The same two dependencies are visible but they shouldn't be since they are offline and "Include offline" checkbox is off.  ![image](https://cloud.githubusercontent.com/assets/11612490/24493257/89d06ece-152e-11e7-8388-53e46426528e.png) </body>
		<created>2017-03-30 07:53:15</created>
		<closed>2017-04-05 12:10:45</closed>
	</bug>
	<bug>
		<id>4738</id>
		<title>toolbox init-project does not resolve branch only tag</title>
		<body>FAIL: ``` cwe@enonic:e (DEV) $ toolbox.sh init-project -d app-grid -n com.enonic.app.grid -r starter-babel -c liveReload Retrieving Git repository from "https://github.com/enonic/starter-babel.git" ... Unexpected error: Ref liveReload can not be resolved org.eclipse.jgit.api.errors.RefNotFoundException: Ref liveReload can not be resolved at org.eclipse.jgit.api.CheckoutCommand.call(CheckoutCommand.java:243) at com.enonic.xp.toolbox.app.InitAppCommand.cloneGitRepository(InitAppCommand.java:110) at com.enonic.xp.toolbox.app.InitAppCommand.execute(InitAppCommand.java:66) at com.enonic.xp.toolbox.ToolCommand.run(ToolCommand.java:13) at com.enonic.xp.toolbox.Main.main(Main.java:50) ```  SUCCESS: ``` cwe@enonic:e (DEV) $ toolbox.sh init-project -d app-grid -n com.enonic.app.grid -r starter-babel -c test-init-project-from-tag Retrieving Git repository from "https://github.com/enonic/starter-babel.git" ... Git repository retrieved. Adapting Gradle properties file ... Gradle properties file adapted. ```</body>
		<created>2017-03-30 07:44:26</created>
		<closed>2020-07-16 19:46:23</closed>
	</bug>
	<bug>
		<id>4737</id>
		<title>Application import fails with NP</title>
		<body></body>
		<created>2017-03-30 07:01:11</created>
		<closed>2017-04-11 11:36:45</closed>
	</bug>
	<bug>
		<id>4736</id>
		<title>Selected item is not correctly displayed on the ContentItemPreviewPanel </title>
		<body>1. click on the checkbox and select an Image or SVG file BUG: selected image is not displayed on the PreviewPanel(see the first screenshot) ![svg](https://cloud.githubusercontent.com/assets/3728712/24449092/f9fc1abe-147e-11e7-9bef-6a5e85f9d065.png)  When click on several rows with images,(not checkbox)  image appears in the panel, but sometimes it displayed not correct(see the second screenshot)   ![preview](https://cloud.githubusercontent.com/assets/3728712/24449100/feb1270c-147e-11e7-8ffd-1d03787adebd.png) </body>
		<created>2017-03-29 09:55:39</created>
		<closed>2017-04-11 11:39:37</closed>
	</bug>
	<bug>
		<id>4734</id>
		<title>Auth login should attempt to authenticate with user stores in alphabetical order</title>
		<body>The `login()` function of auth-lib specifies for the userStore parameter:  &gt; userStore: "Name of user-store where the user is stored. If not specified it will try all available user-stores in order."  But it does not enforce any order. They are attempted in the random order they come from the Node query. Sort the user stores alphabetically by name, before attempting the login in sequence. </body>
		<created>2017-03-29 08:58:29</created>
		<closed>2017-04-11 11:39:24</closed>
	</bug>
	<bug>
		<id>4731</id>
		<title>Publish Wizard - Don't allow excluding child content of 'Deleted' items</title>
		<body>1. Given: existing parent and child folders are 'Deleted' 2. select the parent and press the Publish button BUG: button 'remove' for the child should be disabled. see the screenshot ![undo](https://cloud.githubusercontent.com/assets/3728712/24409221/42b79b54-13d8-11e7-9f70-3e7a26e75002.png) </body>
		<created>2017-03-28 14:02:19</created>
		<closed>2017-04-11 11:40:06</closed>
	</bug>
	<bug>
		<id>4730</id>
		<title>Controller mapping is not triggered for preview when the content has no matching page template for the content type</title>
		<body>[UPDATE] The problem seems to be that site mapping is not triggered when the selected content has no matching page template for the contenttype. In the examples below, the freeform contenttype have no default page template. Is this expected behavior? [UPDATE END]  I cannot get pattern or match to work for contenttype that is included through a lib. For example the pattern /.*test.* matches the path for a landing-page that is inside my app, but not the path for my contenttype that is a incuded in my app through a library.   ![screen shot 2017-03-28 at 14 43 53](https://cloud.githubusercontent.com/assets/951293/24407648/d55ce8ea-13cb-11e7-9cde-b847fdb298dc.png)  Example: The mapping below matches the 'landing-page' content with path 'test-landing-page', but not the 'freeform' content with path 'test-freeform':  `&lt;mapping controller="/site/controllers/freeform.js" order="1"&gt;             &lt;pattern&gt;/.*test.*&lt;/pattern&gt; &lt;/mapping&gt;`  Also I have tested with using match, and here I can also only match on contenttype inside app, but not contenttype included through a lib. `&lt;match&gt;type:'.*:landing-page'&lt;/match&gt;` matches all landing-page content, but `&lt;match&gt;type:'.*:freeform'&lt;/match&gt;` does not match the freeform content that has the contenttype inside the included library.  In the screenshot below you can se the layout of my test case. app-delphi is the app that contains the site specific code. I have a library openxp.lib.freeform that contains the contenttype openxp.lib.freeform:freeform and a separate app openxp.app.freeform-bootstrap that includes a site.xml with mappings to add a default rendering of the contenttype openxp.app.freeform:freeform.  ![screen shot 2017-03-28 at 15 17 42](https://cloud.githubusercontent.com/assets/951293/24407116/480cdb22-13ca-11e7-8ee4-08f53be1f7af.png)  </body>
		<created>2017-03-28 13:37:39</created>
		<closed>2017-04-11 11:39:52</closed>
	</bug>
	<bug>
		<id>4728</id>
		<title>Applications - Installation from Market - 6.10.0 applications listed in 6.9.X</title>
		<body>Applications supposed to require 6.10.0 are listed for Enonic XP installation &lt; 6.10.0</body>
		<created>2017-03-28 10:05:53</created>
		<closed>2017-04-11 11:36:58</closed>
	</bug>
	<bug>
		<id>4727</id>
		<title>'Preview' button should be disabled, when 'Selection Controller' has been unchecked( 'Clear Selection')</title>
		<body>1. click on the 'Selection Controller' and select all 2. do clear selection - uncheck the 'Selection Controller' checkbox BUG: Preview button is clickable. expected: should be disabled. When the button has been pressed, warning message appears. see the screenshot ![preview](https://cloud.githubusercontent.com/assets/3728712/24397308/8b5db138-13ae-11e7-9fc9-507b55c356eb.png) </body>
		<created>2017-03-28 09:03:40</created>
		<closed>2017-04-11 11:37:33</closed>
	</bug>
	<bug>
		<id>4713</id>
		<title>Applications grid- Stop and Start buttons should be enabled, when stopped and started applications are selcted</title>
		<body>1. select one stopped-application 2. select one 'started' application BUG: Start and Stop buttons should be enabled. Actual - see the screenshot ![app-grid](https://cloud.githubusercontent.com/assets/3728712/24360391/e5d7849e-130f-11e7-8605-f4ea0d6a8de9.png) </body>
		<created>2017-03-27 14:07:52</created>
		<closed>2017-04-11 11:38:50</closed>
	</bug>
	<bug>
		<id>4710</id>
		<title>remove hardcoded value for market version</title>
		<body>In ApplicationResource.getMarketApplications, 6.9.9 is hardcoded to work around a bug in market app.  This must be removed when its fixed on enonic.com site @torlokken </body>
		<created>2017-03-27 12:35:01</created>
		<closed>2017-04-25 07:37:27</closed>
	</bug>
	<bug>
		<id>4709</id>
		<title>Exception after removing one item from selection in the Show Selection mode</title>
		<body>1. select a folder(click on the cell with a name) 2. click on the checkbox in this row 3. click on the SelectionPanelToggler and filter the grid(see the first screenshot) 4. uncheck the  SelectionController-checkbox or uncheck the row-checkbox  BUG: grid is getting empty and error appears in the browser console ![step1](https://cloud.githubusercontent.com/assets/3728712/24353594/eb31e934-12f6-11e7-9112-3ad7a24e8440.png)  ![exception](https://cloud.githubusercontent.com/assets/3728712/24353610/fc285aa2-12f6-11e7-814c-43e5b0304781.png)   Stacktrace: Uncaught RangeError: Maximum call stack size exceeded     at RegExp.[Symbol.split] (&lt;anonymous&gt;)     at String.split (native)     at NewElementBuilder.ElementBuilder.getParsedClass (http://localhost:8080/admin/assets/1490600757297/common/js/_all.js:4535:35)     at NewElementBuilder.ElementBuilder.setClassName (http://localhost:8080/admin/assets/1490600757297/common/js/_all.js:4547:32)     at new SpanEl (http://localhost:8080/admin/assets/1490600757297/common/js/_all.js:6049:82)     at toggleFormatter (http://localhost:8080/admin/assets/1490600757297/common/js/_all.js:25269:46)     at appendCellHtml (http://localhost:8080/admin/assets/1490600757297/common/lib/_all.js:27408:46)     at appendRowHtml (http://localhost:8080/admin/assets/1490600757297/common/lib/_all.js:27377:11)     at renderRows (http://localhost:8080/admin/assets/1490600757297/common/lib/_all.js:27837:9)     at SlickGrid.render (http://localhost:8080/admin/assets/1490600757297/common/lib/_all.js:27893:7) ElementBuilder.getParsedClass @ Element.ts:12 ElementBuilder.setClassName @ Element.ts:26 SpanEl @ SpanEl.ts:6 toggleFormatter @ TreeGrid.ts:714 appendCellHtml @ _all.js:27408 appendRowHtml @ _all.js:27377 renderRows @ _all.js:27837 render @ _all.js:27893 Grid.renderGrid @ Grid.ts:202 (anonymous) @ Grid.ts:127 Event.notify @ _all.js:25582 refresh @ _all.js:30215 setItems @ _all.js:29492 DataView.setItems @ DataView.ts:36 TreeGrid.initData @ TreeGrid.ts:1420 TreeGrid.filter @ TreeGrid.ts:990 BrowsePanel.updateSelectionModeShownItems @ BrowsePanel.ts:366 selectionChangedDebouncedHandler @ BrowsePanel.ts:53 (anonymous) @ TreeGrid.ts:1569 TreeGrid.triggerSelectionChangedListeners @ TreeGrid.ts:1568 TreeGrid.notifySelectionChanged @ TreeGrid.ts:1558 (anonymous) @ TreeGrid.ts:211 (anonymous) @ Grid.ts:512 Event.notify @ _all.js:25582 trigger @ _all.js:26950 handleSelectedRangesChanged @ _all.js:27120 Event.notify @ _all.js:25582 setSelectedRanges @ _all.js:30744 setSelectedRows @ _all.js:29204 Grid.setSelectedRows @ Grid.ts:258 TreeGrid.resetCurrentSelection @ TreeGrid.ts:1437 TreeGrid.initData @ TreeGrid.ts:1422 TreeGrid.filter @ TreeGrid.ts:990 BrowsePanel.updateSelectionModeShownItems @ BrowsePanel.ts:366 selectionChangedDebouncedHandler @ BrowsePanel.ts:53 (anonymous) @ TreeGrid.ts:1569 TreeGrid.triggerSelectionChangedListeners @ TreeGrid.ts:1568 TreeGrid.notifySelectionChanged @ TreeGrid.ts:1558 (anonymous) @ TreeGrid.ts:211 (anonymous) @ Grid.ts:512 Event.notify @ _all.js:25582 trigger @ _all.js:26950 handleSelectedRangesChanged @ _all.js:27120 Event.notify @ _all.js:25582 setSelectedRanges @ _all.js:30744 setSelectedRows @ _all.js:29204 Grid.setSelectedRows @ Grid.ts:258 TreeGrid.resetCurrentSelection @ TreeGrid.ts:1437 TreeGrid.initData @ TreeGrid.ts:1422 TreeGrid.filter @ TreeGrid.ts:990 BrowsePanel.updateSelectionModeShownItems @ BrowsePanel.ts:366 selectionChangedDebouncedHandler @ BrowsePanel.ts:53 (anonymous) @ TreeGrid.ts:1569 TreeGrid.triggerSelectionChangedListeners @ TreeGrid.ts:1568 TreeGrid.notifySelectionChanged @ TreeGrid.ts:1558 (anonymous) @ TreeGrid.ts:211 (anonymous) @ Grid.ts:512 Event.notify @ _all.js:25582 trigger @ _all.js:26950 handleSelectedRangesChanged @ _all.js:27120 Event.notify @ _all.js:25582 setSelectedRanges @ _all.js:30744 setSelectedRows @ _all.js:29204 Grid.setSelectedRows @ Grid.ts:258 TreeGrid.resetCurrentSelection @ TreeGrid.ts:1437 TreeGrid.initData @ TreeGrid.ts:1422 TreeGrid.filter @ TreeGrid.ts:990 BrowsePanel.updateSelectionModeShownItems @ BrowsePanel.ts:366 selectionChangedDebouncedHandler @ BrowsePanel.ts:53 (anonymous) @ TreeGrid.ts:1569 TreeGrid.triggerSelectionChangedListeners @ TreeGrid.ts:1568 TreeGrid.notifySelectionChanged @ TreeGrid.ts:1558 (anonymous) @ TreeGrid.ts:211 (anonymous) @ Grid.ts:512 Event.notify @ _all.js:25582 trigger @ _all.js:26950 handleSelectedRangesChanged @ _all.js:27120 Event.notify @ _all.js:25582 setSelectedRanges @ _all.js:30744 setSelectedRows @ _all.js:29204 Grid.setSelectedRows @ Grid.ts:258 TreeGrid.resetCurrentSelection @ TreeGrid.ts:1437 TreeGrid.initData @ TreeGrid.ts:1422 TreeGrid.filter @ TreeGrid.ts:990 BrowsePanel.updateSelectionModeShownItems @ BrowsePanel.ts:366 selectionChangedDebouncedHandler @ BrowsePanel.ts:53 (anonymous) @ TreeGrid.ts:1569 TreeGrid.triggerSelectionChangedListeners @ TreeGrid.ts:1568 TreeGrid.notifySelectionChanged @ TreeGrid.ts:1558 (anonymous) @ TreeGrid.ts:211 (anonymous) @ Grid.ts:512 Event.notify @ _all.js:25582 trigger @ _all.js:26950 handleSelectedRangesChanged @ _all.js:27120 Event.notify @ _all.js:25582 setSelectedRanges @ _all.js:30744 setSelectedRows @ _all.js:29204 Grid.setSelectedRows @ Grid.ts:258 TreeGrid.resetCurrentSelection @ TreeGrid.ts:1437 TreeGrid.initData @ TreeGrid.ts:1422 TreeGrid.filter @ TreeGrid.ts:990 BrowsePanel.updateSelectionModeShownItems @ BrowsePanel.ts:366 selectionChangedDebouncedHandler @ BrowsePanel.ts:53 (anonymous) @ TreeGrid.ts:1569 TreeGrid.triggerSelectionChangedListeners @ TreeGrid.ts:1568 TreeGrid.notifySelectionChanged @ TreeGrid.ts:1558 (anonymous) @ TreeGrid.ts:211 (anonymous) @ Grid.ts:512 Event.notify @ _all.js:25582 trigger @ _all.js:26950 handleSelectedRangesChanged @ _all.js:27120 Event.notify @ _all.js:25582 setSelectedRanges @ _all.js:30744 setSelectedRows @ _all.js:29204 Grid.setSelectedRows @ Grid.ts:258 TreeGrid.resetCurrentSelection @ TreeGrid.ts:1437 TreeGrid.initData @ TreeGrid.ts:1422 TreeGrid.filter @ TreeGrid.ts:990 BrowsePanel.updateSelectionModeShownItems @ BrowsePanel.ts:366 selectionChangedDebouncedHandler @ BrowsePanel.ts:53 (anonymous) @ TreeGrid.ts:1569 TreeGrid.triggerSelectionChangedListeners @ TreeGrid.ts:1568 TreeGrid.notifySelectionChanged @ TreeGrid.ts:1558 (anonymous) @ TreeGrid.ts:211 (anonymous) @ Grid.ts:512 Event.notify @ _all.js:25582 trigger @ _all.js:26950 handleSelectedRangesChanged @ _all.js:27120 Event.notify @ _all.js:25582 setSelectedRanges @ _all.js:30744 setSelectedRows @ _all.js:29204 Grid.setSelectedRows @ Grid.ts:258 TreeGrid.resetCurrentSelection @ TreeGrid.ts:1437 TreeGrid.initData @ TreeGrid.ts:1422 TreeGrid.filter @ TreeGrid.ts:990 BrowsePanel.updateSelectionModeShownItems @ BrowsePanel.ts:366 selectionChangedDebouncedHandler @ BrowsePanel.ts:53 (anonymous) @ TreeGrid.ts:1569 TreeGrid.triggerSelectionChangedListeners @ TreeGrid.ts:1568 TreeGrid.notifySelectionChanged @ TreeGrid.ts:1558 (anonymous) @ TreeGrid.ts:211 (anonymous) @ Grid.ts:512 Event.notify @ _all.js:25582 trigger @ _all.js:26950 handleSelectedRangesChanged @ _all.js:27120 Event.notify @ _all.js:25582 setSelectedRanges @ _all.js:30744 setSelectedRows @ _all.js:29204 Grid.setSelectedRows @ Grid.ts:258 TreeGrid.resetCurrentSelection @ TreeGrid.ts:1437 TreeGrid.initData @ TreeGrid.ts:1422 TreeGrid.filter @ TreeGrid.ts:990 BrowsePanel.updateSelectionModeShownItems @ BrowsePanel.ts:366 selectionChangedDebouncedHandler @ BrowsePanel.ts:53 (anonymous) @ TreeGrid.ts:1569 TreeGrid.triggerSelectionChangedListeners @ TreeGrid.ts:1568 TreeGrid.notifySelectionChanged @ TreeGrid.ts:1558 (anonymous) @ TreeGrid.ts:211 (anonymous) @ Grid.ts:512 Event.notify @ _all.js:25582 trigger @ _all.js:26950 handleSelectedRangesChanged @ _all.js:27120 Event.notify @ _all.js:25582 setSelectedRanges @ _all.js:30744 setSelectedRows @ _all.js:29204 Grid.setSelectedRows @ Grid.ts:258 TreeGrid.resetCurrentSelection @ TreeGrid.ts:1437 TreeGrid.initData @ TreeGrid.ts:1422 TreeGrid.filter @ TreeGrid.ts:990 BrowsePanel.updateSelectionModeShownItems @ BrowsePanel.ts:366 selectionChangedDebouncedHandler @ BrowsePanel.ts:53 (anonymous) @ TreeGrid.ts:1569 TreeGrid.triggerSelectionChangedListeners @ TreeGrid.ts:1568 TreeGrid.notifySelectionChanged @ TreeGrid.ts:1558 (anonymous) @ TreeGrid.ts:211 (anonymous) @ Grid.ts:512 Event.notify @ _all.js:25582 trigger @ _all.js:26950 handleSelectedRangesChanged @ _all.js:27120 Event.notify @ _all.js:25582 setSelectedRanges @ _all.js:30744 setSelectedRows @ _all.js:29204 Grid.setSelectedRows @ Grid.ts:258 TreeGrid.resetCurrentSelection @ TreeGrid.ts:1437 TreeGrid.initData @ TreeGrid.ts:1422 TreeGrid.filter @ TreeGrid.ts:990 BrowsePanel.updateSelectionModeShownItems @ BrowsePanel.ts:366 selectionChangedDebouncedHandler @ BrowsePanel.ts:53 (anonymous) @ TreeGrid.ts:1569 TreeGrid.triggerSelectionChangedListeners @ TreeGrid.ts:1568 TreeGrid.notifySelectionChanged @ TreeGrid.ts:1558 (anonymous) @ TreeGrid.ts:211 (anonymous) @ Grid.ts:512 Event.notify @ _all.js:25582 trigger @ _all.js:26950 handleSelectedRangesChanged @ _all.js:27120 Event.notify @ _all.js:25582 setSelectedRanges @ _all.js:30744 setSelectedRows @ _all.js:29204 Grid.setSelectedRows @ Grid.ts:258 _all.js:27676 Uncaught TypeError: Cannot read property 'lastChild' of null     at ensureCellNodesInRowsCache (_all.js:27676)     at asyncPostProcessRows (_all.js:27980) ensureCellNodesInRowsCache @ _all.js:27676 asyncPostProcessRows @ _all.js:27980  </body>
		<created>2017-03-27 11:12:09</created>
		<closed>2017-03-27 13:54:39</closed>
	</bug>
	<bug>
		<id>4707</id>
		<title>Undelete must revive deleted parents</title>
		<body></body>
		<created>2017-03-27 06:57:40</created>
		<closed>2017-04-11 11:37:28</closed>
	</bug>
	<bug>
		<id>4702</id>
		<title>Show Delete Confirmation when more than one item is about to be deleted</title>
		<body></body>
		<created>2017-03-24 10:05:17</created>
		<closed>2017-04-11 11:38:43</closed>
	</bug>
	<bug>
		<id>4701</id>
		<title>In Publish Wizard hide "Include offline" checkbox when there are no offline dependencies</title>
		<body>Add boolean ``containsOffline`` field to the root of the same json response (like ``containsInvalid``). If there are no dependent items in "offline" status, the "Include offline" checkbox should be hidden.  It's important that ``containsOffline`` takes into account ``excludeChildrenIds`` parameter of the request. For example, if I select one Offline item which has an Offline child, but the "Show children" toggler is OFF, then the checkbox must be hidden. But if I toggle the "Show children" toggler ON, then the checkbox must appear.</body>
		<created>2017-03-24 09:56:43</created>
		<closed>2017-04-11 11:37:26</closed>
	</bug>
	<bug>
		<id>4692</id>
		<title>In Publish Wizard hide "Show children" toggler when an item doesn't have any unpublished children</title>
		<body>Add boolean ``hasChildren`` field to object inside ``requestedContents`` of json response from ``resolvePublishContent``. If requested item doesn't have children that can be published (new, offline, modified etc.), hide the "show children" toggler. ``` "requestedContents":[         {            "id":"features",          "hasChildren":true       },       {            "id":"my_folder",          "hasChildren":false       }    ] ```</body>
		<created>2017-03-23 14:37:39</created>
		<closed>2017-04-11 11:37:35</closed>
	</bug>
	<bug>
		<id>4690</id>
		<title>Publish wizard - When the toggler is on, offline child items get published  even though they are hidden</title>
		<body>1. add a parent folder and child 2. select the parent and  do publish both folders 3. Unpublish both folders 4. select the parent and press 'publish' on the toolbar (see the first screenshot) 5. Click on 'Include child' icon but do not check the 'Include offline items' checkbox 6. Press the 'Publish' button on the dialog BUG:  expected - only parent folder should be 'online', because 'Include offline items' was not checked Actual - both folders are 'Online' ![step1](https://cloud.githubusercontent.com/assets/3728712/24242873/3c97bbd0-0fca-11e7-9cc4-d863d0891fe1.png) </body>
		<created>2017-03-23 10:15:02</created>
		<closed>2017-04-05 12:11:34</closed>
	</bug>
	<bug>
		<id>4668</id>
		<title>Invalid message in the "Unpublish dialog" when it's opened for the second time</title>
		<body>1. Unpublish some content in Content Studio 2. Select another Online content and open the Unpublish dialog again  Message on the grey background will say "X items are being unpublished" - leftovers from the previous unpublish operation.    ![image](https://cloud.githubusercontent.com/assets/11612490/24149174/e0350f34-0e41-11e7-87b6-9cec32e536bc.png) </body>
		<created>2017-03-21 13:24:44</created>
		<closed>2017-03-21 13:39:18</closed>
	</bug>
	<bug>
		<id>4663</id>
		<title>Cannot find specific group using authLib.findPrincipals()</title>
		<body>ref: http://repo.enonic.com/public/com/enonic/xp/docs/6.9.2/docs-6.9.2-libdoc.zip!/module-lib_xp_auth.html#.findPrincipals  When using ``` type: 'group' userStore: 'someUserStoreName' ```  You can get all groups in that userStore.  However if you want to search for a unique one nothing really works.  None of these works: ``` name: params.name searchText: 'group:' + params.userStore + ':' + params.name searchText: "key = 'group:" + params.userStore + ':' + params.name + "'" searchText: "displayName = '" + params.displayName + "'" searchText: "description = '" + params.description + "'" searchText: params.description ```  The doc does not point it out but the searchText field is not a query field. Easy to misunderstand.  This does work: ``` searchText: params.displayName ```  But does not feel like a good way to look for uniqueness.</body>
		<created>2017-03-21 09:57:16</created>
		<closed>2018-06-26 10:45:46</closed>
	</bug>
	<bug>
		<id>4662</id>
		<title>"Upload content" dialog should be closed, when an image has been dragged to the 'New Content' dialog</title>
		<body>1. Press the 'New...' button 2. drag an image and drop on the NewContent dialog's area BUG - the image is uploaded and 'NewContent Dialog' is closed. but the "Upload content" dialog still present. (see the screenshot) Sometimes, the browser hangs, when the image was uploaded in this way. Part2:  1 drag an image and drop on the NewContent dialog's area 2. UploadDialog not closed, double click on the same image(try to upload the same image) 3. select the image in the grid and delete it  BUG: BodyMask is present when the image was deleted This bug can be linked with the  https://github.com/enonic/xp/issues/4470 ![drag2](https://cloud.githubusercontent.com/assets/3728712/24140948/d520b206-0e32-11e7-9cca-0a39b2001220.png) </body>
		<created>2017-03-21 09:38:21</created>
		<closed>2017-04-18 10:02:22</closed>
	</bug>
	<bug>
		<id>4659</id>
		<title>PageComponentView - menu handler not displayed when width of the browser-window is about 1000px (only MS Edge)</title>
		<body>1. open a site. change the width of the browser-window to 1000 px 2. open the PageComponent View BUG: drop down handler is not displayed. see the screenshot ![pcv](https://cloud.githubusercontent.com/assets/3728712/24107300/69cb1b50-0d9b-11e7-96c2-28684262e010.png) </body>
		<created>2017-03-20 15:29:49</created>
		<closed>2017-09-18 09:35:10</closed>
	</bug>
	<bug>
		<id>4657</id>
		<title>Bypass Felix faulty session handling</title>
		<body></body>
		<created>2017-03-20 14:24:39</created>
		<closed>2017-03-24 09:41:07</closed>
	</bug>
	<bug>
		<id>4648</id>
		<title>ItemViewContextMenu does not appear when a component was clicked in the View (only MS Edge)</title>
		<body>1. open XP in Edge browser 2. open the Features  3. open the PageComponent View 4.Insert an Image 5. click on the Image and try to insert anything BUG  ItemViewContextMenu does not appear, when the item was clicked(drop down handler was clicked) ![edge](https://cloud.githubusercontent.com/assets/3728712/24097842/b2bb0884-0d78-11e7-85c3-96763eebe2d2.png) </body>
		<created>2017-03-20 11:23:26</created>
		<closed>2018-01-25 15:36:08</closed>
	</bug>
	<bug>
		<id>4646</id>
		<title>Alert about unsaved changes appears when closing content that was moved out of a site</title>
		<body>This issue does not reproducing on FF 1. select the Features and add an Article(or checkbox) content 2. select the article and move it to the root directory 3. open the just moved article and try to close the wizard BUG: there are no unsaved changes, but Alert dialog is present when the 'close' button was pressed ![article](https://cloud.githubusercontent.com/assets/3728712/24096973/f1b6074a-0d74-11e7-9fb4-d043902a4224.png) </body>
		<created>2017-03-20 10:59:12</created>
		<closed>2017-05-09 08:31:37</closed>
	</bug>
	<bug>
		<id>4644</id>
		<title>Indirect memberships not checked when adding an application to a site</title>
		<body>To add an application to a site, the user is required to have one of the roles: "Administrator" or "Content Manager Administrator". But currently the check does not consider indirect membership:  It allows the operation if userA has role "Content Manager Administrator".  But it does not if userA is a member of group1 and group1 has role "Content Manager Administrator".  The user should be allowed to add an application to a site if it has indirectly one of the roles required.  This issue was reported by a customer (see support case 1870).</body>
		<created>2017-03-20 09:40:57</created>
		<closed>2017-03-24 09:41:13</closed>
	</bug>
	<bug>
		<id>4643</id>
		<title>ContentWizard - status of the content is not refreshed, when a version was restored</title>
		<body>1. add a HtmlArea content or ItemSet 2. publish the content 3. edit the content(do not close the wizard) 4. navigate to the grid and open the Versions view 5 restore the 'online' version of the content BUG: 'Online' status is displayed in the grid, but 'Modified' status is displayed on the wizard-page see on screenshots ![grid](https://cloud.githubusercontent.com/assets/3728712/24093797/c00cca52-0d66-11e7-8e97-e60aa0eaf7f6.png) ![wizard](https://cloud.githubusercontent.com/assets/3728712/24093806/c29639ac-0d66-11e7-9b51-1b668a20f1f8.png)  </body>
		<created>2017-03-20 09:14:38</created>
		<closed>2017-04-11 11:38:53</closed>
	</bug>
	<bug>
		<id>4641</id>
		<title>DetailsPanel, version history - button 'Restore version' is shifted</title>
		<body>1. select a content with several versions 2. open the version history BUG: button Restore is shifted, see the screenshot ![shifted](https://cloud.githubusercontent.com/assets/3728712/24043269/e8eda6c2-0b26-11e7-980e-cdcc4414fa9c.png) </body>
		<created>2017-03-17 12:32:24</created>
		<closed>2017-04-11 11:39:32</closed>
	</bug>
	<bug>
		<id>4640</id>
		<title>Resolve dependencies with children for a selected online content</title>
		<body>1. Publish the entire "Features" site 2. Expand the site in the grid, select all child items and Unpublish them. They change to "Offline". The site itself is still "Online". If I select "Features" in the grid, "Publish" button is disabled because content is already published - correct. 3. Add a new child content under "Features" - it has state "New". Now all child contents under Features are "Offline" except for one that is "New". 4. Select "Features" and do "Publish tree". The dialog opens with one child item (the "New" one) shown by default - correct. ![image](https://cloud.githubusercontent.com/assets/11612490/24039267/d5ff32fa-0b04-11e7-9ced-d7819cb87199.png)  5. If I now click the toggle button next to "Features", the "New" item disappears but instead I see two "Offline" items. ![image](https://cloud.githubusercontent.com/assets/11612490/24039350/1e61e38a-0b05-11e7-928f-0b68a2824deb.png)  If these two are mandatory dependencies, then they should've been shown right away and should always be visible, independent of the checkbox state or "Include children" togglers.</body>
		<created>2017-03-17 11:05:03</created>
		<closed>2017-03-24 09:41:05</closed>
	</bug>
	<bug>
		<id>4636</id>
		<title>NPE on import targeting a manually sorted node</title>
		<body>NullPointerException on import targeting a manually sorted node  https://discuss.enonic.com/t/data-toolbox-import-export-not-working-for-templates/982</body>
		<created>2017-03-17 08:46:39</created>
		<closed>2017-04-11 11:37:29</closed>
	</bug>
	<bug>
		<id>4632</id>
		<title>RepoConnection.modify converts properties to String</title>
		<body>Updating a node from the cms-repo, with the JS Node API, converts existing properties of the node that were of type Instant to type String. This happens even if the the edit callback does not touch any of those properties.  In particular this happens with properties _timestamp, createdTime and modifiedTime from Content, which then causes an exception while trying to publish the content.  It probably will happen with other non-JSON types. </body>
		<created>2017-03-16 13:41:48</created>
		<closed>2017-04-11 11:37:13</closed>
	</bug>
	<bug>
		<id>4627</id>
		<title>ContentTypeSelector produces console errors in the Content Wizard</title>
		<body></body>
		<created>2017-03-16 11:08:08</created>
		<closed>2017-03-16 14:41:31</closed>
	</bug>
	<bug>
		<id>4625</id>
		<title>Always clear selection when a row is clicked/highlighted in the grid</title>
		<body>1. Select several rows in the grid (click the checkboxes) 2. Click one of the selected rows somewhere outside of the checkbox  All of the selected rows are unselected except for the one that was clicked. We should unselect all.</body>
		<created>2017-03-15 15:04:55</created>
		<closed>2017-03-16 14:38:56</closed>
	</bug>
	<bug>
		<id>4621</id>
		<title>Admin tool 'Users' - Name field still editable after successful creation of principal</title>
		<body> UI change only. Back end behaviour is correct, it only updates the login field (not the name, path or id).  Explanations: * During the creation of a principal, you can edit the name (not talking about display name here, really the name), which is fine * But once saved, this field should not be editable anymore.  It is the case for example if you close the tab and edit this created principal. The field is correctly disabled.  -&gt; Disable the field if the creation is successful I guess </body>
		<created>2017-03-15 11:15:48</created>
		<closed>2017-04-11 11:39:35</closed>
	</bug>
	<bug>
		<id>4616</id>
		<title>PrincipalSelector for principal type USER</title>
		<body>When selecting "USER" as only allowed principal type for a Principal Selector (For testing, you can try this with an input in an ID provider config), all the principals are displayed.  </body>
		<created>2017-03-14 14:28:54</created>
		<closed>2017-07-04 08:25:36</closed>
	</bug>
	<bug>
		<id>4605</id>
		<title>Node cache not invalidated</title>
		<body>After #4405 refactoring, the cache is not invalidated on snapshot restore</body>
		<created>2017-03-14 08:30:01</created>
		<closed>2017-04-11 11:37:31</closed>
	</bug>
	<bug>
		<id>4603</id>
		<title>User store with users deleted</title>
		<body>* From the users tool tree, we cannot delete a user store containing users, but it is possible when editing the user store - [x] Disable deletion in user store edit mode when the user store contains users</body>
		<created>2017-03-13 15:17:56</created>
		<closed>2017-03-20 08:27:44</closed>
	</bug>
	<bug>
		<id>4598</id>
		<title>Notification message always appears when a Groups folder is expanded and a group was removed</title>
		<body></body>
		<created>2017-03-13 12:00:08</created>
		<closed>2017-03-13 12:47:49</closed>
	</bug>
	<bug>
		<id>4595</id>
		<title>Inspection Panel - icon is not updated, when 'Edit' icon was pressed and new image uploaded </title>
		<body>1. open the Features and add an image -component 2. click on the component and open the Inspection Panel 3. click on the 'Edit' icon(pencil) 4. upload a new image in the ImageWizard 5. navigate to the Features-wizard BUG: icon on the InspectionPanel should be updated ![site](https://cloud.githubusercontent.com/assets/3728712/23848541/cf5da860-07e8-11e7-80fc-cfc67c7c1813.png) </body>
		<created>2017-03-13 09:30:27</created>
		<closed>2017-03-20 08:27:43</closed>
	</bug>
	<bug>
		<id>4594</id>
		<title>OptionSet content - incorrect validation of the content in the wizard, when all required fields are filled</title>
		<body>1. select "Features" and open the OptionSet wizard 2. select the option2 in the single selection 3. click on the option3 in the multi selection and select an image from the options BUG: all required inputs are filled, but  red icon is present on the wizard page ![opt-wizard](https://cloud.githubusercontent.com/assets/3728712/23847425/4906ebd2-07e3-11e7-9017-6a9920cc390e.png) </body>
		<created>2017-03-13 08:51:03</created>
		<closed>2017-03-27 11:26:15</closed>
	</bug>
	<bug>
		<id>4593</id>
		<title>OptionSet content: incorrect validation of the content in the grid, when required option was removed </title>
		<body>1. Select 'Features' and open a wizard for the OptionSet content 2. select the Option2 in the 'single selection' 3. click on the Option3 in the multi selection and upload an image (see the first screenshot). Save the option-set 4. navigate to the grid and delete the just uploaded image BUG: when the image was deleted, required input is getting empty, so the  OptionSet should be displayed with red icon(in the grid) ![step1](https://cloud.githubusercontent.com/assets/3728712/23847018/6efe9e2c-07e1-11e7-804e-4b9a5125e739.png) ![result](https://cloud.githubusercontent.com/assets/3728712/23847163/291d017c-07e2-11e7-9be1-106aac3a5152.png) </body>
		<created>2017-03-13 08:42:55</created>
		<closed>2017-03-27 11:10:25</closed>
	</bug>
	<bug>
		<id>4592</id>
		<title>Notification message always appears when a Roles folder is expanded and a role was removed</title>
		<body>Same as for #4541 </body>
		<created>2017-03-13 07:28:24</created>
		<closed>2017-03-13 12:47:42</closed>
	</bug>
	<bug>
		<id>4588</id>
		<title>Wizard tab not closed, when a user store was removed</title>
		<body> ![user-removed](https://cloud.githubusercontent.com/assets/3728712/23795481/f820ee5e-05a6-11e7-9f27-2a8e9cefffb2.png) 1. Open a wizard for creating an UserStore 2. type a data and save the store 3. navigate to the grid(do not close the wizard) and delete the UserStore BUG: User store was deleted, but the tab is not closed. The similar issue with the UserWizard, User was deleted, but the user still displayed on the UserItemStatisticsPanel(see the third screenshot) ![step1](https://cloud.githubusercontent.com/assets/3728712/23795366/475b8fca-05a6-11e7-9267-7527b8541884.png) ![result](https://cloud.githubusercontent.com/assets/3728712/23795368/4a62ea92-05a6-11e7-931b-de6bd8e65abb.png)  not closed</body>
		<created>2017-03-10 12:29:05</created>
		<closed>2017-03-20 08:27:41</closed>
	</bug>
	<bug>
		<id>4587</id>
		<title>Principal with uppercase letter</title>
		<body>* Principal created with uppercase letter cause problems (Tested in 6.9.2)</body>
		<created>2017-03-10 09:42:42</created>
		<closed>2017-03-15 08:46:40</closed>
	</bug>
	<bug>
		<id>4584</id>
		<title>RoleWizard - list of members not refreshed, when the role has been added to a new user</title>
		<body>1. Open a role(do not close the wizard) 2. create a new user and the role to this user 3. navigate to the role-wizard BUG: new added user is not displayed in 'members ![role-w](https://cloud.githubusercontent.com/assets/3728712/23752827/f6bae020-04e7-11e7-8b4a-441582c09fba.png) '</body>
		<created>2017-03-09 13:46:47</created>
		<closed>2018-01-02 13:28:34</closed>
	</bug>
	<bug>
		<id>4582</id>
		<title>HtmlArea and MCE-toolbar - 'Source code' should not be displayed, if  user has no role 'cms.expert'</title>
		<body></body>
		<created>2017-03-09 12:48:59</created>
		<closed>2017-03-14 09:10:53</closed>
	</bug>
	<bug>
		<id>4581</id>
		<title>'Version history' and 'dependencies' are displayed at the same time </title>
		<body>1. select a site and open the Details Panel 2. open the Dependencies view 3. switch to the 'Version history' view 4. switch to Dependencies again BUG  both views are displayed at the same time ![dep](https://cloud.githubusercontent.com/assets/3728712/23747643/77cdfbdc-04d1-11e7-831f-87521e1f9032.png) </body>
		<created>2017-03-09 11:05:43</created>
		<closed>2017-03-22 20:03:24</closed>
	</bug>
	<bug>
		<id>4578</id>
		<title>*.odp (libreOffice...) files becomes media:unkown should be media:presentation?</title>
		<body>*.odp (libreOffice...) files becomes media:unkown should be media:presentation?</body>
		<created>2017-03-08 08:13:01</created>
		<closed>2017-04-11 11:37:01</closed>
	</bug>
	<bug>
		<id>4577</id>
		<title>keynote files becomes media:unkown should be media:presentation?</title>
		<body>keynote files becomes media:unkown should be media:presentation?</body>
		<created>2017-03-08 08:09:39</created>
		<closed>2017-04-11 11:37:11</closed>
	</bug>
	<bug>
		<id>4556</id>
		<title>The Find dialog won't scroll contents to a highlighted phrase in HTML Area</title>
		<body>When you search for a phrase in the long text that doesn't fit the HTML Area, clicking Prev or Next is supposed to scroll the currently highlighted phrase into the viewbox. Check how it works on https://www.tinymce.com/.</body>
		<created>2017-03-07 08:26:08</created>
		<closed>2017-03-14 09:11:01</closed>
	</bug>
	<bug>
		<id>4554</id>
		<title>Selected row is getting unhighlighted when the 'Clear' search input was clicked</title>
		<body>1. type a name of content in the search-input 2. click on the filtered row(see the first screenshot) 3. click on the 'Clear' link (filter panel) BUG: row is getting unhighlighted, but the content still displayed on the Preview Panel(see the second screenshot) ![result](https://cloud.githubusercontent.com/assets/3728712/23646971/812aba5c-0324-11e7-956f-65e450c928c1.png)  ![step1](https://cloud.githubusercontent.com/assets/3728712/23646933/46c12b44-0324-11e7-8f60-265d323aa92f.png) </body>
		<created>2017-03-07 07:55:24</created>
		<closed>2017-03-14 09:10:45</closed>
	</bug>
	<bug>
		<id>4544</id>
		<title>In the Publishing Wizard toggling child items crashes for a modified item</title>
		<body>1. Make sure "Features" shows "New" status in the Content Grid. 2. Select it and publish it (without children but with the two dependencies) 3. Open the Wizard for the Features site, change display name, save - the item becomes Modified. Close the Wizard. 4. In the Content Grid open the Publish dialog for Features again 5. Click the toggle children icon to show child items in the dialog.  There's an error in browser console and endless spinner: ![image](https://cloud.githubusercontent.com/assets/11612490/23611550/34e2fe18-0278-11e7-989a-67d305742602.png) </body>
		<created>2017-03-06 13:20:35</created>
		<closed>2017-03-14 09:10:48</closed>
	</bug>
	<bug>
		<id>4542</id>
		<title>Error message appears on the wizard-page, when JPG was replaced with a svg</title>
		<body>1. Upload a JPG content(New Content Dialog) 2. open the content and press the 'Upload' button on the wizard 3. try to replace the JPG with a SVG-file(see on the first screenshot)   14:40:19.703 ERROR c.e.x.j.i.e.JsonExceptionMapper - The image-based media type image/svg+xml is not supported for writing java.io.IOException: The image-based media type image/svg+xml is not supported for writing         at com.enonic.xp.core.impl.image.ImageServiceImpl.getFormatByMimeType(ImageServiceImpl.java:121) ~[na:na]         at com.enonic.xp.admin.impl.rest.resource.content.ContentImageResource.resolveResponseFromContentImageAttachment(ContentImageResource.java:148) ~[na:na]         at com.enonic.xp.admin.impl.rest.resource.content.ContentImageResource.getContentImage(ContentImageResource.java BUG: error notification message appears, see on the second screenshot ![result](https://cloud.githubusercontent.com/assets/3728712/23608631/57fcbac6-027b-11e7-8daa-7957fa591b36.png)  ![upload](https://cloud.githubusercontent.com/assets/3728712/23608602/35696248-027b-11e7-977a-9b8c0cba5b01.png) </body>
		<created>2017-03-06 11:44:07</created>
		<closed>2017-04-11 11:40:22</closed>
	</bug>
	<bug>
		<id>4541</id>
		<title>Notification message always appears when a Users-folder is expanded and an user was removed</title>
		<body>1. add an user(system). The same issue with Roles 2. expand the 'Users' and remove the user 3. collapse and expand the Users-folder BUG:  Notification message always appears when the Users-folder has been expanded ![users](https://cloud.githubusercontent.com/assets/3728712/23607959/0ecb73ae-0278-11e7-8270-e908fb537d3c.png) </body>
		<created>2017-03-06 11:24:24</created>
		<closed>2017-03-14 09:11:02</closed>
	</bug>
	<bug>
		<id>4540</id>
		<title>Launcher panel - current application is not highlighted</title>
		<body>1. open the Content Studio 2. open the launcher panel BUG expected: Content Studio should be displayed as activated ![launcher](https://cloud.githubusercontent.com/assets/3728712/23607694/f261d998-0276-11e7-8b73-f904fff6575c.png) </body>
		<created>2017-03-06 11:12:49</created>
		<closed>2017-03-14 09:10:43</closed>
	</bug>
	<bug>
		<id>4528</id>
		<title>Content Studio - Content edition - "Online to" field incorrectly mapped</title>
		<body>"Online to" field does not seem to be correctly mapped. Publish a content -&gt; "Online to" is filled while it is empty in the JSON returned</body>
		<created>2017-03-02 14:56:30</created>
		<closed>2018-06-19 12:59:39</closed>
	</bug>
	<bug>
		<id>4524</id>
		<title>portal.attachmentUrl({download:true}) does not set Content-Disposition in 6.9.2?</title>
		<body>http://repo.enonic.com/public/com/enonic/xp/docs/6.9.0/docs-6.9.0-libdoc.zip!/module-lib_xp_portal.html#.attachmentUrl  So we use &lt;a download=true&gt; as a workaround https://developer.mozilla.org/en/docs/Web/HTML/Element/a  However it's not supported in IE :( http://caniuse.com/#feat=download</body>
		<created>2017-03-02 11:09:49</created>
		<closed>2017-04-07 07:51:20</closed>
	</bug>
	<bug>
		<id>4497</id>
		<title>InsertImage, InsertMacro modal dialogs - Cancel Button Top are missed on the both dialogs</title>
		<body>![ins](https://cloud.githubusercontent.com/assets/3728712/23405917/8269254a-fdcd-11e6-9ae7-0b56ca7379f9.png) </body>
		<created>2017-02-28 12:50:27</created>
		<closed>2017-03-14 09:10:21</closed>
	</bug>
	<bug>
		<id>4495</id>
		<title>Node selection doesn't always get cleared after highlighting a node</title>
		<body>1. Open the Content grid 2. Select a couple of items by clicking the checkbox. Number on the cart in the toolbar changes to display the number of selected items 3. Click some other node (not the checkbox) to highlight it. The selected items will be remove from the cart - correct 4. Add the same items to the cart 5. Open the Filter panel and search for some content so that search results are not empty but at the same time don't include the items that were selected 6. Now click one of the items in the search results to highlight it. The cart is supposed to be cleared as in point 3 above but it didn't happen. Now the cart icon is disabled but still displaying the number of selected items.</body>
		<created>2017-02-28 11:45:32</created>
		<closed>2017-03-14 09:05:46</closed>
	</bug>
	<bug>
		<id>4491</id>
		<title>Insert Image dialog -Errors appears in the browser console when an imported image was selected in the dialog</title>
		<body>1. Open htmlArea dialog and click on the Insert Image menu item 2. try to Insert an image, that was imported via the API CreateMediaParams BUG:  -.when image was selected, error appears in the console.  -. click on the 'keep original size' checkbox and select the 'tall 9:16' cropping effect. Endless spinner appears and 500 ServerError appears in the server.log ![500](https://cloud.githubusercontent.com/assets/3728712/23399557/b3d187e2-fdb1-11e6-9ec5-bc4e6f408d37.png)  ![pop](https://cloud.githubusercontent.com/assets/3728712/23399310/d33220de-fdb0-11e6-87a8-78c3c5c89e9b.png) </body>
		<created>2017-02-28 09:30:43</created>
		<closed>2017-03-14 09:10:22</closed>
	</bug>
	<bug>
		<id>4488</id>
		<title>Outline of buttons is not visible in modal dialogs in Firefox</title>
		<body>In Chrome there's a blue border around buttons showing which one has focus at the moment, but in Firefox it's missing. However, in general outline works in Firefox - for example for the Publish button in the toolbar.  Seems to be general problem in all of the modal dialogs in Firefox.  Chrome: ![image](https://cloud.githubusercontent.com/assets/11612490/23397526/35a1f022-fd99-11e6-85ed-5d2b4226a605.png)  Firefox: ![image](https://cloud.githubusercontent.com/assets/11612490/23397518/2c1ed754-fd99-11e6-8400-2e37a79e546c.png) </body>
		<created>2017-02-28 08:45:35</created>
		<closed>2017-03-03 13:15:37</closed>
	</bug>
	<bug>
		<id>4483</id>
		<title>SelectionController checkbox doesn't change state after content was lazy loaded</title>
		<body>1. Navigate to CS, about 40 contents should be in the root 2.  click the SelctionController checkbox and select all contents 3. try to unselect all and click on the checkbox again BUG: SelectionController  is not clickable ![grid](https://cloud.githubusercontent.com/assets/3728712/23362126/633c8590-fd05-11e6-9e3d-0ed74b2111a4.png)   </body>
		<created>2017-02-27 12:58:50</created>
		<closed>2017-03-14 09:10:15</closed>
	</bug>
	<bug>
		<id>4481</id>
		<title>Context menu opens and instantly closes again in Page Components View</title>
		<body>1. Add a new site, select the Features in the apps 2. select a controller('main page'). save all and close the wizard 3. set 1700, 1100 dimension in the browser window 4. open the site, open the PageComponentView  and try to insert any component - click on the menu-icon BUG: expected insert-menu should be displayed ACTUAL: menu is closed when the icon has been closed ![menu](https://cloud.githubusercontent.com/assets/3728712/23359609/0d08d6fe-fcf8-11e6-836d-67090d8213e1.png) </body>
		<created>2017-02-27 11:21:53</created>
		<closed>2017-03-14 09:10:29</closed>
	</bug>
	<bug>
		<id>4474</id>
		<title>Application name indexed in fulltext-field</title>
		<body>It seems that filter search gives extra results when searching.  here is my content root: ![image](https://cloud.githubusercontent.com/assets/4262655/23303848/807abd3a-faa7-11e6-930a-3683d6b3aad8.png)  and then I enter 'fea' into search panel and it gives me such results as 'S1' site or parents of contents that match 'fea' search name ![image](https://cloud.githubusercontent.com/assets/4262655/23303837/7336218c-faa7-11e6-8db9-a48f56e874ab.png) </body>
		<created>2017-02-24 12:40:11</created>
		<closed>2017-04-11 11:37:16</closed>
	</bug>
	<bug>
		<id>4472</id>
		<title>Adjust notifications bar to not span too high on many notifications</title>
		<body>Select folder and press new button. Then switch to your file system, select a dozen of images and drop over new content dialog. All images are loaded correctly but notifications stack looks crazy:  ![image](https://cloud.githubusercontent.com/assets/4262655/23297217/b37217b0-fa89-11e6-93e0-f64fb7119857.png) </body>
		<created>2017-02-24 09:07:44</created>
		<closed>2017-03-22 11:57:15</closed>
	</bug>
	<bug>
		<id>4470</id>
		<title>Browser freezes after an image was dragged to the drop zone in the ImageWizard</title>
		<body>1. open the SuperHero, open the ComponentView and insert an Image 2. open the inspect panel and click the Edit button on it and try to edit the image 3. Press the Upload button and drag an image from the dialog-window and drop it in the ImageWizard 4 Do not close the Upload Dialog and drag and drop another image 5. Do not close modal dialog and  do the step-4  5-7 times  BUG: browser not responding, need to stop the application in Task Manager ![upload](https://cloud.githubusercontent.com/assets/3728712/23263797/5eab424a-f9f0-11e6-9b6a-f11edcfe0ac7.png) ![not_responding](https://cloud.githubusercontent.com/assets/3728712/23263814/655f2048-f9f0-11e6-8635-e6527b261d0b.png) </body>
		<created>2017-02-23 14:49:33</created>
		<closed>2017-04-25 07:37:26</closed>
	</bug>
	<bug>
		<id>4468</id>
		<title>Row selection is not working in Page Components View</title>
		<body>Clicked row doesn't get highlighted and nothing gets selected on the page</body>
		<created>2017-02-23 14:33:54</created>
		<closed>2017-02-28 09:40:07</closed>
	</bug>
	<bug>
		<id>4464</id>
		<title>Last node in the tree loses highlighting after its detail panel expands/collapses</title>
		<body>1. Click last node in the tree to highlight it (don't click the checkbox) 2. Expand detail panel  The highlighted node loses its highlighting. Happens only with the last node in the tree.</body>
		<created>2017-02-23 09:34:49</created>
		<closed>2017-02-28 09:40:05</closed>
	</bug>
	<bug>
		<id>4463</id>
		<title>After a node is unhighlighted in the grid the toolbar action buttons are still active</title>
		<body>1. Click a node in the Content Grid 2. Action buttons in the toolbar become active and preview is rendered 3. Click the node again to unhighlight it  Bug: preview for previously highlighted node is still shown and the toolbar buttons are still active</body>
		<created>2017-02-23 09:32:05</created>
		<closed>2017-02-28 09:40:25</closed>
	</bug>
	<bug>
		<id>4462</id>
		<title>Principal with uppercase name</title>
		<body>Different problem seen or reported by Rune:  * Programatically: authLib.createUser({         userStore: 'system',         name: 'G013080',         displayName: 'Rune Forberg',         email: 'rune.forberg@gjensidige.no'     });  - [x] Creates a user but the email is not displayed - [x] In Users admin tool, while listed the selection of the user throws errors: Principal [user:system:G013080] was not found  - [x] Related but check that users can be deleted and are correctly deleted  Manually: - [x] Creating a user with a name containing uppercase will cause the same problem as above   Some quick check showed that: * The user are returned with a key which is the concatenation of "user:" + userstore + ":" + _name * But when searched, it is done on the _id field * This is a problem when the name contains an uppercase letter. (The id is lowercased) * Solution to discuss: I guess we should return users (and principals in general) with as key the _id  Linked issue: https://youtrack.enonic.net/issue/XP-4687 Maybe linked discuss topic: https://discuss.enonic.com/t/changes-to-virtual-host-config-in-6-9-1/919/14 And now linked to Rune problem</body>
		<created>2017-02-23 09:16:55</created>
		<closed>2017-03-24 09:41:08</closed>
	</bug>
	<bug>
		<id>4458</id>
		<title>Content items should not be excludable in the Unpublish Dialog</title>
		<body></body>
		<created>2017-02-22 15:02:56</created>
		<closed>2017-02-28 09:40:10</closed>
	</bug>
	<bug>
		<id>4449</id>
		<title>ItemSelectionPanel in Users and Applications is missing toolbar with Clear/Show All buttons</title>
		<body>![link-missed](https://cloud.githubusercontent.com/assets/3728712/23203192/8698ddc0-f8f2-11e6-9477-9f29eac6358b.png) </body>
		<created>2017-02-22 08:32:04</created>
		<closed>2017-03-14 09:05:15</closed>
	</bug>
	<bug>
		<id>4442</id>
		<title>Http sessions are not removed when expired</title>
		<body>Http sessions are not removed when expired in Jetty. Implement a thread that will remove unused sessions from the map.  Best solution is to upgrade to Jetty 9.4.x, but this will probably take more time.</body>
		<created>2017-02-20 18:52:31</created>
		<closed>2017-02-28 09:40:11</closed>
	</bug>
	<bug>
		<id>4437</id>
		<title>Unselecting an item will not refresh BrowseItemsSelectionPanel when more than 10 items selected in the grid</title>
		<body>1. open the CS and select more than 10 items in the grid 2. click on 'icon remove' and remove 5-10 items from the SelectionPanel BUG: SelectionPanel was not refreshed after the removing of items  expected: when any items were removed from the panel, new selected items should be displayed on the panel ![sel](https://cloud.githubusercontent.com/assets/3728712/23126018/cfbfa7ae-f785-11e6-85da-d23b46feb0e9.png)  </body>
		<created>2017-02-20 13:01:20</created>
		<closed>2017-03-14 09:10:18</closed>
	</bug>
	<bug>
		<id>4432</id>
		<title>'Online from' date should be updated, when a content with 'online' status was published </title>
		<body>1. select one 'online' folder and one 'offline' folder 2. press the publish button on the toolbar.  3. specify the 'Online from' date 4. press the 'schedule' button  BUG : 'Online from' date was applied only for the second content. (it was offline) Should 'Online from' date be updated in the first content? ![step1](https://cloud.githubusercontent.com/assets/3728712/23069108/3cb342a4-f537-11e6-8b66-1079a4441f6e.png) ![sched](https://cloud.githubusercontent.com/assets/3728712/23069115/4232a922-f537-11e6-962c-d7c6874a6b86.png)  </body>
		<created>2017-02-17 14:34:47</created>
		<closed>2017-02-17 14:38:37</closed>
	</bug>
	<bug>
		<id>4423</id>
		<title>User with "Users Administrator" rights cannot change a password</title>
		<body>1. Create a new user in the Users App. 2. Add him to the following groups: Users Administrator, Users App and Administration Console Login 3. Log out and log in as this new user 4. Go to the Users App, wizard page of the user 5. Try to change the password. Nothing will happen when you click the "Change Password" button  There are two problems here: 1) User Administrators must be able to change the password 2) We don't give any error message in the wizard even though there's exception in the XP log: "Access denied to [/identity/system/users/alan] for [MODIFY] by user [user:system:alan] ''Alan'". We should show error notification at the bottom of the page, as always. Also, see if you can change this ugly error message to something like "Insufficient rights for user ``&lt;displayName&gt;``".</body>
		<created>2017-02-16 09:46:02</created>
		<closed>2017-03-14 09:10:16</closed>
	</bug>
	<bug>
		<id>4421</id>
		<title>Long and Float values are converted to String when passed to node-lib functions</title>
		<body>Javascript values that have an underlying value of Java `Long` or `Float`, are converted to String when stored in node using nodeLib create or modify functions.  The problem seems to be that values of type Long and Double are not considered in the conversions done in ScriptValueTranslator.java.  For example when taking the size of a binary stream (`ByteSource.size()`) and pass it to a node property, it will be converted to String.</body>
		<created>2017-02-15 13:58:50</created>
		<closed>2017-02-21 13:31:51</closed>
	</bug>
	<bug>
		<id>4420</id>
		<title>Content Wizard - NullPointer exception when saving unnamed content</title>
		<body>1. Select Features 2. Add any content. The Wizard opens with "Content created" notification 3. Press "Save". There is NullPointer exception in the log and error notification with "null" message in the Wizard.  ![image](https://cloud.githubusercontent.com/assets/11612490/22973578/8ad3ed40-f37e-11e6-9033-ce81603f757f.png) </body>
		<created>2017-02-15 12:01:29</created>
		<closed>2017-03-14 09:05:49</closed>
	</bug>
	<bug>
		<id>4419</id>
		<title>Publishing Wizard - Exclude from publishing is not properly working</title>
		<body>* Select Features site * Create Image Selector content. Leave name empty. * Upload a new image (from disk) in one of the selectors. * Save content. * Select Publish Tree for "Features"  /features/unnamed is first item in the list and cannot be excluded from the list because its child item (the uploaded image) is also in the list - fine.  ![image](https://cloud.githubusercontent.com/assets/11612490/22972645/dc5ee880-f37a-11e6-9886-6beb9c148292.png)  * Click "X" for the image under /features/unnamed  The list of dependants is refreshed but there's still no "X" icon for /features/unnamed - this is a bug.  ![image](https://cloud.githubusercontent.com/assets/11612490/22972658/e83d74dc-f37a-11e6-9a9c-258d06044443.png)  * Close the Publishing dialog, delete the image under /features/unnamed and open "Publish Tree" for "Features" again there will be "X" icon for /features/unnamed, which is correct.  ![image](https://cloud.githubusercontent.com/assets/11612490/22972670/f36ff0a0-f37a-11e6-80c2-990177f3bf3d.png)</body>
		<created>2017-02-15 11:34:03</created>
		<closed>2017-02-28 09:40:33</closed>
	</bug>
	<bug>
		<id>4401</id>
		<title>Branch-name validation missing</title>
		<body>Branch name should be validated for no whitespaces</body>
		<created>2017-02-13 12:36:04</created>
		<closed>2017-02-13 13:58:39</closed>
	</bug>
	<bug>
		<id>4400</id>
		<title>Bug when restoring one snapshot, then another</title>
		<body>Reproduce: * Created a repository * Added branch t1 to the repository * Took a snapshot * Added a second branch, t2 to the repository  * Took a second snapshot  * Deleted the repository   Then, I tried restoring the snapshots:       Restoring the first snapshot worked well.  t1 appeared as it should.          But, if I forwarded to the second snapshot, the t2 branch did not appear.   I tried deleting the branch again:       Restoring the second snapshot worked well.  Both t1 and t2 appeared as they should          Then I tried going back one more step by restoring the first snapshot.  t1 was there as it should, but so was t2.  t2 contained 0 nodes, but it was still there.</body>
		<created>2017-02-13 12:34:01</created>
		<closed>2017-03-28 13:41:32</closed>
	</bug>
	<bug>
		<id>4399</id>
		<title>Applications not installed after snapshot</title>
		<body>Reproduce:  1) Start clean installation 2) Install app superhero from market 3) Move /superhero to /superhero-moved 4) Take snapshot using the toolbox, e.g /toolbox.sh snapshot -a su:password 5) Stop server, delete $XP_HOME/repo/index 6) Start server 7) Restore snapshot, e.g ./toolbox.sh restore -a su:password -s 2016-11-28t09-03-22.987z 8) Data is now restored, but the application superhero is not installed   To fix:       When Repository.restore event is handled, install all applications again (make a public available ApplicationServiceImpl.installAllStoredApplications and move the implementation to a private (doInstall....)   Maybe the most solid solution would be to restart the nodeService and get the initialization of this and all dependants?</body>
		<created>2017-02-13 12:32:32</created>
		<closed>2017-02-28 13:54:15</closed>
	</bug>
	<bug>
		<id>4397</id>
		<title>Missing support for index as path in node-API</title>
		<body>Add alias "path" and to full settings to index field as path</body>
		<created>2017-02-13 11:59:34</created>
		<closed>2017-04-11 11:39:47</closed>
	</bug>
</bugs>
