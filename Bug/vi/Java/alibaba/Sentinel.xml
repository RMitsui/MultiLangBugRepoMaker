<?xml version="1.0" encoding="ISO-8859-1"?>

<bugs>
	<bug>
		<id>1724</id>
		<title>NPE when update Gateway Flow Rule before the api has been requested once</title>
		<body>&lt;!-- Here is for bug reports and feature requests ONLY!   If you're looking for help, please check our mail list and the Gitter room.  Please try to use English to describe your issue, or at least provide a snippet of English translation. --&gt;  ## Issue Description  Type: bug report  ### Describe what happened (or what feature you want) When my program update the rule whith : `GatewayRuleManager.loadRules(new HashSet&lt;&gt;(FLOW_RULES.values()));`  if there has one or more Api has not been requested , then there the api resource has not related metric. that will throws a NPE:  ``` java.lang.NullPointerException: null at com.alibaba.csp.sentinel.adapter.gateway.common.rule.GatewayRuleManager$GatewayRulePropertyListener.applyToConvertedParamMap(GatewayRuleManager.java:230) ~[sentinel-api-gateway-adapter-common-1.8.0.jar:na] at com.alibaba.csp.sentinel.adapter.gateway.common.rule.GatewayRuleManager$GatewayRulePropertyListener.applyGatewayRuleInternal(GatewayRuleManager.java:200) ~[sentinel-api-gateway-adapter-common-1.8.0.jar:na] at com.alibaba.csp.sentinel.adapter.gateway.common.rule.GatewayRuleManager$GatewayRulePropertyListener.configUpdate(GatewayRuleManager.java:118) ~[sentinel-api-gateway-adapter-common-1.8.0.jar:na] at com.alibaba.csp.sentinel.adapter.gateway.common.rule.GatewayRuleManager$GatewayRulePropertyListener.configUpdate(GatewayRuleManager.java:114) ~[sentinel-api-gateway-adapter-common-1.8.0.jar:na] at com.alibaba.csp.sentinel.property.DynamicSentinelProperty.updateValue(DynamicSentinelProperty.java:57) ~[sentinel-core-1.8.0.jar:1.8.0] at com.alibaba.csp.sentinel.adapter.gateway.common.rule.GatewayRuleManager.loadRules(GatewayRuleManager.java:78) ~[sentinel-api-gateway-adapter-common-1.8.0.jar:na] at ****.java:50) ~[classes/:na] at ****.java:102) ~[classes/:na] at ****.java:52) ~[classes/:na] at sun.reflect.GeneratedMethodAccessor81.invoke(Unknown Source) ~[na:na] at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_201] at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_201] at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84) ~[spring-context-5.2.8.RELEASE.jar:5.2.8.RELEASE] at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54) ~[spring-context-5.2.8.RELEASE.jar:5.2.8.RELEASE] at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:93) [spring-context-5.2.8.RELEASE.jar:5.2.8.RELEASE] at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) [na:1.8.0_201] at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266) [na:1.8.0_201] at java.util.concurrent.FutureTask.run(FutureTask.java) [na:1.8.0_201] at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180) [na:1.8.0_201] at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293) [na:1.8.0_201] at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [na:1.8.0_201] at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [na:1.8.0_201] at java.lang.Thread.run(Thread.java:748) [na:1.8.0_201] ```  Because there has not metric for this resource , but the method:  `com.alibaba.csp.sentinel.adapter.gateway.common.rule.GatewayRuleManager.GatewayRulePropertyListener private void applyToConvertedParamMap(@NotNull Set&lt;ParamFlowRule&gt; paramFlowRules)`  try to clear that with :   `ParameterMetricStorage.getParamMetricForResource(resource).clearForRule(rule);`  in `com.alibaba.csp.sentinel.adapter.gateway.common.rule.GatewayRuleManager.GatewayRulePropertyListener` (233 line in `com/alibaba/csp/sentinel/adapter/gateway/common/rule/GatewayRuleManager.java`)  ### Describe what you expected to happen    ### How to reproduce it (as minimally and precisely as possible)  1. init a api resource with gateway rule manager 2. update that before that has been requested  ### Tell us your environment Sentinel Version : 1.8  ### Anything else we need to know?    </body>
		<created>2020-09-10 10:05:23</created>
		<closed>2020-09-14 02:03:59</closed>
	</bug>
	<bug>
		<id>1705</id>
		<title>NettyTransportClient.getCurrentId is not threadsafe</title>
		<body>## Issue Description  Type: *bug report*   `NettyTransportClient.getCurrentId`  ```java     private int getCurrentId() {         if (idGenerator.get() &gt; MAX_ID) {             idGenerator.set(0);         }         return idGenerator.incrementAndGet();     } ```  个人理解这个ID应该是用于协议纠错，`getCurrentId`的目的是为了循环产生ID，且在循环周期内不重复，即生成ID为`1,2,3 ... -&gt; MAX -&gt; 1,2,3 ...`。   ### Describe what happened (or what feature you want)  当前的实现，由于MAX -&gt;  MIN 的过程不是一个原子操作，生成的ID可能会出现`1,2,3 ... -&gt; MAX -&gt; 1,1,2,3 ...`的情况。  ### Describe what you expected to happen   ### How to reproduce it (as minimally and precisely as possible)   ### Tell us your environment   ### Anything else we need to know?    </body>
		<created>2020-08-30 04:07:13</created>
		<closed>2020-09-14 15:23:01</closed>
	</bug>
	<bug>
		<id>1531</id>
		<title>ErrorEntryFreeException:current entry in context: &lt;/error&gt;</title>
		<body>springboot在发生错误时，出现了问题。 `com.alibaba.csp.sentinel.ErrorEntryFreeException: The order of entry exit can't be paired with the order of entry, current entry in context: &lt;/error&gt;, but expected: &lt;/xxx&gt;` 当请求`/xxx`的时候，显式抛出了异常，然后进入`/error`，然后就发生了以上问题。 版本1.7.1，starter版本2.2.1。</body>
		<created>2020-06-08 10:04:46</created>
		<closed>2020-06-09 09:10:00</closed>
	</bug>
	<bug>
		<id>1449</id>
		<title>Dashbord 升级 登录信息兼容性 bug</title>
		<body>启动1.7.1版的sentinel后，使用谷歌浏览器访问登录页面时，未显示登录页面，而是直接登录进去了，但sentinel的版本未显示出来，而使用火狐时却是正常的。 </body>
		<created>2020-05-01 04:13:51</created>
		<closed>2020-05-15 03:18:54</closed>
	</bug>
	<bug>
		<id>1416</id>
		<title>sentinel-apache-dubbo-adapter Entry leak cause full GC</title>
		<body>sentinel-apache-dubbo-adapter-1.7 cause full gc.  When dubbo request grow, full gc regularly.  Reason: https://github.com/alibaba/Sentinel/blob/release-1.7/sentinel-adapter/sentinel-apache-dubbo-adapter/src/main/java/com/alibaba/csp/sentinel/adapter/dubbo/SentinelDubboConsumerFilter.java#L68  https://github.com/alibaba/Sentinel/blob/release-1.7/sentinel-adapter/sentinel-apache-dubbo-adapter/src/main/java/com/alibaba/csp/sentinel/adapter/dubbo/SentinelDubboProviderFilter.java#L70  Provider and Consumer use the same key to store CtEntry. A = client B = server dubbo provider C = server dubbo provider For example:  A --&gt; call B (call C)  When onResponse https://github.com/alibaba/Sentinel/blob/release-1.7/sentinel-adapter/sentinel-apache-dubbo-adapter/src/main/java/com/alibaba/csp/sentinel/adapter/dubbo/BaseSentinelDubboFilter.java#L65  C remove DubboUtils.DUBBO_INTERFACE_ENTRY_KEY first, then B can't find the key, so CtEntry object create by SentinelDubboProviderFilter escape. so heap will grow.</body>
		<created>2020-04-20 07:49:34</created>
		<closed>2020-06-04 12:30:57</closed>
	</bug>
	<bug>
		<id>1359</id>
		<title>[Bug Report]Missing javax.annotation-api which leads failure under jdk11</title>
		<body>## Issue Description Some packages like `sentinel-demo-zuul2-gateway` will fail in CI under jdk11.  ### Describe what happened (or what feature you want) Details can refer to https://travis-ci.org/github/alibaba/Sentinel/jobs/665793680?utm_medium=notification&amp;utm_source=github_status  </body>
		<created>2020-03-23 12:11:58</created>
		<closed>2020-03-23 14:26:57</closed>
	</bug>
	<bug>
		<id>1350</id>
		<title>springmvc adaptor didn't exit context when request is blocked</title>
		<body>## Issue Description  Add one flow rule with callerA,  if one request from callerA is blocked, there are some chances that the next requests from other caller will be still blocked, since the context didn't exit and the web server(e.g. tomcat) may reuse thread.  ### Describe what you expected to happen  Request from other caller shoud be passed, and the context should be exit when one request is completed.  ### How to reproduce it (as minimally and precisely as possible)  I fount it in `SentinelSpringMvcIntegrationTest#testOriginParser`, the third case with  "/foo/3" url and no header, and wondering why it expects blocked.  Reproduce it in demo: 1.  Modify the `InterceptorConfig#Line62` in `sentinel-demo-spring-webmvc`   `config.setOriginParser(request -&gt; request.getHeader("S-user"));` to   `config.setOriginParser(request -&gt; request.getParameter("S-user"));`  2. Start web demo and dashboard   3. Add a flow rule for resource `GET:/hello`, with caller "aaa" and threshold "0"  4. Visit `/host:port/hello?S-user=aaa`, and it will be blocked by Sentinel,    then visit `/host:port/hello?S-user=bbb` or `/host:port/hello` for many times, they will be blocked occasionally.            </body>
		<created>2020-03-21 15:29:04</created>
		<closed>2020-03-24 14:14:01</closed>
	</bug>
	<bug>
		<id>1253</id>
		<title>SimpleHttpCommand post body长度超过1万，被截</title>
		<body>RT  ![image](https://user-images.githubusercontent.com/23024524/72400337-e7f41d00-3783-11ea-84d3-09d04aa7496b.png)  这里的buffedReader一次读不完数据。导致body报文被截取。问题能修一下吗。  我们公司在用，现在被迫只能改源码自己打包了。</body>
		<created>2020-01-15 02:45:23</created>
		<closed>2020-03-13 03:18:44</closed>
	</bug>
	<bug>
		<id>1184</id>
		<title>Tracer.trace(ex) NPE in Context.getCurNode when context size exceeds the limit</title>
		<body>&lt;!-- Here is for bug reports and feature requests ONLY!   If you're looking for help, please check our mail list and the Gitter room.  Please try to use English to describe your issue, or at least provide a snippet of English translation. --&gt;  ## Issue Description  Type: bug report java.lang.NullPointerException: null\n\tat com.alibaba.csp.sentinel.context.Context.getCurNode(Context.java:112) ~[sentinel-core-1.4.0.jar!/:1.4.0]\n\tat com.alibaba.csp.sentinel.Tracer.trace(Tracer.java:45) ~[sentinel-core-1.4.0.jar!/:1.4.0]\n\tat com.alibaba.csp.sentinel.Tracer.trace(Tracer.java:32)  ### Tell us your environment spring boot 2.0.0.RELEASE, sentinel  0.2.1.RELEASE      </body>
		<created>2019-12-04 01:55:14</created>
		<closed>2020-02-21 01:21:31</closed>
	</bug>
	<bug>
		<id>1169</id>
		<title>Bug when handling the end separator of the customized log directory in LogBase</title>
		<body>&lt;!-- Here is for bug reports and feature requests ONLY!   If you're looking for help, please check our mail list and the Gitter room.  Please try to use English to describe your issue, or at least provide a snippet of English translation. --&gt;  ## Issue Description  Type: *bug report*  ### Describe what happened (or what feature you want)  Sentinel supports user-defined customized log directory via the `csp.sentinel.log.dir` property item. When the given dir is not ended with the path separator (e.g. `/` in Linux), Sentinel will append the path separator to the given dir. This was broken due to a small mistake since 1.7.0:  https://github.com/alibaba/Sentinel/blob/d45ceb06dcc61356adc920772e142b81c1114f19/sentinel-core/src/main/java/com/alibaba/csp/sentinel/log/LogBase.java#L97-L99  which should be:  ```java // Append the separator if needed logBaseDir = addSeparator(logBaseDir); ```  ### Describe what you expected to happen  Handle the separator correctly.  ### Tell us your environment  Sentinel 1.7.0 </body>
		<created>2019-11-20 09:46:41</created>
		<closed>2019-11-21 05:37:51</closed>
	</bug>
	<bug>
		<id>1103</id>
		<title>Is there a bug in FlowRuleUtil.checkClusterField()?</title>
		<body>## Issue Description  Type: *bug report*   Look at the method: &gt;      private static boolean checkClusterField(/*@NonNull*/ FlowRule rule) {         if (!rule.isClusterMode()) {             return true;         }         ClusterFlowConfig clusterConfig = rule.getClusterConfig();         if (clusterConfig == null) {             return false;         }         if (!validClusterRuleId(clusterConfig.getFlowId())) {             return false;         }         if (!isWindowConfigValid(clusterConfig.getSampleCount(), clusterConfig.getWindowIntervalMs())) {             return false;         }         switch (rule.getStrategy()) {             case ClusterRuleConstant.FLOW_CLUSTER_STRATEGY_NORMAL:                 return true;             default:                 return false;         }     }  The method of switch (rule.getStrategy())  try to check the **rule.getStrategy()**,and the Case Statement uses ClusterRuleConstant.FLOW_CLUSTER_STRATEGY_NORMAL,is it correct? I think the method of checkClusterField() is used to check **ClusterConfig**,so,the switch  statement should be used to check the **clusterConfig.getStrategy()**,right?  #sentinel version:1.7.0-SNAPSHOT    </body>
		<created>2019-10-21 12:25:54</created>
		<closed>2019-10-22 12:28:22</closed>
	</bug>
	<bug>
		<id>1084</id>
		<title>Incorrect entry-exit state when assembling multiple chained SentinelReactorTransformer</title>
		<body>## Issue Description  Type: *bug report*  ### Describe what happened (or what feature you want)  Incorrect entry-exit state when assembling multiple chained `SentinelReactorTransformer` like this:  ```java upstream   .transform(new SentinelReactorTransformer&lt;&gt;("reactor-service-a"))   .transform(new SentinelReactorTransformer&lt;&gt;("reactor-service-b")) ```  When the flow control for the latter resource (e.g. `reactor-service-b`) is triggered, the `SentinelReactorSubscriber` will signal `cancel()` and propagate the `BlockException`, but the `SentinelReactorSubscriber` did not handle the `hookOnCancel` appropriately, thus causing the `AsyncEntry` of the former resource `reactor-service-a` not exited.  ### Describe what you expected to happen  The `onCancel()` signal should be handled correctly, so the entry could be exited.  ### How to reproduce it (as minimally and precisely as possible)  Run this code snippet:  ```java public static void main(String[] args) throws Exception {     FlowRuleManager.loadRules(         Arrays.asList(new FlowRule("reactor-service-b").setCount(0))     );     Mono.just(2)         .transform(new SentinelReactorTransformer&lt;&gt;("reactor-service-a"))         .transform(new SentinelReactorTransformer&lt;&gt;("reactor-service-b"))         .subscribe(System.out::println, Throwable::printStackTrace); } ```  We set a `FlowRule` for resource `reactor-service-b` to disallow its invocation. After the code snippet is executed, we could find that the inner AsyncEntry for `reactor-service-a` is not exited.  ``` 1571105350000|2019-10-15 10:09:10|reactor-service-a|1|0|0|0|0|0 1571105350000|2019-10-15 10:09:10|reactor-service-b|0|1|0|0|0|0 ```  ### Tell us your environment  Sentinel 1.7.0-SNAPSHOT on `master` branch.</body>
		<created>2019-10-15 03:56:01</created>
		<closed>2019-10-23 11:35:15</closed>
	</bug>
	<bug>
		<id>1077</id>
		<title>Wrong resource name in ClusterNode-related commands for SphU.entry(method)</title>
		<body># Issue Description  Type: *bug report*  ### Describe what happened (or what feature you want)  Wrong resource name resolved in ClusterNode-related commands (e.g. `tree`, `cnode` and `clusterNode`) for `SphU.entry(method)`. The actual resource name for the ClusterNode is correct (full-qualified, classes with package name), but when we get all ClusterNode from related API commands, the displayed resource name will be simplified (i.e. package name is omitted).  For example, for the method `com.alibaba.csp.demo.DemoService:foo(java.lang.String)`, the displayed name will be `DemoService:foo(String)`.   This is caused by the `getShowName` method of `MethodResourceWrapper`, which will simplify the FQN of the method.  This bug will also affect the resource display in the dashboard, as the data depends on the command center of Sentinel transport module. This could mislead developers.  ### Describe what you expected to happen  The resource name for the `Method` instance should be full-qualified.  ### How to reproduce it (as minimally and precisely as possible)  1. Assume we have a method `com.alibaba.csp.sentinel.dashboard.controller.DemoController#link`, we get the `Method` instance via reflection API. 2. Then invoke `SphU.entry(method)`, we can see this in the log: `Add child &lt;com.alibaba.csp.sentinel.dashboard.controller.DemoController:link()&gt; to node &lt;xxx&gt;` 3. Execute `curl localhost:8719/tree`, we cound find wrong name `DemoController:link()` here:  ``` EntranceNode: machine-root(t:0 pq:0.0 bq:0.0 tq:0.0 rt:0.0 prq:0.0 1mp:6 1mb:0 1mt:6) -EntranceNode: sentinel_web_servlet_context(t:0 pq:0.0 bq:0.0 tq:0.0 rt:0.0 prq:0.0 1mp:6 1mb:0 1mt:6) --/demo/link(t:0 pq:0.0 bq:0.0 tq:0.0 rt:0.0 prq:0.0 1mp:0 1mb:0 1mt:0) ---DemoController:link()(t:0 pq:0.0 bq:0.0 tq:0.0 rt:0.0 prq:0.0 1mp:0 1mb:0 1mt:0)  t:threadNum  pq:passQps  bq:blockQps  tq:totalQps  rt:averageRt  prq: passRequestQps 1mp:1m-pass 1mb:1m-block 1mt:1m-total ```  ### Tell us your environment  Sentinel 1.7.0-SNAPSHOT in `master` branch  ### Anything else we need to know?  NONE</body>
		<created>2019-10-09 13:10:03</created>
		<closed>2019-10-11 07:15:08</closed>
	</bug>
	<bug>
		<id>1031</id>
		<title>I think there is something wrong with InMemoryMetricsRepository</title>
		<body>Today we are doing some testing. We found that only 1-3 minutes of data can be displayed in the real-time monitoring page (实时监控页). Especially when stress testing, only the last minute can be displayed. But the document shows that this page can display the last five minutes.  So I read the source code, I think this logic was originally designed to display the last five minutes, until the [PR #488](https://github.com/alibaba/Sentinel/pull/488) merged.  I am not sure that this PR have some problems, maybe the contributor has some reasonable considerations. But it does evict data earlier, before 5 minutes elapsed.  Class 'InMemoryMetricsRepository' uses ConcurrentLinkedHashMap to store metric data, and set capacity to MAX_METRIC_LIVE_TIME_MS (5 minutes), than define the weight of each element as 'currentTime - sampleTime'. I don't think this can achieve logic that only keeps the data for 5 minutes. The 'weight' should not be used like this.   In this case, older data is heavier and takes up more space. If the timestamp of element is exactly equal to 'currentTime - 1000 * 60 * 5' , its weight is equal to MAX_METRIC_LIVE_TIME_MS. Fortunately, the weight is only calculated when the element is added. XD. If the data is pulled from the client in a timely manner, the problem will be less serious.  The weight of each element is equal to one time unit (1000ms ?), will it be better? Although it will take up a lot of memory...</body>
		<created>2019-09-02 15:19:20</created>
		<closed>2020-03-05 02:28:28</closed>
	</bug>
	<bug>
		<id>911</id>
		<title>Sentinel Feign error when invoke default method in interface</title>
		<body>When I used Sentinel, Feign reported the following error:  ``` feign.FeignException: status 500 reading PushClient#pushMessage(String,String,String,String,String,String,String)                                                                               at feign.FeignException.errorStatus(FeignException.java:78) ~[feign-core-10.1.0.jar!/:?]                                                                                                at feign.codec.ErrorDecoder$Default.decode(ErrorDecoder.java:93) ~[feign-core-10.1.0.jar!/:?]                                                                                           at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:149) ~[feign-core-10.1.0.jar!/:?]                                                                      at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:78) ~[feign-core-10.1.0.jar!/:?]                                                                                 at org.springframework.cloud.alibaba.sentinel.feign.SentinelInvocationHandler.invoke(SentinelInvocationHandler.java:103) ~[spring-cloud-alibaba-sentinel-0.2.1.RELEASE.jar!/:0.         at com.sun.proxy.$Proxy183.pushMessage(Unknown Source) ~[?:?]                                                                                                                           at outfox.course.tiku.service.kafka.Consumer.genQuizReport(Consumer.java:284) ~[classes!/:?]                                                                                            at outfox.course.tiku.service.kafka.Consumer.processQuizCorrect(Consumer.java:144) ~[classes!/:?]                                                                                       at outfox.course.tiku.service.kafka.Consumer.process(Consumer.java:95) ~[classes!/:?]                                                                                                   at outfox.course.tiku.kafka.ConsumerGroup$ConsumerThread.run(ConsumerGroup.java:114) ~[tiku-base-kafka-1.1.3.jar!/:?]                                                                   at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~[?:1.8.0_212]                                                                                               at java.util.concurrent.FutureTask.run(FutureTask.java:266) ~[?:1.8.0_212]                                                                                                              at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) ~[?:1.8.0_212]                                                                                       at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) ~[?:1.8.0_212]                                                                                       at java.lang.Thread.run(Thread.java:748) [?:1.8.0_212] ```  my code is:  ```java @PostMapping(value = "/pushMessage")     void pushMessage() ```  ```java default void pushMessage() ```  when I used default method, the error occurred.</body>
		<created>2019-07-14 10:50:54</created>
		<closed>2019-07-26 07:26:41</closed>
	</bug>
	<bug>
		<id>901</id>
		<title>ConfigUtil incompatible with Microsoft Windows</title>
		<body>&lt;!-- Here is for bug reports and feature requests ONLY!   If you're looking for help, please check our mail list and the Gitter room.  Please try to use English to describe your issue, or at least provide a snippet of English translation. --&gt;  ## Issue Description  Type: feature request  ### Describe what happened (or what feature you want)  mvn clean package faild ### Describe what you expected to happen  mvn clean package success ### How to reproduce it (as minimally and precisely as possible)  PS G:\service\Sentinel-master&gt; mvn clean package [INFO] Scanning for projects... [INFO] ------------------------------------------------------------------------ [INFO] Detecting the operating system and CPU architecture [INFO] ------------------------------------------------------------------------ [INFO] os.detected.name: windows [INFO] os.detected.arch: x86_64 [INFO] os.detected.version: 10.0 [INFO] os.detected.version.major: 10 [INFO] os.detected.version.minor: 0 [INFO] os.detected.classifier: windows-x86_64 [WARNING] The project com.alibaba.csp:sentinel-benchmark:jar:1.7.0-SNAPSHOT uses prerequisites which is only intended for maven-plugin projects but not for non maven-plugin projects. For such purposes you should use the maven-enforcer-plugin. See https://maven.apache.org/enforcer/enforcer-rules/requireMavenVersion.html [INFO] ------------------------------------------------------------------------ [INFO] Reactor Build Order: [INFO] [INFO] sentinel-parent                                                    [pom] [INFO] sentinel-core                                                      [jar] [INFO] sentinel-extension                                                 [pom] [INFO] sentinel-datasource-extension                                      [jar] [INFO] sentinel-datasource-nacos                                          [jar] [INFO] sentinel-datasource-zookeeper                                      [jar] [INFO] sentinel-datasource-apollo                                         [jar] [INFO] sentinel-datasource-redis                                          [jar] [INFO] sentinel-annotation-aspectj                                        [jar] [INFO] sentinel-transport                                                 [pom] [INFO] sentinel-transport-common                                          [jar] [INFO] sentinel-parameter-flow-control                                    [jar] [INFO] sentinel-transport-simple-http                                     [jar] [INFO] sentinel-transport-netty-http                                      [jar] [INFO] sentinel-adapter                                                   [pom] [INFO] sentinel-web-servlet                                               [jar] [INFO] sentinel-dubbo-adapter                                             [jar] [INFO] sentinel-apache-dubbo-adapter                                      [jar] [INFO] sentinel-grpc-adapter                                              [jar] [INFO] sentinel-api-gateway-adapter-common                                [jar] [INFO] sentinel-zuul-adapter                                              [jar] [INFO] sentinel-reactor-adapter                                           [jar] [INFO] sentinel-spring-webflux-adapter                                    [jar] [INFO] sentinel-spring-cloud-gateway-adapter                              [jar] [INFO] sentinel-dashboard                                                 [jar] [INFO] sentinel-demo                                                      [pom] [INFO] sentinel-demo-basic                                                [jar] [INFO] sentinel-demo-dynamic-file-rule                                    [jar] [INFO] sentinel-demo-rocketmq                                             [jar] [INFO] sentinel-demo-dubbo                                                [jar] [INFO] sentinel-demo-nacos-datasource                                     [jar] [INFO] sentinel-demo-zookeeper-datasource                                 [jar] [INFO] sentinel-demo-apollo-datasource                                    [jar] [INFO] sentinel-demo-annotation-spring-aop                                [jar] [INFO] sentinel-demo-parameter-flow-control                               [jar] [INFO] sentinel-demo-slot-chain-spi                                       [jar] [INFO] sentinel-cluster                                                   [pom] [INFO] sentinel-cluster-common-default                                    [jar] [INFO] sentinel-cluster-client-default                                    [jar] [INFO] sentinel-cluster-server-default                                    [jar] [INFO] sentinel-demo-cluster                                              [pom] [INFO] sentinel-demo-cluster-embedded                                     [jar] [INFO] sentinel-demo-cluster-server-alone                                 [jar] [INFO] sentinel-demo-command-handler                                      [jar] [INFO] sentinel-demo-spring-webflux                                       [jar] [INFO] sentinel-demo-apache-dubbo                                         [jar] [INFO] sentinel-demo-spring-cloud-gateway                                 [jar] [INFO] sentinel-demo-zuul-gateway                                         [jar] [INFO] Sentinel JMH benchmark                                             [jar] [INFO] [INFO] ------------------&lt; com.alibaba.csp:sentinel-parent &gt;------------------- [INFO] Building sentinel-parent 1.7.0-SNAPSHOT                           [1/49] [INFO] --------------------------------[ pom ]--------------------------------- [INFO] [INFO] --- maven-clean-plugin:2.5:clean (default-clean) @ sentinel-parent --- [INFO] [INFO] --- jacoco-maven-plugin:0.8.3:prepare-agent (default) @ sentinel-parent --- [INFO] argLine set to -javaagent:C:\\Users\\Administrator\\.m2\\repository\\org\\jacoco\\org.jacoco.agent\\0.8.3\\org.jacoco.agent-0.8.3-runtime.jar=destfile=G:\\service\\Sentinel-master\\target\\jacoco.exec [INFO] [INFO] --- jacoco-maven-plugin:0.8.3:report (report) @ sentinel-parent --- [INFO] Skipping JaCoCo execution due to missing execution data file. [INFO] [INFO] -------------------&lt; com.alibaba.csp:sentinel-core &gt;-------------------- [INFO] Building sentinel-core 1.7.0-SNAPSHOT                             [2/49] [INFO] --------------------------------[ jar ]--------------------------------- [INFO] [INFO] --- maven-clean-plugin:2.5:clean (default-clean) @ sentinel-core --- [INFO] Deleting G:\service\Sentinel-master\sentinel-core\target [INFO] [INFO] --- jacoco-maven-plugin:0.8.3:prepare-agent (default) @ sentinel-core --- [INFO] argLine set to -javaagent:C:\\Users\\Administrator\\.m2\\repository\\org\\jacoco\\org.jacoco.agent\\0.8.3\\org.jacoco.agent-0.8.3-runtime.jar=destfile=G:\\service\\Sentinel-master\\sentinel-core\\target\\jacoco.exec [INFO] [INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ sentinel-core --- [INFO] Using 'UTF-8' encoding to copy filtered resources. [INFO] Copying 2 resources [INFO] [INFO] --- maven-compiler-plugin:3.8.0:compile (default-compile) @ sentinel-core --- [INFO] Changes detected - recompiling the module! [INFO] Compiling 165 source files to G:\service\Sentinel-master\sentinel-core\target\classes [WARNING] /G:/service/Sentinel-master/sentinel-core/src/main/java/com/alibaba/csp/sentinel/slots/statistic/base/Striped64.java:[105,38] sun.misc.Unsafe是内部专用 API, 可能会在未来发行版中删除 [WARNING] /G:/service/Sentinel-master/sentinel-core/src/main/java/com/alibaba/csp/sentinel/slots/statistic/base/Striped64.java:[301,34] sun.misc.Unsafe是内部专用 API, 可能会在未来发行版中删除 [WARNING] /G:/service/Sentinel-master/sentinel-core/src/main/java/com/alibaba/csp/sentinel/slots/statistic/base/Striped64.java:[325,28] sun.misc.Unsafe是内部专用 API, 可能会在未来发行版中删除 [WARNING] /G:/service/Sentinel-master/sentinel-core/src/main/java/com/alibaba/csp/sentinel/slots/statistic/base/Striped64.java:[327,28] sun.misc.Unsafe是内部专用 API, 可能会在未来发行版中删除 [WARNING] /G:/service/Sentinel-master/sentinel-core/src/main/java/com/alibaba/csp/sentinel/slots/statistic/base/Striped64.java:[332,60] sun.misc.Unsafe是内部专用 API, 可能会在未来发行版中删除 [WARNING] /G:/service/Sentinel-master/sentinel-core/src/main/java/com/alibaba/csp/sentinel/slots/statistic/base/Striped64.java:[333,40] sun.misc.Unsafe是内部专用 API, 可能会在未来发行版中删除 [WARNING] /G:/service/Sentinel-master/sentinel-core/src/main/java/com/alibaba/csp/sentinel/slots/statistic/base/Striped64.java:[335,33] sun.misc.Unsafe是内部专用 API, 可能会在未来发行版中删除 [WARNING] /G:/service/Sentinel-master/sentinel-core/src/main/java/com/alibaba/csp/sentinel/slots/statistic/base/Striped64.java:[337,45] sun.misc.Unsafe是内部专用 API, 可能会在未来发行版中删除 [WARNING] /G:/service/Sentinel-master/sentinel-core/src/main/java/com/alibaba/csp/sentinel/eagleeye/EagleEyeCoreUtils.java:[199,34] sun.misc.Unsafe是内部专用 API, 可能会在未来发行版中删除 [WARNING] /G:/service/Sentinel-master/sentinel-core/src/main/java/com/alibaba/csp/sentinel/eagleeye/EagleEyeCoreUtils.java:[202,27] sun.misc.Unsafe是内部专用 API, 可能会在未来发行版中删除 [WARNING] /G:/service/Sentinel-master/sentinel-core/src/main/java/com/alibaba/csp/sentinel/eagleeye/EagleEyeCoreUtils.java:[214,28] sun.misc.Unsafe是内部专用 API, 可能会在未来发行版中删除 [WARNING] /G:/service/Sentinel-master/sentinel-core/src/main/java/com/alibaba/csp/sentinel/eagleeye/EagleEyeCoreUtils.java:[216,28] sun.misc.Unsafe是内部专用 API, 可能会在未来发行版中删除 [WARNING] /G:/service/Sentinel-master/sentinel-core/src/main/java/com/alibaba/csp/sentinel/eagleeye/EagleEyeCoreUtils.java:[221,83] sun.misc.Unsafe是内部专用 API, 可能会在未来发行版中删除 [WARNING] /G:/service/Sentinel-master/sentinel-core/src/main/java/com/alibaba/csp/sentinel/eagleeye/EagleEyeCoreUtils.java:[223,36] sun.misc.Unsafe是内部专用 API, 可能会在未来发行版中删除 [WARNING] /G:/service/Sentinel-master/sentinel-core/src/main/java/com/alibaba/csp/sentinel/eagleeye/EagleEyeCoreUtils.java:[224,39] sun.misc.Unsafe是内部专用 API, 可能会在未来发行版中删除 [WARNING] /G:/service/Sentinel-master/sentinel-core/src/main/java/com/alibaba/csp/sentinel/eagleeye/EagleEyeCoreUtils.java:[224,60] sun.misc.Unsafe是内部专用 API, 可能会在未来发行版中删除 [INFO] /G:/service/Sentinel-master/sentinel-core/src/main/java/com/alibaba/csp/sentinel/slots/block/AbstractRule.java:  某些输入文件使用了未经检查或不安全的操作。 [INFO] /G:/service/Sentinel-master/sentinel-core/src/main/java/com/alibaba/csp/sentinel/slots/block/AbstractRule.java:  有关详细信息, 请使用 -Xlint:unchecked 重新编译。 [INFO] [INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ sentinel-core --- [INFO] Using 'UTF-8' encoding to copy filtered resources. [INFO] skip non existing resourceDirectory G:\service\Sentinel-master\sentinel-core\src\test\resources [INFO] [INFO] --- maven-compiler-plugin:3.8.0:testCompile (default-testCompile) @ sentinel-core --- [INFO] Changes detected - recompiling the module! [INFO] Compiling 53 source files to G:\service\Sentinel-master\sentinel-core\target\test-classes [INFO] [INFO] --- maven-surefire-plugin:2.22.1:test (default-test) @ sentinel-core --- [INFO] [INFO] ------------------------------------------------------- [INFO]  T E S T S [INFO] ------------------------------------------------------- [INFO] Running com.alibaba.csp.sentinel.AsyncEntryIntegrationTest INFO: log output type is: file INFO: log charset is: utf-8 INFO: log base dir is: C:\Users\Administrator\logs\csp\ INFO: log name use pid is: false abc: 1562727355143 Async result: 666 [INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.822 s - in com.alibaba.csp.sentinel.AsyncEntryIntegrationTest [INFO] Running com.alibaba.csp.sentinel.AsyncEntryTest [INFO] Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.007 s - in com.alibaba.csp.sentinel.AsyncEntryTest [INFO] Running com.alibaba.csp.sentinel.config.SentinelConfigTest [INFO] Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.007 s - in com.alibaba.csp.sentinel.config.SentinelConfigTest [INFO] Running com.alibaba.csp.sentinel.ConstantsTest [INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.002 s - in com.alibaba.csp.sentinel.ConstantsTest [INFO] Running com.alibaba.csp.sentinel.context.ContextTest [INFO] Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.906 s - in com.alibaba.csp.sentinel.context.ContextTest [INFO] Running com.alibaba.csp.sentinel.CtEntryTest [INFO] Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.729 s - in com.alibaba.csp.sentinel.CtEntryTest [INFO] Running com.alibaba.csp.sentinel.CtSphTest [INFO] Tests run: 10, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.587 s - in com.alibaba.csp.sentinel.CtSphTest [INFO] Running com.alibaba.csp.sentinel.eagleeye.EagleEyeCoreUtilsTest [INFO] Tests run: 20, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.004 s - in com.alibaba.csp.sentinel.eagleeye.EagleEyeCoreUtilsTest [INFO] Running com.alibaba.csp.sentinel.EntryTest [INFO] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.003 s - in com.alibaba.csp.sentinel.EntryTest [INFO] Running com.alibaba.csp.sentinel.log.ConsoleHandlerTest [INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.002 s - in com.alibaba.csp.sentinel.log.ConsoleHandlerTest [INFO] Running com.alibaba.csp.sentinel.metric.extension.callback.MetricEntryCallbackTest [INFO] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.005 s - in com.alibaba.csp.sentinel.metric.extension.callback.MetricEntryCallbackTest [INFO] Running com.alibaba.csp.sentinel.metric.extension.callback.MetricExitCallbackTest [INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.004 s - in com.alibaba.csp.sentinel.metric.extension.callback.MetricExitCallbackTest [INFO] Running com.alibaba.csp.sentinel.node.ClusterNodeTest [INFO] Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.003 s - in com.alibaba.csp.sentinel.node.ClusterNodeTest [INFO] Running com.alibaba.csp.sentinel.node.metric.MetricWriterTest [INFO] Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.003 s - in com.alibaba.csp.sentinel.node.metric.MetricWriterTest [INFO] Running com.alibaba.csp.sentinel.node.StatisticNodeTest [INFO] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 22.198 s - in com.alibaba.csp.sentinel.node.StatisticNodeTest [INFO] Running com.alibaba.csp.sentinel.RecordLogTest [INFO] Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.085 s - in com.alibaba.csp.sentinel.RecordLogTest [INFO] Running com.alibaba.csp.sentinel.slots.block.authority.AuthorityRuleCheckerTest [INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.008 s - in com.alibaba.csp.sentinel.slots.block.authority.AuthorityRuleCheckerTest [INFO] Running com.alibaba.csp.sentinel.slots.block.authority.AuthorityRuleManagerTest [INFO] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.012 s - in com.alibaba.csp.sentinel.slots.block.authority.AuthorityRuleManagerTest [INFO] Running com.alibaba.csp.sentinel.slots.block.authority.AuthoritySlotTest [INFO] Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.002 s - in com.alibaba.csp.sentinel.slots.block.authority.AuthoritySlotTest [INFO] Running com.alibaba.csp.sentinel.slots.block.degrade.DegradeRuleManagerTest [INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.002 s - in com.alibaba.csp.sentinel.slots.block.degrade.DegradeRuleManagerTest [INFO] Running com.alibaba.csp.sentinel.slots.block.degrade.DegradeTest [INFO] Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 6.582 s - in com.alibaba.csp.sentinel.slots.block.degrade.DegradeTest [INFO] Running com.alibaba.csp.sentinel.slots.block.flow.controller.DefaultControllerTest [INFO] Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.014 s - in com.alibaba.csp.sentinel.slots.block.flow.controller.DefaultControllerTest [INFO] Running com.alibaba.csp.sentinel.slots.block.flow.controller.RateLimiterControllerTest [INFO] Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.976 s - in com.alibaba.csp.sentinel.slots.block.flow.controller.RateLimiterControllerTest [INFO] Running com.alibaba.csp.sentinel.slots.block.flow.controller.WarmUpControllerTest [INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.412 s - in com.alibaba.csp.sentinel.slots.block.flow.controller.WarmUpControllerTest [INFO] Running com.alibaba.csp.sentinel.slots.block.flow.controller.WarmUpRateLimiterControllerTest [INFO] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.998 s - in com.alibaba.csp.sentinel.slots.block.flow.controller.WarmUpRateLimiterControllerTest [INFO] Running com.alibaba.csp.sentinel.slots.block.flow.FlowPartialIntegrationTest [INFO] Tests run: 6, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.024 s - in com.alibaba.csp.sentinel.slots.block.flow.FlowPartialIntegrationTest [INFO] Running com.alibaba.csp.sentinel.slots.block.flow.FlowRuleCheckerTest [INFO] Tests run: 8, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.002 s - in com.alibaba.csp.sentinel.slots.block.flow.FlowRuleCheckerTest [INFO] Running com.alibaba.csp.sentinel.slots.block.flow.FlowRuleComparatorTest [INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.002 s - in com.alibaba.csp.sentinel.slots.block.flow.FlowRuleComparatorTest [INFO] Running com.alibaba.csp.sentinel.slots.block.flow.FlowRuleTest [WARNING] Tests run: 1, Failures: 0, Errors: 0, Skipped: 1, Time elapsed: 0.005 s - in com.alibaba.csp.sentinel.slots.block.flow.FlowRuleTest [INFO] Running com.alibaba.csp.sentinel.slots.block.flow.FlowSlotTest [INFO] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.003 s - in com.alibaba.csp.sentinel.slots.block.flow.FlowSlotTest [INFO] Running com.alibaba.csp.sentinel.slots.block.system.SystemRuleTest [INFO] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.003 s - in com.alibaba.csp.sentinel.slots.block.system.SystemRuleTest [INFO] Running com.alibaba.csp.sentinel.slots.clusterbuilder.ClusterNodeBuilderTest [INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.003 s - in com.alibaba.csp.sentinel.slots.clusterbuilder.ClusterNodeBuilderTest [INFO] Running com.alibaba.csp.sentinel.slots.logger.EagleEyeLogUtilTest [INFO] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.137 s - in com.alibaba.csp.sentinel.slots.logger.EagleEyeLogUtilTest [INFO] Running com.alibaba.csp.sentinel.slots.nodeselector.NodeSelectorTest [INFO] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.006 s - in com.alibaba.csp.sentinel.slots.nodeselector.NodeSelectorTest [INFO] Running com.alibaba.csp.sentinel.slots.statistic.base.LeapArrayTest [INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.891 s - in com.alibaba.csp.sentinel.slots.statistic.base.LeapArrayTest [INFO] Running com.alibaba.csp.sentinel.slots.statistic.metric.ArrayMetricTest [INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.075 s - in com.alibaba.csp.sentinel.slots.statistic.metric.ArrayMetricTest [INFO] Running com.alibaba.csp.sentinel.slots.statistic.metric.BucketLeapArrayTest [INFO] Tests run: 7, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 2.406 s - in com.alibaba.csp.sentinel.slots.statistic.metric.BucketLeapArrayTest [INFO] Running com.alibaba.csp.sentinel.slots.statistic.metric.FutureBucketLeapArrayTest [INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.012 s - in com.alibaba.csp.sentinel.slots.statistic.metric.FutureBucketLeapArrayTest [INFO] Running com.alibaba.csp.sentinel.slots.statistic.metric.OccupiableBucketLeapArrayTest [INFO] Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.837 s - in com.alibaba.csp.sentinel.slots.statistic.metric.OccupiableBucketLeapArrayTest [INFO] Running com.alibaba.csp.sentinel.SphOTest [INFO] Tests run: 10, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.002 s - in com.alibaba.csp.sentinel.SphOTest [INFO] Running com.alibaba.csp.sentinel.SphUTest [INFO] Tests run: 11, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.002 s - in com.alibaba.csp.sentinel.SphUTest [INFO] Running com.alibaba.csp.sentinel.TracerTest [INFO] Tests run: 6, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.003 s - in com.alibaba.csp.sentinel.TracerTest [INFO] Running com.alibaba.csp.sentinel.util.ConfigUtilTest [ERROR] Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 0.003 s &lt;&lt;&lt; FAILURE! - in com.alibaba.csp.sentinel.util.ConfigUtilTest [ERROR] testLoadProperties(com.alibaba.csp.sentinel.util.ConfigUtilTest)  Time elapsed: 0.001 s  &lt;&lt;&lt; ERROR! java.lang.NullPointerException         at com.alibaba.csp.sentinel.util.ConfigUtilTest.testLoadProperties(ConfigUtilTest.java:59)  [INFO] Running com.alibaba.csp.sentinel.util.IdUtilTest [INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 s - in com.alibaba.csp.sentinel.util.IdUtilTest [INFO] Running com.alibaba.csp.sentinel.util.MethodUtilTest [INFO] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.002 s - in com.alibaba.csp.sentinel.util.MethodUtilTest [INFO] Running com.alibaba.csp.sentinel.util.StringUtilTest [INFO] Tests run: 9, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.003 s - in com.alibaba.csp.sentinel.util.StringUtilTest [INFO] Running com.alibaba.csp.sentinel.util.VersionUtilTest [INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.003 s - in com.alibaba.csp.sentinel.util.VersionUtilTest [INFO] [INFO] Results: [INFO] [ERROR] Errors: [ERROR]   ConfigUtilTest.testLoadProperties:59 NullPointer [INFO] [ERROR] Tests run: 167, Failures: 0, Errors: 1, Skipped: 1 [INFO] [INFO] ------------------------------------------------------------------------ [INFO] Reactor Summary for sentinel-parent 1.7.0-SNAPSHOT: [INFO] [INFO] sentinel-parent .................................... SUCCESS [  0.746 s] [INFO] sentinel-core ...................................... FAILURE [ 49.272 s] [INFO] sentinel-extension ................................. SKIPPED [INFO] sentinel-datasource-extension ...................... SKIPPED [INFO] sentinel-datasource-nacos .......................... SKIPPED [INFO] sentinel-datasource-zookeeper ...................... SKIPPED [INFO] sentinel-datasource-apollo ......................... SKIPPED [INFO] sentinel-datasource-redis .......................... SKIPPED [INFO] sentinel-annotation-aspectj ........................ SKIPPED [INFO] sentinel-transport ................................. SKIPPED [INFO] sentinel-transport-common .......................... SKIPPED [INFO] sentinel-parameter-flow-control .................... SKIPPED [INFO] sentinel-transport-simple-http ..................... SKIPPED [INFO] sentinel-transport-netty-http ...................... SKIPPED [INFO] sentinel-adapter ................................... SKIPPED [INFO] sentinel-web-servlet ............................... SKIPPED [INFO] sentinel-dubbo-adapter ............................. SKIPPED [INFO] sentinel-apache-dubbo-adapter ...................... SKIPPED [INFO] sentinel-grpc-adapter .............................. SKIPPED [INFO] sentinel-api-gateway-adapter-common ................ SKIPPED [INFO] sentinel-zuul-adapter .............................. SKIPPED [INFO] sentinel-reactor-adapter ........................... SKIPPED [INFO] sentinel-spring-webflux-adapter .................... SKIPPED [INFO] sentinel-spring-cloud-gateway-adapter .............. SKIPPED [INFO] sentinel-dashboard ................................. SKIPPED [INFO] sentinel-demo ...................................... SKIPPED [INFO] sentinel-demo-basic ................................ SKIPPED [INFO] sentinel-demo-dynamic-file-rule .................... SKIPPED [INFO] sentinel-demo-rocketmq ............................. SKIPPED [INFO] sentinel-demo-dubbo ................................ SKIPPED [INFO] sentinel-demo-nacos-datasource ..................... SKIPPED [INFO] sentinel-demo-zookeeper-datasource ................. SKIPPED [INFO] sentinel-demo-apollo-datasource .................... SKIPPED [INFO] sentinel-demo-annotation-spring-aop ................ SKIPPED [INFO] sentinel-demo-parameter-flow-control ............... SKIPPED [INFO] sentinel-demo-slot-chain-spi ....................... SKIPPED [INFO] sentinel-cluster ................................... SKIPPED [INFO] sentinel-cluster-common-default .................... SKIPPED [INFO] sentinel-cluster-client-default .................... SKIPPED [INFO] sentinel-cluster-server-default .................... SKIPPED [INFO] sentinel-demo-cluster .............................. SKIPPED [INFO] sentinel-demo-cluster-embedded ..................... SKIPPED [INFO] sentinel-demo-cluster-server-alone ................. SKIPPED [INFO] sentinel-demo-command-handler ...................... SKIPPED [INFO] sentinel-demo-spring-webflux ....................... SKIPPED [INFO] sentinel-demo-apache-dubbo ......................... SKIPPED [INFO] sentinel-demo-spring-cloud-gateway ................. SKIPPED [INFO] sentinel-demo-zuul-gateway ......................... SKIPPED [INFO] Sentinel JMH benchmark ............................. SKIPPED [INFO] ------------------------------------------------------------------------ [INFO] BUILD FAILURE [INFO] ------------------------------------------------------------------------ [INFO] Total time:  50.853 s [INFO] Finished at: 2019-07-10T10:56:38+08:00 [INFO] ------------------------------------------------------------------------ [ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.22.1:test (default-test) on project sentinel-core: There are test failures. [ERROR] [ERROR] Please refer to G:\service\Sentinel-master\sentinel-core\target\surefire-reports for the individual test results. [ERROR] Please refer to dump files (if any exist) [date].dump, [date]-jvmRun[N].dump and [date].dumpstream. [ERROR] -&gt; [Help 1] [ERROR] [ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch. [ERROR] Re-run Maven using the -X switch to enable full debug logging. [ERROR] [ERROR] For more information about the errors and possible solutions, please read the following articles: [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException [ERROR] [ERROR] After correcting the problems, you can resume the build with the command [ERROR]   mvn &lt;goals&gt; -rf :sentinel-core PS G:\service\Sentinel-master&gt;  ### Tell us your environment win 10, jdk1.8  maven 10.0  ### Anything else we need to know?    </body>
		<created>2019-07-10 02:57:18</created>
		<closed>2019-07-10 11:21:13</closed>
	</bug>
	<bug>
		<id>843</id>
		<title>Ping response data (byte type) in default cluster module might overflow</title>
		<body>&lt;!-- Here is for bug reports and feature requests ONLY!   If you're looking for help, please check our mail list and the Gitter room.  Please try to use English to describe your issue, or at least provide a snippet of English translation. --&gt;  ## Issue Description  Type: *bug report*  ### Describe what happened  The type of ping response data in default cluster transport implementation is `byte`, which indicates the current amount of connected clients of the namespace. So numeric overflow will occur when connected count outnumbers 127 (`Byte.MAX_VALUE`), causing the log information incorrect.  ### Describe what you expected to happen  The type of ping response data should be `int`.  ### How to reproduce it (as minimally and precisely as possible)  Assume we have more than 127 machines (of the same namespace) connected to the token server, when there are new machines connecting to the token server, the connected count in ping response log will be negative like this:  ``` [TokenClientHandler] Client ping OK (target server: 12.23.34.45, connected count: -73) ```  ### Tell us your environment  Sentinel 1.7.0-SNAPSHOT in `master`.</body>
		<created>2019-06-17 09:02:10</created>
		<closed>2019-06-18 07:11:06</closed>
	</bug>
	<bug>
		<id>837</id>
		<title>ParamFlowChecker has an int overflow risk</title>
		<body>ParamFlowChecker基于sentinel-parameter-flow-control1.6.1 int toAddCount = (int)((passTime * tokenCount) / (rule.getDurationInSec() * 1000)); 这部分代码，如果出现，流量极小(or脉冲)，但是tokenCount配置又很大的情况，出现int溢出的问题</body>
		<created>2019-06-16 12:01:09</created>
		<closed>2019-06-18 05:39:38</closed>
	</bug>
	<bug>
		<id>810</id>
		<title>cannot  access cluster flow rule information from http:ip:port/cluster/server/flowRules</title>
		<body>&lt;!-- Here is for bug reports and feature requests ONLY!   HttpServerHandler.parseTarget这块代码可能是个bug, 由于只截取了第二个string， 导致访问 http://ip:port/cluster/server/info 提示“Unknown command "cluster/server/info"  因为 而HttpServer.handlerMap 里面存放CommandHandler 的key是  /cluster/server/info 而不是cluster    private String parseTarget(String uri) {         if (StringUtil.isEmpty(uri)) {             return "";         }         String[] arr = uri.split("/");         if (arr.length &lt; 2) {             return "";         }         return arr[1];     }         </body>
		<created>2019-06-04 06:46:57</created>
		<closed>2019-06-12 01:36:26</closed>
	</bug>
	<bug>
		<id>750</id>
		<title>[Bug] Customized parameters are not carried when exiting entries in SentinelReactorSubscriber</title>
		<body>## Issue Description  Type: *bug report*  ### Describe what happened  Customized parameters are not carried when exiting entries in `SentinelReactorSubscriber`. When calling `entry.exit()` the adapter should also carry the parameters like this:  ```java currentEntry.exit(1, entryConfig.getArgs()); ```  ### Describe what you expected to happen  The parameters should be carried when exiting the resource entry.</body>
		<created>2019-05-10 06:50:39</created>
		<closed>2019-05-10 06:51:02</closed>
	</bug>
	<bug>
		<id>734</id>
		<title>[Bug]Entry auto close will lead wrong biz Exception tracing</title>
		<body>&lt;!-- Here is for bug reports and feature requests ONLY!   If you're looking for help, please check our mail list and the Gitter room.  Please try to use English to describe your issue, or at least provide a snippet of English translation. --&gt;  ## Issue Description  Type: *bug report*  ### Describe what happened (or what feature you want) Since 1.5.0 Sentinel supports try-with-resources of `Entry`, this will lead wrong biz Exception tracing. As the flowing code shows:  ```java try (Entry entry = SphU.entry("HelloWorld")) {     // Your business logic here.     System.out.println("hello world");     throw new RuntimeException("bizException"); } catch (BlockException e) {     // Handle rejected request.     e.printStackTrace(); } catch (Exception e2) {     // biz exception     Tracer.trace(e2); // can't trace the e2 properly, because entry has already exited here. } ``` In the above code, `e2` can't be traced properly, because `entry.close()` will be invoked prior to the catch block, this will lead wrong biz Exception tracing.  ### Describe what you expected to happen   ### How to reproduce it (as minimally and precisely as possible) Run the above code, you will see `Tracer.trace(e2)` did not take effect.  ### Tell us your environment   ### Anything else we need to know?    </body>
		<created>2019-05-06 05:54:48</created>
		<closed>2019-05-29 05:54:55</closed>
	</bug>
	<bug>
		<id>733</id>
		<title>Chinese characters are malformed in response body of ZuulBlockFallbackProvider</title>
		<body>## Issue Description  Type: *bug report*   ### Describe what happened (or what feature you want)  ZuulBlockFallbackProvider ResponseBody 中文乱码  ### Describe what you expected to happen  支持中文message  ### How to reproduce it (as minimally and precisely as possible)  1. 增加一行 ctx.getResponse().setContentType("application/json; charset=utf-8");即可 ![image](https://user-images.githubusercontent.com/17271895/57205996-0c90d600-6ff5-11e9-9267-7133c40e834e.png)  ### Tell us your environment  sentinel-zuul-adapter 1.6.0版本     </body>
		<created>2019-05-06 03:50:12</created>
		<closed>2019-05-09 02:07:28</closed>
	</bug>
	<bug>
		<id>731</id>
		<title>delete all rules，NodeCacheListener can not listen</title>
		<body>### delete all rules，NodeCacheListener can not listen  [FlowRuleZookeeperPublisher.java](https://github.com/alibaba/Sentinel/blob/master/sentinel-dashboard/src/test/java/com/alibaba/csp/sentinel/dashboard/rule/zookeeper/FlowRuleZookeeperPublisher.java)：    add a flow control rule to the dashboard , NodeCacheListener can listen, but after deleting the flow control rule, because there are no rules, write an empty string into zk, NodeCacheListener can not listen.  ### code  ```java byte[] data = CollectionUtils.isEmpty(rules) ? "".getBytes() : converter.convert(rules).getBytes(); ```  ### Tell us your environment  zookeeper version：3.4.14 curator-recipes：2.9.0  ### Anything else we need to know?  `"[]".getBytes()`  is OK   </body>
		<created>2019-05-05 04:05:38</created>
		<closed>2019-05-05 07:08:08</closed>
	</bug>
	<bug>
		<id>705</id>
		<title>Asynchronous initialization causing concurrently problem in DashboardApplication</title>
		<body>## Issue Description Some racing problem occurred like ConcurrentModification on System.properties  ### Describe what happened (or what feature you want) ![E9B3A872-4232-406d-8976-FE114B2DA775](https://user-images.githubusercontent.com/17573073/56719741-f15fd400-6773-11e9-9161-e1d47aed9d93.png)  ### How to reproduce it (as minimally and precisely as possible) Calling setProperty putting new keys into property set while InitExecutor.doInit is executed asynchronously.  ## Discussion  ### Asynchronism Supporting We should declare whether asynchronism should be supported here.   We take the answer `YES` till someone submitted different opinions.  ### Direct Cause of the Issue The main method is shown below used by `Dashboard` booting up.  ```java public class DashboardApplication {      public static void main(String[] args) {         triggerSentinelInit();         SpringApplication.run(DashboardApplication.class, args);     }      private static void triggerSentinelInit() {         new Thread(() -&gt; InitExecutor.doInit()).start();     } } ```  The `InitExecutor.doInit()` is called in another thread when spring boot is starting. It may add new keys calling `System.setProperty` when booting. And we have the code below to load config from properties in `SentinelConfig.loadProps`:  ```java         // JVM parameter override file config.         for (Map.Entry&lt;Object, Object&gt; entry : System.getProperties().entrySet()) {             String configKey = entry.getKey().toString();             String configValue = entry.getValue().toString();             String configValueOld = getConfig(configKey);             SentinelConfig.setConfig(configKey, configValue);             if (configValueOld != null) {                 RecordLog.info("[SentinelConfig] JVM parameter overrides {0}: {1} -&gt; {2}", configKey, configValueOld, configValue);             }         } ```  Which we may use CopyOnWriteArraySet instead to walk through the values safely.   Is there any opinions, folks?</body>
		<created>2019-04-25 08:18:29</created>
		<closed>2019-04-25 12:03:37</closed>
	</bug>
	<bug>
		<id>685</id>
		<title>The BUG of OccupiableBucketLeapArrayTest.testWindowAfterOneInterval()</title>
		<body>&lt;!-- Here is for bug reports and feature requests ONLY!   If you're looking for help, please check our mail list and the Gitter room.  Please try to use English to describe your issue, or at least provide a snippet of English translation. --&gt;  ## Issue Description  Type: *bug report*  ### Describe what happened (or what feature you want)  The BUG is occasional.  I wrote the analysis in the following blog: https://www.yuque.com/zhaixiaoxiang/cwrx8f/zzy18c  ### Describe what you expected to happen   ### How to reproduce it (as minimally and precisely as possible)  Execute testWindowAfterOneInterval() many times, we will eventually get failure. (may be 5 times is enough)  ### Tell us your environment   ### Anything else we need to know?    </body>
		<created>2019-04-18 13:50:12</created>
		<closed>2019-04-20 14:28:39</closed>
	</bug>
	<bug>
		<id>643</id>
		<title>NPE bug when passing null args to SphU.entry(xxx, args) and paramIdx is negative </title>
		<body>&lt;!-- Here is for bug reports and feature requests ONLY!   If you're looking for help, please check our mail list and the Gitter room.  Please try to use English to describe your issue, or at least provide a snippet of English translation. --&gt;  ## Issue Description  Type: *bug report*  ### Describe what happened (or what feature you want)  NPE will occur when passing null args to `SphU.entry(xxx, args)` and `paramIdx` of parameter flow rule is negative (&lt; 0).  ### Describe what you expected to happen  No NPE should occur.  ### How to reproduce it (as minimally and precisely as possible)  1. Load the following parameter flow rule:  ```java ParamFlowRuleManager.loadRules(Collections.singletonList(     new ParamFlowRule("abc").setParamIdx(-1).setCount(1) )); ```  2. call `SphU.entry(xxx, args)` with null args:  ```java try (Entry entry = SphU.entry("abc", EntryType.IN, 1, null)) {         System.out.println("abc"); } catch (BlockException ex) {         ex.printStackTrace(); } ``` 3. See error log in `sentinel-record.log`:  ``` 2019-04-02 10:59:50 Add child &lt;abc&gt; to node &lt;sentinel_default_context&gt; 2019-04-02 10:59:50 Unexpected entry exception java.lang.NullPointerException at com.alibaba.csp.sentinel.slots.block.flow.param.ParamFlowSlot.checkFlow(ParamFlowSlot.java:77) at com.alibaba.csp.sentinel.slots.block.flow.param.ParamFlowSlot.entry(ParamFlowSlot.java:57) at com.alibaba.csp.sentinel.slots.block.flow.param.ParamFlowSlot.entry(ParamFlowSlot.java:39) at com.alibaba.csp.sentinel.slotchain.AbstractLinkedProcessorSlot.transformEntry(AbstractLinkedProcessorSlot.java:40) at com.alibaba.csp.sentinel.slotchain.AbstractLinkedProcessorSlot.fireEntry(AbstractLinkedProcessorSlot.java:32) at com.alibaba.csp.sentinel.slots.statistic.StatisticSlot.entry(StatisticSlot.java:56) at com.alibaba.csp.sentinel.slots.statistic.StatisticSlot.entry(StatisticSlot.java:49) at com.alibaba.csp.sentinel.slotchain.AbstractLinkedProcessorSlot.transformEntry(AbstractLinkedProcessorSlot.java:40) at com.alibaba.csp.sentinel.slotchain.AbstractLinkedProcessorSlot.fireEntry(AbstractLinkedProcessorSlot.java:32) at com.alibaba.csp.sentinel.slots.logger.LogSlot.entry(LogSlot.java:35) at com.alibaba.csp.sentinel.slots.logger.LogSlot.entry(LogSlot.java:29) at com.alibaba.csp.sentinel.slotchain.AbstractLinkedProcessorSlot.transformEntry(AbstractLinkedProcessorSlot.java:40) at com.alibaba.csp.sentinel.slotchain.AbstractLinkedProcessorSlot.fireEntry(AbstractLinkedProcessorSlot.java:32) at com.alibaba.csp.sentinel.slots.clusterbuilder.ClusterBuilderSlot.entry(ClusterBuilderSlot.java:101) at com.alibaba.csp.sentinel.slots.clusterbuilder.ClusterBuilderSlot.entry(ClusterBuilderSlot.java:47) at com.alibaba.csp.sentinel.slotchain.AbstractLinkedProcessorSlot.transformEntry(AbstractLinkedProcessorSlot.java:40) at com.alibaba.csp.sentinel.slotchain.AbstractLinkedProcessorSlot.fireEntry(AbstractLinkedProcessorSlot.java:32) at com.alibaba.csp.sentinel.slots.nodeselector.NodeSelectorSlot.entry(NodeSelectorSlot.java:170) at com.alibaba.csp.sentinel.slotchain.AbstractLinkedProcessorSlot.transformEntry(AbstractLinkedProcessorSlot.java:40) at com.alibaba.csp.sentinel.slotchain.AbstractLinkedProcessorSlot.fireEntry(AbstractLinkedProcessorSlot.java:32) at com.alibaba.csp.sentinel.slotchain.DefaultProcessorSlotChain$1.entry(DefaultProcessorSlotChain.java:31) at com.alibaba.csp.sentinel.slotchain.AbstractLinkedProcessorSlot.transformEntry(AbstractLinkedProcessorSlot.java:40) at com.alibaba.csp.sentinel.slotchain.DefaultProcessorSlotChain.entry(DefaultProcessorSlotChain.java:75) at com.alibaba.csp.sentinel.CtSph.entryWithPriority(CtSph.java:148) at com.alibaba.csp.sentinel.CtSph.entry(CtSph.java:176) at com.alibaba.csp.sentinel.CtSph.entry(CtSph.java:311) at com.alibaba.csp.sentinel.SphU.entry(SphU.java:202) at com.alibaba.csp.sentinel.demo.flow.param.TestDemo.main(TestDemo.java:46) ```  ### Tell us your environment  Sentinel 1.6.0-SNAPSHOT in `master` branch.  ### Anything else we need to know?  NONE</body>
		<created>2019-04-02 03:01:31</created>
		<closed>2019-04-04 01:40:24</closed>
	</bug>
	<bug>
		<id>629</id>
		<title>Entry in SentinelReactorSubscriber does not carry expected entry type</title>
		<body>&lt;!-- Here is for bug reports and feature requests ONLY!   If you're looking for help, please check our mail list and the Gitter room.  Please try to use English to describe your issue, or at least provide a snippet of English translation. --&gt;  ## Issue Description  Type: *bug report*  ### Describe what happened (or what feature you want)  Entry in `SentinelReactorSubscriber` does not carry the expected entry type. The `EntryType` passed to the subscriber did not take effect.  ### Describe what you expected to happen  Entry with the correct entry type.  ### How to reproduce it (as minimally and precisely as possible)  Run the WebFlux demo. No virtual inbound traffic node in the metrics log.  ### Tell us your environment  Sentinel 1.6.0-SNAPSHOT, JDK 1.8  ### Anything else we need to know?  NONE  </body>
		<created>2019-03-29 02:05:12</created>
		<closed>2019-04-04 01:36:05</closed>
	</bug>
	<bug>
		<id>618</id>
		<title>[bug][transport-netty-http]setRules will not receive rules correctly when rules is longer then url's limitation</title>
		<body>## Issue Description  When rules grow modification requests through transport module will fail.  ### Describe what happened (or what feature you want) HTTP 400 occurred  ### Describe what you expected to happen Rules can be saved successfully.  ### How to reproduce it (as minimally and precisely as possible) Increasing the rules to the number 18 or more may reproduce the issue. </body>
		<created>2019-03-26 09:59:31</created>
		<closed>2019-04-12 05:53:07</closed>
	</bug>
	<bug>
		<id>609</id>
		<title>[Bug]Deadlock may happen in Env static code block</title>
		<body>&lt;!-- Here is for bug reports and feature requests ONLY!  If you're looking for help, please check our mail list and the Gitter room.  Please try to use English to describe your issue, or at least provide a snippet of English translation. --&gt;  ## Issue Description  Type: *bug report*  ### Describe what happened (or what feature you want)  `Env` static code block may cause a deadlock.  ### Describe what you expected to happen  `Env` static code block initialize successfully.  ### How to reproduce it (as minimally and precisely as possible)  It's not really easy to cause a deadlock when init `Env`, but java static code block does have the possibility to cause a deadlock. For example, the following code will always lead a deadlock:  ```java public class Main {     public static void main(String[] args) throws Exception {         System.out.println("Main begin...");         new Thread(() -&gt; {             System.out.println(Env.EVN_STR);         }).start();         System.out.println(Constants.CONSTANTS_STR);         System.out.println("Main end");     }      public static final class Env {         static final StringBuilder EVN_STR = new StringBuilder("env str");          static {             System.out.println("Env static block begin, " + Thread.currentThread());             // deadlock by Constants             System.out.println("Env refer -&gt; " + Constants.CONSTANTS_STR);             System.out.println("Env static block end");         }     }      public static class Constants {         static final StringBuilder CONSTANTS_STR = new StringBuilder("constants str");          static {             System.out.println("Constants static block begin, " + Thread.currentThread());             // deadlock by Env             System.out.println("Constants refer -&gt; " + Env.EVN_STR);             System.out.println("Constants static block end");         }     } } ``` The above code is simple, but clearly explain how deadlock happens in static initialization:  1. two classes' static code block refer to each other(circular reference, here is `Env` and `Constants`). 2. the two classes' static initialization are triggered at the same time in diffenert threads. Each thread holds static lock of one class and wait the other.  It's what Sentinel did in `com.alibaba.csp.sentinel.Env` and `com.alibaba.csp.sentinel.Constants`. They have a circular reference in static code block (1) and may both be triggered at the same time in different threads (2). More precisely, it's `FlowRuleManager` who starts the other thread.  Destroying any condition of the two can prevent deadlocks. Condition (2) can hardly be destroyed because Sentinel initialization is quite complex. But we can carefully **eliminate circular references in any static code block**, it's what we should do all the time.  ### Tell us your environment  Sentinel SDK 1.5.0  ### Anything else we need to know? </body>
		<created>2019-03-23 13:07:00</created>
		<closed>2019-03-25 01:22:39</closed>
	</bug>
	<bug>
		<id>558</id>
		<title>HttpHeartbeatSender is not backwards compatible</title>
		<body>## Issue Description  In codes before commit#d3bbe290c2a89ba2b5c043c24f280daaac60d4c2 why you set `csp.sentinel.dashboard.server` to `http://a.com` that means `http://a.com`. But after that commit it means `http://a.com:8080`.  When your http server listens to `80` it's normally to drop port in address but when listening to non 80(http protocol) you should add it to address.  But now we must add the port specification to address when the port exactly is `80` but you don't need to do this when the port is 8080?  ### Describe what you expected to happen  server=a.com means http://a.com server=a.com:8080 means http://a.com:8080 </body>
		<created>2019-03-08 07:42:50</created>
		<closed>2019-03-14 02:25:02</closed>
	</bug>
	<bug>
		<id>547</id>
		<title>CspFormatter format method in sentinel-core is not thread-safe</title>
		<body>&lt;!-- Here is for bug reports and feature requests ONLY!   If you're looking for help, please check our mail list and the Gitter room.  Please try to use English to describe your issue, or at least provide a snippet of English translation. --&gt;  ## Issue Description  Type: *bug report* or *feature request*  ### Describe what happened (or what feature you want) sentinel 1.4.2 sentinel-core 模块CspFormatter类 format 方法线程不安全  ### Describe what you expected to happen 多线程情况下不应该存在线程安全问题  ### How to reproduce it (as minimally and precisely as possible)  1.  2.  3.   ### Tell us your environment sentinel 1.4.2  ### Anything else we need to know?    </body>
		<created>2019-03-06 09:50:45</created>
		<closed>2019-03-06 12:39:34</closed>
	</bug>
	<bug>
		<id>530</id>
		<title>Run dubbo demo FooProviderBootstrap fail</title>
		<body>## Issue Description  Type: *bug report*   ### Describe what happened (or what feature you want) run FooProviderBootstrap.main() fail  Exception in thread "main" java.lang.NoClassDefFoundError: com/alibaba/spring/beans/factory/annotation/AnnotationInjectedBeanPostProcessor at java.lang.ClassLoader.defineClass1(Native Method) at java.lang.ClassLoader.defineClass(ClassLoader.java:763) at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142) at java.net.URLClassLoader.defineClass(URLClassLoader.java:467) at java.net.URLClassLoader.access$100(URLClassLoader.java:73) at java.net.URLClassLoader$1.run(URLClassLoader.java:368) at java.net.URLClassLoader$1.run(URLClassLoader.java:362) at java.security.AccessController.doPrivileged(Native Method) at java.net.URLClassLoader.findClass(URLClassLoader.java:361) at java.lang.ClassLoader.loadClass(ClassLoader.java:424) at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:335) at java.lang.ClassLoader.loadClass(ClassLoader.java:357) at com.alibaba.dubbo.config.spring.context.annotation.DubboComponentScanRegistrar.registerReferenceAnnotationBeanPostProcessor(DubboComponentScanRegistrar.java:90) at com.alibaba.dubbo.config.spring.context.annotation.DubboComponentScanRegistrar.registerBeanDefinitions(DubboComponentScanRegistrar.java:61) at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.lambda$loadBeanDefinitionsFromRegistrars$1(ConfigurationClassBeanDefinitionReader.java:358) at java.util.LinkedHashMap.forEach(LinkedHashMap.java:684) at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitionsFromRegistrars(ConfigurationClassBeanDefinitionReader.java:357) at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitionsForConfigurationClass(ConfigurationClassBeanDefinitionReader.java:145) at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitions(ConfigurationClassBeanDefinitionReader.java:117) at org.springframework.context.annotation.ConfigurationClassPostProcessor.processConfigBeanDefinitions(ConfigurationClassPostProcessor.java:328) at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanDefinitionRegistry(ConfigurationClassPostProcessor.java:233) at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanDefinitionRegistryPostProcessors(PostProcessorRegistrationDelegate.java:273) at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:93) at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:694) at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:532) at com.alibaba.csp.sentinel.demo.dubbo.demo1.FooProviderBootstrap.main(FooProviderBootstrap.java:50) Caused by: java.lang.ClassNotFoundException: com.alibaba.spring.beans.factory.annotation.AnnotationInjectedBeanPostProcessor at java.net.URLClassLoader.findClass(URLClassLoader.java:381) at java.lang.ClassLoader.loadClass(ClassLoader.java:424) at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:335) at java.lang.ClassLoader.loadClass(ClassLoader.java:357) ... 26 more ### Describe what you expected to happen   ### How to reproduce it (as minimally and precisely as possible) 1. check out master 2. run com.alibaba.csp.sentinel.demo.dubbo.demo1.FooProviderBootstrap.main()  ### Tell us your environment branch: master   sentinel-demo-dubbo dubbo version is 2.6.5  class ReferenceAnnotationBeanPostProcessor extends AnnotationInjectedBeanPostProcessor. When I change dubbo version to 2.5.8 it is ok . class ReferenceAnnotationBeanPostProcessor extends InstantiationAwareBeanPostProcessorAdapter</body>
		<created>2019-02-28 07:36:57</created>
		<closed>2019-03-06 11:59:35</closed>
	</bug>
	<bug>
		<id>496</id>
		<title>Sentinel Dubbo adapter is not compatible with Dubbo 2.7.x</title>
		<body>&lt;!-- Here is for bug reports and feature requests ONLY!   If you're looking for help, please check our mail list and the Gitter room.  Please try to use English to describe your issue, or at least provide a snippet of English translation. --&gt;  ## Issue Description  Type: *bug report*   ### Describe what happened (or what feature you want)  aused by: org.apache.dubbo.rpc.RpcException: Failed to invoke the method sayHello in the service com.ffcs.crmd.test.facade.UserFacade. Tried 3 times of the providers [192.168.250.37:20880] (1/1) from the registry localhost:2181 on the consumer 192.168.250.37 using the dubbo version 2.7.0. Last error is: com.alibaba.dubbo.rpc.Invoker.getUrl()Lcom/alibaba/dubbo/common/URL; at org.apache.dubbo.rpc.cluster.support.FailoverClusterInvoker.doInvoke(FailoverClusterInvoker.java:111) ~[dubbo-2.7.0.jar:2.7.0] at org.apache.dubbo.rpc.cluster.support.AbstractClusterInvoker.invoke(AbstractClusterInvoker.java:241) ~[dubbo-2.7.0.jar:2.7.0] at org.apache.dubbo.rpc.cluster.support.wrapper.MockClusterInvoker.invoke(MockClusterInvoker.java:75) ~[dubbo-2.7.0.jar:2.7.0] at org.apache.dubbo.rpc.proxy.InvokerInvocationHandler.invoke(InvokerInvocationHandler.java:57) ~[dubbo-2.7.0.jar:2.7.0] at org.apache.dubbo.common.bytecode.proxy0.sayHello(proxy0.java) ~[dubbo-2.7.0.jar:2.7.0] at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_72] at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_72] at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_72] at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_72] at org.apache.dubbo.config.spring.beans.factory.annotation.ReferenceAnnotationBeanPostProcessor$ReferenceBeanInvocationHandler.invoke(ReferenceAnnotationBeanPostProcessor.java:158) ~[dubbo-2.7.0.jar:2.7.0] ... 68 more Caused by: java.lang.NoSuchMethodError: com.alibaba.dubbo.rpc.Invoker.getUrl()Lcom/alibaba/dubbo/common/URL; at com.alibaba.csp.sentinel.adapter.dubbo.DubboAppContextFilter.invoke(DubboAppContextFilter.java:37) ~[sentinel-dubbo-adapter-1.4.1.jar:?] at com.alibaba.dubbo.rpc.Filter.invoke(Filter.java:29) ~[dubbo-2.7.0.jar:2.7.0] at org.apache.dubbo.rpc.protocol.ProtocolFilterWrapper$1.invoke(ProtocolFilterWrapper.java:73) ~[dubbo-2.7.0.jar:2.7.0] at org.apache.dubbo.rpc.protocol.dubbo.filter.FutureFilter.invoke(FutureFilter.java:49) ~[dubbo-2.7.0.jar:2.7.0] at org.apache.dubbo.rpc.protocol.ProtocolFilterWrapper$1.invoke(ProtocolFilterWrapper.java:73) ~[dubbo-2.7.0.jar:2.7.0] at org.apache.dubbo.rpc.filter.ConsumerContextFilter.invoke(ConsumerContextFilter.java:54) ~[dubbo-2.7.0.jar:2.7.0] at org.apache.dubbo.rpc.protocol.ProtocolFilterWrapper$1.invoke(ProtocolFilterWrapper.java:73) ~[dubbo-2.7.0.jar:2.7.0] at org.apache.dubbo.rpc.listener.ListenerInvokerWrapper.invoke(ListenerInvokerWrapper.java:77) ~[dubbo-2.7.0.jar:2.7.0] at org.apache.dubbo.rpc.protocol.InvokerWrapper.invoke(InvokerWrapper.java:56) ~[dubbo-2.7.0.jar:2.7.0] at org.apache.dubbo.rpc.cluster.support.FailoverClusterInvoker.doInvoke(FailoverClusterInvoker.java:80) ~[dubbo-2.7.0.jar:2.7.0] at org.apache.dubbo.rpc.cluster.support.AbstractClusterInvoker.invoke(AbstractClusterInvoker.java:241) ~[dubbo-2.7.0.jar:2.7.0] at org.apache.dubbo.rpc.cluster.support.wrapper.MockClusterInvoker.invoke(MockClusterInvoker.java:75) ~[dubbo-2.7.0.jar:2.7.0] at org.apache.dubbo.rpc.proxy.InvokerInvocationHandler.invoke(InvokerInvocationHandler.java:57) ~[dubbo-2.7.0.jar:2.7.0] at org.apache.dubbo.common.bytecode.proxy0.sayHello(proxy0.java) ~[dubbo-2.7.0.jar:2.7.0] at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_72] at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_72] at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_72] at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_72] at org.apache.dubbo.config.spring.beans.factory.annotation.ReferenceAnnotationBeanPostProcessor$ReferenceBeanInvocationHandler.invoke(ReferenceAnnotationBeanPostProcessor.java:158) ~[dubbo-2.7.0.jar:2.7.0] ... 68 more   ### Describe what you expected to happen 正常拦截，并推送信息到控制台。  ### How to reproduce it (as minimally and precisely as possible)  1. dubbo2.7.0 2. 集成Sentinel 3. 调用服务  ### Tell us your environment JDK1.8 + dubbo2.7.0  ### Anything else we need to know? 2.7的类名变化，Sentinel-dubbo-adapter未及时更新，导致报错。   </body>
		<created>2019-02-19 16:16:28</created>
		<closed>2019-03-27 06:20:14</closed>
	</bug>
	<bug>
		<id>493</id>
		<title>NPE when adding event count in ParamMapBucket</title>
		<body>&lt;!-- Here is for bug reports and feature requests ONLY!   If you're looking for help, please check our mail list and the Gitter room.  Please try to use English to describe your issue, or at least provide a snippet of English translation. --&gt;  ## Issue Description  Type: *bug report*  ### Describe what happened  NPE occurred in parameter flow control (when adding event count in ParamMapBucket). The logs in `sentinel-record.log`:  ``` 2019-02-19 15:25:31 [ParameterMetric] Param exception java.lang.NullPointerException at com.alibaba.csp.sentinel.slots.statistic.data.ParamMapBucket.add(ParamMapBucket.java:64) at com.alibaba.csp.sentinel.slots.statistic.metric.HotParameterLeapArray.addValue(HotParameterLeapArray.java:64) at com.alibaba.csp.sentinel.slots.block.flow.param.ParameterMetric.add(ParameterMetric.java:242) at com.alibaba.csp.sentinel.slots.block.flow.param.ParameterMetric.addBlock(ParameterMetric.java:212) at com.alibaba.csp.sentinel.slots.block.flow.param.ParamFlowSlot.addBlockCount(ParamFlowSlot.java:99) at com.alibaba.csp.sentinel.slots.block.flow.param.ParamFlowSlot.checkFlow(ParamFlowSlot.java:82) at com.alibaba.csp.sentinel.slots.block.flow.param.ParamFlowSlot.entry(ParamFlowSlot.java:58) at com.alibaba.csp.sentinel.slots.block.flow.param.ParamFlowSlot.entry(ParamFlowSlot.java:39) at com.alibaba.csp.sentinel.slotchain.AbstractLinkedProcessorSlot.transformEntry(AbstractLinkedProcessorSlot.java:40) at com.alibaba.csp.sentinel.slotchain.AbstractLinkedProcessorSlot.fireEntry(AbstractLinkedProcessorSlot.java:32) at com.alibaba.csp.sentinel.slots.statistic.StatisticSlot.entry(StatisticSlot.java:56) at com.alibaba.csp.sentinel.slots.statistic.StatisticSlot.entry(StatisticSlot.java:49) at com.alibaba.csp.sentinel.slotchain.AbstractLinkedProcessorSlot.transformEntry(AbstractLinkedProcessorSlot.java:40) at com.alibaba.csp.sentinel.slotchain.AbstractLinkedProcessorSlot.fireEntry(AbstractLinkedProcessorSlot.java:32) at com.alibaba.csp.sentinel.slots.logger.LogSlot.entry(LogSlot.java:35) at com.alibaba.csp.sentinel.slots.logger.LogSlot.entry(LogSlot.java:29) at com.alibaba.csp.sentinel.slotchain.AbstractLinkedProcessorSlot.transformEntry(AbstractLinkedProcessorSlot.java:40) at com.alibaba.csp.sentinel.slotchain.AbstractLinkedProcessorSlot.fireEntry(AbstractLinkedProcessorSlot.java:32) at com.alibaba.csp.sentinel.slots.clusterbuilder.ClusterBuilderSlot.entry(ClusterBuilderSlot.java:103) at com.alibaba.csp.sentinel.slots.clusterbuilder.ClusterBuilderSlot.entry(ClusterBuilderSlot.java:48) at com.alibaba.csp.sentinel.slotchain.AbstractLinkedProcessorSlot.transformEntry(AbstractLinkedProcessorSlot.java:40) at com.alibaba.csp.sentinel.slotchain.AbstractLinkedProcessorSlot.fireEntry(AbstractLinkedProcessorSlot.java:32) at com.alibaba.csp.sentinel.slots.nodeselector.NodeSelectorSlot.entry(NodeSelectorSlot.java:171) at com.alibaba.csp.sentinel.slotchain.AbstractLinkedProcessorSlot.transformEntry(AbstractLinkedProcessorSlot.java:40) at com.alibaba.csp.sentinel.slotchain.AbstractLinkedProcessorSlot.fireEntry(AbstractLinkedProcessorSlot.java:32) at com.alibaba.csp.sentinel.slotchain.DefaultProcessorSlotChain$1.entry(DefaultProcessorSlotChain.java:31) at com.alibaba.csp.sentinel.slotchain.AbstractLinkedProcessorSlot.transformEntry(AbstractLinkedProcessorSlot.java:40) at com.alibaba.csp.sentinel.slotchain.DefaultProcessorSlotChain.entry(DefaultProcessorSlotChain.java:75) at com.alibaba.csp.sentinel.CtSph.entryWithPriority(CtSph.java:147) at com.alibaba.csp.sentinel.CtSph.entry(CtSph.java:175) at com.alibaba.csp.sentinel.CtSph.entry(CtSph.java:310) at com.alibaba.csp.sentinel.SphU.entry(SphU.java:202) at com.example.demo.AutoRun$RunTask.run(AutoRun.java:128) at java.lang.Thread.run(Thread.java:748) ```  This may be caused by old value eviction in LRU map, so between the `putIfAbsent` and `get` operation, there eviction might have occurred:  ```java public ParamMapBucket add(RollingParamEvent event, int count, Object value) {     data[event.ordinal()].putIfAbsent(value, new AtomicInteger());     // eviction might have occurred here, so the counter might be null.     AtomicInteger counter = data[event.ordinal()].get(value);     counter.addAndGet(count); } ```  ### Describe what you expected to happen  No NPE occurs.  ### How to reproduce it (as minimally and precisely as possible)  Run this code snippet:  ```java public class ParamMapBucketTest {      public static void main(String[] args) throws Exception {         final ParamMapBucket bucket = new ParamMapBucket();         for (int i = 0; i &lt; 32; i++) {             new Thread(new Runnable() {                 @Override                 public void run() {                     Random random = new Random();                     while (true) {                         bucket.add(RollingParamEvent.REQUEST_PASSED, 1, random.nextInt(10000));                     }                 }             }).start();         }         Thread.sleep(1000000);     } } ```  Then the NPE will occur:  ``` Exception in thread "Thread-3" java.lang.NullPointerException at com.alibaba.csp.sentinel.slots.statistic.data.ParamMapBucket.add(ParamMapBucket.java:64) at com.alibaba.csp.sentinel.slots.statistic.data.ParamMapBucketTest$1.run(ParamMapBucketTest.java:42) at java.lang.Thread.run(Thread.java:748) Exception in thread "Thread-29" java.lang.NullPointerException at com.alibaba.csp.sentinel.slots.statistic.data.ParamMapBucket.add(ParamMapBucket.java:64) at com.alibaba.csp.sentinel.slots.statistic.data.ParamMapBucketTest$1.run(ParamMapBucketTest.java:42) at java.lang.Thread.run(Thread.java:748) ```  ### Tell us your environment  Sentinel 1.4.2-SNAPSHOT in `master`</body>
		<created>2019-02-19 08:25:52</created>
		<closed>2019-02-20 05:57:05</closed>
	</bug>
	<bug>
		<id>463</id>
		<title>NullPointException occurred when ClusterServer shutdown and then startup</title>
		<body>&lt;!-- Here is for bug reports and feature requests ONLY!   If you're looking for help, please check our mail list and the Gitter room.  Please try to use English to describe your issue, or at least provide a snippet of English translation. --&gt;  ## Issue Description  [bug1] I created one ClusterServer and two ClusterClients, the clients are connected to the server. I shutdown the server and then startup, and then the NPE occurred.  [bug2] The total connection count is also not correct, the count should be 2 but it is 1 shown in the TokenServer list page. While the state of two cluster clients are connected that i can see it in TokenClient list page.  ### Describe what happened (or what feature you want) The stack error msg is blow: Sat Jan 26 21:01:26 CST 2019 sun.misc.Launcher$AppClassLoader@18b4aac2 JM.Log:INFO Log root path: /Users/wanghui/logs/ Sat Jan 26 21:01:26 CST 2019 sun.misc.Launcher$AppClassLoader@18b4aac2 JM.Log:INFO Set nacos log path: /Users/wanghui/logs/nacos 21:01:26.764 [main] INFO  com.alibaba.nacos.client.identify.CredentialWatcher - [appA] [] [] No credential found 21:01:27.450 [nioEventLoopGroup-2-1] INFO  io.netty.handler.logging.LoggingHandler - [id: 0xf468a88d] REGISTERED 21:01:27.451 [nioEventLoopGroup-2-1] INFO  io.netty.handler.logging.LoggingHandler - [id: 0xf468a88d] BIND: 0.0.0.0/0.0.0.0:11111 21:01:27.459 [nioEventLoopGroup-2-1] INFO  io.netty.handler.logging.LoggingHandler - [id: 0xf468a88d, L:/0:0:0:0:0:0:0:0:11111] ACTIVE 21:01:28.711 [nioEventLoopGroup-2-1] INFO  io.netty.handler.logging.LoggingHandler - [id: 0xf468a88d, L:/0:0:0:0:0:0:0:0:11111] READ: [id: 0xe2e5b58d, L:/192.168.0.104:11111 - R:/192.168.0.104:64840] 21:01:28.712 [nioEventLoopGroup-2-1] WARN  io.netty.bootstrap.ServerBootstrap - Unknown channel option 'SO_TIMEOUT' for channel '[id: 0xe2e5b58d, L:/192.168.0.104:11111 - R:/192.168.0.104:64840]' 21:01:28.712 [nioEventLoopGroup-2-1] INFO  io.netty.handler.logging.LoggingHandler - [id: 0xf468a88d, L:/0:0:0:0:0:0:0:0:11111] READ COMPLETE 21:01:28.717 [nioEventLoopGroup-2-1] INFO  io.netty.handler.logging.LoggingHandler - [id: 0xf468a88d, L:/0:0:0:0:0:0:0:0:11111] READ: [id: 0x9f7bb1af, L:/192.168.0.104:11111 - R:/192.168.0.104:64841] 21:01:28.717 [nioEventLoopGroup-2-1] WARN  io.netty.bootstrap.ServerBootstrap - Unknown channel option 'SO_TIMEOUT' for channel '[id: 0x9f7bb1af, L:/192.168.0.104:11111 - R:/192.168.0.104:64841]' 21:01:28.717 [nioEventLoopGroup-2-1] INFO  io.netty.handler.logging.LoggingHandler - [id: 0xf468a88d, L:/0:0:0:0:0:0:0:0:11111] READ COMPLETE 21:01:28.742 [nioEventLoopGroup-3-1] WARN  io.netty.channel.DefaultChannelPipeline - An exceptionCaught() event was fired, and it reached at the tail of the pipeline. It usually means the last handler in the pipeline did not handle the exception. java.lang.NullPointerException: null at com.alibaba.csp.sentinel.cluster.server.connection.ConnectionManager.addConnection(ConnectionManager.java:97) ~[sentinel-cluster-server-default-1.4.1.jar:?] at com.alibaba.csp.sentinel.cluster.server.handler.TokenServerHandler.handlePingRequest(TokenServerHandler.java:103) ~[sentinel-cluster-server-default-1.4.1.jar:?] at com.alibaba.csp.sentinel.cluster.server.handler.TokenServerHandler.channelRead(TokenServerHandler.java:69) ~[sentinel-cluster-server-default-1.4.1.jar:?] at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-transport-4.1.31.Final.jar:4.1.31.Final] at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-transport-4.1.31.Final.jar:4.1.31.Final] at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-transport-4.1.31.Final.jar:4.1.31.Final] at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:323) [netty-codec-4.1.31.Final.jar:4.1.31.Final] at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:297) [netty-codec-4.1.31.Final.jar:4.1.31.Final] at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-transport-4.1.31.Final.jar:4.1.31.Final] at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-transport-4.1.31.Final.jar:4.1.31.Final] at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-transport-4.1.31.Final.jar:4.1.31.Final] at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:323) [netty-codec-4.1.31.Final.jar:4.1.31.Final] at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:297) [netty-codec-4.1.31.Final.jar:4.1.31.Final] at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-transport-4.1.31.Final.jar:4.1.31.Final] at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-transport-4.1.31.Final.jar:4.1.31.Final] at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-transport-4.1.31.Final.jar:4.1.31.Final] at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1434) [netty-transport-4.1.31.Final.jar:4.1.31.Final] at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-transport-4.1.31.Final.jar:4.1.31.Final] at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-transport-4.1.31.Final.jar:4.1.31.Final] at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:965) [netty-transport-4.1.31.Final.jar:4.1.31.Final] at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:163) [netty-transport-4.1.31.Final.jar:4.1.31.Final] at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:648) [netty-transport-4.1.31.Final.jar:4.1.31.Final] at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:583) [netty-transport-4.1.31.Final.jar:4.1.31.Final] at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:500) [netty-transport-4.1.31.Final.jar:4.1.31.Final] at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:462) [netty-transport-4.1.31.Final.jar:4.1.31.Final] at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:897) [netty-common-4.1.31.Final.jar:4.1.31.Final] at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) [netty-common-4.1.31.Final.jar:4.1.31.Final] at java.lang.Thread.run(Thread.java:748) [?:1.8.0_152]   ### Describe what you expected to happen  No NPE should be thrown  ### How to reproduce it (as minimally and precisely as possible)  1. start a token server 2. start two token client and connect the token server 3. shutdown the token server 4.restart the token server  ### Tell us your environment OS: Darwin 18.2.0 Darwin Kernel Version 18.2.0: Mon Nov 12 20:24:46 PST 2018; root:xnu-4903.231.4~2/RELEASE_X86_64 x86_64 JDK: java version "1.8.0_152" Java(TM) SE Runtime Environment (build 1.8.0_152-b16) Java HotSpot(TM) 64-Bit Server VM (build 25.152-b16, mixed mode)  ### Anything else we need to know?  None  </body>
		<created>2019-01-26 13:17:09</created>
		<closed>2019-01-31 06:25:02</closed>
	</bug>
	<bug>
		<id>462</id>
		<title>[BUG] Divide-by-zero overflow in rate limiter traffic controller</title>
		<body>&lt;!-- Here is for bug reports and feature requests ONLY!   If you're looking for help, please check our mail list and the Gitter room.  Please try to use English to describe your issue, or at least provide a snippet of English translation. --&gt;  ## Issue Description  Type: *bug report*  ### Describe what happened (or what feature you want)  Add testcase following and the it will failed after second times of loop cause of overflow in `RateLimiterController`:  ```java     @Test     public void testPaceController_zeroattack() throws InterruptedException {         RateLimiterController paceController = new RateLimiterController(500, 0d);         Node node = mock(Node.class);          for (int i = 0; i &lt; 2; i++) {             assertFalse(paceController.canPass(node, 1));             assertTrue(paceController.canPass(node, 0));         }     } ```  ### Describe what you expected to happen  the test case testPaceController_zeroattack should success no matter how many times of retries  ### How to reproduce it (as minimally and precisely as possible)  1. add testcase following ```     @Test     public void testPaceController_zeroattack() throws InterruptedException {         RateLimiterController paceController = new RateLimiterController(500, 0d);         Node node = mock(Node.class);          for (int i = 0; i &lt; 2; i++) {             assertFalse(paceController.canPass(node, 1));             assertTrue(paceController.canPass(node, 0));         }     } ``` 2. Run the case 3. It will failed at second loop  ### Tell us your environment  MacOs  ### Anything else we need to know?  It's a serious bug and will cause zero attack </body>
		<created>2019-01-26 07:31:36</created>
		<closed>2019-01-28 06:23:42</closed>
	</bug>
	<bug>
		<id>433</id>
		<title>1.4.0 dashboard, found concurrent errors</title>
		<body>&lt;!-- Here is for bug reports and feature requests ONLY!   If you're looking for help, please check our mail list and the Gitter room.  Please try to use English to describe your issue, or at least provide a snippet of English translation. --&gt;  ## Issue Description  Type: *bug report* or *feature request*  ### Describe what happened (or what feature you want) This error occurred once in the log during the test ![image](https://user-images.githubusercontent.com/46816101/51388972-f0f8e100-1b65-11e9-9a34-fb123b742f9a.png)  ### Describe what you expected to happen   ### How to reproduce it (as minimally and precisely as possible)  1.  2.  3.   ### Tell us your environment   ### Anything else we need to know?   </body>
		<created>2019-01-18 13:17:56</created>
		<closed>2019-02-22 09:20:11</closed>
	</bug>
	<bug>
		<id>420</id>
		<title>waitTime in RateLimiterController may be negative</title>
		<body>&lt;!-- Here is for bug reports and feature requests ONLY!   If you're looking for help, please check our mail list and the Gitter room.  Please try to use English to describe your issue, or at least provide a snippet of English translation. --&gt;  ## Issue Description  Type: *bug report*   ### Describe what happened (or what feature you want)  waitTime in RateLimiterController may be negative, which will lead a `java.lang.IllegalArgumentException`, the stack trace is as flow: ``` 2019-01-14 12:51:50 Entry exception java.lang.IllegalArgumentException: timeout value is negative         at java.lang.Thread.sleep(Native Method)         at com.alibaba.csp.sentinel.slots.block.flow.controller.RateLimiterController.canPass(RateLimiterController.java:67)         at com.alibaba.csp.sentinel.slots.block.flow.FlowRule.passCheck(FlowRule.java:168)         at com.alibaba.csp.sentinel.slots.block.flow.FlowRuleManager.checkFlow(FlowRuleManager.java:159)         at com.alibaba.csp.sentinel.slots.block.flow.FlowSlot.entry(FlowSlot.java:117)         at com.alibaba.csp.sentinel.slots.block.flow.FlowSlot.entry(FlowSlot.java:111)         at com.alibaba.csp.sentinel.slotchain.AbstractLinkedProcessorSlot.transformEntry(AbstractLinkedProcessorSlot.java:40)         at com.alibaba.csp.sentinel.slotchain.AbstractLinkedProcessorSlot.fireEntry(AbstractLinkedProcessorSlot.java:32)         at com.alibaba.csp.sentinel.slots.block.authority.AuthoritySlot.entry(AuthoritySlot.java:39)         at com.alibaba.csp.sentinel.slots.block.authority.AuthoritySlot.entry(AuthoritySlot.java:33)         at com.alibaba.csp.sentinel.slotchain.AbstractLinkedProcessorSlot.transformEntry(AbstractLinkedProcessorSlot.java:40)         at com.alibaba.csp.sentinel.slotchain.AbstractLinkedProcessorSlot.fireEntry(AbstractLinkedProcessorSlot.java:32)         at com.alibaba.csp.sentinel.slots.system.SystemSlot.entry(SystemSlot.java:36)         at com.alibaba.csp.sentinel.slots.system.SystemSlot.entry(SystemSlot.java:30)         at com.alibaba.csp.sentinel.slotchain.AbstractLinkedProcessorSlot.transformEntry(AbstractLinkedProcessorSlot.java:40)         at com.alibaba.csp.sentinel.slotchain.AbstractLinkedProcessorSlot.fireEntry(AbstractLinkedProcessorSlot.java:32)         at com.alibaba.csp.sentinel.slots.block.flow.param.ParamFlowSlot.entry(ParamFlowSlot.java:54)         at com.alibaba.csp.sentinel.slots.block.flow.param.ParamFlowSlot.entry(ParamFlowSlot.java:39)         at com.alibaba.csp.sentinel.slotchain.AbstractLinkedProcessorSlot.transformEntry(AbstractLinkedProcessorSlot.java:40)         at com.alibaba.csp.sentinel.slotchain.AbstractLinkedProcessorSlot.fireEntry(AbstractLinkedProcessorSlot.java:32)         at com.alibaba.csp.sentinel.slots.statistic.StatisticSlot.entry(StatisticSlot.java:54)         at com.alibaba.csp.sentinel.slots.statistic.StatisticSlot.entry(StatisticSlot.java:48)         at com.alibaba.csp.sentinel.slotchain.AbstractLinkedProcessorSlot.transformEntry(AbstractLinkedProcessorSlot.java:40)         at com.alibaba.csp.sentinel.slotchain.AbstractLinkedProcessorSlot.fireEntry(AbstractLinkedProcessorSlot.java:32)         at com.alibaba.csp.sentinel.slots.logger.LogSlot.entry(LogSlot.java:35)         at com.alibaba.csp.sentinel.slots.logger.LogSlot.entry(LogSlot.java:29)         at com.alibaba.csp.sentinel.slotchain.AbstractLinkedProcessorSlot.transformEntry(AbstractLinkedProcessorSlot.java:40)         at com.alibaba.csp.sentinel.slotchain.AbstractLinkedProcessorSlot.fireEntry(AbstractLinkedProcessorSlot.java:32)         at com.alibaba.csp.sentinel.slots.clusterbuilder.ClusterBuilderSlot.entry(ClusterBuilderSlot.java:103)         at com.alibaba.csp.sentinel.slots.clusterbuilder.ClusterBuilderSlot.entry(ClusterBuilderSlot.java:48)         at com.alibaba.csp.sentinel.slotchain.AbstractLinkedProcessorSlot.transformEntry(AbstractLinkedProcessorSlot.java:40)         at com.alibaba.csp.sentinel.slotchain.AbstractLinkedProcessorSlot.fireEntry(AbstractLinkedProcessorSlot.java:32)         at com.alibaba.csp.sentinel.slots.nodeselector.NodeSelectorSlot.entry(NodeSelectorSlot.java:171)         at com.alibaba.csp.sentinel.slotchain.AbstractLinkedProcessorSlot.transformEntry(AbstractLinkedProcessorSlot.java:40)         at com.alibaba.csp.sentinel.slotchain.AbstractLinkedProcessorSlot.fireEntry(AbstractLinkedProcessorSlot.java:32)         at com.alibaba.csp.sentinel.slotchain.DefaultProcessorSlotChain$1.entry(DefaultProcessorSlotChain.java:31)         at com.alibaba.csp.sentinel.slotchain.AbstractLinkedProcessorSlot.transformEntry(AbstractLinkedProcessorSlot.java:40)         at com.alibaba.csp.sentinel.slotchain.DefaultProcessorSlotChain.entry(DefaultProcessorSlotChain.java:75)         at com.alibaba.csp.sentinel.CtSph.entry(CtSph.java:157)         at com.alibaba.csp.sentinel.CtSph.entry(CtSph.java:300)         at com.alibaba.csp.sentinel.SphU.entry(SphU.java:86) ...... ```    ### Describe what you expected to happen  Wait time should never be negative.  ### How to reproduce it (as minimally and precisely as possible)  It dose not usually happen, I see it in sentinel-record.log.   ### Tell us your environment Sentinel SDK 1.3.1  ### Anything else we need to know?  none.  </body>
		<created>2019-01-15 12:28:47</created>
		<closed>2019-01-16 07:23:28</closed>
	</bug>
	<bug>
		<id>339</id>
		<title>A question about sentinel-dashboard VO</title>
		<body>### Describe what happened (or what feature you want) i use identity view to observe all the dashboard resource, but when i switch to the list view and enter search key ".json", i found it lost one json resource,then i debug the code, i found ResourceVo.java this place will skip the first node,i don't know why: ![image](https://user-images.githubusercontent.com/30717485/50442992-53323d80-093c-11e9-89c5-e2397877ab5d.png) ![image](https://user-images.githubusercontent.com/30717485/50442817-950eb400-093b-11e9-8292-ce4208405a09.png) ### Describe what you expected to happen explain the parameter "isFirst" mean    </body>
		<created>2018-12-26 10:33:25</created>
		<closed>2018-12-29 06:29:18</closed>
	</bug>
	<bug>
		<id>330</id>
		<title>MetricWriter#listMetricFiles() will read wrong files when one appName contains some other one</title>
		<body>&lt;!-- Here is for bug reports and feature requests ONLY!   If you're looking for help, please check our mail list and the Gitter room.  Please try to use English to describe your issue, or at least provide a snippet of English translation. --&gt;  ## Issue Description  Type: *bug report*  ### Describe what happened (or what feature you want)  `MetricWriter#listMetricFiles()` method is used for listing all metric files of the specific app. It uses `String.contains()` to search the metric file name instead of whole matching, this will lead wrong file reading when appName contains some other one, for example one appName is *simple-Sentinel-SDK-Demo*, the other is *Sentinel-SDK-Demo*, the former app's metric file will appearing in the latter metric files list.  A wrong file list is as follow:  ```shell ts=2018-12-24 20:59:24; [cost=1.483204ms] result=@ArrayList[     @ArrayList[         @String[/Users/shadowalker/logs/csp/Sentinel-SDK-Demo-metrics.log.2018-12-24.95],         @String[/Users/shadowalker/logs/csp/simple-Sentinel-SDK-Demo-metrics.log.2018-12-24.90],         @String[/Users/shadowalker/logs/csp/simple-Sentinel-SDK-Demo-metrics.log.2018-12-24.91],         @String[/Users/shadowalker/logs/csp/simple-Sentinel-SDK-Demo-metrics.log.2018-12-24.92],         @String[/Users/shadowalker/logs/csp/simple-Sentinel-SDK-Demo-metrics.log.2018-12-24.93],         @String[/Users/shadowalker/logs/csp/simple-Sentinel-SDK-Demo-metrics.log.2018-12-24.94],     ], ] ```  ### Describe what you expected to happen  `MetricWriter#listMetricFiles()` should return right metric files name list.   ### How to reproduce it (as minimally and precisely as possible)  1. Use `-Dproject.name=simple-Sentinel-SDK-Demo` to generate tens of metric files 2. Use `-Dproject.name=Sentinel-SDK-Demo` to run for a while 3. Open sentinel console, it will get wrong metrics.  ### Tell us your environment   ### Anything else we need to know?    </body>
		<created>2018-12-24 13:30:24</created>
		<closed>2018-12-25 01:31:19</closed>
	</bug>
	<bug>
		<id>289</id>
		<title>[Bug] grpc adapter-Tracer.trace() can't success</title>
		<body>&lt;!-- Here is for bug reports and feature requests ONLY!   If you're looking for help, please check our mail list and the Gitter room.  Please try to use English to describe your issue, or at least provide a snippet of English translation. --&gt;  ## Issue Description Here is code url: [code](https://github.com/alibaba/Sentinel/tree/master/sentinel-adapter/sentinel-grpc-adapter/src/main/java/com/alibaba/csp/sentinel/adapter/grpc)  the interceptor's(Server or Client) interceptCall method and the Listener method  may run on different Thread, So,Tracer.trace(throwable) may not success if current Thread don't  have the Context. I think here is should use `AsyncEntry` and call   ```  ContextUtil.runOnContext(finalEntry.getAsyncContext(), new Runnable() {                                             @Override                                             public void run() {                                                 Tracer.trace(new Exception());                                             }                                         }); ```      ### Describe what happened (or what feature you want) ![22](https://raw.githubusercontent.com/Ooo0oO0o0oO/res/master/WX20181207-124354@2x.png)  ![12](https://raw.githubusercontent.com/Ooo0oO0o0oO/res/master/WX20181207-120606@2x.png)  </body>
		<created>2018-12-07 05:02:33</created>
		<closed>2019-08-14 09:04:37</closed>
	</bug>
	<bug>
		<id>242</id>
		<title>Use Long value as Node statistic type is not accurate enough</title>
		<body>&lt;!-- Here is for bug reports and feature requests ONLY!   If you're looking for help, please check our mail list and the Gitter room.  Please try to use English to describe your issue, or at least provide a snippet of English translation. --&gt;  ## Issue Description  Methods in `com.alibaba.csp.sentinel.node.Node` use `long` as return type, which is not accurate enough. Use `double` could be more suitable.  For example `StatisticNode.passQps()` implements as follow:   ```java public long passQps() {     return rollingCounterInSecond.pass() / IntervalProperty.INTERVAL; } ``` Both `rollingCounterInSecond.pass()` and `IntervalProperty.INTERVAL` are Long/Integer value, so the division will rounded down. When `IntervalProperty.INTERVAL` is not 1, the division will lead loss of precision.   Type: *bug report*  ### Describe what happened (or what feature you want)  Use `Long` value as Node statistic type is not accurate enough.  ### Describe what you expected to happen  Use `double` as the return type.  ### How to reproduce it (as minimally and precisely as possible)   ### Tell us your environment   ### Anything else we need to know?    </body>
		<created>2018-11-14 06:47:23</created>
		<closed>2019-03-13 14:10:21</closed>
	</bug>
	<bug>
		<id>201</id>
		<title>sentinel-dashboard TreeMap ConcurrentModificationException</title>
		<body>## Issue Description When I use the dashboard, 'MetricFetcher' throws a ConcurrentModificationException and requests the home page, `Jackson` also throws the same exception.  ### Describe what happened (or what feature you want) Here is the exception stack traces: ``` 2018-10-26 14:58:00 [sentinel-dashboard-metrics-fetchWorker-thread-59] INFO  c.t.c.s.d.metric.MetricFetcher - fetchOnce(spark-feature-online) error java.util.ConcurrentModificationException: null         at java.util.TreeMap$PrivateEntryIterator.nextEntry(TreeMap.java:1211)         at java.util.TreeMap$KeyIterator.next(TreeMap.java:1265)         at com.taobao.csp.sentinel.dashboard.metric.MetricFetcher.fetchOnce(MetricFetcher.java:185)         at com.taobao.csp.sentinel.dashboard.metric.MetricFetcher.lambda$doFetchAppMetric$3(MetricFetcher.java:258) ```  and  ``` 2018-10-26 14:57:44 [http-nio-9090-exec-7] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.http.converter.HttpMessageNotWritableException: Could not write JSON: (was java.util.ConcurrentModificationException); nested exception is com.fasterxml.jackson.databind.JsonMappingException: (was java.util.ConcurrentModificationException) (through reference chain: com.taobao.csp.sentinel.dashboard.view.Result["data"]-&gt;java.util.ArrayList[3]-&gt;com.taobao.csp.sentinel.dashboard.discovery.AppInfo["machines"]-&gt;java.util.TreeSet[378])] with root cause java.util.ConcurrentModificationException: null         at java.util.TreeMap$PrivateEntryIterator.nextEntry(TreeMap.java:1211)         at java.util.TreeMap$KeyIterator.next(TreeMap.java:1265)         at com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serializeContents(CollectionSerializer.java:133)         at com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serialize(CollectionSerializer.java:112)         ......         at com.fasterxml.jackson.databind.ObjectWriter.writeValue(ObjectWriter.java:951)         at org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.writeInternal(AbstractJackson2HttpMessageConverter.java:286)         at org.springframework.http.converter.AbstractGenericHttpMessageConverter.write(AbstractGenericHttpMessageConverter.java:106)         at org.springframework.web.servlet.mvc.method.annotation.AbstractMessageConverterMethodProcessor.writeWithMessageConverters(AbstractMessageConverterMethodProcessor.java:231)         at org.springframework.web.servlet.mvc.method.annotation.RequestResponseBodyMethodProcessor.handleReturnValue(RequestResponseBodyMethodProcessor.java:174)         ......         at javax.servlet.http.HttpServlet.service(HttpServlet.java:635)         at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:846) ```  ### Describe what you expected to happen `AppInfo` uses `synchronized` for the `getMachines` and `addMachine` methods, but calls the `getmachines` method to get the same `TreeSet`, so there is no guarantee that `Set&lt;MachineInfo&gt; machines = new TreeSet&lt;MachineInfo &gt;();` is modified by multiple threads, so it is very likely that a `ConcurrentModificationException` exception will be thrown.  However, I did not find that the `Set&lt;MachineInfo&gt;` was modified by calling the `getmachines` method.  Here is the code for `AppInfo`： ``` public class AppInfo {      private Set&lt;MachineInfo&gt; machines = new TreeSet&lt;MachineInfo&gt;();      public synchronized Set&lt;MachineInfo&gt; getMachines() {         return machines;     }      public synchronized boolean addMachine(MachineInfo machineInfo) {         machines.remove(machineInfo);         return machines.add(machineInfo);     }  } ```  ### How to reproduce it (as minimally and precisely as possible) 1. When calling the `getMachines` method, create a new `TreeSet` to avoid concurrency issues.    </body>
		<created>2018-10-26 08:31:33</created>
		<closed>2018-10-29 12:19:30</closed>
	</bug>
	<bug>
		<id>198</id>
		<title>[Bug] Sentinel Dashboard should not allow invalid values when configuring rules</title>
		<body>&lt;!-- Here is for bug reports and feature requests ONLY!   If you're looking for help, please check our mail list and the Gitter room. --&gt;  ## Issue Description  Type: *bug report*  ### Describe what happened (or what feature you want)  sentinel 0.2.0 dashboard 配置 限流，降级，系统规则所有涉及到填写数字目前可以是负数  ### Describe what you expected to happen  Do not allow invalid values in rules.  ### How to reproduce it (as minimally and precisely as possible)  1. Add a degrade rule with negative degrade window in Sentinel Dashboard.  ### Tell us your environment  - Sentinel 0.2.0 dashboard  ### Anything else we need to know?    </body>
		<created>2018-10-26 03:37:50</created>
		<closed>2018-10-29 05:35:07</closed>
	</bug>
	<bug>
		<id>184</id>
		<title>Exception when post data to transport api</title>
		<body>## Issue Description A `UnsupportedOperationException` will occur when posting data to any transport api(netty-http).  ### Describe what you expected to happen Getting correct body content.   </body>
		<created>2018-10-16 03:55:10</created>
		<closed>2018-10-16 09:44:29</closed>
	</bug>
	<bug>
		<id>181</id>
		<title>Wrong file name used when log file exists checking</title>
		<body>&lt;!-- Here is for bug reports and feature requests ONLY!   If you're looking for help, please check our mail list and the Gitter room. --&gt;  ## Issue Description  Type: *bug report*   ### Describe what happened (or what feature you want)  `DateFileLogHandler.logFileExits()` method uses a wrong log file name when checking log file exists, this will lead trying to  recreate the log file at every log writing, which will cause performance problem.  ### Describe what you expected to happen Use the right log file name when exists checking.  ### How to reproduce it (as minimally and precisely as possible)  1. Invoke `RecordLog.info()` in high concurrency; 2. Use `jstack pid` to see the stack trace of the current process, then we will see many threads *BLOCKED* `at com.alibaba.csp.sentinel.log.DateFileLogHandler.publish()`.  ### Tell us your environment None.  ### Anything else we need to know? None.   </body>
		<created>2018-10-15 03:54:53</created>
		<closed>2018-10-16 09:03:23</closed>
	</bug>
	<bug>
		<id>151</id>
		<title>[Bug] Error occurs internal when context count exceeds MAX_CONTEXT_NAME_SIZE</title>
		<body>## Issue Description  Type: *bug report* (**essential**)  ### Describe what happened  When context count exceeds `MAX_CONTEXT_NAME_SIZE` (by now **2000**), entries with new context will cause fatal internal errors, leading to some weird exceptions (e.g. `ErrorEntryFreeException`).   The `NullContext` does not act as expected due to bugs in `ContextUtil#trueEnter`.  ### Describe what you expected to happen  When context count exceeds `MAX_CONTEXT_NAME_SIZE`, entries with new context should not pass the slot chain. Entries with default context can go through the slot chain.  ### How to reproduce it (as minimally and precisely as possible)  A test program:  ```java public class Test {     public static void main(String[] args) {         loadContexts();         try {             ContextUtil.enter("context-more");             entryFor("abc");             entryFor("bcd");         } finally {             ContextUtil.exit();         }     }      private static void loadContexts() {         for (int i = 0; i &lt; 2018; i++) {             ContextUtil.enter("a" + i);             ContextUtil.exit();         }     }      private static void entryFor(String resourceName) {         Entry entry = null;         try {             entry = SphU.entry(resourceName);         } catch (BlockException ex) {             ex.printStackTrace();         } finally {             if (entry != null) {                 entry.exit();             }         }     } } ```  Then errors will be found in associated `record.log` like this:  ``` 2018-09-18 22:20:01 Sentinel unexpected exception java.lang.NullPointerException at com.alibaba.csp.sentinel.slots.nodeselector.NodeSelectorSlot.entry(NodeSelectorSlot.java:166) at com.alibaba.csp.sentinel.slotchain.AbstractLinkedProcessorSlot.transformEntry(AbstractLinkedProcessorSlot.java:40) at com.alibaba.csp.sentinel.slotchain.AbstractLinkedProcessorSlot.fireEntry(AbstractLinkedProcessorSlot.java:32) at com.alibaba.csp.sentinel.slotchain.DefaultProcessorSlotChain$1.entry(DefaultProcessorSlotChain.java:31) at com.alibaba.csp.sentinel.slotchain.AbstractLinkedProcessorSlot.transformEntry(AbstractLinkedProcessorSlot.java:40) at com.alibaba.csp.sentinel.slotchain.DefaultProcessorSlotChain.entry(DefaultProcessorSlotChain.java:75) at com.alibaba.csp.sentinel.CtSph.entry(CtSph.java:142) at com.alibaba.csp.sentinel.CtSph.entry(CtSph.java:256) at com.alibaba.csp.sentinel.SphU.entry(SphU.java:86) at com.alibaba.csp.sentinel.demo.Test.entryFor(Test.java:69) at com.alibaba.csp.sentinel.demo.Test.main(Test.java:33) 2018-09-18 22:20:01 Entry exit exception java.lang.NullPointerException at com.alibaba.csp.sentinel.slots.statistic.StatisticSlot.exit(StatisticSlot.java:115) at com.alibaba.csp.sentinel.slotchain.AbstractLinkedProcessorSlot.fireExit(AbstractLinkedProcessorSlot.java:46) at com.alibaba.csp.sentinel.slots.logger.LogSlot.exit(LogSlot.java:49) at com.alibaba.csp.sentinel.slotchain.AbstractLinkedProcessorSlot.fireExit(AbstractLinkedProcessorSlot.java:46) at com.alibaba.csp.sentinel.slots.clusterbuilder.ClusterBuilderSlot.exit(ClusterBuilderSlot.java:108) at com.alibaba.csp.sentinel.slotchain.AbstractLinkedProcessorSlot.fireExit(AbstractLinkedProcessorSlot.java:46) at com.alibaba.csp.sentinel.slots.nodeselector.NodeSelectorSlot.exit(NodeSelectorSlot.java:176) at com.alibaba.csp.sentinel.slotchain.AbstractLinkedProcessorSlot.fireExit(AbstractLinkedProcessorSlot.java:46) at com.alibaba.csp.sentinel.slotchain.DefaultProcessorSlotChain$1.exit(DefaultProcessorSlotChain.java:36) at com.alibaba.csp.sentinel.slotchain.DefaultProcessorSlotChain.exit(DefaultProcessorSlotChain.java:80) at com.alibaba.csp.sentinel.CtEntry.exitForContext(CtEntry.java:71) at com.alibaba.csp.sentinel.CtEntry.trueExit(CtEntry.java:94) at com.alibaba.csp.sentinel.CtEntry.exit(CtEntry.java:56) at com.alibaba.csp.sentinel.Entry.exit(Entry.java:74) at com.alibaba.csp.sentinel.demo.Test.entryFor(Test.java:74) at com.alibaba.csp.sentinel.demo.Test.main(Test.java:33) ```  ### Tell us your environment  - JDK 1.8 - Sentinel 0.2.0-SNAPSHOT (latest in `master`) </body>
		<created>2018-09-18 14:24:50</created>
		<closed>2018-09-19 06:01:08</closed>
	</bug>
	<bug>
		<id>128</id>
		<title>【bug】熔断降级的异常比例为1时，不会被隔离</title>
		<body>extends #109 你好！上次关于#109的这个bug，后来被整改了。 ### Bug描述 但是整改得并不正确.....经我测试，仅限于异常比例小于1的情况下正确。 但是当抛出的异常比例为100%时，设定的阈值小于1，此时会出现DegradeException，但是服务不会进入timeWindow被隔离。 ### 举个栗子 同样以com.alibaba.csp.sentinel.demo.degrade.ExceptionRatioDegradeDemo这个Demo为例，直接设定每次都抛出异常，结果如下（不知怎么上传图片，直接copy过来了）： `Connected to the target VM, address: '127.0.0.1:51393', transport: 'socket' begin to statistic!!! 1536131534343, oneSecondTotal:34, oneSecondPass:5, oneSecondBlock:29, oneSecondBizException:5 1536131535345, oneSecondTotal:49, oneSecondPass:5, oneSecondBlock:44, oneSecondBizException:5 1536131536345, oneSecondTotal:48, oneSecondPass:5, oneSecondBlock:43, oneSecondBizException:5 1536131537344, oneSecondTotal:48, oneSecondPass:5, oneSecondBlock:43, oneSecondBizException:5 1536131538346, oneSecondTotal:49, oneSecondPass:5, oneSecondBlock:44, oneSecondBizException:5 1536131539346, oneSecondTotal:48, oneSecondPass:5, oneSecondBlock:43, oneSecondBizException:5 1536131540346, oneSecondTotal:48, oneSecondPass:5, oneSecondBlock:43, oneSecondBizException:5 1536131541348, oneSecondTotal:49, oneSecondPass:5, oneSecondBlock:44, oneSecondBizException:5 1536131542348, oneSecondTotal:48, oneSecondPass:5, oneSecondBlock:43, oneSecondBizException:5` ### 整改措施 问题还是出在：com.alibaba.csp.sentinel.slots.block.degrade.DegradeRule的passCheck方法中，在原来的Fixed处：commit 6799da270ddd7391ea12dd3f456824a2d6a1d9d5 ``` double realSuccess = success - exception;  //186             if (realSuccess &lt;= 0) {   //187                 return exception &lt; RT_MAX_EXCEED_N;             } ``` 不应该修改，还是应该保留原来的代码： ``` if (success &lt;= 0) {                 return exception &lt; RT_MAX_EXCEED_N;             } ``` 请确认...</body>
		<created>2018-09-05 07:24:38</created>
		<closed>2018-09-05 11:03:36</closed>
	</bug>
	<bug>
		<id>109</id>
		<title>【bug】熔断降级的异常比例 与实际阈值不符</title>
		<body>Type: bug report 你好，我最近在整合Sentinel的一个项目中，发现设置的异常阈值，跟实际异常出现的比例并不符合。 就以官方的这个ExceptionRatioDegradeDemo为例子，在该例子中，根据产生异常的比例的代码片段： `if (count % 2 == 0) {                                 // biz code raise an exception.                                 throw new RuntimeException("throw runtime ");                             }` 很明显，产生异常的比例就为50%了嘛。我将原代码中DegradeRule的阈值设为0.4。那么应该就会出现服务降级了吧？实际并没有。（不知道怎么上传图片，你们可以试试）。 就在这个demo中，后来经我反复调整阈值，发现异常产生比例为0.5时，阈值的临界值为0.33 。 同样的操作，发现异常产生的比例为0.25时，阈值的临界值为0.23. 异常产生的比例为0.33时，阈值的临界值为0.26。 异常比例为1时（即100%），阈值的临界值为0.50  不知是该demo的问题还是我本地测试的问题，烦请指教！  谢谢！ demo地址：https://github.com/alibaba/Sentinel/blob/master/sentinel-demo/sentinel-demo-basic/src/main/java/com/alibaba/csp/sentinel/demo/degrade/ExceptionRatioDegradeDemo.java</body>
		<created>2018-08-30 03:41:25</created>
		<closed>2018-09-03 03:55:40</closed>
	</bug>
	<bug>
		<id>99</id>
		<title>流控规则页面BUG</title>
		<body>## Issue Description  Type: bug report  ### Describe what happened (or what feature you want)  - bug位置: 控制台 &gt; 流控规则 - bug发生条件: 修改"超时时间"时, 如果多次点击保存, 会导致:  1. 实时监控无法正常显示, 需要重启控制台后才能显示. 2. 簇点链路新增流控规则后无法显示新增规则, 需要重启控制台后才能显示. 3. 多次刷新页面之后会使簇点链路内的资源和流控规则内的规则会消失. 4. 重新修改规则时会卡住无法保存, 弹窗不会自动关闭, 顶部的进度条会卡在最后一段. 5. 等待一段时间之后控制台会卡住无法刷新,长时间处于等待响应的状态.  ### Describe what you expected to happen   ### How to reproduce it (as minimally and precisely as possible)  1. 参照描述  ### Tell us your environment 0.2.0-SNAPSHOT版本的sentinel-dashboard  ### Anything else we need to know?    </body>
		<created>2018-08-28 09:30:44</created>
		<closed>2018-08-29 09:49:30</closed>
	</bug>
	<bug>
		<id>95</id>
		<title>[Bug] 流控规则列表页 &gt; 编辑按钮 &gt; "编辑流控规则"弹出窗口 取消编辑无效</title>
		<body>## Issue Description  Type: *bug report*   ### 1. Describe what happened (or what feature you want)  * bug位置：流控规则列表页 &gt; 编辑按钮 &gt; "编辑流控规则"弹出窗口  * bug特征：修改“单机阈值”，点击“取消按钮”，修改过的值依然被保存了  ### 2. Describe what you expected to happen  * 点击“取消按钮”后，修改过的值不被保存  ### 3. How to reproduce it (as minimally and precisely as possible)  按照1的描述即可  ### Tell us your environment   ### Anything else we need to know?    </body>
		<created>2018-08-27 06:43:01</created>
		<closed>2019-01-07 08:17:20</closed>
	</bug>
	<bug>
		<id>74</id>
		<title>Wrong state for SentinelResource annotation</title>
		<body>我项目中引入sentinel，通过@SentinelResource注解的方式去监控接口的，但是调用该接口时报java.lang.IllegalStateException: Wrong state for SentinelResource annotation这个错误，请问这是什么原因引起的？</body>
		<created>2018-08-20 07:25:15</created>
		<closed>2018-08-31 03:10:41</closed>
	</bug>
	<bug>
		<id>52</id>
		<title>maven build failure and java.lang.NoClassDefFoundError Exception found</title>
		<body>## Issue Description  Type: *bug report*  ### maven build failure After cloning and importing as a maven project, I used command "maven package" then the console output is maven build failed and java.lang.NoClassDefFoundError Exception found. The complete output is  `D:\intellij_workspace_test\Sentinel&gt;mvn package [INFO] Scanning for projects... [WARNING] [WARNING] Some problems were encountered while building the effective model for com.alibaba.csp:sentinel-dashboard:jar:0.2.0-SNAPSHOT [WARNING] 'build.plugins.plugin.version' for org.springframework.boot:spring-boot-maven-plugin is missing. @ line 119, column 21 [WARNING] [WARNING] It is highly recommended to fix these problems because they threaten the stability of your build. [WARNING] [WARNING] For this reason, future Maven versions might no longer support building such malformed projects. [WARNING] [INFO] ------------------------------------------------------------------------ [INFO] Detecting the operating system and CPU architecture [INFO] ------------------------------------------------------------------------ [INFO] os.detected.name: windows [INFO] os.detected.arch: x86_64 [INFO] os.detected.version: 10.0 [INFO] os.detected.version.major: 10 [INFO] os.detected.version.minor: 0 [INFO] os.detected.classifier: windows-x86_64 [INFO] ------------------------------------------------------------------------ [INFO] Reactor Build Order: [INFO] [INFO] sentinel-parent [INFO] sentinel-core [INFO] sentinel-extension [INFO] sentinel-datasource-extension [INFO] sentinel-datasource-nacos [INFO] sentinel-datasource-zookeeper [INFO] sentinel-datasource-apollo [INFO] sentinel-annotation-aspectj [INFO] sentinel-transport [INFO] sentinel-transport-common [INFO] sentinel-transport-simple-http [INFO] sentinel-transport-netty-http [INFO] sentinel-adapter [INFO] sentinel-web-servlet [INFO] sentinel-dubbo-adapter [INFO] sentinel-grpc-adapter [INFO] sentinel-dashboard [INFO] sentinel-demo [INFO] sentinel-demo-basic [INFO] sentinel-demo-dynamic-file-rule [INFO] sentinel-demo-rocketmq [INFO] sentinel-demo-dubbo [INFO] sentinel-demo-nacos-datasource [INFO] sentinel-demo-zookeeper-datasource [INFO] sentinel-demo-apollo-datasource [INFO] sentinel-demo-annotation-spring-aop [INFO] [INFO] ------------------------------------------------------------------------ [INFO] Building sentinel-parent 0.2.0-SNAPSHOT [INFO] ------------------------------------------------------------------------ [INFO] [INFO] --- jacoco-maven-plugin:0.8.1:prepare-agent (default) @ sentinel-parent --- [INFO] argLine set to -javaagent:C:\\Users\\ritu\\.m2\\repository\\org\\jacoco\\org.jacoco.agent\\0.8.1\\org.jacoco.agent-0.8.1-runtime.jar=destfile=D:\\intellij_workspace_test\\Sentinel\\target\\jacoco.exec [INFO] [INFO] --- jacoco-maven-plugin:0.8.1:report (report) @ sentinel-parent --- [INFO] Skipping JaCoCo execution due to missing execution data file. [INFO] [INFO] ------------------------------------------------------------------------ [INFO] Building sentinel-core 0.2.0-SNAPSHOT [INFO] ------------------------------------------------------------------------ [INFO] [INFO] --- jacoco-maven-plugin:0.8.1:prepare-agent (default) @ sentinel-core --- [INFO] argLine set to -javaagent:C:\\Users\\ritu\\.m2\\repository\\org\\jacoco\\org.jacoco.agent\\0.8.1\\org.jacoco.agent-0.8.1-runtime.jar=destfile=D:\\intellij_workspace_test\\Sentinel\\sentinel-core\\target\\jacoco.exec [INFO] [INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ sentinel-core --- [INFO] Using 'UTF-8' encoding to copy filtered resources. [INFO] skip non existing resourceDirectory D:\intellij_workspace_test\Sentinel\sentinel-core\src\main\resources [INFO] [INFO] --- maven-compiler-plugin:3.7.0:compile (default-compile) @ sentinel-core --- [INFO] Changes detected - recompiling the module! [INFO] Compiling 116 source files to D:\intellij_workspace_test\Sentinel\sentinel-core\target\classes [WARNING] /D:/intellij_workspace_test/Sentinel/sentinel-core/src/main/java/com/alibaba/csp/sentinel/slots/statistic/base/Stripe64.java:[105,38] sun.misc.Unsafe是内部专用 API, 可能会在未来发行版中删除 [WARNING] /D:/intellij_workspace_test/Sentinel/sentinel-core/src/main/java/com/alibaba/csp/sentinel/slots/statistic/base/Stripe64.java:[301,34] sun.misc.Unsafe是内部专用 API, 可能会在未来发行版中删除 [WARNING] /D:/intellij_workspace_test/Sentinel/sentinel-core/src/main/java/com/alibaba/csp/sentinel/slots/statistic/base/Stripe64.java:[325,28] sun.misc.Unsafe是内部专用 API, 可能会在未来发行版中删除 [WARNING] /D:/intellij_workspace_test/Sentinel/sentinel-core/src/main/java/com/alibaba/csp/sentinel/slots/statistic/base/Stripe64.java:[327,28] sun.misc.Unsafe是内部专用 API, 可能会在未来发行版中删除 [WARNING] /D:/intellij_workspace_test/Sentinel/sentinel-core/src/main/java/com/alibaba/csp/sentinel/slots/statistic/base/Stripe64.java:[332,60] sun.misc.Unsafe是内部专用 API, 可能会在未来发行版中删除 [WARNING] /D:/intellij_workspace_test/Sentinel/sentinel-core/src/main/java/com/alibaba/csp/sentinel/slots/statistic/base/Stripe64.java:[333,40] sun.misc.Unsafe是内部专用 API, 可能会在未来发行版中删除 [WARNING] /D:/intellij_workspace_test/Sentinel/sentinel-core/src/main/java/com/alibaba/csp/sentinel/slots/statistic/base/Stripe64.java:[335,33] sun.misc.Unsafe是内部专用 API, 可能会在未来发行版中删除 [WARNING] /D:/intellij_workspace_test/Sentinel/sentinel-core/src/main/java/com/alibaba/csp/sentinel/slots/statistic/base/Stripe64.java:[337,45] sun.misc.Unsafe是内部专用 API, 可能会在未来发行版中删除 [WARNING] /D:/intellij_workspace_test/Sentinel/sentinel-core/src/main/java/com/alibaba/csp/sentinel/eagleeye/EagleEyeCoreUtils.java:[199,34] sun.misc.Unsafe是内部专用 API, 可能会在未来发行版中删除 [WARNING] /D:/intellij_workspace_test/Sentinel/sentinel-core/src/main/java/com/alibaba/csp/sentinel/eagleeye/EagleEyeCoreUtils.java:[202,27] sun.misc.Unsafe是内部专用 API, 可能会在未来发行版中删除 [WARNING] /D:/intellij_workspace_test/Sentinel/sentinel-core/src/main/java/com/alibaba/csp/sentinel/eagleeye/EagleEyeCoreUtils.java:[214,28] sun.misc.Unsafe是内部专用 API, 可能会在未来发行版中删除 [WARNING] /D:/intellij_workspace_test/Sentinel/sentinel-core/src/main/java/com/alibaba/csp/sentinel/eagleeye/EagleEyeCoreUtils.java:[216,28] sun.misc.Unsafe是内部专用 API, 可能会在未来发行版中删除 [WARNING] /D:/intellij_workspace_test/Sentinel/sentinel-core/src/main/java/com/alibaba/csp/sentinel/eagleeye/EagleEyeCoreUtils.java:[221,83] sun.misc.Unsafe是内部专用 API, 可能会在未来发行版中删除 [WARNING] /D:/intellij_workspace_test/Sentinel/sentinel-core/src/main/java/com/alibaba/csp/sentinel/eagleeye/EagleEyeCoreUtils.java:[223,36] sun.misc.Unsafe是内部专用 API, 可能会在未来发行版中删除 [WARNING] /D:/intellij_workspace_test/Sentinel/sentinel-core/src/main/java/com/alibaba/csp/sentinel/eagleeye/EagleEyeCoreUtils.java:[224,39] sun.misc.Unsafe是内部专用 API, 可能会在未来发行版中删除 [WARNING] /D:/intellij_workspace_test/Sentinel/sentinel-core/src/main/java/com/alibaba/csp/sentinel/eagleeye/EagleEyeCoreUtils.java:[224,60] sun.misc.Unsafe是内部专用 API, 可能会在未来发行版中删除 [INFO] /D:/intellij_workspace_test/Sentinel/sentinel-core/src/main/java/com/alibaba/csp/sentinel/slots/block/AbstractRule.java: D:\intellij_workspace_test\Sentinel\sentinel-core\src\main\java\com\alibaba\csp\sentinel\slots\block\AbstractRule.java使用了未经检查或不安全的操作。 [INFO] /D:/intellij_workspace_test/Sentinel/sentinel-core/src/main/java/com/alibaba/csp/sentinel/slots/block/AbstractRule.java: 有关详细信息, 请使用 -Xlint:unchecked 重新编译。 [INFO] [INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ sentinel-core --- [INFO] Using 'UTF-8' encoding to copy filtered resources. [INFO] skip non existing resourceDirectory D:\intellij_workspace_test\Sentinel\sentinel-core\src\test\resources [INFO] [INFO] --- maven-compiler-plugin:3.7.0:testCompile (default-testCompile) @ sentinel-core --- [INFO] Nothing to compile - all classes are up to date [INFO] [INFO] --- maven-surefire-plugin:2.12.4:test (default-test) @ sentinel-core --- [INFO] Surefire report directory: D:\intellij_workspace_test\Sentinel\sentinel-core\target\surefire-reports  -------------------------------------------------------  T E S T S ------------------------------------------------------- Running com.alibaba.csp.sentinel.base.metric.ArrayMetricTest Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.149 sec Running com.alibaba.csp.sentinel.base.metric.WindowLeapArrayTest Tests run: 7, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 2.39 sec Running com.alibaba.csp.sentinel.ContextTest Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.108 sec Running com.alibaba.csp.sentinel.RecordLogTest Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 3.685 sec Running com.alibaba.csp.sentinel.slots.block.degrade.DegradeTest Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 12.346 sec Running com.alibaba.csp.sentinel.slots.block.flow.FlowPartialIntegrationTest Tests run: 6, Failures: 0, Errors: 6, Skipped: 0, Time elapsed: 0.052 sec &lt;&lt;&lt; FAILURE! testStrategy(com.alibaba.csp.sentinel.slots.block.flow.FlowPartialIntegrationTest)  Time elapsed: 0.039 sec  &lt;&lt;&lt; ERROR! java.lang.ExceptionInInitializerError         at com.alibaba.csp.sentinel.config.SentinelConfig.loadProps(SentinelConfig.java:62)         at com.alibaba.csp.sentinel.config.SentinelConfig.&lt;clinit&gt;(SentinelConfig.java:49)         at com.alibaba.csp.sentinel.node.metric.MetricWriter.&lt;clinit&gt;(MetricWriter.java:48)         at com.alibaba.csp.sentinel.node.metric.MetricTimerListener.&lt;clinit&gt;(MetricTimerListener.java:32)         at com.alibaba.csp.sentinel.slots.block.flow.FlowRuleManager.&lt;clinit&gt;(FlowRuleManager.java:65)         at com.alibaba.csp.sentinel.slots.block.flow.FlowPartialIntegrationTest.testStrategy(FlowPartialIntegrationTest.java:191)         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)         at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)         at java.lang.reflect.Method.invoke(Method.java:498)         at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)         at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)         at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)         at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)         at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)         at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)         at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)         at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)         at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)         at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)         at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)         at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)         at org.junit.runners.ParentRunner.run(ParentRunner.java:363)         at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:252)         at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:141)         at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:112)         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)         at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)         at java.lang.reflect.Method.invoke(Method.java:498)         at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:189)         at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:165)         at org.apache.maven.surefire.booter.ProviderFactory.invokeProvider(ProviderFactory.java:85)         at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:115)         at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:75) Caused by: java.util.regex.PatternSyntaxException: Unexpected internal error near index 1 \  ^         at java.util.regex.Pattern.error(Pattern.java:1957)         at java.util.regex.Pattern.compile(Pattern.java:1704)         at java.util.regex.Pattern.&lt;init&gt;(Pattern.java:1351)         at java.util.regex.Pattern.compile(Pattern.java:1028)         at java.lang.String.split(String.java:2380)         at java.lang.String.split(String.java:2422)         at com.alibaba.csp.sentinel.util.AppNameUtil.resolveAppName(AppNameUtil.java:78)         at com.alibaba.csp.sentinel.util.AppNameUtil.&lt;clinit&gt;(AppNameUtil.java:59)         ... 35 more  testStrategy_chain(com.alibaba.csp.sentinel.slots.block.flow.FlowPartialIntegrationTest)  Time elapsed: 0 sec  &lt;&lt;&lt; ERROR! java.lang.NoClassDefFoundError: Could not initialize class com.alibaba.csp.sentinel.slots.block.flow.FlowRuleManager         at com.alibaba.csp.sentinel.slots.block.flow.FlowPartialIntegrationTest.testStrategy_chain(FlowPartialIntegrationTest.java:236)         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)         at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)         at java.lang.reflect.Method.invoke(Method.java:498)         at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)         at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)         at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)         at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)         at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)         at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)         at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)         at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)         at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)         at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)         at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)         at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)         at org.junit.runners.ParentRunner.run(ParentRunner.java:363)         at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:252)         at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:141)         at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:112)         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)         at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)         at java.lang.reflect.Method.invoke(Method.java:498)         at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:189)         at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:165)         at org.apache.maven.surefire.booter.ProviderFactory.invokeProvider(ProviderFactory.java:85)         at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:115)         at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:75)  testQPSGrade(com.alibaba.csp.sentinel.slots.block.flow.FlowPartialIntegrationTest)  Time elapsed: 0.007 sec  &lt;&lt;&lt; ERROR! java.lang.NoClassDefFoundError: Could not initialize class com.alibaba.csp.sentinel.slots.block.flow.FlowRuleManager         at com.alibaba.csp.sentinel.slots.block.flow.FlowPartialIntegrationTest.testQPSGrade(FlowPartialIntegrationTest.java:42)         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)         at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)         at java.lang.reflect.Method.invoke(Method.java:498)         at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)         at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)         at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)         at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)         at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)         at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)         at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)         at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)         at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)         at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)         at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)         at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)         at org.junit.runners.ParentRunner.run(ParentRunner.java:363)         at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:252)         at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:141)         at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:112)         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)         at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)         at java.lang.reflect.Method.invoke(Method.java:498)         at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:189)         at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:165)         at org.apache.maven.surefire.booter.ProviderFactory.invokeProvider(ProviderFactory.java:85)         at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:115)         at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:75)  testFlowRule_other(com.alibaba.csp.sentinel.slots.block.flow.FlowPartialIntegrationTest)  Time elapsed: 0.001 sec  &lt;&lt;&lt; ERROR! java.lang.NoClassDefFoundError: Could not initialize class com.alibaba.csp.sentinel.slots.block.flow.FlowRuleManager         at com.alibaba.csp.sentinel.slots.block.flow.FlowPartialIntegrationTest.testFlowRule_other(FlowPartialIntegrationTest.java:163)         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)         at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)         at java.lang.reflect.Method.invoke(Method.java:498)         at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)         at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)         at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)         at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)         at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)         at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)         at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)         at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)         at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)         at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)         at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)         at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)         at org.junit.runners.ParentRunner.run(ParentRunner.java:363)         at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:252)         at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:141)         at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:112)         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)         at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)         at java.lang.reflect.Method.invoke(Method.java:498)         at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:189)         at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:165)         at org.apache.maven.surefire.booter.ProviderFactory.invokeProvider(ProviderFactory.java:85)         at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:115)         at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:75)  testThreadGrade(com.alibaba.csp.sentinel.slots.block.flow.FlowPartialIntegrationTest)  Time elapsed: 0 sec  &lt;&lt;&lt; ERROR! java.lang.NoClassDefFoundError: Could not initialize class com.alibaba.csp.sentinel.slots.block.flow.FlowRuleManager         at com.alibaba.csp.sentinel.slots.block.flow.FlowPartialIntegrationTest.testThreadGrade(FlowPartialIntegrationTest.java:66)         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)         at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)         at java.lang.reflect.Method.invoke(Method.java:498)         at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)         at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)         at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)         at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)         at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)         at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)         at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)         at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)         at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)         at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)         at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)         at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)         at org.junit.runners.ParentRunner.run(ParentRunner.java:363)         at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:252)         at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:141)         at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:112)         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)         at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)         at java.lang.reflect.Method.invoke(Method.java:498)         at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:189)         at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:165)         at org.apache.maven.surefire.booter.ProviderFactory.invokeProvider(ProviderFactory.java:85)         at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:115)         at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:75)  testOriginFlowRule(com.alibaba.csp.sentinel.slots.block.flow.FlowPartialIntegrationTest)  Time elapsed: 0 sec  &lt;&lt;&lt; ERROR! java.lang.NoClassDefFoundError: Could not initialize class com.alibaba.csp.sentinel.slots.block.flow.FlowRuleManager         at com.alibaba.csp.sentinel.slots.block.flow.FlowPartialIntegrationTest.testOriginFlowRule(FlowPartialIntegrationTest.java:126)         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)         at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)         at java.lang.reflect.Method.invoke(Method.java:498)         at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)         at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)         at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)         at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)         at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)         at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)         at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)         at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)         at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)         at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)         at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)         at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)         at org.junit.runners.ParentRunner.run(ParentRunner.java:363)         at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:252)         at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:141)         at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:112)         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)         at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)         at java.lang.reflect.Method.invoke(Method.java:498)         at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:189)         at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:165)         at org.apache.maven.surefire.booter.ProviderFactory.invokeProvider(ProviderFactory.java:85)         at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:115)         at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:75)  Running com.alibaba.csp.sentinel.slots.block.flow.FlowRuleTest Tests run: 3, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 0.003 sec &lt;&lt;&lt; FAILURE! testOrigin(com.alibaba.csp.sentinel.slots.block.flow.FlowRuleTest)  Time elapsed: 0 sec  &lt;&lt;&lt; ERROR! java.lang.NoClassDefFoundError: Could not initialize class com.alibaba.csp.sentinel.slots.block.flow.FlowRuleManager         at com.alibaba.csp.sentinel.slots.block.flow.FlowRule.selectNodeByRequesterAndStrategy(FlowRule.java:209)         at com.alibaba.csp.sentinel.slots.block.flow.FlowRule.passCheck(FlowRule.java:156)         at com.alibaba.csp.sentinel.slots.block.flow.FlowRuleTest.testOrigin(FlowRuleTest.java:166)         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)         at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)         at java.lang.reflect.Method.invoke(Method.java:498)         at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)         at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)         at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)         at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)         at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)         at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)         at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)         at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)         at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)         at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)         at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)         at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)         at org.junit.runners.ParentRunner.run(ParentRunner.java:363)         at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:252)         at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:141)         at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:112)         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)         at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)         at java.lang.reflect.Method.invoke(Method.java:498)         at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:189)         at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:165)         at org.apache.maven.surefire.booter.ProviderFactory.invokeProvider(ProviderFactory.java:85)         at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:115)         at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:75)  Running com.alibaba.csp.sentinel.slots.block.flow.PaceControllerTest pass:6 block4 done10 Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.005 sec Running com.alibaba.csp.sentinel.slots.block.flow.WarmUpControllerTest Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 100.049 sec Running com.alibaba.csp.sentinel.slots.block.flow.WarmUpFlowTest Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 0.002 sec &lt;&lt;&lt; FAILURE! testWarmupFlowControl(com.alibaba.csp.sentinel.slots.block.flow.WarmUpFlowTest)  Time elapsed: 0 sec  &lt;&lt;&lt; ERROR! java.lang.NoClassDefFoundError: Could not initialize class com.alibaba.csp.sentinel.slots.block.flow.FlowRuleManager         at com.alibaba.csp.sentinel.slots.block.flow.WarmUpFlowTest.testWarmupFlowControl(WarmUpFlowTest.java:40)         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)         at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)         at java.lang.reflect.Method.invoke(Method.java:498)         at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)         at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)         at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)         at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)         at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)         at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)         at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)         at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)         at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)         at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)         at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)         at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)         at org.junit.runners.ParentRunner.run(ParentRunner.java:363)         at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:252)         at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:141)         at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:112)         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)         at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)         at java.lang.reflect.Method.invoke(Method.java:498)         at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:189)         at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:165)         at org.apache.maven.surefire.booter.ProviderFactory.invokeProvider(ProviderFactory.java:85)         at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:115)         at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:75)  Running com.alibaba.csp.sentinel.slots.block.system.SystemRuleTest Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.064 sec Running com.alibaba.csp.sentinel.slots.nodeselector.NodeSelectorTest Multiple entries: entry Single entry: entry Single entry: entry_multiple_another Single entry: entry_multiple_one Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.048 sec Running com.alibaba.csp.sentinel.SphOTest Tests run: 10, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.078 sec Running com.alibaba.csp.sentinel.SphUTest Tests run: 11, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.062 sec  Results :  Tests in error:   testStrategy(com.alibaba.csp.sentinel.slots.block.flow.FlowPartialIntegrationTest)   testStrategy_chain(com.alibaba.csp.sentinel.slots.block.flow.FlowPartialIntegrationTest): Could not initialize class com.alibaba.csp.sentinel.slots.block.flow.FlowRuleManager   testQPSGrade(com.alibaba.csp.sentinel.slots.block.flow.FlowPartialIntegrationTest): Could not initialize class com.alibaba.csp.sentinel.slots.block.flow.FlowRuleManager   testFlowRule_other(com.alibaba.csp.sentinel.slots.block.flow.FlowPartialIntegrationTest): Could not initialize class com.alibaba.csp.sentinel.slots.block.flow.FlowRuleManager   testThreadGrade(com.alibaba.csp.sentinel.slots.block.flow.FlowPartialIntegrationTest): Could not initialize class com.alibaba.csp.sentinel.slots.block.flow.FlowRuleManager   testOriginFlowRule(com.alibaba.csp.sentinel.slots.block.flow.FlowPartialIntegrationTest): Could not initialize class com.alibaba.csp.sentinel.slots.block.flow.FlowRuleManager   testOrigin(com.alibaba.csp.sentinel.slots.block.flow.FlowRuleTest): Could not initialize class com.alibaba.csp.sentinel.slots.block.flow.FlowRuleManager   testWarmupFlowControl(com.alibaba.csp.sentinel.slots.block.flow.WarmUpFlowTest): Could not initialize class com.alibaba.csp.sentinel.slots.block.flow.FlowRuleManager  Tests run: 51, Failures: 0, Errors: 8, Skipped: 0  [INFO] ------------------------------------------------------------------------ [INFO] Reactor Summary: [INFO] [INFO] sentinel-parent .................................... SUCCESS [  0.742 s] [INFO] sentinel-core ...................................... FAILURE [02:08 min] [INFO] sentinel-extension ................................. SKIPPED [INFO] sentinel-datasource-extension ...................... SKIPPED [INFO] sentinel-datasource-nacos .......................... SKIPPED [INFO] sentinel-datasource-zookeeper ...................... SKIPPED [INFO] sentinel-datasource-apollo ......................... SKIPPED [INFO] sentinel-annotation-aspectj ........................ SKIPPED [INFO] sentinel-transport ................................. SKIPPED [INFO] sentinel-transport-common .......................... SKIPPED [INFO] sentinel-transport-simple-http ..................... SKIPPED [INFO] sentinel-transport-netty-http ...................... SKIPPED [INFO] sentinel-adapter ................................... SKIPPED [INFO] sentinel-web-servlet ............................... SKIPPED [INFO] sentinel-dubbo-adapter ............................. SKIPPED [INFO] sentinel-grpc-adapter .............................. SKIPPED [INFO] sentinel-dashboard ................................. SKIPPED [INFO] sentinel-demo ...................................... SKIPPED [INFO] sentinel-demo-basic ................................ SKIPPED [INFO] sentinel-demo-dynamic-file-rule .................... SKIPPED [INFO] sentinel-demo-rocketmq ............................. SKIPPED [INFO] sentinel-demo-dubbo ................................ SKIPPED [INFO] sentinel-demo-nacos-datasource ..................... SKIPPED [INFO] sentinel-demo-zookeeper-datasource ................. SKIPPED [INFO] sentinel-demo-apollo-datasource .................... SKIPPED [INFO] sentinel-demo-annotation-spring-aop ................ SKIPPED [INFO] ------------------------------------------------------------------------ [INFO] BUILD FAILURE [INFO] ------------------------------------------------------------------------ [INFO] Total time: 02:09 min [INFO] Finished at: 2018-08-09T14:02:22+08:00 [INFO] Final Memory: 24M/286M [INFO] ------------------------------------------------------------------------ [ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.12.4:test (default-test) on project sentinel-core: There are test failures. [ERROR] [ERROR] Please refer to D:\intellij_workspace_test\Sentinel\sentinel-core\target\surefire-reports for the individual test results. [ERROR] -&gt; [Help 1] [ERROR] [ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch. [ERROR] Re-run Maven using the -X switch to enable full debug logging. [ERROR] [ERROR] For more information about the errors and possible solutions, please read the following articles: [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException [ERROR] [ERROR] After correcting the problems, you can resume the build with the command [ERROR]   mvn &lt;goals&gt; -rf :sentinel-core`   ### What I expect is maven build successfully   ### How to reproduce it (as minimally and precisely as possible)  1. import project as a maven project 2. execute "maven package" in directory "Sentinel"  ### Tell us your environment maven version: 3.3.9 maven repository config:  `&lt;repository&gt;  &lt;id&gt;central repository&lt;/id&gt;           &lt;name&gt;central&lt;/name&gt;           &lt;url&gt;http://central.maven.org/maven2/&lt;/url&gt;           &lt;layout&gt;default&lt;/layout&gt;           &lt;!--&lt;snapshotPolicy&gt;always&lt;/snapshotPolicy&gt;--&gt;         &lt;/repository&gt;`  jdk version: 1.8 IDE: intellij Sentinel version: 0.2.0-SNAPSHOT   ### Anything else we need to know? I found the parent pom.xml missing some dependencies with group "org.apache.maven.plugins" which version is 3.0.1. However, I found them in central maven repository. Their artifactId are as follows:maven-javadoc-plugin,maven-gpg-plugin.    </body>
		<created>2018-08-09 06:25:42</created>
		<closed>2018-08-09 07:18:24</closed>
	</bug>
	<bug>
		<id>51</id>
		<title>[BUG]Sentinel控制台新增系统规则提示失败</title>
		<body>## Issue Description  Type: bug report  ### Describe what happened (or what feature you want) Sentinel控制台新增系统规则提示失败 ![default](https://user-images.githubusercontent.com/29148151/43844423-44e3481c-9b5c-11e8-900a-17467ce8adf4.png)  ### Describe what you expected to happen 期望在没有系统规则时，可以新增系统规则成功。  ### Tell us your environment 任何环境   </body>
		<created>2018-08-08 14:44:02</created>
		<closed>2018-08-09 02:10:28</closed>
	</bug>
	<bug>
		<id>38</id>
		<title>配置dashboard参数，接口无法调通问题</title>
		<body>&lt;!-- Here is for bug reports and feature requests ONLY!   If you're looking for help, please check our mail list and the Gitter room. --&gt;  ## Issue Description  Type: *bug report*   ### Describe what happened (or what feature you want) 我配置了dashboard的参数，希望能够看到请求的可视化。此时调用其他服务的接口失败。 失败直接原因是：NoClassDefFoundError: Could not initialize class com.alibaba.csp.sentinel.Constants 出错行：master分支 com.alibaba.csp.sentinel.context.ContextUtil 的 113行 Constants.ROOT.addChild(node);  #33 33 ## Describe what you expected to happen 希望在配置了 dashboard 参数后能够调通接口（配置前，能够调通接口）  ### How to reproduce it (as minimally and precisely as possible) 1、引入sentinel-dubbo-adapter，sentinel-transport-simple-http，dubbo 2、配置dashboard的参数   ##便可复现  #33 ## Tell us your environment dubbo.version 2.6.0 sentinel.version  0.1.1-SNAPSHOT or 0.1.0 csp.sentinel.dashboard.server=http://localhost:8080 csp.sentinel.api.port=8878 csp.sentinel.heartbeat.interval.ms=20 csp.sentinel.metric.file.single.size=52428800 csp.sentinel.metric.file.total.count=6  ### Anything else we need to know? 本人新手，希望验证这个issue的时候，大神先自己直接配置一遍走一遍，也许是我本身配置的问题。    </body>
		<created>2018-08-05 05:57:35</created>
		<closed>2018-08-05 08:57:34</closed>
	</bug>
	<bug>
		<id>22</id>
		<title>在监控过程中调整流控规则，实时监控监控图中b_qps Y坐标显示错乱</title>
		<body>&lt;!-- Here is for bug reports and feature requests ONLY!   If you're looking for help, please check our mail list and the Gitter room. --&gt;  ## Issue Description  Type: bug report  ### Describe what happened (or what feature you want)  在监控过程中调整流控规则，实时监控监控图中b_qps Y坐标显示错乱  ### Describe what you expected to happen  1、启动dubbo适配器，初始单机阈值为10 2、启动dubbo 消费者发送数据 3、在发送过程中将单机阈值调为80，b_qps显示错乱，p_qps正常 </body>
		<created>2018-08-02 06:40:09</created>
		<closed>2018-10-16 01:58:26</closed>
	</bug>
	<bug>
		<id>20</id>
		<title>客户端连接控制台端口问题</title>
		<body>&lt;!-- Here is for bug reports and feature requests ONLY!   If you're looking for help, please check our mail list and the Gitter room. --&gt;  ## Issue Description  Type: *bug report* or *feature request*  ### Describe what happened (or what feature you want) 同一台机器 （springboot+dubbo） consumer ：-Dcsp.sentinel.dashboard.server=localhost:8080 -Dproject.name=bos-web-provider -Dcsp.sentinel.api.port=8719 provider ： -Dcsp.sentinel.dashboard.server=localhost:8080 -Dproject.name=bos-app-provider  -Dcsp.sentinel.api.port=8720 引入包     &lt;dependency&gt;       &lt;groupId&gt;com.alibaba.csp&lt;/groupId&gt;       &lt;artifactId&gt;sentinel-dubbo-adapter&lt;/artifactId&gt;       &lt;version&gt;${sentinel.adapter.version}&lt;/version&gt;     &lt;/dependency&gt;     &lt;dependency&gt;       &lt;groupId&gt;com.alibaba.csp&lt;/groupId&gt;       &lt;artifactId&gt;sentinel-transport-simple-http&lt;/artifactId&gt;       &lt;version&gt;${sentinel.http.version}&lt;/version&gt;     &lt;/dependency&gt; 通过控制台显示，只显示了1个应用的信息，机器端口号为8719 如果不设置-Dcsp.sentinel.api.port=8720，能显示两个，但是配置限流规则后，flowRules只有在provider端能看到，consumer端flowRules为空 ### Describe what you expected to happen 通过端口，针对不同的应用配置对应的生效的限流规则  ### How to reproduce it (as minimally and precisely as possible)  1.  2.  3.   ### Tell us your environment   ### Anything else we need to know?    </body>
		<created>2018-08-01 08:39:12</created>
		<closed>2018-08-01 14:08:26</closed>
	</bug>
	<bug>
		<id>13</id>
		<title>Error occurs in sentinel-dashboard frontend</title>
		<body> ## Issue Description 前端页面出现报错信息  ### Describe what happened (or what feature you want) 按照正常启动Application后，访问localhost:8080.直接进入到页面中，点击搜索后，出现一个无标题选项，点击展开后报错 ### Describe what you expected to happen 如果无应用，则直接不显示就好了。   ### How to reproduce it (as minimally and precisely as possible)  1. 不运行任何关联sentinel应用 2. 直接启动dashboard 3. 进入到页面 4. 点击搜索 5. 点击左侧菜单空白框，出现菜单 6. 点击子菜单，无反应，控制台报错  ### Tell us your environment windows7   ### Anything else we need to know? ![图片](https://github.com/lonecloud/issuesImages/raw/master/Sentinel/dashboard-error.png)   </body>
		<created>2018-07-31 01:29:19</created>
		<closed>2018-07-31 02:24:14</closed>
	</bug>
</bugs>
